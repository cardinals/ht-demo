var NodeAxis={X:1,Y:2,Z:3};class Animator{constructor(){if(new.target===Animator)throw new Error("Animator不能被直接实例化!");console.info("动画基类!")}}class TransformAnimator extends Animator{constructor(){super(),console.info("创建了一个TransformAnimator!")}translate(o,t,e,n,a,r,i=!0){if(e<0)return void console.info("duration 需要大于零！");if(!o)return;let s=a.get(o.getTag());if(!s)return;let l,c=0,f=0;switch(n){case NodeAxis.X:c=s[0],f=s[0]+t,l=function(t){o.p3(t,s[1],s[2])};break;case NodeAxis.Y:c=s[1],f=s[1]+t,l=function(t){o.p3(s[0],t,s[2])};break;case NodeAxis.Z:c=s[2],f=s[2]+t,l=function(t){o.p3(s[0],s[1],t)}}o.setAnimation({translate:{property:"p3",accessType:"null",from:c,to:f,duration:e,easing:"Linear",onUpdate:function(t){o&&l(t)},onComplete:function(){i&&console.info(o.getTag()+`沿着${n.toString()}轴运动到达目标位置！`),r&&o&&r()}},start:["translate"]})}rotation(o,t,e,n,a,r=!0){if(e<0)return void console.info("duration 需要大于零");let i=a.get(o.getTag());if(!i)return;let s,l=0,c=0,f=Math.PI/180*t;switch(n){case NodeAxis.X:l=i[0],c=i[0]+f,s=function(t){o.setRotationX(t)};break;case NodeAxis.Y:l=i[1],c=i[1]+f,s=function(t){o.setRotationY(t)};break;case NodeAxis.Z:l=i[2],c=i[2]+f,s=function(t){o.setRotationZ(t)}}o.setAnimation({rotation:{property:"r3",accessType:"null",from:l,to:c,duration:e,easing:"Linear",onUpdate:function(o){s(o)},onComplete:function(){r&&console.info(o.getTag()+`沿着${n.toString()}轴旋转到达目标位置！`)}},start:["rotation"]})}translateFront(o,t,e,n){e<0?console.info("targetValue 需要大于零！"):translateZ(o,t,e,n)}translateBack(o,t,e,n){e>0?console.info("targetValue 需要小于零！"):translateZ(o,t,e,n)}translateTop(o,t,e,n){e<0?console.info("targetValue 需要大于零！"):translateY(o,t,e,n)}translateBottom(o,t,e,n){e>0?console.info("targetValue 需要小于零！"):translateY(o,t,e,n)}translateRight(o,t,e,n){e<0||n<0?console.info("targetValue 需要大于零！"):translateX(o,t,e,n)}translateLeft(o,t,e,n){e>0?console.info("targetValue 需要小于零！"):translateX(o,t,e,n)}translateY(o,t,e,n){if(n<0)return void console.info("duration 需要大于零！");let a=t.get(o.getTag());a&&o.setAnimation({translateY:{property:"p3",accessType:"null",from:a[1],to:a[1]+e,duration:n,easing:"Linear",onUpdate:function(o){this.p3(a[0],o,a[2])},onComplete:function(){console.info(o.getTag()+"沿着Y轴运动到目标位置！")}},start:["translateY"]})}translateX(o,t,e,n){if(n<0)return void console.info("duration 需要大于零！");let a=t.get(o.getTag());a&&o.setAnimation({translateX:{property:"p3",accessType:"null",from:a[0],to:a[0]+e,duration:n,easing:"Linear",onUpdate:function(o){this.p3(o,a[1],a[2])},onComplete:function(){console.info(o.getTag()+"沿着x轴运动到目标位置！")}},start:["translateX"]})}translateZ(o,t,e,n){if(n<0)return void console.info("duration需要大于零！");let a=t.get(o.getTag());a&&o.setAnimation({translateZ:{property:"p3",accessType:"null",from:a[2],to:a[2]+e,duration:n,easing:"Linear",onUpdate:function(o){this.p3(a[0],a[1],o)},onComplete:function(){console.info(o.getTag()+"沿着z轴运动到目标位置！")}},start:["translateZ"]})}}class ScaleAnimator extends Animator{constructor(){super(),console.info("创建了一个ScaleAnimator!")}static ani(o,t,e,n,a,r=!0){if(e<0)return void console.info("duration 需要大于零");let i,s=a.get(o.getTag()),l=0,c=0;switch(n){case NodeAxis.X:l=s[0],c=s[0]+t,i=function(t){o.setScaleX(t)};break;case NodeAxis.Y:l=s[1],c=s[1]+t,i=function(t){o.setScaleY(t)};break;case NodeAxis.Z:l=s[2],c=s[2]+t,i=function(t){o.setScaleZ(t)}}}}class CameraAnimator extends Animator{constructor(){super(),console.info("创建了一个CameraAnimator!")}cameraMoveTo(o,t,e,n,a=!0){a&&(console.log("当前相机位置："),console.log(o.getEye()),console.log("目标点位置："),console.log(t)),o.moveCamera(o.getEye(),t,{duration:e,finishFunc:function(){a&&console.log("相机飞到目的地"),n()}})}cameraMoveTo(o,t,e,n,a=!0){a&&(console.log("当前相机位置："),console.log(o.getEye()),console.log("目标点位置："),console.log(n.p3())),o.moveCamera(o.getEye(),n.p3(),{duration:t,finishFunc:function(){a&&console.log("相机飞到目的地"),e(n)}})}cameraFlyTo(o,t,e,n=[0,0,1],a=.8,r=!0){r&&(console.log("当前相机位置："),console.log(o.getEye()),console.log("目标点位置："),console.log(t.p3())),o.flyTo(t,{animation:!0,distance:e,direction:n,ratio:a})}}