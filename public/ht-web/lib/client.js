/*
 * client.js - v0.3.4
 * Compiled Thu Apr 25 2019 10:28:06 GMT+0800 (GMT+08:00)
 * Copyright (c) 2019 www.hightopo.com
 */

var hteditor=function(){"use strict";function P(P,v,r){r.style.cursor="ew-resize";var m=r.innerHTML.charAt(0),H=v.querySelector("input.color_"+m),I=function(v){v.preventDefault();var r=("A"===m?parseFloat(H.value):parseInt(H.value))||0,I=ht.Default.getClientPoint(v).x,Y=function(v){v.preventDefault();var Y=ht.Default.getClientPoint(v).x-I,U=void 0;"A"===m?(U=r+.01*Y,U>1&&(U=1),U<0&&(U=0),H.value=U.toFixed(2)):(U=r+1*Y,U>255&&(U=255),U<0&&(U=0),H.value=U),P.updateInputChange()};window.addEventListener("mousemove",Y,!1),window.addEventListener("touchmove",Y,!1);var U=function(P){P.preventDefault(),window.removeEventListener("mousemove",Y,!1),window.removeEventListener("touchmove",Y,!1),window.removeEventListener("mouseup",U,!1),window.removeEventListener("touchend",U,!1)};window.addEventListener("mouseup",U,!1),window.addEventListener("touchend",U,!1)};r.addEventListener("mousedown",I,!1),r.addEventListener("touchstart",I,!1)}function v(P){var v=new RegExp("(^|&)"+P+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(v);return null!=r?decodeURIComponent(r[2]):null}function r(P){return ht.Default.clone(P)}function m(P){return parseFloat(P.toFixed(ht.Default.numberDigits))}function H(P,v){if(null!=P)return v||!dv.config.traceMissingI18n||dv.customStrings[P]||dv.strings[P]||console.log("i18n missing:["+P+"]"),v?dv.customStrings[P]||dv.strings[P]:dv.customStrings[P]||dv.strings[P]||P}function I(P,v){var r=P.indexOf(v);r>=0&&P.splice(r,1)}function Y(P){return ht.Default.isEmptyObject(P)}function U(P){return P?GP(P)?P:P.__ht__||P.toString():""}function o(P){var v=U(P),r=v.indexOf("{")+1,m=v.lastIndexOf("}");for(v=v.substring(r,m);v.startsWith("\n");)v=v.substr(1);for(;v.endsWith("\n");)v=v.substring(0,v.length-1);return v}function x(P){var v=P.indexOf("function");if(P&&!(v<0)){var r=void 0,m=P.indexOf("{")+1,H=P.lastIndexOf("}"),I=P.indexOf("(")+1,Y=P.indexOf(")");return m&&H&&I&&Y&&(r=new Function(P.substring(I,Y),P.substring(m,H)),r.__ht__=P.substr(v)),r}}function N(P,v){if("s"===P)return function(P){return P.s(v)};if("a"===P)return function(P){return P.a(v)};if("p"===P){var r=function(){var P=ht.Default.getter(v);return{v:function(v){if(v[P])return v[P]()}}}();if("object"==typeof r)return r.v}}function E(P,v){if("s"===P)return function(P,r){return P.s(v,r)};if("a"===P)return function(P,r){return P.a(v,r)};if("p"===P){var r=function(){var P=ht.Default.setter(v);return{v:function(v,r){if(v[P])return v[P](r)}}}();if("object"==typeof r)return r.v}}function s(P){return 37===P.keyCode}function W(P){return 38===P.keyCode}function f(P){return 39===P.keyCode}function G(P){return 40===P.keyCode}function t(P){return 13===P.keyCode}function L(P){return 27===P.keyCode}function O(P){return ht.Default.isDelete(P)}function Q(P){return ht.Default.isLeftButton(P)}function q(P){return ht.Default.isDoubleClick(P)}function Z(P,v){ht.Default.startDragging(P,v)}function S(P){return ht.Default.getClientPoint(P)}function C(P){return ht.Default.getTargetElement(P)}function u(P){return ht.Default.getPagePoint(P)}function g(){return ht.Default.getWindowInfo()}function n(P,v){return ht.Default.getDistance(P,v)}function J(){return ht.Default.unionPoint.apply(this,arguments)}function K(P){return ht.Default.getImageMap()[P]?(delete ht.Default.getImageMap()[P],!0):!!ht.Default.getCompTypeMap()[P]&&(delete ht.Default.getCompTypeMap()[P],!0)}function j(P,v,r){return ht.Default.getPosition(P,v,r)}function b(P,v){return ht.Default.stringify(P,v)}function k(P){return ht.Default.parse(P)}function M(P){if(!P)return"";var v=P.lastIndexOf(".");return v===-1?P:P.substr(0,v)}function a(P){return P=P.replace(/^.*[\\\/]/,""),M(P)}function i(P,v,r,m,H){ht.Default.layout(P,v,r,m,H)}function X(P,v,r,m){ht.Default.setCanvas(P,v,r,m)}function _(P){ht.Default.removeHTML(P)}function w(P,v,r){ht.Default.xhrLoad(P,v,r)}function c(P){return ht.Default.isShiftDown(P)}function h(P){return ht.Default.isCtrlDown(P)}function e(P,v){return ht.Default.createView(P,v)}function D(P){return ht.Default.createCanvas(P)}function R(P,v){return ht.Default.createDiv(v,P)}function z(P,v){return ht.Default.unionRect(P,v)}function B(P,v,r,m,H,I,Y,U,o,x){return ht.Default.drawText(P,v,r,m,H,I,Y,U,o,x)}function l(P,v,r,m,H,I,Y,U,o,x){ht.Default.drawStretchImage(P,v,r,m,H,I,Y,U,o,x)}function d(P,v,r,m,H,I,Y){ht.Default.drawBorder(P,v,r,m,H,I,Y)}function V(P,v,r,m,H,I){var Y=P.getContext("2d");return Y.save(),v=v||0,r=r||0,m=m||1,I=I||ht.Default.devicePixelRatio,Y.translate(v*I,r*I),m*=I,1!==m&&Y.scale(m,m),H&&(Y.beginPath(),Y.rect(H.x,H.y,H.width,H.height),Y.clip(),Y.clearRect(H.x,H.y,H.width,H.height)),Y}function T(P,v){var r=P.prototype,m=ht.Default.getMSMap();for(var H in v)m[H]&&m.hasOwnProperty(H)?m[H](r,v):r[H]=v[H]}function p(P,v){v[P._id]=P,P.eachChild(function(P){v[P._id]=P,p(P,v)})}function F(P){ht.Default.preventDefault(P)}function y(P){return/^displays/.test(P)}function A(P){return/^symbols/.test(P)}function PP(P){return/^components/.test(P)}function vP(P){return/^scenes/.test(P)}function rP(P){return/^models/.test(P)}function mP(P){return/^assets/.test(P)}function HP(P){return/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(P)}function IP(P){return/\.json$/i.test(P)}function YP(P){return/\.mp3$/i.test(P)}function UP(P){return/\.mp4$/i.test(P)}function oP(P){return/\.svg$/i.test(P)}function xP(P){return/\.dxf$/i.test(P)}function NP(P){return/\.obj$/i.test(P)}function EP(P){return/\.mtl$/i.test(P)}function sP(P){return/\.ttf$/i.test(P)}function WP(P){return/\.otf$/i.test(P)}function fP(P){return P.substring(0,P.length-5)+".png"}function GP(P){return"string"==typeof P||P instanceof String}function tP(P){return P&&"object"==typeof P}function LP(P){return"function"==typeof P}function OP(P){return P instanceof Array}function QP(P,v){var r=P.getPosition().x,m=P.getPosition().y,H=P.getWidth(),I=P.getHeight(),Y=[r-H*P.getAnchor().x,m-I*P.getAnchor().y,H,I],U=P.a("rect");JP(v,"rect",U,Y,void 0)}function qP(P,v){var r=P.getRotation(),m=P.a("rotation");JP(v,"rotation",m,r,0)}function ZP(P,v){var r=P.getAnchor().x,m=P.a("anchorX");JP(v,"anchorX",m,r,.5),r=P.getAnchor().y,m=P.a("anchorY"),JP(v,"anchorY",m,r,.5)}function SP(P,v){var r=P.getScale().x,m=P.a("scaleX");JP(v,"scaleX",m,r,1),r=P.getScale().y,m=P.a("scaleY"),JP(v,"scaleY",m,r,1)}function CP(P,v){var r=P.isClosePath(),m=P.a("closePath");JP(v,"closePath",m,r,!1)}function uP(P,v,m,H,I){4===arguments.length&&(I=ht.Style[m]);var Y=r(P.s(m)),U=P.a(m);JP(v,H,U,Y,I)}function gP(P,v){var r=P.getDisplayName(),m=P.a("displayName");JP(v,"displayName",m,r,void 0)}function nP(P,v){if(OP(P)&&OP(v)){if(P.length===v.length){for(var r=0;r<P.length;r++)if(!nP(P[r],v[r]))return!1;return!0}return!1}if(tP(P)&&tP(v)){var m=Object.keys(P);if(m.length===Object.keys(v).length){for(var H=0;H<m.length;H++){var I=m[H];if(!nP(P[I],v[I]))return!1}return!0}return!1}return P===v}function JP(P,v,r,m,H){r?P[v]={func:r,value:m}:nP(m,H)||void 0===m||(P[v]=m)}function KP(P,v,r,m){bP(P,"2d.visible",v.visible),bP(P,"2d.selectable",v.selectable),bP(P,"2d.movable",v.movable),bP(P,"2d.editable",v.editable),bP(P,"pixelPerfect",v.pixelPerfect,!1),bP(P,"opacity",v.opacity,1),bP(P,"clip.percentage",v.clipPercentage,1),bP(P,"clip.direction",v.clipDirection,"top"),bP(P,"layout.h",v.layoutH),bP(P,"layout.v",v.layoutV),bP(P,"prefix",v.prefix),bP(P,"state",v.state),P instanceof ht.Text||(bP(P,"shadow",v.shadow,!1),bP(P,"select.color",v.shadowColor,ht.Color.highlight),bP(P,"shadow.blur",v.shadowBlur,6),bP(P,"shadow.offset.x",v.shadowOffsetX,3),bP(P,"shadow.offset.y",v.shadowOffsetY,3)),kP(P,v),aP(P,v),iP(P,v),MP(P,v),P instanceof ht.Shape&&!v.rect||XP(P,v,r,m);var H=Mv.customProperties.comp;H&&H.length&&H.forEach(function(r){bP(P,r.property,v[r.property],r.defaultValue)}),Vv.forEach(function(r){P.a(r,v[r])}),P.a("renderHTML",v.renderHTML)}function jP(P,v){uP(P,v,"2d.visible","visible"),uP(P,v,"2d.selectable","selectable"),uP(P,v,"2d.movable","movable"),uP(P,v,"2d.editable","editable"),uP(P,v,"pixelPerfect","pixelPerfect",!1),uP(P,v,"opacity","opacity",1),uP(P,v,"clip.percentage","clipPercentage",1),uP(P,v,"clip.direction","clipDirection","top"),uP(P,v,"layout.h","layoutH"),uP(P,v,"layout.v","layoutV"),uP(P,v,"prefix","prefix"),uP(P,v,"state","state"),P instanceof ht.Text||(uP(P,v,"shadow","shadow",!1),uP(P,v,"select.color","shadowColor",ht.Color.highlight),uP(P,v,"shadow.blur","shadowBlur",6),uP(P,v,"shadow.offset.x","shadowOffsetX",3),uP(P,v,"shadow.offset.y","shadowOffsetY",3)),gP(P,v),ZP(P,v),SP(P,v),qP(P,v),P instanceof ht.Shape&&!P.a("rect")||QP(P,v);var r=Mv.customProperties.comp,m=!!Mv.saveCompCustomPropertyDefaultValue;r&&r.length&&r.forEach(function(r){m?uP(P,v,r.property,r.property):uP(P,v,r.property,r.property,r.defaultValue)}),Vv.forEach(function(r){P.a(r)&&(v[r]=P.a(r))}),P.a("renderHTML")&&(v.renderHTML=P.a("renderHTML"))}function bP(P,v,m,H){3===arguments.length&&(H=ht.Style[v]);var I=_P(m);void 0===I&&(I=H),P.s(v,r(I)),P.a(v,wP(m))}function kP(P,v){P.setDisplayName(_P(v.displayName),void 0),P.a("displayName",wP(v.displayName))}function MP(P,v){P.setRotation(_P(v.rotation,0)),P.a("rotation",wP(v.rotation))}function aP(P,v){var r=_P(v.anchorX,.5),m=_P(v.anchorY,.5);.5===r&&.5===m||P.setAnchor(r,m),P.a("anchorX",wP(v.anchorX)),P.a("anchorY",wP(v.anchorY))}function iP(P,v){var r=_P(v.scaleX,1),m=_P(v.scaleY,1);P.setScale(r,m),P.a("scaleX",wP(v.scaleX)),P.a("scaleY",wP(v.scaleY))}function $P(P,v){P.setClosePath(_P(v.closePath,!1)),P.a("closePath",wP(v.closePath))}function XP(P,v,r,m){var H=_P(v.rect),I=_P(v.relative);H||(H=[0,0,r,m],I=!1);var Y=H.length;if(4===Y)H={x:H[0],y:H[1],width:H[2],height:H[3]},I&&(H.x*=r,H.y*=m,H.width*=r,H.height*=m);else if(3===Y){var U=H[0];H={width:H[1],height:H[2]},I&&(H.width*=r,H.height*=m),"object"==typeof U?U.length&&(U={x:U[0],y:U[1]}):U=j(U,{x:0,y:0,width:r,height:m},H),H.x=U.x-H.width*P.getAnchor().x,H.y=U.y-H.height*P.getAnchor().y}var o=_P(v.offsetX);o&&(H.x+=o),o=_P(v.offsetY),o&&(H.y+=o),H.width<0||H.height<0?P.p(H.x,H.y):P.setRect(H),P.a("rect",wP(v.rect))}function _P(P,v){var r=void 0;return r=tP(P)&&P.func?P.value:P,void 0===r&&(r=v),r}function wP(P){if(tP(P)&&P.func)return P.func}function cP(P){if(OP(P)){for(var v=new ht.List,r=P.length,m=0;m<r;m+=2)v.add({x:P[m],y:P[m+1]});P=v}return P}function hP(P){if(P instanceof ht.List&&(P=P.toArray()),OP(P)){for(var v=[],r=0;r<P.length;r++){var m=P[r];v.push(m.x,m.y)}P=v}return P}function eP(P){var v=16;return{width:v,height:v,comps:[{type:function(r,m,H,I,Y){var U=ht.Default.getImage(P.graphView.getImage(I));if(U&&U.snapshotURL)U=ht.Default.getImage(U.snapshotURL),U&&l(r,U,"uniform",m.x,m.y,m.width,m.height,I,Y);else{var o=U&&U.boundExtend?I.getRect():P.graphView.getDataUIBounds(I);if(o&&o.width&&o.height){r.save();var x=Math.min(1,v/Math.max(o.width,o.height));r.translate(-o.x*x+(v-o.width*x)/2,-o.y*x+(v-o.height*x)/2),r.scale(x,x),P.graphView.drawData(r,I),r.restore()}}}}]}}function DP(P,v){var r=16,m=P.graphView.getEdgeInfo(v);if(!m)return sr;var H=m.edgeTypeInfo,I=void 0,Y=void 0;if(!m.type||m.points){m.sourcePoint.x,m.sourcePoint.y,m.targetPoint.x,m.targetPoint.y;m.type?(I=new ht.List(m.sourcePoint),I.addAll(m.points),I.add(m.targetPoint),Y=m.segments):m.looped?(I=fr,Y=Gr):I=m.center?[m.c1,m.sourcePoint,m.targetPoint,m.c2]:[m.sourcePoint,m.targetPoint]}else H&&(I=H.points,Y=H.segments);var U=J(I);if(!U||!U.width&&!U.height)return sr;var o=function(){var P=Math.max(1,Math.max(U.width,U.height)/r),v=[],H=(r-U.width/P)/2,o=(r-U.height/P)/2;I instanceof ht.List&&(I=I.toArray()),I.forEach(function(r){v.push((r.x-U.x)/P+H,(r.y-U.y)/P+o)});var x=Y?Y.toArray():null;return{v:{width:r,height:r,comps:[{type:"shape",points:v,segments:x,borderWidth:1,borderColor:m.color,borderCap:m.cap,borderJoin:m.join}]}}}();return"object"==typeof o?o.v:void 0}function RP(P){var v=16,r=J(P.getPoints());if(r&&(r.width||r.height)){var m=function(){var m=Math.max(1,Math.max(r.width,r.height)/v),H=[],I=(v-r.width/m)/2,Y=(v-r.height/m)/2;P.getPoints().each(function(P){H.push((P.x-r.x)/m+I,(P.y-r.y)/m+Y)});var U=P.getSegments()?P.getSegments().toArray():null;return{v:{width:v,height:v,comps:[{type:"shape",points:H,segments:U,rotation:P.getRotation(),background:P.s("shape.background"),repeatImage:P.s("shape.repeat.image"),borderWidth:P.s("shape.border.width")?1:0,borderColor:P.s("shape.border.color"),borderCap:P.s("shape.border.cap"),borderJoin:P.s("shape.border.join"),gradient:P.s("shape.gradient"),gradientColor:P.s("shape.gradient.color"),closePath:P.isClosePath()}]}}}();if("object"==typeof m)return m.v}return sr}function zP(P){return ht.Default.isInput(P)}function BP(P,v){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},m=r.nullable,I=void 0===m||m,Y=r.trim,U=void 0!==Y&&Y,o=r.cancellable,x=void 0===o||o,N=r.width,E=void 0===N?300:N,s=r.height,W=void 0===s?120:s,f=r.maxLength,G=void 0===f?-1:f,t=r.checkFunc,L=void 0===t?void 0:t,O=arguments[3],Q=new Bv;Q.addRow([{id:"input",textField:{text:v}}],[.1]);var q=new zv,Z=[],S=null,C=null;S=function(){var P=Q.v("input");return U&&P&&P.trim(),I!==!1||P?G>0&&P&&P.length>G?void lP(null,H("editor.inputmax"),function(){}):L&&!(P=L(P))?void lP(null,H("editor.invalidinput"),function(){}):(O(P,"ok"),void q.hide()):void lP(null,H("editor.inputempty"),function(){})},Z.push({label:H("editor.ok"),action:S}),x&&(C=function(){O(v,"cancel"),q.hide()},Z.push({label:H("editor.cancel"),action:C})),q.setConfig({title:P,draggable:!0,width:E,height:W,contentPadding:10,content:Q,buttons:Z,buttonsAlign:"right"}),q.$49$=C,q.$48$=S,q.show(),Q.getViewById("input").getElement()._ignore=!0,Q.getViewById("input").setFocus()}function lP(P,v,r,m){var I=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300,Y=[],U=void 0,o=void 0;r&&(U=function(){x.hide(),r()},Y.push({label:H("editor.ok"),action:U})),m&&(o=function(){x.hide(),m()},Y.push({label:H("editor.cancel"),action:o}));var x=new zv({title:P||H("editor.prompt"),contentPadding:20,width:I,draggable:!0,content:"<p>"+v+"</p>",buttons:Y});x.$49$=o||U,x.$48$=U,x.show()}function dP(P,v,r,m){var H={unfocusable:!0,id:P,toolTip:v},I=ht.Default.getImage(r),Y=I?I.width:16,U=I?I.height:16;return H.icon={width:Y+8,height:U+8,fitSize:!!I&&I.fitSize,comps:[{type:"rect",background:{func:function(P,v){return v.getCurrentItem()===H?dv.config.color_hover:null}},rect:[0,0,Y+8,U+8]},{type:"image",name:r,color:{func:function(P,v){return m&&m()?dv.config.color_select:dv.config.color_dark}},rect:[4,4,Y,U]}]},H}function VP(P,v){var r=ht.Default.createDiv(!0);return r.style.font=ht.Default.labelFont,r.style.color=ht.Default.labelColor,r.style.paddingLeft="4px",r.style.lineHeight=ht.Default.widgetRowHeight+"px",r.style.whiteSpace="nowrap",r.innerHTML=P,v&&(r.style.textAlign=v),r}function TP(P,v,r,m){var H=new ht.widget.Button;return H.setLabel(P),H.setLabelColor(ht.Default.labelColor),H.setLabelSelectColor(dv.config.color_select),H.setIcon(r),H.setBackground(null),H.setBorderColor(null),m&&(H.onClicked=m),v&&(H.setToolTip(v),H.enableToolTip()),H.getCurrentBackground=function(){return this._hover||this.isPressed()?dv.config.color_hover:null},H.getCurrentBorderColor=function(){return this.isSelected()?dv.config.color_select:null},H.getView().addEventListener("mouseenter",function(){H.isDisabled()||(H._hover=!0,H.iv())},!1),H.getView().addEventListener("mouseleave",function(){H.isDisabled()||(H._hover=!1,H.iv())},!1),H}function pP(P,v){var r=ht.Default.getImage(P);if(!r)throw P;var m={width:r.width,height:r.height,fitSize:r.fitSize,comps:[{type:"image",name:P,color:{func:function(){return v&&v()?dv.config.color_select:dv.config.color_dark}}}]},H=P+".state";return ht.Default.setImage(H,m),H}function FP(P,v,r){var m=new FileReader;m.onloadend=function(P){v(P.target.result)},r?m.readAsDataURL(P):m.readAsText(P)}function yP(P,v){v&&!function(){v===document.body&&(document.title=H("editor.title"),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"),v.appendChild(P.getView());var r=P.getView().style;r.left="0px",r.top="0px",setInterval(function(){if(P.getView()!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){var m=void 0,H=void 0;v===document.body?(m=document.documentElement.clientWidth,window.innerWidth&&window.innerWidth<m&&(m=window.innerWidth),H=document.documentElement.clientHeight,window.innerHeight&&window.innerHeight<H&&(H=window.innerHeight)):(m=v.clientWidth,H=v.clientHeight),m===P._oldWidth&&H===P._oldHeight||(P._oldWidth=m,P._oldHeight=H,r.width=m+"px",r.height=H+"px",P.iv())}},500)}()}function AP(P){if(P)for(var v=0;v<P.length;v++)null==P[v]&&(P[v]=0)}function Pv(P){if(P)for(var v=ht.Color.chart,r=0;r<P.length;r++)null==P[r]&&(P[r]=v[r%v.length])}function vv(P,v){v=void 0===v?P?P.length:0:v;for(var r=new Array(v),m=0;m<v;m++)r[m]=P?P[m]:void 0;return r}function rv(P){if(P instanceof ht.graph.GraphView){var v=P.getContentRect(),r=Math.max(v.width,v.height),m=Math.min(1,dv.config.imageSize/r);return r<3&&(m=dv.config.imageSize/r),P.toDataURL(void 0,void 0,m)}var H=ht.Default.getImage(P),I=Math.max(H.width,H.height),Y=Math.min(1,dv.config.imageSize/I);return ht.Default.toCanvas(P,H.width*Y,H.height*Y).toDataURL("image/png",1)}function mv(P,v,r){if(P instanceof Array)for(var m=0,H=P.length;m<H;m++)mv(P[m],v,r);else if(P instanceof Object)for(var I in P)if(P.hasOwnProperty(I)){var Y=P[I];if(!tP(Y))continue;if(GP(Y.func)&&xr.test(Y.func)){var U=Y.func.slice(5);v&&void 0===v[U]&&(v[U]=I),r&&void 0===r[U]&&(r[U]=Y.value)}else mv(Y,v,r)}}function Hv(){var P=ht.Default.getClass(dv.config.codeEditorClass)||lv;return new P}function Iv(){var P=arguments[0];if(!P)return"";for(var v=1;v<arguments.length;v++)P=P.replace("{"+(v-1)+"}",arguments[v]);return P}function Yv(P){var v={clazz:this.getClass(),name:this.getName(),displayName:this.getDisplayName(),toolTip:this.getToolTip(),tag:this.getTag(),icon:this.getIcon(),layer:this.getLayer(),parent:P.$58$(this.getParent()),a:{},s:{},dataBindings:this.getDataBindings()?b(this.getDataBindings()):null},m=this.getStyleMap();for(var H in m)v.s[H]=r(this.s(H));var I=this.getAttrObject();for(var Y in I)v.a[Y]=r(this.a(Y));return v}function Uv(P,v){var m=new P.clazz;if(dv.config.cloneName&&m.setName(P.name),dv.config.cloneDisplayName&&m.setDisplayName(P.displayName),dv.config.cloneToolTip&&m.setToolTip(P.toolTip),dv.config.cloneTag&&m.setTag(P.tag),dv.config.cloneIcon&&m.setIcon(P.icon),dv.config.cloneLayer&&m.setLayer(P.layer),dv.config.cloneStyle)for(var H in P.s)m.s(H,r(P.s[H]));if(dv.config.cloneAttr)for(var I in P.a)m.a(I,r(P.a[I]));return dv.config.cloneDataBindings&&P.dataBindings&&m.setDataBindings(k(P.dataBindings)),m}function ov(P,v,r){var m=dv.config.cloneParent?v.$50$(P.parent,r):void 0;this.setParent(m?m:v.getCurrentSubGraph())}function xv(P){var v=Yv.call(this,P);return v.rotation=this.getRotation(),v.position=this.p(),v.size={width:this._width,height:this._height},v.scale=this.getScale(),v.anchor=this.getAnchor(),v.image=this.getImage(),v.host=P.$58$(this.getHost()),v}function Nv(P,v){var r=Uv(P,v);return dv.config.cloneRotation&&r.setRotation(P.rotation),dv.config.clonePosition&&r.setPosition(P.position),dv.config.cloneSize&&r.setSize(P.size),dv.config.cloneScale&&r.setScale(P.scale),.5===P.anchor.x&&.5===P.anchor.y||dv.config.cloneAnchor&&r.setAnchor(P.anchor),dv.config.cloneImage&&r.setImage(P.image),r}function Ev(P,v,r){ov.call(this,P,v,r),dv.config.cloneHost&&this.setHost(v.$50$(P.host,r))}function sv(P){var v=Yv.call(this,P);return v.source=P.$58$(this.getSource()),v.target=P.$58$(this.getTarget()),v}function Wv(P,v){var r=Uv(P,v);return r}function fv(P,v,r){ov.call(this,P,v,r),dv.config.cloneSource&&this.setSource(v.$50$(P.source,r)),dv.config.cloneTarget&&this.setTarget(v.$50$(P.target,r))}function Gv(P){var v=xv.call(this,P);return v.expanded=this.isExpanded(),v}function tv(P,v){var r=Nv(P,v);return dv.config.cloneExpanded&&r.setExpanded(P.expanded),r}function Lv(P){var v=xv.call(this,P);return v.points=r(this.getPoints()),v.segments=r(this.getSegments()),v.thickness=this.getThickness(),v.closePath=this.isClosePath(),v}function Ov(P,v){var m=Nv(P,v);return dv.config.clonePoints&&m.setPoints(r(P.points)),dv.config.cloneSegments&&m.setSegments(r(P.segments)),dv.config.cloneThickness&&m.setThickness(P.thickness),dv.config.cloneClosePath&&m.setClosePath(P.closePath),m}function Qv(P){var v=xv.call(this,P);return v.clickThroughEnabled=this.isClickThroughEnabled(),v.syncSize=this.isSyncSize(),v}function qv(P,v){var r=Nv(P,v);return dv.config.cloneClickThroughEnabled&&r.setClickThroughEnabled(P.clickThroughEnabled),dv.config.cloneSyncSize&&r.setSyncSize(P.syncSize),r}function Zv(P){var v=Qv.call(this,P);return v.ref=this.getRef(),v}function Sv(P,v){var r=qv(P,v);return dv.config.cloneRef&&r.setRef(P.ref),r}function Cv(P){if(!(P instanceof ht.Node))return null;if(P instanceof ht.Group||P instanceof ht.Grid||P instanceof ht.Block)return null;var v=void 0;if(P instanceof Sr)v={type:"clip",points:r(P.getPoints()),segments:r(P.getSegments()),closePath:P.isClosePath()};else if(P instanceof Cr)v={type:"restore"};else if(P instanceof ht.Shape)v={type:"shape",points:r(P.getPoints()),segments:r(P.getSegments()),closePath:P.isClosePath()};else if(P instanceof ht.Text)v={type:"text",text:P.s("text"),align:P.s("text.align"),vAlign:P.s("text.vAlign"),color:P.s("text.color"),font:P.s("text.font"),shadow:P.s("text.shadow"),shadowColor:P.s("text.shadow.color"),shadowBlur:P.s("text.shadow.blur"),shadowOffsetX:P.s("text.shadow.offset.x"),shadowOffsetY:P.s("text.shadow.offset.y")};else if(P instanceof ht.Node){var m=P.s("shape");m?(v={type:"node_shape",shape:P.s("shape")},"rect"===m?v.depth=P.s("shape.depth"):"roundRect"===m?v.polygonSide=P.s("shape.corner.radius"):"polygon"===m?v.polygonSide=P.s("shape.polygon.side"):"arc"===m&&(v.arcFrom=P.s("shape.arc.from"),v.arcTo=P.s("shape.arc.to"),v.arcClose=P.s("shape.arc.close"),v.arcOval=P.s("shape.arc.oval"))):P.getImage()&&(v={type:"node_image",image:P.getImage(),stretch:P.s("image.stretch"),color:P.s("body.color")})}return v&&(v.visible=P.s("2d.visible"),v.displayName=P.getDisplayName(),v.x=P.getPosition().x,v.y=P.getPosition().y,v.anchorX=P.getAnchor().x,v.anchorY=P.getAnchor().y,v.scaleX=P.getScale().x,v.scaleY=P.getScale().y,v.rotation=P.getRotation(),v.width=P._width,v.height=P._height,v.opacity=P.s("opacity"),"shape"!==v.type&&"node_shape"!==v.type||(v.background=P.s("shape.background"),v.repeatImage=P.s("shape.repeat.image"),v.borderWidth=P.s("shape.border.width"),v.borderColor=P.s("shape.border.color"),v.border3d=P.s("shape.border.3d"),v.border3dColor=P.s("shape.border.3d.color"),v.border3dAccuracy=P.s("shape.border.3d.accuracy"),v.borderCap=P.s("shape.border.cap"),v.borderJoin=P.s("shape.border.join"),v.borderPattern=P.s("shape.border.pattern"),v.gradient=P.s("shape.gradient"),v.gradientColor=P.s("shape.gradient.color"),v.dash=P.s("shape.dash"),v.dashPattern=P.s("shape.dash.pattern"),v.dashOffset=P.s("shape.dash.offset"),v.dashColor=P.s("shape.dash.color"),v.dashWidth=P.s("shape.dash.width"),v.dash3d=P.s("shape.dash.3d"),v.dash3dColor=P.s("shape.dash.3d.color"),v.dash3dAccuracy=P.s("shape.dash.3d.accuracy"),v.fillRule=P.s("shape.fill.rule"),v.fillClipDirection=P.s("shape.fill.clip.direction"),v.fillClipPercentage=P.s("shape.fill.clip.percentage"),v.gradientPack=r(P.s("shape.gradient.pack")),v.borderWidthAbsolute=P.s("shape.border.width.absolute"))),v}function uv(P,v){var m=void 0;if("clip"===P.type)v&&(m=new Sr,m.s("type","clip"),m.setPoints(P.points),m.setSegments(P.segments));else if("restore"===P.type)v&&(m=new Cr,m.s("type","restore"));else if("shape"===P.type)m=v?new Qr:new ht.Shape,m.s("type","shape"),m.setPoints(P.points),m.setSegments(P.segments),m.setClosePath(P.closePath);else if("node_shape"===P.type){m=v?new Or:new ht.Node;var H=P.shape;m.s("shape",H),"rect"===H?m.s("shape.depth",P.depth):"roundRect"===H?m.s("shape.corner.radius",P.polygonSide):"polygon"===H?m.s("shape.polygon.side",P.polygonSide):"arc"===H&&(m.s("shape.arc.from",P.arcFrom),m.s("shape.arc.to",P.arcTo),m.s("shape.arc.close",P.arcClose),m.s("shape.arc.oval",P.arcOval))}else"node_image"===P.type?(v?(m=new qr,m.s("type","image"),m.s("image",P.image)):(m=new ht.Node,m.setImage(P.image)),m.s("body.color",P.color)):"text"===P.type&&(m=v?new Zr:new ht.Text,m.s("type","text"),m.s("text",P.text),m.s("text.align",P.align),m.s("text.vAlign",P.vAlign),m.s("text.color",P.color),m.s("text.font",P.font),m.s("text.shadow",P.shadow),m.s("text.shadow.color",P.shadowColor),m.s("text.shadow.blur",P.shadowBlur),m.s("text.shadow.offset.x",P.shadowOffsetX),m.s("text.shadow.offset.y",P.shadowOffsetY));return m?(m.s("2d.visible",P.visible),m.setDisplayName(P.displayName),m.setPosition(P.x,P.y),.5===P.anchorX&&.5===P.anchorY||m.setAnchor(P.anchorX,P.anchorY),m.setScale(P.scaleX,P.scaleY),m.setRotation(P.rotation),m.setSize(P.width,P.height),m.s("opacity",P.opacity),"shape"!==P.type&&"node_shape"!==P.type||(m.s("shape.background",P.background),m.s("shape.repeat.image",P.repeatImage),m.s("shape.border.width",P.borderWidth),m.s("shape.border.color",P.borderColor),m.s("shape.border.3d",P.border3d),m.s("shape.border.3d.color",P.border3dColor),m.s("shape.border.3d.accuracy",P.border3dAccuracy),m.s("shape.border.cap",P.borderCap),m.s("shape.border.join",P.borderJoin),m.s("shape.border.pattern",P.borderPattern),m.s("shape.gradient",P.gradient),m.s("shape.gradient.color",P.gradientColor),m.s("shape.dash",P.dash),m.s("shape.dash.pattern",P.dashPattern),m.s("shape.dash.offset",P.dashOffset),m.s("shape.dash.color",P.dashColor),m.s("shape.dash.width",P.dashWidth),m.s("shape.dash.3d",P.dash3d),m.s("shape.dash.3d.color",P.dash3dColor),m.s("shape.dash.3d.accuracy",P.dash3dAccuracy),m.s("shape.fill.rule",P.fillRule),m.s("shape.fill.clip.direction",P.fillClipDirection),m.s("shape.fill.clip.percentage",P.fillClipPercentage),m.s("shape.gradient.pack",r(P.gradientPack)),m.s("shape.border.width.absolute",P.borderWidthAbsolute)),m):null}function gv(P,v){var r=void 0,m=v?v.dm:null,H=m?m.a("width"):100,I=m?m.a("height"):100,Y=_P(P.type);if(GP(Y)){var U=Qm[Y];U?r=new U(P,H,I):IP(Y)&&(r=new vm(P,H,I))}else r=new Om(P,H,I);return r&&v&&v.addData(r,!0),r}function nv(P,v){P.s("chart.series")||P.s("chart.series",[]);var r=P.s("chart.series");r[0]||(r[0]={});var m=r[0];return m.values||(m.values=[]),m.colors||(m.colors=[]),m[v]}function Jv(P,v){return _P(nv(P,v))}function Kv(P,v){return wP(nv(P,v))}function jv(){var P=dv.config.customProperties.display;P&&P.length&&P.forEach(function(P){var v=(P.accessType||"a")+":"+P.property;Wr.display[v]=!0}),P=dv.config.customProperties.data,P&&P.length&&P.forEach(function(P){var v=(P.accessType||"a")+":"+P.property;Wr.data[v]=!0}),P=dv.config.customProperties.symbol,P&&P.length&&P.forEach(function(P){Wr.symbol[P.property]=!0}),P=dv.config.customProperties.comp,P&&P.length&&P.forEach(function(P){Wr.comp[P.property]=!0})}function bv(){var P=dv.config,v=dv.consts,r=function(v,r){void 0===P.valueTypes[v]&&(r.name="editor.valuetype."+v.toLowerCase(),P.valueTypes[v]=r)};r("String",{type:"string"}),r("Image",{type:"image"}),r("URL",{type:"url"}),r("Multiline",{type:"multiline",rows:1}),r("Font",{type:"font"}),r("Angle",{type:"number",angle:!0}),r("Int",{type:"int",step:1}),r("PositiveNumber",{type:"number",step:1,min:0}),r("Number",{type:"number",step:1}),r("Color",{type:"color"}),r("Boolean",{type:"boolean"}),r("Function",{type:"function"}),r("Object",{type:"object"}),r("ObjectArray",{type:"objectArray",rows:3}),r("StringArray",{type:"stringArray",rows:3}),r("NumberArray",{type:"numberArray",rows:3}),r("ColorArray",{type:"colorArray",rows:3}),r("Opacity",{type:"number",min:0,max:1,step:.01}),r("Percentage",{type:"number",min:0,max:1,step:.01}),r("Gradient",{type:"enum",values:P.gradients,icons:P.gradientIcons,dropDownWidth:140}),r("FillRule",{type:"enum",values:v.fillRules,labels:v.fillRuleLabels}),r("ClipDirection",{type:"enum",values:v.clipDirections,labels:v.clipDirectionLabels}),r("CapStyle",{type:"enum",values:v.caps,labels:v.capLabels}),r("JoinStyle",{type:"enum",values:v.joins,labels:v.joinLabels}),r("Align",{type:"enum",values:v.aligns,labels:v.alignLabels}),r("VAlign",{type:"enum",values:v.vAligns,labels:v.vAlignLabels}),r("Stretch",{type:"enum",values:v.stretchs,labels:v.stretchLabels}),r("Direction",{type:"enum",values:v.directions,labels:v.directionLabels}),r("Orientation",{type:"enum",values:v.orientations,labels:v.orientationLabels}),r("ColumnChart",{type:"enum",values:v.columnChartTypes,labels:v.columnChartTypeLabels}),v.valueTypes=[],v.valueTypeLabels=[];var m=function(P){var r=dv.config.valueTypes[P];r.type&&(v.valueTypes.push(P),v.valueTypeLabels.push(H(r.name)||H(P)),"enum"===r.type&&r.i18nLabels&&!r.labels&&(r.labels=[],r.i18nLabels.forEach(function(P){r.labels.push(H(P))})))};for(var I in dv.config.valueTypes)m(I)}function kv(){var P=dv.consts={};P.edgeTypes=[void 0,"points"].concat(Object.keys(ht.Default.getEdgeTypeMap())),P.aligns=["left","center","right"],P.alignLabels=[H("editor.align.left"),H("editor.align.center"),H("editor.align.right")],P.vAligns=["top","middle","bottom"],P.vAlignLabels=[H("editor.valign.top"),H("editor.valign.middle"),H("editor.valign.bottom")],P.stretchs=["fill","uniform","centerUniform"],P.stretchLabels=[H("editor.stretch.fill"),H("editor.stretch.uniform"),H("editor.stretch.centeruniform")],P.fillRules=["nonzero","evenodd"],P.fillRuleLabels=[H("editor.nonzero"),H("editor.evenodd")],P.clipDirections=["top","bottom","left","right"],P.clipDirectionLabels=[H("editor.clipdirection.top"),H("editor.clipdirection.bottom"),H("editor.clipdirection.left"),H("editor.clipdirection.right")],P.caps=["butt","round","square"],P.capLabels=[H("editor.cap.butt"),H("editor.cap.round"),H("editor.cap.square")],P.joins=["bevel","round","miter"],P.joinLabels=[H("editor.join.bevel"),H("editor.join.round"),H("editor.join.miter")],P.directions=["h","v"],P.directionLabels=[H("editor.direction.h"),H("editor.direction.v")],P.orientations=["top","right","bottom","left"],P.orientationLabels=[H("editor.orientation.top"),H("editor.orientation.right"),H("editor.orientation.bottom"),H("editor.orientation.left")],P.columnChartTypes=["columnChart","stackedColumnChart","percentageColumnChart"],P.columnChartTypeLabels=[H("editor.columncharttype.columnchart"),H("editor.columncharttype.stackedcolumnchart"),H("editor.columncharttype.percentagecolumnchart")],P.gradients=dv.config.gradients,P.shapes=[void 0,"rect","circle","oval","roundRect","star","pentagram","triangle","hexagon","pentagon","diamond","rightTriangle","parallelogram","trapezoid","polygon","arc"],P.shapeLabels=[],P.shapeIcons=[],P.shapes.forEach(function(v){v?(P.shapeLabels.push(H("editor.comptype."+v.toLowerCase())),P.shapeIcons.push({width:16,height:16,comps:[{type:v,rect:[2,4,12,8],borderWidth:1,borderColor:dv.config.color_dark}]})):(P.shapeLabels.push(""),P.shapeIcons.push({width:16,height:16,comps:[]}))}),P.selectTypes=["shadow","rect","circle","oval","roundRect"],P.selectTypeLabels=[],P.selectTypeIcons=[],P.selectTypes.forEach(function(v){"shadow"===v?(P.selectTypeLabels.push(H("editor.shadow")),P.selectTypeIcons.push({width:16,height:16,comps:[]})):(P.selectTypeLabels.push(H("editor.comptype."+v.toLowerCase())),P.selectTypeIcons.push({width:16,height:16,comps:[{type:v,rect:[2,4,12,8],borderWidth:1,borderColor:dv.config.color_dark}]}))}),P.displayConnectActionTypes=dv.config.displayConnectActionTypes,P.displayConnectActionTypeLabels=[],P.displayConnectActionTypes.forEach(function(v){var r=v?v.toLowerCase():"none";P.displayConnectActionTypeLabels.push(H("editor.connectactiontype."+r,!0)||H(v))}),P.symbolConnectActionTypes=dv.config.symbolConnectActionTypes,P.symbolConnectActionTypeLabels=[],P.symbolConnectActionTypes.forEach(function(v){var r=v?v.toLowerCase():"none";P.symbolConnectActionTypeLabels.push(H("editor.connectactiontype."+r,!0)||H(v))}),P.vLayoutValues=[void 0,"top","bottom","topbottom","center","scale"],
P.vLayoutLabels=[H("editor.layout.none"),H("editor.layout.top"),H("editor.layout.bottom"),H("editor.layout.topbottom"),H("editor.layout.center"),H("editor.layout.scale")],P.hLayoutValues=[void 0,"left","right","leftright","center","scale"],P.hLayoutLabels=[H("editor.layout.none"),H("editor.layout.left"),H("editor.layout.right"),H("editor.layout.leftright"),H("editor.layout.center"),H("editor.layout.scale")],P.fullscreenValues=[void 0,"fill","uniform"],P.fullscreenLabels=[H("editor.layout.none"),H("editor.stretch.fill"),H("editor.stretch.uniform")],P.fullscreenLockValues=[!1,"h","v"],P.fullscreenLockLabels=[H("editor.layout.none"),H("editor.direction.h"),H("editor.direction.v")]}String.prototype.startsWith||(String.prototype.startsWith=function(P,v){return v=v||0,this.substr(v,P.length)===P}),String.prototype.endsWith||(String.prototype.endsWith=function(P,v){var r=this.toString();("number"!=typeof v||!isFinite(v)||Math.floor(v)!==v||v>r.length)&&(v=r.length),v-=P.length;var m=r.lastIndexOf(P,v);return m!==-1&&m===v});var Mv=window.hteditor_config||{},av=function(P,v){void 0===Mv[P]&&(Mv[P]=v)};av("color_select","#45C4F9"),av("color_select_dark","#39B0E4"),av("color_pane","#FCFCFC"),av("color_pane_dark","#F7F7F7"),av("color_line","#E4E4E4"),av("color_dark","#2C2C2C"),av("color_light","white"),av("color_data_border","#979797"),av("color_data_background","#D8D8D8"),av("color_transparent","rgba(70,70,70,0.4)"),av("color_disabled","#8C8C8C"),av("color_guide","red"),av("color_hover","rgba(184,184,184,0.18)"),av("color_mask","rgba(84,110,125,0.30)");var iv=function(){var P=navigator.userAgent;return P.indexOf("compatible")>-1&&P.indexOf("MSIE")>-1||P.indexOf("Trident")>-1&&P.indexOf("rv:11.0")>-1}();if(av("logEditorInfo",!0),av("host",window.location.hostname),av("port",window.location.port),av("locale","en"),av("serviceClass",void 0),av("maxUndoRedoSteps",200),av("inspectorTitleHeight",void 0),av("smallFont","10px arial, sans-serif"),av("boldFont","bold 12px arial, sans-serif"),av("leftSplitViewPosition",260),av("rightSplitViewPosition",-300),av("mainSplitViewPosition",-320),av("explorerSplitViewPosition",.4),av("requestDelay",100),av("imageSize",200),av("fileSize",50),av("maxFileSize",200),av("dragImageSize",50),av("dragImageOpacity",.7),av("animate",!0),av("fitPadding",20),av("fitContentForDisplayView",!0),av("fitContentForSymbolView",!0),av("rulerSize",16),av("edgeLoop",!0),av("pasteOffset",5),av("continuousLayout",!0),av("maxZoom",50),av("minZoom",.01),av("detailFilter",{}),av("compactFilter",{}),av("customProperties",{}),av("rulerEnabled",!0),av("gridEnabled",!1),av("displayGridBlockSize",40),av("displayGridThickLinesEvery",10),av("displayGridThickColor","rgb(191, 191, 191)"),av("displayGridLightColor","rgba(191, 191, 191, 0.4)"),av("displayGridAngle",Math.PI/2),av("displayGridRotation",0),av("displayGridZoomThreshold",.25),av("displayGridAlignmentGuideColor",Mv.color_guide),av("symbolGridBlockSize",1),av("symbolGridThickLinesEvery",20),av("symbolGridThickColor","rgb(191, 191, 191)"),av("symbolGridLightColor","rgba(191, 191, 191, 0.2)"),av("symbolGridAngle",Math.PI/2),av("symbolGridRotation",0),av("symbolGridZoomThreshold",.25),av("symbolGridAlignmentGuideColor",Mv.color_guide),av("maxStringLength",1e6),av("maxFileNameLength",100),av("traceMissingI18n",!1),av("container",void 0),av("continuousCreating",!1),av("valueTypes",{}),av("indent","zh"===Mv.locale?90:110),av("indent2",70),av("clearDataBindingsBeforeImporting",!0),av("insertDisplayViewAsRefGraph",!1),av("displayPreviewURL","display.html"),av("symbolPreviewURL","symbol.html"),av("removeFileByKeyboardEnabled",!1),av("locateFileEnabled",!0),av("promptBeforeClosing",!0),av("displaysVisible",!0),av("symbolsVisible",!0),av("componentsVisible",!0),av("scenesVisible",!1),av("modelsVisible",!1),av("assetsVisible",!0),av("displaysEditable",!0),av("symbolsEditable",!0),av("componentsEditable",!0),av("scenesEditable",!0),av("modelsEditable",!0),av("assetsEditable",!0),av("settingDefaultValueBeforeSaving",!1),av("svgSegments",20),av("importConfirm",!0),av("newIfFailToOpen",!0),av("dataBindings",{}),av("dataBindingsForSymbol",{}),av("useCodeEditor",!iv),av("codeEditorClass",void 0),av("fontPreview","Hightopo"),av("checkForFileChanges",!0),av("checkForFileChangesInterval",3e3),av("rotateAsClock",!1),av("cloneAttr",!0),av("cloneStyle",!0),av("cloneName",!0),av("cloneDisplayName",!0),av("cloneToolTip",!0),av("cloneTag",!1),av("cloneIcon",!0),av("cloneLayer",!0),av("cloneParent",!0),av("cloneDataBindings",!0),av("cloneSource",!0),av("cloneTarget",!0),av("cloneExpanded",!0),av("cloneClickThroughEnabled",!0),av("cloneSyncSize",!0),av("cloneRef",!0),av("clonePoints",!0),av("cloneSegments",!0),av("cloneThickness",!0),av("cloneClosePath",!0),av("cloneRotation",!0),av("clonePosition",!0),av("cloneSize",!0),av("cloneScale",!0),av("cloneAnchor",!0),av("cloneImage",!0),av("cloneHost",!0),av("isOpenable",null),av("dialogTitleBackground",null),av("componentViewSize",{width:700,height:500}),av("eventViewSize",{width:560,height:400}),av("fontViewSize",{width:500,height:400}),av("functionViewSize",{width:500,height:400}),av("objectViewSize",{width:500,height:400}),av("textViewSize",{width:500,height:400}),av("attachPointsViewSize",{width:700,height:500}),av("drawAccordionTitle",null),av("accordionMutex",!1),av("importDataBindingsButtonVisible",!0),av("saveSymbolCustomPropertyDefaultValue",!1),av("saveCompCustomPropertyDefaultValue",!1),av("deleteFileConfirm",!0),av("mixMaskAndBackground",!0),av("createFileTreeSortFunc",function(P){var v=P.explorer.rootDir,r=v+"/ht",m=v+"/htdesign";return function(v,H){var I=v.url,Y=H.url;return I===Y?0:I===r?-1:Y===r?1:I===m?-1:Y===m?1:ht.Default.sortFunc(P.getLabel(v),P.getLabel(H))}}),av("explorerMode","treeList"),av("filterDisplayViewEnabled",!1),av("filterSymbolViewEnabled",!1),av("customAttachPointsColumns",null),av("isCopyCompsWhenNewState",!0),av("isDataBound",function(P,v,r){var m=P.getDataBindings();return m&&m[v]&&m[v][r]}),av("checkFileName",function(P,v){return!!P&&(P=P.trim(),!!P&&(!/[!@?#$%^&*\/]/.test(P)&&P))}),av("paletteColors",[["rgb(51,153,255)","#60ACFC","#32D3EB","rgb(93,217,174)","rgb(125,195,125)","rgb(255,235,195)","rgb(226,250,87)"],["#FEB64D","#FF7C7C","rgb(241,125,164)","rgb(204,104,166)","rgb(135,144,204)","rgb(145,115,205)","rgb(124,145,155)"],["rgb(48,242,120)","rgb(0,199,7)","rgb(242,83,75)","rgb(212,0,0)","rgb(240,225,19)","rgb(247,247,247)","rgb(61,61,61)"]]),av("gradients",[null,"linear.southwest","linear.southeast","linear.northwest","linear.northeast","linear.north","linear.south","linear.west","linear.east","radial.center","radial.southwest","radial.southeast","radial.northwest","radial.northeast","radial.north","radial.south","radial.west","radial.east","spread.horizontal","spread.vertical","spread.diagonal","spread.antidiagonal","spread.north","spread.south","spread.west","spread.east"]),Mv.gradientIcons||(Mv.gradientIcons=[],Mv.gradients.forEach(function(P){P?Mv.gradientIcons.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:P,gradientColor:Mv.color_line,background:Mv.color_dark}]}):Mv.gradientIcons.push({width:20,height:14,comps:[]})})),av("fontList",["SimSun","NSimSun","FangSong","KaiTi","FangSong_GB2312","Microsoft YaHei","cursive","monospace","serif","sans-serif","fantasy","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Bookman Old Style","Bradley Hand ITC","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Georgia","Gentium","Impact","King","Lucida Console","Lalit","Modena","Monotype Corsiva","Papyrus","Tahoma","TeX","Times","Times New Roman","Trebuchet MS","Verdana","Verona","PingFangSC-Thin"]),av("expandedTitles",{}),["TitleBasic","TitleCustom","TitleBackground","TitleBorder","TitleText","TitleImage","TitleNode","TitleGroupBasic","TitleEdgeBasic","TitleArc","TitleDataBinding","TitleComponent","TitleShapeBackground","TitleShapeBorder","TitleGroupTitle","TitleEditingPoint","TitleChart","TitleLayout","TitleNodeLayout"].forEach(function(P){null==Mv.expandedTitles[P]&&(Mv.expandedTitles[P]=!0)}),ht.Default.handleUnfoundImage=function(P,v){return ht.Default.getImage("editor.unknown")},av("displayConnectActionType",null),av("symbolConnectActionType",null),av("displayConnectActionTypes",[null,"copyStyle","host","parent"]),av("symbolConnectActionTypes",[null,"copyStyle"]),av("appendDisplayConnectActionTypes",null),av("appendSymbolConnectActionTypes",null),av("appendConnectActions",null),av("connectActions",{copyStyle:{action:function(P,v,m){if(m){var H=m.getStyleMap();for(var I in H)"shape"!==I&&"label"!==I&&"label2"!==I&&"note"!==I&&"note2"!==I&&"text"!==I&&v.s(I,r(H[I]))}},extraInfo:{visible:function(P){return!0}}},host:{action:function(P,v,r){v instanceof ht.Node&&r instanceof ht.Node&&v.setHost(r)},extraInfo:{delete:{visible:function(P){return P.sm().ld()instanceof ht.Node&&P.sm().ld().getHost()},action:function(P,v){v instanceof ht.Node&&v.setHost(void 0)}},visible:function(P){return P.sm().ld()instanceof ht.Node}}},parent:{action:function(P,v,r){r&&v.setParent(r)},extraInfo:{delete:{visible:function(P){return P.sm().ld().getParent()},action:function(P,v){v.setParent(void 0)}},visible:function(P){return!0}}}}),Mv.appendDisplayConnectActionTypes&&Mv.appendDisplayConnectActionTypes.forEach(function(P){Mv.displayConnectActionTypes.push(P)}),Mv.appendSymbolConnectActionTypes&&Mv.appendSymbolConnectActionTypes.forEach(function(P){Mv.symbolConnectActionTypes.push(P)}),Mv.appendConnectActions)for(var $v in Mv.appendConnectActions)Mv.connectActions[$v]=Mv.appendConnectActions[$v];for(var Xv in Mv.connectActions){var _v=Mv.connectActions[Xv];ht.Default.setConnectAction(Xv,_v.action,_v.extraInfo)}var wv=ht.Default.getToolTipDiv();wv.style.color=Mv.color_dark,wv.style.background=Mv.color_pane,ht.widget.ColorPicker.prototype._paletteColors=Mv.paletteColors,ht.graph.GraphView.prototype._scrollBarColor=Mv.color_transparent,ht.graph.GraphView.prototype._rectSelectBackground=Mv.color_transparent,ht.graph.GraphView.prototype._rectSelectBorderColor=Mv.color_select,ht.graph.GraphView.prototype.isLabelVisible=function(){return!0},ht.widget.ListView.prototype._scrollBarColor=Mv.color_transparent,ht.widget.TreeView.prototype._scrollBarColor=Mv.color_transparent,ht.widget.TableView.prototype._scrollBarColor=Mv.color_transparent,ht.widget.TreeTableView.prototype._scrollBarColor=Mv.color_transparent,ht.widget.PropertyView.prototype._scrollBarColor=Mv.color_transparent,ht.widget.FormPane.prototype._scrollBarColor=Mv.color_transparent,ht.widget.SplitView.prototype._dividerBackground=Mv.color_line,ht.widget.SplitView.prototype._continuousLayout=Mv.continuousLayout,ht.widget.ListView.prototype._selectBackground=Mv.color_select,ht.widget.TreeView.prototype._selectBackground=Mv.color_select,ht.widget.TableView.prototype._selectBackground=Mv.color_select,ht.widget.TreeTableView.prototype._selectBackground=Mv.color_select,ht.widget.TableHeader.prototype._columnLineColor=Mv.color_line,ht.widget.TableHeader.prototype._insertColor=Mv.color_select_dark,ht.widget.TableView.prototype._columnLineColor=Mv.color_line,ht.widget.Toolbar.prototype._separatorColor=Mv.color_line,ht.widget.Toolbar.prototype._itemGap=4,ht.widget.Button.prototype._labelColor=Mv.color_light,ht.widget.Button.prototype._borderColor=null,ht.widget.Button.prototype._background=Mv.color_select,ht.widget.Button.prototype._selectBackground=Mv.color_select_dark,ht.widget.CheckBox.prototype._pressBackground=Mv.color_pane_dark,ht.widget.ComboBox.prototype._selectBackground=Mv.color_select,ht.widget.TabView.prototype._insertColor=Mv.color_select_dark,ht.widget.TabView.prototype._selectWidth=0,ht.widget.TabView.prototype._selectBackground=Mv.color_select,ht.widget.TabView.prototype._tabBackground=Mv.color_dark;var cv=ht.widget.TabView.prototype.drawTab;ht.widget.TabView.prototype.drawTab=function(P,v,r,m,H,I,Y){return Y=v==this.getCurrentTab()?Mv.color_select:Mv.color_dark,cv.call(this,P,v,r,m,H,I,Y)},ht.widget.FormPane.prototype._hPadding=4,ht.widget.FormPane.prototype._vPadding=4,ht.widget.FormPane.prototype._hGap=4,ht.widget.FormPane.prototype._vGap=4,ht.widget.Slider.prototype._background=Mv.color_dark,ht.widget.Slider.prototype._leftBackground=Mv.color_select,ht.widget.Slider.prototype._button={width:14,height:14,comps:[{type:"circle",rect:[0,0,14,14],borderWidth:1,borderColor:Mv.color_dark,background:Mv.color_pane_dark}]},ht.widget.ComboBox.prototype._dropDownIcon=ht.widget.MultiComboBox.prototype._dropDownIcon={width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:Mv.color_dark}]},ht.Default.comboBoxBorderColor=Mv.color_line,ht.Default.textFieldBorderColor=Mv.color_line,ht.Default.contextMenuHoverBackground=Mv.color_select,ht.Default.contextMenuSeparatorColor=Mv.color_line,ht.Default.dialogTitleBackground=Mv.dialogTitleBackground||Mv.color_dark,ht.Default.dialogButtonBackground=Mv.color_select,ht.Default.dialogButtonSelectBackground=Mv.color_select_dark,ht.Default.dialogHeaderBackground=Mv.color_pane_dark,ht.Default.toolbarBackground=Mv.color_pane_dark,ht.Default.tableHeaderBackground=Mv.color_pane_dark,ht.Default.contextMenuLabelFont=ht.Default.labelFont,ht.Default.contextMenuBorderRadius=0,ht.Default.contextMenuBorderColor=Mv.color_line,ht.Default.contextMenuSubmenuMark=">&nbsp;",ht.Default.contextMenuCheckIcon={width:16,height:16,comps:[{type:"shape",points:[13,3,7,12,4,8],borderWidth:1,borderColor:Mv.color_dark}]},ht.Default.setImage("radioOn",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:ht.Color.widgetIconBorder,background:"#FFF"},{type:"circle",rect:[4,4,8,8],background:Mv.color_select}]}),ht.Default.setImage("expandIcon",{width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:Mv.color_dark}]}),ht.Default.setImage("collapseIcon",{width:16,height:16,comps:[{type:"shape",points:[6,3,12,8,6,13],segments:[1,2,2],borderWidth:1,borderColor:Mv.color_dark}]}),ht.widget.TreeView.prototype._expandIcon="expandIcon",ht.widget.TreeView.prototype._collapseIcon="collapseIcon",ht.widget.TreeTableView.prototype._expandIcon="expandIcon",ht.widget.TreeTableView.prototype._collapseIcon="collapseIcon",ht.widget.TextField.prototype.setEditable=ht.widget.TextArea.prototype.setEditable=function(P){var v=this._element;P?(v.removeAttribute("readonly"),v.style.color=ht.Default.labelColor):(v.setAttribute("readonly",!0),v.style.color=Mv.color_disabled)},ht.Default.onElementCreated=function(P){("INPUT"===P.tagName&&"button"!==P.type||"TEXTAREA"===P.tagName)&&(P.style.border=Mv.color_line+" solid 1px",P.style.outline=0,P.style.padding="2px","TEXTAREA"===P.tagName&&(P.style.whiteSpace="pre",P.setAttribute("spellcheck","false")),P.addEventListener("focus",function(v){P.oldBorder=P.style.border,P.style.border=Mv.color_select+" solid 1px","INPUT"===P.tagName&&requestAnimationFrame(function(){P.select()}),"TEXTAREA"===P.tagName&&(P.style.zIndex="1")},!1),P.addEventListener("blur",function(v){P.style.border=P.oldBorder,"TEXTAREA"===P.tagName&&(P.style.zIndex="")},!1))},ht.Default.onWidgetColorPickerCreated=function(v){for(var r=Mv.color_line+" solid 1px",m=v.getView(),H=m.querySelectorAll(".colorPalette"),I=0;I<H.length;I++)H[I].style.border=r;m.querySelector(".satval").style.border=r,m.querySelector(".hue_image").style.border=r,m.querySelector(".preview").style.border=r,H=m.querySelectorAll('input[type="button"]');for(var Y=0;Y<H.length;Y++){var U=H[Y];U.style.border=r,U.style.background="none",U.style.outline="none",U.style.width="30px",U.addEventListener("mouseover",function(P){P.target.style.background=Mv.color_hover},!1),U.addEventListener("mouseout",function(){event.target.style.background="none"},!1)}H=m.querySelectorAll("span");for(var o=0;o<H.length;o++)P(v,m,H[o])},ht.Default.handleUnfoundImage=function(P,v){return ht.Default.getImage("editor.unknown")};var hv=(function(){function P(P){this.value=P}function v(v){function r(P,v){return new Promise(function(r,H){var U={key:P,arg:v,resolve:r,reject:H,next:null};Y?Y=Y.next=U:(I=Y=U,m(P,v))})}function m(r,I){try{var Y=v[r](I),U=Y.value;U instanceof P?Promise.resolve(U.value).then(function(P){m("next",P)},function(P){m("throw",P)}):H(Y.done?"return":"normal",Y.value)}catch(P){H("throw",P)}}function H(P,v){switch(P){case"return":I.resolve({value:v,done:!0});break;case"throw":I.reject(v);break;default:I.resolve({value:v,done:!1})}I=I.next,I?m(I.key,I.arg):Y=null}var I,Y;this._invoke=r,"function"!=typeof v.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(v.prototype[Symbol.asyncIterator]=function(){return this}),v.prototype.next=function(P){return this._invoke("next",P)},v.prototype.throw=function(P){return this._invoke("throw",P)},v.prototype.return=function(P){return this._invoke("return",P)},{wrap:function(P){return function(){return new v(P.apply(this,arguments))}},await:function(v){return new P(v)}}}(),function(P,v){if(!(P instanceof v))throw new TypeError("Cannot call a class as a function")}),ev=function(){function P(P,v){for(var r=0;r<v.length;r++){var m=v[r];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(P,m.key,m)}}return function(v,r,m){return r&&P(v.prototype,r),m&&P(v,m),v}}(),Dv=function(P,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);P.prototype=Object.create(v&&v.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(P,v):P.__proto__=v)},Rv=function(P,v){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||"object"!=typeof v&&"function"!=typeof v?P:v},zv=function(P){function v(r){return hv(this,v),Rv(this,P.call(this,r))}return Dv(v,P),v.prototype.onShown=function(){Er.push(this)},v.prototype.onHidden=function(){I(Er,this)},v}(ht.widget.Dialog),Bv=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this,r));return m.getView().style.background=dv.config.color_pane,m}return Dv(v,P),v.prototype.addLine=function(){this.addRow([],[.1],1.01,{background:dv.config.color_line})},v.prototype.addTitle=function(P){var v=[{element:P,font:dv.config.boldFont}],r={background:dv.config.color_pane_dark};this.addRow(v,[.1],null,r)},v.prototype.getRowIndex=function(P){return this.getRows().indexOf(P)},v}(ht.widget.FormPane),lv=function(){function P(v){hv(this,P);var r=this._view=document.createElement("div"),m=this._editableLayer=document.createElement("div"),H=m.style;this.config=v,this._editable=!0,H.backgroundColor="rgba( 255, 255, 255, 0.3)",H.position="absolute",H.cursor="not-allow",H.top=0,H.right=0,H.bottom=0,H.left=0,dv.config.useCodeEditor||(this._monacoEditor=new ht.widget.TextArea,this._view=this._monacoEditor.getView(),v&&v.value&&this._monacoEditor.setValue(v.value)),r.style.position="absolute"}return P.prototype.getView=function(){return this._view},P.prototype.setValue=function(P){void 0!==P&&null!==P||(P=""),this.monacoEditor&&this.monacoEditor.setValue(P)},P.prototype.getValue=function(){return this.monacoEditor&&this.monacoEditor.getValue()},P.prototype.layout=function(){this.monacoEditor&&this.monacoEditor.layout()},P.prototype.invalidate=function(){this.layoutLater()},P.prototype.iv=function(){this.invalidate()},P.prototype.layoutLater=function(P){var v=this;setTimeout(function(){v.layout()},P||300)},P.prototype.setEditable=function(P){var v=this;if(this._monacoEditor instanceof ht.widget.TextArea)return void this._monacoEditor.setEditable(P);if(this._editable!==P){this._timer&&(clearTimeout(this._timer),delete this._timer);var r=this._editableLayer;P?r.parentNode&&r.parentNode.removeChild(r):this._timer=setTimeout(function(){delete v._timer,v.getView().appendChild(r)},10),this._editable=P}},P.prototype.isEditable=function(){return this._monacoEditor instanceof ht.widget.TextArea?this._monacoEditor.isEditable():this._editable},ev(P,[{key:"monacoEditor",get:function(){return!this._monacoEditor&&window.monaco&&(this._monacoEditor=monaco.editor.create(this._view,this.config||{value:"",language:"javascript",minimap:{enabled:!1}})),this._monacoEditor}}]),P}(),dv={strings:{},customStrings:{},config:Mv},Vv=["onClick","onDoubleClick","onContextMenu","onDown","onUp","onMove","onEnter","onHover","onLeave","onBeginDrag","onDrag","onEndDrag","onScroll"],Tv="unknow",pv="root",Fv="dir",yv="asset",Av="symbol",Pr="display",vr="component",rr="model",mr="scene",Hr="tile",Ir="list",Yr="accordion",Ur="normal",or="error",xr=/^attr@/,Nr=/firefox/.test(window.navigator.userAgent.toLowerCase()),Er=[],sr={width:16,height:16,comps:[]},Wr={display:{},symbol:{},data:{},comp:{}},fr=new ht.List([{x:50,y:75},{x:25,y:75},{x:25,y:25},{x:75,y:25},{x:75,y:75},{x:65,y:60},{x:75,y:75},{x:85,y:60}]),Gr=new ht.List([1,2,2,2,2,2,1,2]),tr="0.3.4";ht.Default.setImage("check",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:dv.config.color_line},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:{func:function(P,v){return P&&v&&v.getRowSize&&v.isSelected&&v.isSelected(P)?dv.config.color_line:dv.config.color_select}}}]}),ht.Default.setImage("uncheck",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:dv.config.color_line}]}),ht.Default.setImage("text_icon",{width:16,height:16,comps:[{type:"shape",points:[3,14,8,2,13,14,5,9,11,9],segments:[1,2,2,1,2],borderColor:dv.config.color_dark,borderWidth:1}]}),ht.Default.setImage("refGraph_icon",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:dv.config.color_dark,rotation:.7854,points:[12.90381,7.59615,12.90381,7.59615,12.90381,4.61619,12.90381,3.59619,12.90381,2.57619,11.72047,1.59619,10.40381,1.59619,9.08714,1.59619,7.90381,2.61619,7.90381,3.59619,7.90381,4.35799,7.90381,7.59615,7.90381,7.59615,7.90381,7.59615,7.90381,9.59619,10.40381,9.59619],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:dv.config.color_dark,rotation:-2.35619,points:[8.21091,12.28904,8.21091,12.28904,8.21091,9.30909,8.21091,8.28909,8.21091,7.26909,7.02758,6.28909,5.71091,6.28909,4.39425,6.28909,3.21091,7.30909,3.21091,8.28909,3.21091,9.05088,3.21091,12.28904,3.21091,12.28904,3.21091,12.28904,3.21091,14.28909,5.71091,14.28909],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unknown",{width:200,height:200,comps:[{type:"roundRect",background:"rgb(247,247,247)",borderColor:"#979797",cornerRadius:20,selectable:!1,rect:[0,0,200,200]},{type:"shape",background:"rgba(255,170,79,0.63)",borderColor:"rgb(124,145,155)",points:[35.92101,125.8927,70.22338,97.87611,96.05685,117.16025,108.79166,106.08902,115.70485,111.45559,92.40971,145.02116,35.92101,145.02116,35.92101,130.19911]},{type:"shape",background:"rgba(255,170,79,0.63)",borderColor:"rgb(124,145,155)",points:[143.94195,74.95345,121.52647,95.32915,136.08054,112.06633,115.341,146.63224,166.86461,146.63224,166.86461,103.69774]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",displayName:"\u4e0d\u89c4\u5219\u56fe\u5f62",closePath:!0,points:[86.52393,81.40417,110.5868,43.51795,35.32634,43.51795,35.32634,146.93709,93.17962,146.93709,117.24248,111.09877,86.52393,81.40417]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",closePath:!0,points:[105.77896,81.40417,129.84183,43.51795,168.08039,43.51795,168.08039,146.93709,112.43465,146.93709,136.49752,111.09877,105.77896,81.40417]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",points:[35.92101,126.00861,70.52846,96.60621,95.13328,116.95012,108.45973,104.311]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",points:[122.25418,94.2376,144.08528,74.22575,168.32002,106.08902]},{type:"oval",background:"#FF7C7C",borderWidth:4,borderColor:"rgb(124,145,155)",rect:[56.57448,66.67972,14,14]}]}),ht.Default.setImage("editor.root",{width:30,height:30,fitSize:!0,comps:[{type:"shape",points:[23,8,8,23],segments:[1,2],borderWidth:1,borderColor:"white"}]}),ht.Default.setImage("editor.display",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:dv.config.color_light,rect:[6,1,4,4.00837]},{type:"circle",borderWidth:1,borderColor:dv.config.color_light,rect:[11,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:dv.config.color_light,points:[2.98235,11.0795,2.98235,8,7.89475,8,7.89475,5.00837,7.89475,8,13,8,13,11]},{type:"circle",borderWidth:1,borderColor:dv.config.color_light,rect:[1,10.99163,4,4.00837]}]}),ht.Default.setImage("editor.symbol",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:dv.config.color_light,rect:[0,2,10,8]},{type:"rect",borderWidth:1,borderColor:dv.config.color_light,rect:[5,6,10,8]}]}),ht.Default.setImage("editor.filter",{background:"rgb(130,130,130)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",closePath:!0,points:[2,1.5,14,1.5,9.50949,5.5,9.50949,9.5,13,9.5,9.50949,9.5,9.50949,11.5,12,11.5,9.50949,11.5,9.50949,14.5,6.5335,12.5,6.5335,5.5,2,1.5]}]}),ht.Default.setImage("editor.bind",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unbind",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:.7854,points:[13.49999,7.03553,13.49999,7.03553,13.49999,5.05554,13.49999,4.03553,13.49999,3.01553,12.31666,2.03553,10.99999,2.03553,9.68333,2.03553,8.49999,3.05553,8.49999,4.03553,8.49999,5.01553,8.49999,7.03553,8.49999,7.03553],segments:[1,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.92699,points:[7.28554,13.25761,7.28554,13.25761,7.28554,11.27761,7.28554,10.2576,7.28554,9.23761,6.1022,8.25761,4.78554,8.25761,3.46887,8.25761,2.28554,9.2776,2.28554,10.2576,2.28554,11.2376,2.28554,13.25761,2.28554,13.25761],segments:[1,4,4,4,4]}]}),ht.Default.setImage("editor.dircollapsed",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,204,153)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14.5,14.5,.5,14.5,.5,1.50001,6.5,1.50001,7.5,3.50001,14.5,3.50001,14.5,14.5]},{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.5,5.50001,14.5,5.50001,14.5,14.50001,.5,14.50001,.5,5.50001]}]}),ht.Default.setImage("editor.direxpanded",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(51,153,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.35891,10.47175,3.3125,6.30284,15.5,6.30284,13.625,14.5,.5,14.5,.5,1.5,6.125,1.5,7.0625,3.2289,12.6875,3.2289,12.6875,6.30284]}]}),ht.Default.setImage("editor.dir",{background:"rgb(227,227,227)",width:20,height:20,fitSize:!0,comps:[{type:"shape",background:"#FFCC99",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[19,4,19,18,1,18,1,2,8.71429,2,10,4,19,4]},{type:"rect",shadow:!0,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(255,255,255)",borderColor:"#979797",rotation:6.28319,rect:[2.98273,5.998,13.98346,9.99004]},{type:"shape",background:"rgba(255,255,153,0.3)",borderColor:"rgb(255,255,255)",borderCap:"round",points:[18,9,18,17,2,17,2,9,18,9]},{type:"rect",shadowColor:"rgb(0,0,0)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(232,230,230)",borderColor:"#979797",rotation:6.28319,rect:[4,7,11.98532,1.06039]}]}),ht.Default.setImage("editor.dxf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[25.13334,60.62742,20.38001,60.62742,20.11302,60.62742,19.89504,60.41688,19.89504,60.15453,19.89504,43.31796,19.89504,43.05561,20.11302,42.84507,20.38001,42.84507,25.13334,42.84507,30.66329,42.84507,33.35167,45.67873,33.35167,51.50916,33.35167,57.47593,30.51009,60.62742,25.13334,60.62742,25.13334,60.62742,23.32783,57.5939,25.03463,57.5939,28.43349,57.5939,29.82018,55.90554,29.82018,51.77117,29.82018,47.64415,28.35946,45.88193,24.93627,45.88193,23.32783,45.88193,23.32783,57.5939,23.32783,57.5939],segments:[1,2,4,2,4,2,4,4,2,1,2,4,4,2,2,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[48.10416,60.62742,45.1488,60.62742,44.97846,60.62742,44.82286,60.54254,44.73581,60.40217,40.95446,54.3465,37.26771,60.39482,37.1786,60.53886,37.01957,60.62776,36.84889,60.62776,34.01657,60.62776,33.84041,60.62776,33.67761,60.53552,33.59227,60.38379,33.50693,60.2324,33.51275,60.04759,33.60735,59.89987,39.05608,51.53522,33.90312,43.56961,33.80853,43.42557,33.8027,43.24076,33.88804,43.08937,33.97338,42.93797,34.13618,42.8454,34.31235,42.8454,37.31706,42.8454,37.4874,42.8454,37.64677,42.93396,37.73382,43.078,41.14399,48.68284,44.48219,43.08168,44.56924,42.93396,44.72861,42.84507,44.90272,42.84507,47.73299,42.84507,47.91121,42.84507,48.074,42.93731,48.15729,43.08903,48.24434,43.24042,48.2368,43.42524,48.14221,43.56928,43.03826,51.48342,48.51339,59.89987,48.60798,60.04759,48.61552,60.2324,48.52847,60.38379,48.44518,60.53485,48.28238,60.62742,48.10416,60.62742,48.10416,60.62742],segments:[1,2,4,2,2,4,2,4,4,2,2,4,4,2,4,2,2,4,2,4,4,2,2,4,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]}]}),ht.Default.setImage("editor.obj",{width:64,height:64,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],
segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[31.21904,47.49025,32.38182,48.81914,33.04627,50.64637,33.04627,52.80583,33.04627,54.96528,32.38182,56.79251,31.21904,58.12141,29.89014,59.4503,28.22903,60.28086,26.06957,60.28086,23.91012,60.28086,22.249,59.61642,20.9201,58.12141,19.75732,56.79251,19.09287,54.96528,19.09287,52.80583,19.09287,50.64637,19.59121,48.81914,20.9201,47.49025,22.08289,45.99524,23.91012,45.33079,26.06957,45.33079,28.22903,45.33079,30.05626,45.99524,31.21904,47.49025,22.58122,48.81914,21.75066,49.81582,21.41844,51.14471,21.41844,52.80583,21.41844,54.46695,21.75066,55.79584,22.58122,56.79251,23.41178,57.78919,24.57456,58.28752,26.06957,58.28752,27.56458,58.28752,28.72736,57.78919,29.55792,56.79251,30.38848,55.79584,30.7207,54.46695,30.7207,52.80583,30.7207,51.14471,30.22237,49.81582,29.55792,48.81914,28.72736,47.82247,27.56458,47.32414,26.06957,47.32414,24.57456,47.32414,23.41178,47.82247,22.58122,48.81914],segments:[1,4,4,4,4,4,4,4,4,5,1,4,4,4,4,4,4,4,4,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[41.68409,45.66302,43.01298,45.66302,44.17577,45.99524,45.00633,46.65969,45.83689,47.32414,46.16911,48.1547,46.16911,49.31748,46.16911,50.14804,46.003,50.81249,45.50466,51.31082,45.17244,51.80916,44.50799,52.30749,43.84354,52.47361,44.84021,52.63972,45.50466,52.97194,46.003,53.63639,46.50133,54.13472,46.66745,54.96528,46.66745,55.96195,46.66745,57.45696,46.16911,58.45363,45.17244,59.11808,44.34188,59.61642,43.1791,59.94864,41.68409,59.94864,35.20573,59.94864,35.20573,45.66302,41.68409,45.66302,37.36518,51.64305,41.18575,51.64305,42.18242,51.64305,42.84687,51.47693,43.34521,51.14471,43.84354,50.81249,44.00966,50.14804,44.00966,49.48359,44.00966,48.81914,43.84354,48.32081,43.34521,47.98858,42.84687,47.65636,42.18242,47.49025,41.18575,47.49025,37.36518,47.49025,37.36518,51.64305,37.36518,58.12141,41.35186,58.12141,42.34854,58.12141,43.01298,57.9553,43.51132,57.62307,44.17577,57.29085,44.50799,56.6264,44.50799,55.79584,44.50799,54.96528,44.17577,54.30084,43.67743,53.96861,43.1791,53.63639,42.34854,53.47028,41.35186,53.47028,37.19907,53.47028,37.19907,58.12141],segments:[1,4,4,4,4,4,4,4,4,2,2,2,5,1,2,4,4,4,4,2,2,5,1,2,4,4,4,4,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[56.80027,45.66302,56.80027,55.29751,56.80027,56.95863,56.46805,58.12141,55.8036,58.95197,54.97304,59.78253,53.81026,60.28086,52.14914,60.28086,50.65413,60.28086,49.65746,59.94864,48.99301,59.11808,48.16245,58.28752,47.83023,57.29085,47.83023,55.79584,47.83023,55.29751,49.98968,55.29751,49.98968,55.79584,49.98968,57.45696,50.65413,58.28752,52.14914,58.28752,52.9797,58.28752,53.64414,57.9553,53.97637,57.62307,54.30859,57.12474,54.4747,56.46029,54.4747,55.29751,54.4747,45.66302,56.80027,45.66302],segments:[1,2,4,4,4,4,2,2,2,4,4,4,2,2,5]}]}),ht.Default.setImage("editor.mtl",{width:64,height:64,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[21.55794,45.99697,26.66087,57.7337,26.66087,57.7337,31.7638,45.99697,34.31526,45.99697,34.31526,60.62536,32.10399,60.62536,32.10399,50.24941,32.10399,50.24941,27.68146,60.62536,25.81038,60.62536,21.38785,50.24941,21.38785,50.24941,21.38785,60.62536,19.00648,60.62536,19.00648,45.99697,21.55794,45.99697],segments:[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[48.09317,45.99697,48.09317,47.86804,43.16034,47.86804,43.16034,60.45527,40.94907,60.45527,40.94907,47.86804,36.01624,47.86804,36.01624,45.99697,48.09317,45.99697],segments:[1,2,2,2,2,2,2,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[52.00541,45.99697,52.00541,58.58419,60,58.58419,60,60.45527,49.79414,60.45527,49.79414,45.82687,52.00541,45.82687],segments:[1,2,2,2,2,2,2,5]}]}),ht.Default.setImage("editor.ttf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"shape",background:"#000000",points:[25.11617,60.62742,22.62692,60.62742,22.35788,60.62742,22.14196,60.41688,22.14196,60.15453,22.14196,42.84507,30.47192,42.84507,30.74096,42.84507,30.95688,43.05561,30.95688,43.31796,30.95688,45.40904,30.95688,45.67138,30.74096,45.88193,30.47192,45.88193,25.60148,45.88193,25.60148,60.1542,25.60148,60.41688,25.38522,60.62742,25.11617,60.62742,25.11617,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[17.50673,42.84507,22.657,42.84507,22.92604,42.84507,23.14196,43.05561,23.14196,43.31796,23.14196,45.40904,23.14196,45.67138,22.92604,45.88193,22.657,45.88193,17.50673,45.88193],segments:[1,2,4,2,4,2]}]}),ht.Default.setImage("editor.otf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"oval",borderWidth:3.3,borderColor:"rgb(0,0,0)",rect:[18.97543,44.76232,11.82189,13.94784]}]}),ht.Default.setImage("editor.sound",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[29.93506,40.65719,29.93506,52.11129,29.99768,52.17391,38.01482,58.31199,38.01482,53.06642,38.01482,39.70982,38.01482,34.45641,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,44.44257,36.03797,44.44257,36.03797,43.87107,35.70912,43.69881,34.9732,44.02766,34.40163,44.37211,33.84573,45.10803,33.65787,45.66393,33.99448,47.80131,35.26287,49.59417,37.09491,50.81553,39.2714,52.01338,41.37743,52.71019,43.80448,52.71019,46.38028,52.71019,48.95608,52.01338,51.38313,50.81553,53.48924,49.59417,55.65789,47.80131,57.49777,45.66393,58.77392,45.10803,59.1262,44.37211,58.93834,44.02766,58.35901,43.69881,57.79528,43.87107,57.05152,44.44257,56.7305,46.24326,55.65789,47.71518,54.13119,48.7486,52.32266,49.73508,50.57675,50.30665,48.55685,50.30665,46.38812,50.30665,44.23514,49.72724,42.19948,48.7486,40.46141,47.71518,38.63721,46.23542,37.10275,44.44257,36.03797,44.44257,36.03797,44.44257,36.03797,28.49449,40.89991,28.49449,40.89991,23.62472,40.89991,23.62472,51.86073,28.49449,51.86073,28.49449,40.89991,28.49449,40.89991,28.49449,40.89991,28.80767,38.51197,28.80767,38.51197,38.42189,31.14469,38.64118,30.96459,38.91517,30.86286,39.21267,30.86286,39.88597,30.86286,40.41052,31.38741,40.41052,32.05287,40.41052,39.70982,40.41052,39.97605,41.53008,40.43014,42.47745,41.16606,43.21337,42.09776,44.14506,43.28777,44.7088,44.76753,44.7088,46.38812,44.7088,48.00879,44.1529,49.50414,43.21337,50.67856,42.50096,51.61017,41.53008,52.33834,40.41052,52.80027,40.41052,53.07426,40.41052,60.72336,40.41052,60.99743,40.32439,61.24015,40.1678,61.45936,39.76073,61.97607,39.01698,62.07788,38.50019,61.67073,28.82334,54.25651,22.46606,54.25651,22.43471,54.25651,21.77708,54.25651,21.23686,53.72412,21.23686,53.06642,21.23686,39.73333,21.23686,39.70982,21.23686,39.04435,21.76924,38.51197,22.43471,38.51197,28.80767,38.51197,28.80767,38.51197,28.80767,38.51197,40.40269,41.5497,40.40269,41.5497,40.40269,51.21878,41.06823,50.85858,41.62405,50.37322,42.08598,49.79381,42.8219,48.86219,43.26039,47.6721,43.26039,46.38812,43.26039,45.11197,42.81414,43.92196,42.08598,42.98243,41.62405,42.39526,41.06039,41.90982,40.40269,41.5497,40.40269,41.5497,40.40269,41.5497],segments:[1,2,2,2,2,2,2,2,2,2,2,1,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,1,2,2,2,2,2,2,2,1,2,2,4,4,2,2,4,4,4,4,2,2,4,4,2,2,2,4,2,2,4,2,2,2,1,2,2,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.video",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[34.79567,39.50193,35.8771,39.50193,36.86394,39.06777,37.56645,38.36518,38.28485,37.63888,38.7269,36.65212,38.7269,35.57851,38.7269,34.497,38.28485,33.51024,37.56645,32.80765,36.86394,32.08933,35.86927,31.6472,34.79567,31.6472,33.70626,31.6472,32.7274,32.08933,32.0169,32.80765,31.30641,33.51024,30.86435,34.497,30.86435,35.57851,30.86435,36.65212,31.30641,37.63888,32.0169,38.36518,32.7274,39.05987,33.71416,39.50193,34.79567,39.50193,34.79567,39.50193,34.79567,39.50193,33.03527,33.81021,33.03527,33.81021,33.47733,33.36816,34.10098,33.08399,34.79567,33.08399,35.48246,33.08399,36.0982,33.36816,36.54816,33.81021,36.99022,34.26807,37.27438,34.88382,37.27438,35.57061,37.27438,36.2574,36.99022,36.87315,36.54816,37.33101,36.0982,37.76524,35.48246,38.0494,34.79567,38.0494,34.10098,38.0494,33.47733,37.76524,33.03527,37.33101,32.59314,36.87315,32.31687,36.2574,32.31687,35.57061,32.31687,34.88382,32.59314,34.27598,33.03527,33.81021,33.03527,33.81021,33.03527,33.81021,38.719,42.35963,38.719,42.35963,39.05848,43.38583,39.77688,44.19107,40.6768,44.64103,42.60298,45.61989,44.97913,44.84625,45.95008,42.92007,46.40794,42.02015,46.53422,40.94655,46.17901,39.92027,45.86323,38.89408,45.14484,38.08884,44.23702,37.63888,43.33711,37.18892,42.2714,37.06264,41.24513,37.40995,40.21894,37.74943,39.39789,38.46775,38.95583,39.35984,38.49007,40.25185,38.3796,41.32546,38.719,42.35963,38.719,42.35963,38.719,42.35963,40.24257,40.02292,40.24257,40.02292,40.53471,39.44669,41.04781,38.99665,41.68726,38.77563,42.33454,38.5704,43.02923,38.64144,43.58184,38.93351,44.15808,39.22558,44.60803,39.72295,44.82124,40.38604,45.03436,41.03339,44.96332,41.70438,44.67907,42.28851,44.06341,43.50428,42.55557,43.98577,41.33198,43.3543,40.77937,43.07005,40.30578,42.56486,40.10048,41.9175,39.87945,41.25442,39.9663,40.58343,40.24257,40.02292,40.24257,40.02292,40.24257,40.02292,40.13209,46.26716,40.13209,46.26716,39.16114,46.10935,38.09543,46.33828,37.21915,46.96976,36.34286,47.61711,35.80606,48.54073,35.65607,49.5354,35.65607,49.5354,35.50608,50.53006,35.71929,51.57996,36.35076,52.46415,36.98231,53.33245,37.89803,53.86926,38.89269,54.02714,38.9243,54.02714,41.04781,54.38235,43.08447,52.8904,43.42395,50.76689,43.42395,50.75899,43.56604,49.76433,43.34501,48.71435,42.71346,47.84604,42.06618,46.96976,41.14256,46.42505,40.13209,46.26716,40.13209,46.26716,40.13209,46.26716,39.14533,52.60623,39.14533,52.60623,39.12953,52.59833,38.49797,52.49568,37.91384,52.1641,37.51912,51.61157,37.1244,51.05896,36.97441,50.38798,37.07706,49.75642,37.17181,49.13278,37.51912,48.54073,38.07172,48.13021,38.62433,47.73549,39.30322,47.60131,39.93469,47.69606,40.55044,47.79081,41.15046,48.13021,41.5451,48.69072,41.94772,49.24333,42.08981,49.91431,41.98724,50.53796,41.77403,51.87993,40.4794,52.81936,39.14533,52.60623,39.14533,52.60623,39.14533,52.60623,49.24984,57.84791,49.24984,57.84791,41.37939,57.84791,46.82629,55.31388,50.46553,49.76433,50.46553,43.63056,50.46553,39.30453,48.70514,35.38909,45.86323,32.54719,43.03714,29.72109,39.12162,27.9607,34.79567,27.9607,26.1594,27.9607,19.12572,34.99437,19.12572,43.63056,19.12572,47.94079,20.88612,51.87993,23.71222,54.69813,26.54622,57.54003,30.46963,59.30043,34.79567,59.30043,35.20611,59.30043,35.29296,59.30043,49.24984,59.30043,49.64456,59.30043,49.96816,58.96893,49.96816,58.57421,49.96816,58.17158,49.64456,57.84791,49.24984,57.84791,49.24984,57.84791,49.24984,57.84791,34.79567,56.88485,34.79567,56.88485,31.13271,56.88485,27.81723,55.39282,25.42528,53.00087,23.01761,50.5853,21.54138,47.28553,21.54138,43.62266,21.54138,36.34425,27.51725,30.36837,34.79567,30.36837,38.45064,30.36837,41.77403,31.8525,44.15808,34.25227,46.56583,36.64422,48.04206,39.96769,48.04206,43.62266,48.04206,47.28553,46.55793,50.6011,44.16598,53.00087,41.68726,55.48757,38.30856,56.88485,34.79567,56.88485,34.79567,56.88485,34.79567,56.88485,28.91446,44.64103,28.91446,44.64103,29.80655,44.18317,30.54067,43.38583,30.86435,42.35173,31.19593,41.32546,31.08538,40.25976,30.63542,39.35984,29.67237,37.44156,27.25672,36.66002,25.35424,37.63888,23.42015,38.62564,22.64651,41.00178,23.62545,42.92007,24.07541,43.81998,24.88057,44.53838,25.90684,44.86206,26.94884,45.20146,28.02245,45.09889,28.91446,44.64103,28.91446,44.64103,28.91446,44.64103,26.3647,43.51211,26.3647,43.51211,25.71735,43.29108,25.20425,42.82532,24.91218,42.28069,24.29643,41.0492,24.79373,39.54136,26.00942,38.92561,27.22519,38.30986,28.73294,38.79143,29.34869,40.02292,29.63286,40.59134,29.7118,41.25442,29.50658,41.90178,29.28555,42.54905,28.81979,43.06215,28.27509,43.34639,27.69877,43.63056,27.01198,43.71741,26.3647,43.51211,26.3647,43.51211,26.3647,43.51211,29.44344,46.26716,29.44344,46.26716,27.31195,46.59874,25.85153,48.61178,26.17521,50.72738,26.17521,50.75899,26.33309,51.75365,26.8778,52.69308,27.73828,53.32455,28.59876,53.9561,29.66447,54.17713,30.62752,54.02714,30.66703,54.01924,32.80634,53.67194,34.25886,51.66681,33.92728,49.52749,33.60361,47.39609,31.58275,45.94356,29.44344,46.26716,29.44344,46.26716,29.44344,46.26716,32.50637,49.75642,32.50637,49.75642,32.7274,51.1063,31.80378,52.39303,30.44593,52.60623,30.4223,52.61413,29.79865,52.7009,29.13557,52.55091,28.59086,52.14837,28.04616,51.75365,27.69877,51.15371,27.5962,50.53006,27.5962,50.50635,27.3909,49.17229,28.33032,47.90128,29.66447,47.69606,31.00644,47.48293,32.29317,48.40655,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,37.44808,43.63056,37.44808,43.63056,37.44808,42.89644,37.1481,42.22537,36.67444,41.75171,36.18497,41.27022,35.52189,40.96235,34.79567,40.96235,34.06147,40.96235,33.39048,41.27022,32.90891,41.75171,32.43525,42.23328,32.14318,42.89644,32.14318,43.63056,32.14318,44.36469,32.43525,45.02785,32.90891,45.50933,33.39838,45.983,34.06147,46.28297,34.79567,46.28297,36.25609,46.28297,37.44808,45.08308,37.44808,43.63056,37.44808,43.63056,37.44808,43.63056,34.79567,44.83835,34.79567,44.83835,34.45619,44.83835,34.14831,44.71207,33.93519,44.49104,33.71416,44.28574,33.5878,43.96997,33.5878,43.63846,33.5878,43.31479,33.71416,42.99901,33.93519,42.77798,34.14831,42.56486,34.45619,42.42277,34.79567,42.42277,35.11927,42.42277,35.42714,42.55695,35.64817,42.77798,35.86927,42.99901,36.01136,43.31479,36.01136,43.63846,36.01136,44.30155,35.46665,44.83835,34.79567,44.83835,34.79567,44.83835,34.79567,44.83835],segments:[1,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,2,4,4,2,4,2,4,4,2,2,1,2,2,4,4,4,4,4,4,4,2,2,1,2,2,4,4,4,4,4,4,2,2,2,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.flipx",{width:16,height:16,comps:[{type:"shape",points:[8,1,8,14],segments:[1,2],borderWidth:1,borderColor:dv.config.color_dark},{type:"shape",points:[6,3,6,13,2,13],background:dv.config.color_dark},{type:"shape",points:[10,3,10,13,14,13],background:dv.config.color_select}]}),ht.Default.setImage("editor.flipy",{width:16,height:16,comps:[{type:"shape",points:[2,8,15,8],segments:[1,2],borderWidth:1,borderColor:dv.config.color_dark},{type:"shape",points:[3,6,13,6,3,2],background:dv.config.color_dark},{type:"shape",points:[3,10,13,10,3,14],background:dv.config.color_select}]}),ht.Default.setImage("editor.resetsize",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[8,1,8,6,6,3,8,1,10,3,8,10,8,15,6,13,8,15,10,13,1,8,6,8,3,6,1,8,3,10,10,8,15,8,13,6,15,8,13,10],segments:[1,2,1,2,2,1,2,1,2,2,1,2,1,2,2,1,2,1,2,2]}]}),ht.Default.setImage("editor.func",{width:16,height:16,comps:[{type:"border",rect:[0,0,16,16],width:1,color:"#E4E4E4"},{type:"text",rect:[0,0,16,16],text:"F",align:"center",color:"black"}]}),ht.Default.setImage("editor.comp",{fitSize:!0,comps:[{type:{func:function(P){return P.compType},isSafeFunc:!0}}]}),ht.Default.setImage("editor.oops",{width:128,height:128,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",background:"rgb(237,237,237)",borderColor:"#979797",points:[34.08079,87.52544,34.08079,87.52544,59.57908,97.75645,77.79215,90.58303,96.00522,83.40961,106.8249,68.87436,109.71641,51.69689,109.71641,51.69689,117.89865,74.48774,101.34821,87.52544,84.79777,100.56314,59.50721,102.27801,46.42474,94.29524],segments:[1,4,4,4,4]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,36.49467,28.49791,18.12387]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,36.49467,28.49791,18.12387]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",points:[39.9814,51.13901,39.9814,51.13901,32.00842,57.90113,30.56723,66.4088,29.12604,74.91647,34.21664,85.16969,34.21664,85.16969,39.0516,89.44677,39.0516,89.44677,36.05169,79.68945,37.3999,70.48443,38.74811,61.27941,44.44444,52.62669,44.44444,52.62669,39.9814,51.13901,39.9814,51.13901],segments:[1,4,4,2,4,4,2,2]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",scaleX:-1,points:[97.67259,49.56003,97.67259,49.56003,89.6996,57.90113,88.25841,66.4088,86.81722,74.91647,91.8398,85.99598,91.8398,85.99598,96.74279,89.44677,96.74279,89.44677,93.74288,79.68945,95.09109,70.48443,96.4393,61.27941,102.44264,50.50641,102.44264,50.50641,97.67259,49.56003],segments:[1,4,4,2,4,4,2]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[59.61377,32.055,59.61377,32.055,61.61221,36.91182,59.19747,38.71578,56.78274,40.51974,34.08079,42.18493,34.08079,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[94.48806,32.055,94.48806,32.055,96.4865,36.91182,94.07177,38.71578,91.65703,40.51974,68.95508,42.18493,68.95508,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[67.02409,33.58143,67.02409,33.58143,64.9426,37.74441,67.02409,39.68714],segments:[1,4]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,40.07324,28.49791,11.89121]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,40.07323,28.49791,11.89121]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[60.89581,46.6003,56.70566,57.66949,39.6779,55.58118,39.6779,55.58118],segments:[1,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[90.173,46.6003,85.98284,57.66949,68.95508,55.58118,68.95508,55.58118],segments:[1,4]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[40.88134,45.66533,40.88134,50.44931,49.68823,51.31913,49.03586,45.66533,40.99007,45.5566]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[78.31735,45.66533,78.31735,50.44931,87.12423,51.31913,86.47187,45.66533,78.42607,45.5566]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[36.81151,80.08117,46.71402,84.60188,54.03326,76.42155,61.35251,85.46297,73.83828,76.20628,86.96987,83.95607,93.85858,76.85209,99.24038,80.08117]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",points:[95.58345,31.98512,95.58345,31.98512,104.33563,25.53184,105.97087,18.7394,107.6061,11.94695,113.65647,33.63444,105.97087,42.39888],segments:[1,4,4]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[44.41276,23.77714,38.68944,23.77714,33.30496,20.23699,28.88983,14.5401,24.47469,8.84321,22.55729,35.68983,32.04166,40.72938],segments:[1,4,4]},{type:"oval",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[93.19422,30.5138,93.19422,30.5138,96.32695,28.82985,99.04364,25.51534,100.63358,23.57553,102.08422,21.24706,102.68792,18.7394,104.32316,11.94695,112.13179,31.92062,104.44618,40.68506],segments:[1,4,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[40.62881,26.14647,34.90549,26.14647,32.31798,22.75803,27.90285,17.06114,23.48771,11.36426,18.41848,35.24736,27.90285,40.28692],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[91.52207,49.98659,1.67215,3.35736]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[39.44815,49.46033,2.86639,3.35736]}]}),ht.Default.setImage("editor.block",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15,14.5,1,14.5,1,1.50001,7,1.50001,8,3.50001,15,3.50001,15,14.5]},{type:"rect",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[5.5,7.22625,6,5]},{type:"circle",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[2.5,4.72625,6,5]}]}),ht.Default.setImage("editor.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.82964,11.54111,13.17036,11.54111,13.17036,13.12467,13.17036,5.20688,2.82964,5.20688,2.82964,13.12467,13.17036,13.12467,7.26137,13.12467,5.78413,15.5,10.21588,15.5,8.84426,13.12467,13.17036,13.12467,13.17036,11.54111]}]}),ht.Default.setImage("editor.subgraph",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[4.90316,8.05737,4.90316,8.05737,4.30121,6.50546,5.25104,5.82166,6.20086,5.13787,7.09165,5.82166,7.09165,5.82166,7.09165,5.82166,7.76857,4.36921,9.6391,4.91013,11.50964,5.45106,11.09684,8.05737,11.09684,8.05737,11.09684,8.05737,12.482,8.53031,12.482,9.79106,12.482,10.86629,11.67411,11.63079,11.09684,11.63079,4.90316,11.63079,4.31315,11.63079,3.518,10.84732,3.518,9.79106,3.518,8.56402,4.90316,8.05737,4.90316,8.05737],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[13,13.5,8.02409,13.5,8,9,8.02409,13.5,3,13.5]}]}),ht.Default.setImage("editor.restore",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.add",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",rotation:3.14159,points:[9.47991,2.5,13.48953,7.4,9.47991,7.4,9.47991,2.5,2.48953,2.5,2.48953,13.5,13.48953,13.5,13.48953,7.4]}]}),ht.Default.setImage("editor.delete",{background:"rgb(89,89,89)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[5.5,5.57173,5.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.05685,5.57173,8.05685,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[10.5,5.57173,10.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,3.18902,15,3.16996,5.32652,3.16021,6.32652,1.16021,9.32652,1.16021,10.32652,3.16021]},{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[3.33333,3.18902,9.33334,11.65078]}]}),ht.Default.setImage("editor.import",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"triangle",borderColor:"rgb(255,255,255)",borderWidth:1,rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.top",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.86035,6.44002,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,4.58061,13.85824,4.51881]}]}),ht.Default.setImage("editor.up",{background:"rgb(145,145,145)",
width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.89924,6.05159,8.20153,8.2581]}]}),ht.Default.setImage("editor.down",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.89924,.69031,8.20153,8.2581]}]}),ht.Default.setImage("editor.bottom",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.93812,.69031,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,10.85024,13.85824,10.78844]}]}),ht.Default.setImage("editor.menu",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.93729,4,14.93729,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,8,15.06271,8]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,12,15.06271,12]}]}),ht.Default.setImage("editor.undo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.redo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",scaleX:-1,points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.edit",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(51,153,255)",shadowColor:"#1ABC9C",rotation:5.49779,closePath:!0,points:[6,-.83884,.5,13.16116,6.04966,10.58206,11.5,13.16116,6,-.83884]}]}),ht.Default.setImage("editor.rulers",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[1.50517,1.5,1.5,4.49799,2.47337,4.49798,1.5,4.49799,1.50003,14.5,11.23413,14.48019,11.23413,13.48171,11.23413,14.47896,14.5,14.47897,4.00002,14.47899,4.00001,12.00001,1.50521,12.00002]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14,6,14,14,6,14]}]}),ht.Default.setImage("editor.grid",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.49468,1.49999,4.5,14.49999,4.49468,11.53541,1.5,11.51432,14.5,11.51432,11.52105,11.53541,11.52105,14.49999,11.52105,1.49999,11.5,4.50429,14.5,4.50429,1.5,4.50429]}]}),ht.Default.setImage("editor.save",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[3.66183,14.5,14.5,14.5,14.5,4.83454,10.71984,1.5,3.66183,1.5,3.66183,6.18654,10.71984,6.18654,10.71984,1.5,1.5,1.5,1.5,14.5,3.66183,14.5,3.66183,9.03168,12.17213,9.03168,12.17213,14.5]}]}),ht.Default.setImage("editor.preview",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[1.9869,6.489,2,2,14,8,1.9869,14,2,9.555]}]}),ht.Default.setImage("editor.reload",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.zoomout",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8]}]}),ht.Default.setImage("editor.zoomin",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8,8,2,8,14],segments:[1,2,1,2]}]}),ht.Default.setImage("editor.zoomtofit",{background:"rgb(179,179,179)",gridLightColor:"rgba(0,0,0,0.20)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.00001,11.91764,8.00001,15]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-1.5708,rect:[9.75,7.24608,2,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-1.5708,points:[13.516,6.484,13.516,9.51599]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-3.14159,points:[8.00001,.99999,8.00001,4.08236]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[2.516,6.4801,2.516,9.51209]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[4.25,7.24608,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:3.14159,rect:[7.00001,4.5,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:6.28319,rect:[7,10,2,1.5]}]}),ht.Default.setImage("editor.toggleleft",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[3.49001,5.50001,3.51001,10.49999]}]}),ht.Default.setImage("editor.toggleboth",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.toggleright",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[12.49999,5.50001,12.51999,10.49999]}]}),ht.Default.setImage("editor.layout.helper",ht.Default.parse(JSON.stringify({modified:"Mon Oct 29 2018 09:55:40 GMT+0800 (\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4)",dataBindings:[{attr:"selectColor",valueType:"Color",defaultValue:"#60ACFC"},{attr:"layout.h",valueType:"String"},{attr:"layout.v",valueType:"String"}],width:100,height:100,interactive:!0,disableSelectedBorder:!0,pixelPerfect:!1,comps:[{type:"rect",borderColor:"#979797",displayName:"\u5de6\u4fa7\u4ea4\u4e92",rect:[5.51795,27.5,20.9641,44.5],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'left');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u53f3\u4fa7\u4ea4\u4e92",rect:[74.0359,27.5,20.9641,45],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'right');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0a\u4fa7\u4ea4\u4e92",rect:[27.5,6,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'top');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0b\u4fa7\u4ea4\u4e92",rect:[27.5,74,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'bottom');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[28.22051,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[55.77949,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,28,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,56,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",rect:[5,5,90,90]},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",borderPattern:[6,6],rect:[27.5,27.5,45,45]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'left' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D4D4D4"},borderColor:"#979797",rect:[8,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'right' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[76,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[34,48,32,4],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'bottom' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,76,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'top' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,8,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,34,4,32],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nif (data.a('layout.h') === 'center' || data.a('layout.v')  === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,48,4,4]}]}))),ht.Default.setImage("editor.attachPoint",{width:10,height:10,boundExtend:1,comps:[{type:"shape",borderWidth:1,background:{func:"attr@selectColor",value:"rgb(51,153,255)"},borderColor:{func:"attr@selectColor",value:"rgb(51,153,255)"},closePath:!0,points:[5,0,0,5,5,10,10,5]}]}),ht.Default.setImage("editor.display.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.display.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.display.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.display.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.display.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.display.node",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.5,9.38462,14.5,9.38462,14.5,11.23077,14.5,2,1.5,2,1.5,11.23077,14.5,11.23077,7.07143,11.23077,5,15,11,15,8.92857,11.23077]}]}),ht.Default.setImage("editor.display.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[13,12.5,13,10.54,3,10.54,13,10.54,13,5.5,3,5.5,3,12.5,13,12.5,7,12.5,5.85714,15.5,10.14287,15.5,9,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8,2.19286,15.5,2.19286,15.5,15.5]}]}),ht.Default.setImage("editor.display.edge",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[.69044,.97071,4,4.00837]},{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[11.27696,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[4.35933,3.02819,7.84441,2.9749,7.84441,12.99581,11.64067,12.99581]}]}),ht.Default.setImage("editor.display.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.display.subgraph",{gridThickColor:"rgb(191,191,191)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(207,207,207)",visible:!1,closePath:!0,points:[2.81788,9.09381,2.81788,9.09381,1.38027,6.92868,3.20223,5.43826,5.02418,3.94784,6.51488,5.43826,6.51488,5.43826,6.51488,5.43826,7.61273,3.06338,10.74281,3.94784,13.87289,4.8323,13.18212,9.09381,13.18212,9.09381,13.18212,9.09381,15.5,9.8671,15.5,11.92851,15.5,13.6866,14.14811,14.93662,13.18212,14.93662,2.81788,14.93662,1.83057,14.93662,.5,13.65558,.5,11.92851,.5,9.92221,2.81788,9.09381,2.81788,9.09381],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[4.99379,5.52777,6,4.47223]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",visible:!1,shadowColor:"#1ABC9C",rect:[4,6.43826,2,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.15905,arcTo:5.5676,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[2.5,3.11794,5,5]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.57792,arcTo:6.6497,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[5.63862,1.53868,9.36138,7.15852]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:1.5708,arcTo:3.87463,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[-1,6.56338,8.99379,5.93662]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:5.00909,arcTo:1.5708,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[8.00621,6.56338,8.99379,5.93662]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",visible:!1,points:[3.4969,12.5,12.5031,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[9.72,12.5,8,10,6.34,12.5]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",displayName:"\u5706\u5f62",rect:[0,0,2,2]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[15,15.5,8.02409,15.5,8.02409,14,8.02409,15.5,1,15.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[2.81167,6.59481,2.81167,6.59481,1.80439,4.03022,3.39379,2.90023,4.98319,1.77025,6.47379,2.90023,6.47379,2.90023,6.47379,2.90023,7.60652,.5,10.7366,1.3939,13.86668,2.28781,13.17591,6.59481,13.17591,6.59481,13.17591,6.59481,15.49379,7.37636,15.49379,9.45978,15.49379,11.23663,14.1419,12.5,13.17591,12.5,2.81167,12.5,1.82436,12.5,.49379,11.20528,.49379,9.45978,.49379,7.43206,2.81167,6.59481,2.81167,6.59481],segments:[1,4,4,4,4,4,4,2,4,4]}]}),ht.Default.setImage("editor.symbol.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.symbol.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.symbol.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.symbol.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.symbol.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.image",{background:"rgb(156,156,156)",width:16,height:16,comps:[{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",rect:[.5,1.96,15,12]},{type:"circle",background:"rgb(255,255,255)",borderColor:"rgb(255,255,255)",rect:[3.32103,4.48721,1.5,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[2.18757,9.112,6.11684,9.112,7.77072,10.39241,9.50807,13.68975,9.69338,14.04145,9.04982,12.34611,7.45717,10.69236,7.45717,10.69236,8.72728,5.98721,14.05092,5.98721],segments:[1,4,4,4]}]}),ht.Default.setImage("editor.symbol.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.symbol.border",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[.5,6.01503,.5,2,15.48868,2,15.5,14,.5,14,.5,10]}]}),ht.Default.setImage("editor.symbol.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.symbol.piechart",{background:"rgb(97,97,97)",width:16,height:16,comps:[{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:.5236,arcTo:4.71239,rect:[.53628,2.06928,13.08634,13.08634]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:4.71239,arcTo:.5236,rect:[2.37737,1,13.08634,13.08634]}]}),ht.Default.setImage("editor.symbol.onedimensionalcolumnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[3.42625,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[10.00543,1,3,14]}]}),ht.Default.setImage("editor.symbol.columnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[1,9,3,6]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[4,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[9,1,3,14]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[12,10.93747,3,4.06253]}]}),ht.Default.setImage("editor.symbol.linechart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[1,14,5,7,11,8,15,2]}]}),ht.Default.setImage("editor.point.mirrored",{width:30,height:30,fitSize:!1,comps:[{type:"arc",background:"rgb(202,235,248)",borderWidth:2,borderColor:"rgb(17,158,216)",arcClose:!1,rect:[3.5,10.30081203536023,23,25.3726296254234]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.300812035360231,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[17.842265898626422,9.310233818119592,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.713262902082427,8.310233818119592,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.4018068742542837,9.30081203536023,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.286737097917573,8.310233818119592,3,4]}]}),ht.Default.setImage("editor.point.straight",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[26.974999999999998,23.185840967335317,15.133692185007973,10.275109094255685,3.0250000000000004,23.185840967335317]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.561327956066684,6,6]}]}),ht.Default.setImage("editor.point.disconnected",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.1940148593724587,22.95774078992803,3.1940148593724587,18.139874123261343,7.6015038461565965,10.497740789928038,14.542032480517832,10.497740789928038,26.80598514062754,22.95774078992803],segments:[1,4,2]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12.093814401372779,7.5391087731804305,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[16.36973009802768,14.555043156001322,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[22.831111406474626,16.51363217953681,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.2671011430070465,9.53910877318043,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.152031366670336,8.548530555939791,3,4]}]}),ht.Default.setImage("editor.point.asymmetric",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.5000000000000027,22.974997694265234,3.5000000000000027,17.50768540873153,5.131816608669447,11.637417102180905,12.400695544362113,11.637417102180905,22.516641067164265,11.637417102180905,26.5,22.974997694265234,26.5,22.974997694265234],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[9.324670579660944,7.637417102180905,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[3.405482351035767,9.637417102180905,6.540642002660807,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.7221578598514142,8.637417102180905,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[15.278596259040164,9.637417102180905,11.965262549245955,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.731262324024406,8.637417102180905,3,4]}]}),ht.Default.setImage("editor.layout.circular",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,3,3,8,5,13,11,13,13,8],segments:[1,2,2,2,2,5]}]}),ht.Default.setImage("editor.layout.symmetric",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderWidth:1,borderColor:"white",points:[8,8,8,3,8,8,3,8,8,8,5,13,8,8,11,13,8,8,13,8],segments:[1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.hierarchical",{width:16,height:16,comps:[{type:"shape",background:"white",points:[4,3,4,5,6,5,6,3,10,3,10,5,12,5,12,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[5,4,2,12,5,4,8,12,5,4,14,12,11,4,2,12,11,4,8,12,11,4,14,12],segments:[1,2,1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardnorth",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,3,7,5,9,5,9,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,4,2,12,8,4,8,12,8,4,14,12],segments:[1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardsouth",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardeast",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*-Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardwest",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.align.distributehorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14,14,2,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return dv.config.color_dark}}},{type:"shape",points:[8,5,8,11],borderWidth:3,borderCap:"round",borderColor:{func:function(){return dv.config.color_select}}}]}),ht.Default.setImage("editor.align.distributevertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2,2,14,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return dv.config.color_dark}}},{type:"shape",points:[5,8,11,8],borderWidth:3,borderCap:"round",borderColor:{func:function(){return dv.config.color_select}}}]}),ht.Default.setImage("editor.align.alignleft",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return dv.config.color_dark}}},{type:"shape",points:[5,5,13,5,5,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return dv.config.color_select}}}]}),ht.Default.setImage("editor.align.alignhorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[8,2,8,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return dv.config.color_dark}}},{type:"shape",points:[3,5,13,5,6,11,10,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return dv.config.color_select}}}]}),ht.Default.setImage("editor.align.alignright",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[14,2,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return dv.config.color_dark}}},{type:"shape",points:[3,5,11,5,11,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return dv.config.color_select}}}]}),ht.Default.setImage("editor.align.aligntop",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return dv.config.color_dark}}},{type:"shape",points:[5,5,5,13,11,5,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return dv.config.color_select}}}]}),ht.Default.setImage("editor.align.alignvertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,8,14,8],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return dv.config.color_dark}}},{type:"shape",points:[5,3,5,13,11,6,11,10],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return dv.config.color_select}}}]}),ht.Default.setImage("editor.align.alignbottom",{
background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,14,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return dv.config.color_dark}}},{type:"shape",points:[5,3,5,11,11,11,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return dv.config.color_select}}}]});var Lr=function(){return!0};pP("editor.layout.circular"),pP("editor.layout.symmetric"),pP("editor.layout.hierarchical"),pP("editor.layout.towardnorth"),pP("editor.layout.towardsouth"),pP("editor.layout.towardeast"),pP("editor.layout.towardwest"),pP("editor.root"),pP("editor.bind",Lr),pP("editor.unbind"),pP("editor.dir"),pP("editor.dxf"),pP("editor.obj"),pP("editor.mtl"),pP("editor.ttf"),pP("editor.otf"),pP("editor.sound"),pP("editor.video"),pP("editor.resetsize"),pP("editor.restore"),ht.Data.prototype.$50$=ov,ht.Data.prototype.$51$=function(P){return this._refGraph?[]:[Yv.call(this,P),Uv]},ht.Node.prototype.$50$=Ev,ht.Node.prototype.$51$=function(P){return this._refGraph?[]:[xv.call(this,P),Nv]},ht.Edge.prototype.$50$=fv,ht.Edge.prototype.$51$=function(P){return this._refGraph?[]:[sv.call(this,P),Wv]},ht.Group.prototype.$51$=function(P){return this._refGraph?[]:[Gv.call(this,P),tv]},ht.Shape.prototype.$51$=function(P){return this._refGraph?[]:[Lv.call(this,P),Ov]},ht.Block.prototype.$51$=function(P){return this._refGraph?[]:[Qv.call(this,P),qv]},ht.RefGraph.prototype.$51$=function(P){return this._refGraph?[]:[Zv.call(this,P),Sv]};var Or=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.parse(r,m,H),I}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype."+this.s("shape").toLowerCase())},v.prototype.parse=function(P,v,r){P&&(bP(this,"shape",P.type,"rect"),bP(this,"shape.background",P.background,null),bP(this,"shape.repeat.image",P.repeatImage),bP(this,"shape.border.width",P.borderWidth),bP(this,"shape.border.color",P.borderColor,null),bP(this,"shape.border.3d",P.border3d),bP(this,"shape.border.3d.color",P.border3dColor),bP(this,"shape.border.3d.accuracy",P.border3dAccuracy),bP(this,"shape.border.cap",P.borderCap),bP(this,"shape.border.join",P.borderJoin),bP(this,"shape.border.pattern",P.borderPattern),bP(this,"shape.gradient",P.gradient),bP(this,"shape.gradient.color",P.gradientColor),bP(this,"shape.dash",P.dash),bP(this,"shape.dash.pattern",P.dashPattern),bP(this,"shape.dash.offset",P.dashOffset),bP(this,"shape.dash.color",P.dashColor),bP(this,"shape.dash.width",P.dashWidth),bP(this,"shape.dash.3d",P.dash3d),bP(this,"shape.dash.3d.color",P.dash3dColor),bP(this,"shape.dash.3d.accuracy",P.dash3dAccuracy),bP(this,"shape.border.width.absolute",P.borderWidthAbsolute),bP(this,"shape.fill.clip.direction",P.fillClipDiretion),bP(this,"shape.fill.clip.percentage",P.fillClipPercentage),"rect"===this.compType?bP(this,"shape.depth",P.depth):"roundRect"===this.compType?bP(this,"shape.corner.radius",P.cornerRadius):"polygon"===this.compType?bP(this,"shape.polygon.side",P.polygonSide):"arc"===this.compType&&(bP(this,"shape.arc.from",P.arcFrom),bP(this,"shape.arc.to",P.arcTo),bP(this,"shape.arc.close",P.arcClose),bP(this,"shape.arc.oval",P.arcOval)),KP(this,P,v,r))},v.prototype.toJSON=function(){var P={};return uP(this,P,"shape","type",void 0),uP(this,P,"shape.background","background",null),uP(this,P,"shape.repeat.image","repeatImage"),uP(this,P,"shape.border.width","borderWidth"),uP(this,P,"shape.border.color","borderColor",null),uP(this,P,"shape.border.3d","border3d"),uP(this,P,"shape.border.3d.color","border3dColor"),uP(this,P,"shape.border.3d.accuracy","border3dAccuracy"),uP(this,P,"shape.border.cap","borderCap"),uP(this,P,"shape.border.join","borderJoin"),uP(this,P,"shape.border.pattern","borderPattern"),uP(this,P,"shape.gradient","gradient"),uP(this,P,"shape.gradient.color","gradientColor"),uP(this,P,"shape.dash","dash"),uP(this,P,"shape.dash.pattern","dashPattern"),uP(this,P,"shape.dash.offset","dashOffset"),uP(this,P,"shape.dash.color","dashColor"),uP(this,P,"shape.dash.width","dashWidth"),uP(this,P,"shape.dash.3d","dash3d"),uP(this,P,"shape.dash.3d.color","dash3dColor"),uP(this,P,"shape.dash.3d.accuracy","dash3dAccuracy"),uP(this,P,"shape.border.width.absolute","borderWidthAbsolute"),uP(this,P,"shape.fill.clip.direction","fillClipDirection"),uP(this,P,"shape.fill.clip.percentage","fillClipPercentage"),"rect"===this.compType?uP(this,P,"shape.depth","depth"):"roundRect"===this.compType?uP(this,P,"shape.corner.radius","cornerRadius"):"polygon"===this.compType?uP(this,P,"shape.polygon.side","polygonSide"):"arc"===this.compType&&(uP(this,P,"shape.arc.from","arcFrom"),uP(this,P,"shape.arc.to","arcTo"),uP(this,P,"shape.arc.close","arcClose"),uP(this,P,"shape.arc.oval","arcOval")),jP(this,P),P},ev(v,[{key:"compType",get:function(){return this.s("shape")}}]),v}(ht.Node),Qr=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.parse(r,m,H),I}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.shape")},v.prototype.parse=function(P,v,r){P&&(bP(this,"type",P.type,"shape"),bP(this,"shape.background",P.background,null),bP(this,"shape.repeat.image",P.repeatImage),bP(this,"shape.border.width",P.borderWidth),bP(this,"shape.border.color",P.borderColor,null),bP(this,"shape.border.3d",P.border3d),bP(this,"shape.border.3d.color",P.border3dColor),bP(this,"shape.border.3d.accuracy",P.border3dAccuracy),bP(this,"shape.border.cap",P.borderCap),bP(this,"shape.border.join",P.borderJoin),bP(this,"shape.border.pattern",P.borderPattern),bP(this,"shape.gradient",P.gradient),bP(this,"shape.gradient.color",P.gradientColor),bP(this,"shape.dash",P.dash),bP(this,"shape.dash.pattern",P.dashPattern),bP(this,"shape.dash.offset",P.dashOffset),bP(this,"shape.dash.color",P.dashColor),bP(this,"shape.dash.width",P.dashWidth),bP(this,"shape.dash.3d",P.dash3d),bP(this,"shape.dash.3d.color",P.dash3dColor),bP(this,"shape.dash.3d.accuracy",P.dash3dAccuracy),bP(this,"shape.fill.rule",P.fillRule),bP(this,"shape.fill.clip.direction",P.fillClipDiretion),bP(this,"shape.fill.clip.percentage",P.fillClipPercentage),bP(this,"shape.gradient.pack",P.gradientPack),bP(this,"shape.border.width.absolute",P.borderWidthAbsolute),KP(this,P,v,r),$P(this,P),this.setPoints(cP(_P(P.points))),this.setSegments(_P(P.segments)))},v.prototype.toJSON=function(){var P={};if(uP(this,P,"type","type",void 0),uP(this,P,"shape.background","background",null),uP(this,P,"shape.repeat.image","repeatImage"),uP(this,P,"shape.border.width","borderWidth"),uP(this,P,"shape.border.color","borderColor",null),uP(this,P,"shape.border.3d","border3d"),uP(this,P,"shape.border.3d.color","border3dColor"),uP(this,P,"shape.border.3d.accuracy","border3dAccuracy"),uP(this,P,"shape.border.cap","borderCap"),uP(this,P,"shape.border.join","borderJoin"),uP(this,P,"shape.border.pattern","borderPattern"),uP(this,P,"shape.gradient","gradient"),uP(this,P,"shape.gradient.color","gradientColor"),uP(this,P,"shape.dash","dash"),uP(this,P,"shape.dash.pattern","dashPattern"),uP(this,P,"shape.dash.offset","dashOffset"),uP(this,P,"shape.dash.color","dashColor"),uP(this,P,"shape.dash.width","dashWidth"),uP(this,P,"shape.dash.3d","dash3d"),uP(this,P,"shape.dash.3d.color","dash3dColor"),uP(this,P,"shape.dash.3d.accuracy","dash3dAccuracy"),uP(this,P,"shape.fill.rule","fillRule"),uP(this,P,"shape.fill.clip.direction","fillClipDirection"),uP(this,P,"shape.fill.clip.percentage","fillClipPercentage"),uP(this,P,"shape.gradient.pack","gradientPack"),uP(this,P,"shape.border.width.absolute","borderWidthAbsolute"),jP(this,P),CP(this,P),JP(P,"points",this.a("points"),hP(this.getPoints())),this.getSegments()){var v=this.getSegments().toArray();if(v.length){var r=1===v[0];if(r)for(var m=1;m<v.length;m++)if(2!==v[m]){r=!1;break}r||JP(P,"segments",this.a("segments"),v)}}return P},ev(v,[{key:"compType",get:function(){return this.s("type")}}]),v}(ht.Shape),qr=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.parse(r,m,H),I}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){if(this.getDisplayName())return this.getDisplayName();var P=this.s("image");return P&&P.length<100?P:H("editor.comptype.image")},v.prototype.onStyleChanged=function(v,r,m){P.prototype.onStyleChanged.call(this,v,r,m),"image"===v&&this.setImage(m)},v.prototype.parse=function(P,v,r){P&&(bP(this,"type",P.type,"image"),bP(this,"body.color",P.color),bP(this,"image.stretch",P.stretch),bP(this,"image",P.name,"node_image"),KP(this,P,v,r))},v.prototype.toJSON=function(){var P={};return uP(this,P,"type","type",void 0),uP(this,P,"body.color","color"),uP(this,P,"image.stretch","stretch"),uP(this,P,"image","name"),jP(this,P),P},ev(v,[{key:"compType",get:function(){return this.s("type")}}]),v}(ht.Node),Zr=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.parse(r,m,H),I}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){return this.getDisplayName()||this.s("text")||H("editor.comptype.text")},v.prototype.parse=function(P,v,r){P&&(bP(this,"type",P.type,"text"),bP(this,"text",P.text),bP(this,"text.align",P.align),bP(this,"text.vAlign",P.vAlign),bP(this,"text.color",P.color),bP(this,"text.font",P.font),bP(this,"text.shadow",P.shadow),bP(this,"text.shadow.color",P.shadowColor),bP(this,"text.shadow.blur",P.shadowBlur),bP(this,"text.shadow.offset.x",P.shadowOffsetX),bP(this,"text.shadow.offset.y",P.shadowOffsetY),KP(this,P,v,r))},v.prototype.toJSON=function(){var P={};return uP(this,P,"type","type",void 0),uP(this,P,"text","text"),uP(this,P,"text.align","align"),uP(this,P,"text.vAlign","vAlign"),uP(this,P,"text.color","color"),uP(this,P,"text.font","font"),uP(this,P,"text.shadow","shadow"),uP(this,P,"text.shadow.color","shadowColor"),uP(this,P,"text.shadow.blur","shadowBlur"),uP(this,P,"text.shadow.offset.x","shadowOffsetX"),uP(this,P,"text.shadow.offset.y","shadowOffsetY"),jP(this,P),P},ev(v,[{key:"compType",get:function(){return this.s("type")}}]),v}(ht.Text),Sr=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.s({"shape.border.color":"red","shape.border.width":1,"shape.background":null}),I.parse(r,m,H),I.setClosePath(!0),I}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.clip")},v.prototype.parse=function(P,v,r){P&&(bP(this,"type",P.type,"clip"),KP(this,P,v,r),this.setPoints(cP(_P(P.points))),this.setSegments(_P(P.segments)))},v.prototype.toJSON=function(){var P={};if(uP(this,P,"type","type",void 0),jP(this,P),JP(P,"points",this.a("points"),hP(this.getPoints())),this.getSegments()){var v=this.getSegments().toArray();if(v.length){var r=1===v[0];if(r)for(var m=1;m<v.length;m++)if(2!==v[m]){r=!1;break}r||JP(P,"segments",this.a("segments"),v)}}return P},ev(v,[{key:"compType",get:function(){return this.s("type")}}]),v}(ht.Shape),Cr=function(P){function v(r,m,H){return hv(this,v),Rv(this,P.call(this))}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.restore")},v.prototype.parse=function(P,v,r){P&&(bP(this,"type",P.type,"restore"),KP(this,P,v,r))},v.prototype.toJSON=function(){var P={};return uP(this,P,"type","type",void 0),jP(this,P),P},ev(v,[{key:"compType",get:function(){return this.s("type")}}]),v}(ht.Node),ur=function(P){function v(){return hv(this,v),Rv(this,P.call(this))}return Dv(v,P),v}(ht.widget.BorderPane),gr=function(P){function v(r){return hv(this,v),Rv(this,P.call(this,r))}return Dv(v,P),v}(ht.widget.ContextMenu),nr=function(P){function v(r){return hv(this,v),Rv(this,P.call(this,r))}return Dv(v,P),v.prototype.invalidateAll=function(v,r){if("imageLoading"!==r)return"imageLoaded"===r?(this.fpImageLoaded=!0,this.dm().each(function(P){P.fp("imageLoaded",!1,!0)}),void(this.fpImageLoaded=!1)):void P.prototype.invalidateAll.call(this,v,r)},v.prototype.adjustZoom=function(P){return P>dv.config.maxZoom?dv.config.maxZoom:P<dv.config.minZoom?dv.config.minZoom:P},v.prototype.getUnionNodeRect=function(P){var v=this,r=void 0;return P=P._as||P,P.forEach(function(P){P instanceof ht.Node&&(r=z(r,v.getNodeRect(P)))}),r},v.prototype.$64$=function(P){this.validate();var v=this.getViewRect(),r=this.getUnionNodeRect(P);if(!v||!r||ht.Default.intersectsRect(v,r))return null;var m=v.x+v.width/2-r.x-r.width/2,H=v.y+v.height/2-r.y-r.height/2;return this.moveDatas(P,m,H),{x:m,y:H}},v.prototype.getFullscreenDatas=function(){return null},v}(ht.graph.GraphView),Jr=function(P){function v(r){return hv(this,v),Rv(this,P.call(this,r))}return Dv(v,P),v}(ht.widget.ListView),Kr=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this,r));return m.getView().style.background=dv.config.color_pane_dark,m.setMaskBackground(null),m.setContentBorderColor(null),m.setContentBackground("white"),m.getMask().style.border=dv.config.color_select+" solid 1px",m}return Dv(v,P),v}(ht.graph.Overview),jr=function(P){function v(r,m,H,I){hv(this,v);var Y=Rv(this,P.call(this,r,m,H,I));return Y.setTogglable(!1),Y}return Dv(v,P),v}(ht.widget.SplitView),br=function(P){function v(r){return hv(this,v),Rv(this,P.call(this,r))}return Dv(v,P),v}(ht.widget.TablePane),kr=function(P){function v(){return hv(this,v),Rv(this,P.call(this))}return Dv(v,P),v.prototype.add=function(v,r,m){var H=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],I=P.prototype.add.call(this,v,r,m);return I.setVisible(H),I},v}(ht.widget.TabView),Mr=function(P){function v(r){return hv(this,v),Rv(this,P.call(this,r))}return Dv(v,P),v}(ht.widget.Toolbar),ar=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this,r));return m.setDoubleClickToToggle(!1),m}return Dv(v,P),v.prototype.getToggleIcon=function(P){if(this._loader&&!this._loader.isLoaded(P))return this._collapseIcon;var v=P.getChildren(),r=v.size();if(r){for(var m=!1,H=0;H<r;H++)if(this.isVisible(v.get(H))){m=!0;break}if(m)return this.isExpanded(P)?this._expandIcon:this._collapseIcon}},v.prototype.hasExpandedChild=function(P){if(!this.isExpanded(P))return!1;var v=P.getChildren(),r=v.size();if(r)for(var m=0;m<r;m++)if(this.isVisible(v.get(m)))return!0;return!1},ev(v,[{key:"expandIds",get:function(){return Object.keys(this._expandMap)},set:function(P){var v=this;P.forEach(function(P){var r=v.dm().getDataById(P);r&&v.expand(r)})}},{key:"selectionIds",get:function(){var P=[];return this.sm().each(function(v){P.push(v.$34$||v._id)}),P},set:function(P){var v=this,r=[];P.forEach(function(P){var m=v.dm().getDataById(P);m&&r.push(m)}),this.sm().ss(r)}}]),v}(ht.widget.TreeView);!function(P,v,r){var m="ht",H=P[m],I=H.Default,Y=I.getInternal();Y.addMethod(I,{svgToShape:function(P,v){var r=new H.SvgConverter(v);return{converter:r,output:r.toShape(P)}}});var U=H.Context2dProxy=function(P,v,r){var m=this;m.ctx=P,m.writer=v,m._currentContext={a:1,b:0,c:0,d:1,tx:0,ty:0},m._emptyPath(),m._forceSplitEllipse=!0,m._splitToBezier=r.splitToBezier,m._ellipseSegments=r.segments,m._contextStack=[];for(var H in CanvasRenderingContext2D.prototype)if("webkitImageSmoothingEnabled"!==H){var I=P[H];"function"==typeof I&&(P[H]=function(v,r){return function(){try{var H=r.apply(P,arguments);return m.handleFunc(v,H,arguments),H}catch(P){}}}(H,I))}};U.prototype={},U.prototype.constructor=U,U.prototype.handleFunc=function(P,v,r){var m=this;switch(P){case"save":m._ctxSave();break;case"restore":m._ctxRestore();break;case"translate":m._ctxTranslate.apply(m,r);break;case"rotate":m._ctxRotate.apply(m,r);break;case"scale":m._ctxScale.apply(m,r);break;case"setTransform":m._ctxSetTransform.apply(m,r);break;case"transform":m._ctxTransform.apply(m,r);break;case"fillText":case"strokeText":m._ctxText(r[0],r[1],r[2],"fillText"===P);break;case"rect":m._ctxRect.apply(m,r);break;case"fill":m._ctxFill(r[0]);break;case"fillRect":m._ctxRect.apply(m,r),m._ctxDraw("fill");break;case"stroke":m._ctxDraw("stroke");break;case"moveTo":m._ctxMoveTo(r[0],r[1]);break;case"lineTo":m._ctxLineTo(r[0],r[1]);break;case"beginPath":m._ctxBeginPath();break;case"closePath":m._ctxClosePath();break;case"arc":m._ctxArc.apply(m,r);break;case"ellipse":m._ctxEllipse.apply(m,r);break;case"quadraticCurveTo":m._ctxBezier([{x:r[0],y:r[1]}],r[2],r[3]);break;case"bezierCurveTo":m._ctxBezier([{x:r[0],y:r[1]},{x:r[2],y:r[3]}],r[4],r[5]);break;case"createLinearGradient":m._ctxCreateGradient(v,!0,r);break;case"createRadialGradient":m._ctxCreateGradient(v,!1,r);break;case"createPattern":m._ctxCreatePattern(v,r[0],r[1]);break;case"drawImage":m._ctxDrawImage.apply(m,r);break;case"clip":m._ctxClip()}},U.prototype.handleSetter=function(P,v){},U.prototype._ctxSave=function(){var P=this,v={},r=P._currentContext;for(var m in r)v[m]=r[m],"clip"===m&&r[m]&&delete r[m];P._contextStack.push(v)},U.prototype._ctxRestore=function(){var P=this;P._currentContext.clip&&P.writer.addRestore(),P._currentContext=P._contextStack.pop(),P._transformUpdated()},U.prototype._ctxTranslate=function(P,v){if(P=P||0,v=v||0,0!==P||0!==v){var r=this,m=r._currentContext,H=m.a,I=m.b,Y=m.c,U=m.d;m.tx=H*P+Y*v+m.tx,m.ty=I*P+U*v+m.ty,r._transformUpdated()}},U.prototype._ctxScale=function(P,v){if(P=P||1,v=v||1,1!==P||1!==v){var r=this,m=r._currentContext;m.a*=P,m.b*=P,m.c*=v,m.d*=v,r._transformUpdated()}},U.prototype._ctxRotate=function(P){var v=Math.cos(P),r=Math.sin(P),m=this,H=m._currentContext,I=H.a,Y=H.b,U=H.c,o=H.d;H.a=I*v+U*r,H.b=Y*v+o*r,H.c=-I*r+U*v,H.d=-Y*r+o*v,m._transformUpdated()},U.prototype._ctxSetTransform=function(P,v,r,m,H,I){var Y=this,U=Y._currentContext;U.a=P,U.b=v,U.c=r,U.d=m,U.tx=H,U.ty=I,Y._transformUpdated()},U.prototype._ctxTransform=function(P,v,r,m,H,I){var Y=this,U=Y._currentContext,o=U.a,x=U.b,N=U.c,E=U.d;U.a=o*P+N*v,U.b=x*P+E*v,U.c=o*r+N*m,U.d=x*r+E*m,U.tx=o*H+N*I+U.tx,U.ty=x*H+E*I+U.ty,Y._transformUpdated()},U.prototype._transformUpdated=function(){},U.prototype._calcCurrentRotation=function(){var P=this._currentContext;return 0===P.b&&0===P.c?0:Math.atan2(P.b,P.a)},U.prototype._calcCurrentScale=function(){var P=this._currentContext;return{x:Math.sqrt(P.a*P.a+P.c*P.c),y:Math.sqrt(P.b*P.b+P.d*P.d)}},U.prototype._transformPoint=function(P){var v=this._currentContext,r=P.x,m=P.y;return{x:v.a*r+v.c*m+v.tx,y:v.b*r+v.d*m+v.ty}},U.prototype._transformPoints=function(P){for(var v=this,r=new Array(P.length),m=0,H=P.length;m<H;m++)r[m]=v._transformPoint(P[m]);return r},U.prototype._transformSize=function(P){var v=this._currentContext;return P*Math.max(Math.sqrt(v.c*v.c+v.d*v.d),Math.sqrt(v.a*v.a+v.b*v.b))},U.prototype._equal=function(P,v){var r=P-v;return r>-1e-5&&r<1e-5},U.prototype._ctxText=function(P,v,r,m){var H,I,Y=this,U=Y.ctx,o=U.font,x=m?U.fillStyle:U.strokeStyle,N=U.textAlign,E=U.textBaseline;"string"==typeof o&&(I=o.match(/\d+/),I&&(H=I[0],o=o.replace(/\d+/,Y._transformSize(H))));var s=Y._calcCurrentRotation();"alphabetic"===E?(E="bottom",r+=.25*U.measureText("e").width):"hanging"===E&&(E="top",r+=.2*U.measureText("e").width),"string"==typeof x&&"rgba(0,0,0,0)"===x.replace(/ /g,"")||P.trim().length&&Y.writer.addText(P,Y._transformPoint({x:v,y:r}),o,s,N,E,x)},U.prototype._ctxDrawImage=function(P,v,m,H,I,Y,U,o,x){if(P.width&&P.height){H===r&&I===r?(Y=v,U=m,v=0,m=0,H=o=P.width,I=x=P.height):Y===r&&U===r&&(Y=v,U=m,o=H,x=I,v=0,m=0,H=P.width,I=P.height);var N=this,E=N._currentContext,s=o/H,W=x/I,f=Y-s*v,G=U-W*m,t=E.a,L=E.b,O=E.c,Q=E.d;t*f+O*G+E.tx,L*f+Q*G+E.ty}},U.prototype._ctxClip=function(){var P=this,v=P._currentContext;v.clip=!0,P._ctxDraw("clip")},U.prototype._ctxCreateGradient=function(P,v,r){P.isLinear=v,v?P.points=[r[0],r[1],r[2],r[3]]:P.points=[r[0],r[1],r[2],r[3],r[4],r[5]];var m=this._currentContext;P.trans=[m.a,m.b,m.c,m.d,m.tx,m.ty];var H=P.addColorStop;P.addColorStop=function(v,r){H.apply(this,arguments),P.colorStops||(P.colorStops=[]),P.colorStops.push(v,r)}},U.prototype._ctxCreatePattern=function(P,v,r){console.log("create pattern")},U.prototype._ctxRect=function(P,v,r,m){var H=this,I=H._transformPoints([{x:P,y:v},{x:P+r,y:v},{x:P+r,y:v+m},{x:P,y:v+m}]);H._path.push({type:"rect",points:I})},U.prototype._ctxMoveTo=function(P,v){var r=this,m=r._transformPoint({x:P,y:v});r._headPoint=m,r._path.push({type:"moveTo",x:m.x,y:m.y})},U.prototype._ctxLineTo=function(P,v){var r=this,m=r._transformPoint({x:P,y:v});r._path.push({type:"lineTo",x:m.x,y:m.y})},U.prototype._ctxArc=function(P,v,r,m,H,I){m=m||0,H=H||2*Math.PI,r&&this._ctxEllipse(P,v,r,r,0,m,H,I)},U.prototype._ctxEllipse=function(P,v,r,m,H,I,Y,U){var o,x,N,E,s,W,f,G,t,L,O,Q,q,Z,S,C=this,u=C._calcCurrentScale(),g=C._transformPoint({x:P,y:v});W=Math.sin(H),f=Math.cos(H);var n=function(P){return J(Math.cos(-P),Math.sin(-P))},J=function(H,I){var Y=r*H,U=m*I;return{x:P+(f*Y-W*U),y:v+(W*Y+f*U)}},K=[],j=Y;if(U)for(;j>=I;)j-=2*Math.PI;else for(;j<=I;)j+=2*Math.PI;for(L=(j-I)/C._ellipseSegments,Q=0;Q<=C._ellipseSegments;Q++)O=I+L*Q,q=C._transformPoint(n(-O)),K.push(q);var b=I,k=j;if(E=K[0],s=K[K.length-1],o=C._calcaEllipseAngle(I,Y,U),I=o.start,Y=o.end,G=C._equal(u.x,u.y),t=C._equal(r,m),!C._forceSplitEllipse&&G&&t&&C._equal(Math.abs(I-Y),2*Math.PI))C._path.push({type:"circle",x:g.x,y:g.y,end:s,keyPoints:K,radius:r*u.x});else if(!C._forceSplitEllipse&&G&&t)x=C._calcCurrentRotation(),N=Math.cos(x),Z=C._currentContext.a*N<0,S=C._currentContext.d*N<0,o=C._transformStartEndAngle(I,Y,Z,S),I=o.start-x,Y=o.end-x,C._path.push({type:"arc",x:g.x,y:g.y,end:s,radius:r*u.x,startAngle:I,endAngle:Y,keyPoints:K});else{if(C._forceSplitEllipse||!G){if(C._path.length||C._path.push({type:"moveTo",x:K[0].x,y:K[0].y}),C._splitToBezier){var M,a,i,$=k-b,X=Math.max(Math.ceil(Math.abs($)/Math.PI*2),1),_=$/X,w=Math.tan(.5*_),c=Math.sin(_)*(Math.sqrt(4+3*w*w)-1)/3,h=Math.cos(b),e=Math.sin(b),D=b;for(Q=0;Q<X;Q++){i=b+(Q+1)*_,M=Math.cos(i),a=Math.sin(i);var R=J(M,a);C._ctxBezier([J(h-e*c,e+h*c),J(M+a*c,a-M*c)],R.x,R.y),h=M,e=a,D=i}return}for(Q=1;Q<=C._ellipseSegments;Q++)q=K[Q],C._path.push({type:"lineTo",x:q.x,y:q.y});return}var z,B,l=C._transformPoint(n(0)),d=C._transformPoint(n(Math.PI/2)),V=function(P,v){var r=P.x-v.x,m=P.y-v.y;return Math.sqrt(r*r+m*m)},T=V(l,g),p=V(d,g);p>T?(B=T,T=p,p=B,z=d):z=l,x=C._calcCurrentRotation(),N=Math.cos(x),Z=C._currentContext.a*N<0,S=C._currentContext.d*N<0,o=C._transformStartEndAngle(I-Math.PI/2,Y-Math.PI/2,Z,S),I=o.start,Y=o.end,C._path.push({type:"ellipse",x:g.x,y:g.y,end:s,major:{x:z.x-g.x,y:z.y-g.y},ratio:p/T,startAngle:I,endAngle:Y,keyPoints:K})}},U.prototype._ctxBezier=function(P,v,r){var m=this,H=m._transformPoint({x:v,y:r});this._path.push({type:"bezier",x:H.x,y:H.y,ctrl:m._transformPoints(P)})},U.prototype._ctxBeginPath=function(){this._emptyPath()},U.prototype._ctxClosePath=function(){var P=this,v=P._headPoint;v&&(P._path.push({type:"lineTo",x:v.x,y:v.y,subType:"closePath"}),P._headPoint=null,P._lastPoint=null)},U.prototype._calcaEllipseAngle=function(P,v,r){P=-P,v=-v;var m,H=P%(2*Math.PI),I=v%(2*Math.PI);for(H<0&&(H+=2*Math.PI),I<0&&(I+=2*Math.PI),r||(m=H,H=I,I=m);I<=H;)I+=2*Math.PI;return{start:H,end:I}},U.prototype._transformStartEndAngle=function(P,v,r,m){var H;return(m||r)&&(r&&m?(P=Math.PI+P,v=Math.PI+v):(H=Math.PI*(r?1:2)-v,v=Math.PI*(r?1:2)-P,P=H)),{start:P,end:v}},U.prototype._ctxFill=function(P){var v=this;return v._fillRule=P||"nonzero",v._ctxDraw("fill")},U.prototype._ctxDraw=function(P){var v=this,r=v._path;if(r.length){var m,H,I,Y,U,o,x=[],N=[];if("clip"===P)o={clip:!0};else{if("stroke"===P){o={stroke:!0,lineWidth:v._transformSize(v.ctx.lineWidth),color:v.ctx.strokeStyle};var E=v.ctx.lineCap;"butt"!==E&&(o.lineCap=E);var s=v.ctx.getLineDash();if(s&&s.length){o.dash=!0;for(var W=0,f=s.length;W<f;W++)s[W]=v._transformSize(s[W]);o.dashPattern=s,o.dashOffset=v._transformSize(v.ctx.lineDashOffset)}}else o={stroke:!1,color:v.ctx.fillStyle},"nonzero"!==v._fillRule&&(o.fillRule=v._fillRule);if(v.ctx.globalAlpha<1&&(o.opacity=v.ctx.globalAlpha),"string"!=typeof o.color)if(o.color instanceof CanvasGradient){var G=o.color,t=[G.isLinear?"L":"R"];t=t.concat(G.points);var L=v._currentContext;t=t.concat([L.a,L.b,L.c,L.d,L.tx,L.ty]),t=t.concat(G.colorStops),o.gradientPack=t}else if(o.color instanceof CanvasPattern&&o.color.gradient){var I=o.color,G=I.gradient,t=[G.isLinear?"L":"R"];t=t.concat(G.points);var O=I.trans,L=v._currentContext,Q=L.a,q=L.b,Z=L.c,S=L.d,C=L.tx,u=L.ty,g=O[0],n=O[1],J=O[2],K=O[3],j=O[4],b=O[5];t=t.concat([Q*g+Z*n,q*g+S*n,Q*J+Z*K,q*J+S*K,Q*j+Z*b+C,q*j+S*b+u]),t=t.concat(G.colorStops),o.gradientPack=t}else o.trans=[v._currentContext.a,v._currentContext.b,v._currentContext.c,v._currentContext.d,v._currentContext.tx,v._currentContext.ty],o.color=o.color.image?o.color.image:o.color,o.isPattern=!0;if("string"==typeof o.color&&"rgba(0,0,0,0)"===o.color.replace(/ /g,""))return}for(H=0,m=r.length;H<m;H++)switch(I=r[H],I.type){case"moveTo":v._lastPoint={x:I.x,y:I.y},x.push(v._lastPoint),N.push(1);break;case"lineTo":"closePath"===I.subType?N.push(5):(x.push({x:I.x,y:I.y}),N.push(2)),v._lastPoint={x:I.x,y:I.y};break;case"rect":U=I.points,x.push({x:U[0].x,y:U[0].y},{x:U[1].x,y:U[1].y},{x:U[2].x,y:U[2].y},{x:U[3].x,y:U[3].y},{x:U[0].x,y:U[0].y}),N.push(2,2,2,2,2),v._lastPoint=I.points[0];break;case"circle":case"arc":case"ellipse":console.log("split to line",I.type);break;case"arcBegin":x.length&&N.length&&v.writer.addShape(x,N,o),x=[],N=[];break;case"arcClose":v.writer.addShape(x,N,o),x=[],N=[];break;case"bezier":if(Y=v._lastPoint,!Y)break;1===I.ctrl.length?(x.push({x:I.ctrl[0].x,y:I.ctrl[0].y},{x:I.x,y:I.y}),N.push(3)):(x.push({x:I.ctrl[0].x,y:I.ctrl[0].y},{x:I.ctrl[1].x,y:I.ctrl[1].y},{x:I.x,y:I.y}),N.push(4)),v._lastPoint={x:I.x,y:I.y};break;default:x.push({x:I.x,y:I.y}),N.push(2)}v.writer.addShape(x,N,o)}},U.prototype._emptyPath=function(){var P=this;P._path=[],P._lastPoint=null,P._headPoint=null};var o=H.SvgConverter=function(P){var v=this;v.initConfig(P||{}),v.initCanvas()};o.prototype={},o.prototype.constructor=o,o.prototype.initConfig=function(P){var v,m=this;v=m.options={},v.size=P.size||512,v.segments=P.segments||16,v.splitToBezier=P.splitToBezier===r||P.splitToBezier},o.prototype.initCanvas=function(){var P=this,v=document.createElement("canvas");v.width=v.height=P.options.size,v.style.width=v.style.height=P.options.size;var r=v.getContext;v.getContext=function(v){return function(r){var m=v.apply(this,arguments);return"2d"===r&&P.wrapContext2d(m),m}}(r),P._canvas=v,P._segments=[]},o.prototype.toShape=function(P){var v=this;v._canvas;return v._segments=[],canvg(v._canvas,P,{ignoreMouse:!0,ignoreAnimation:!0}),v.write()},o.prototype.wrapContext2d=function(P){var v=this,r=new H.Context2dProxy(P,v,v.options);return r},o.prototype.write=function(){var P=this;return{width:P._canvas.width,height:P._canvas.height,comps:P._segments}},o.prototype.addComponent=function(P){var v=this;v._segments.push(P)},o.prototype.addText=function(P,v,r,m,H,I,Y){H=H||"left","start"===H?H="left":"end"===H&&(H="right"),"alphabetic"===I?I="bottom":"hanging"===I&&(I="top");var U=this;U.addComponent({type:"text",color:Y,text:P,rotation:m,rect:[v.x,v.y,0,0],align:H,vAlign:I,font:r})},o.prototype.addShape=function(P,v,m){for(var H=this,I=[],Y=0,U=P.length;Y<U;Y++){var o=P[Y];I.push(o.x,o.y)}if(m.clip)return void H.addComponent({type:"clip",points:I,segments:v});var x={type:"shape",points:I,segments:v};if(m.opacity!=r&&(x.opacity=m.opacity),m.stroke)m.dash?(x.dash=m.dash,x.dashPattern=m.dashPattern,x.dashOffset=m.dashOffset,x.dashColor=m.color,x.dashWidth=m.lineWidth,x.borderColor=null,x.borderWidth=0,x.background=null):(x.borderColor=m.color,x.borderWidth=m.lineWidth,x.background=null),m.lineCap&&(x.borderCap=m.lineCap);else{if(x.borderColor=null,x.borderWidth=0,m.isPattern)x.repeatImage=m.color,x.trans=m.trans,x.background=null;else if(m.gradientPack){var N=m.gradientPack,E="L"===N[0]?[N[5],N[6],N[7],N[8],N[9],N[10]]:[N[7],N[8],N[9],N[10],N[11],N[12]];if(Math.abs(E[4])>1e8||Math.abs(E[5])>1e8){var s=E[0],W=E[1],f=E[2],G=E[3],t=E[4],L=E[5],O=Math.floor((t*G-L*f)/(s*G-W*f)),Q=Math.floor((t*W-L*s)/(f*W-s*G));t=-(s*O+f*Q),L=-(W*O+G*Q),"L"===N[0]?(N[9]+=t,N[10]+=L,N[1]+=O,N[2]+=Q,N[3]+=O,N[4]+=Q):(N[11]+=t,N[12]+=L,N[1]+=O,N[2]+=Q,N[4]+=O,N[5]+=Q)}x.gradientPack=N,x.background=null}else x.background=m.color;m.gradient&&(x.gradient=m.gradient,x.gradientColor=m.gradientColor),m.fillRule&&(x.fillRule=m.fillRule)}H.addComponent(x)},o.prototype.addRestore=function(){this.addComponent({type:"restore"})},function(P){function v(P){this.ok=!1,"#"==P.charAt(0)&&(P=P.substr(1,6)),P=P.replace(/ /g,""),P=P.toLowerCase();var r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var m in r)P==m&&(P=r[m]);for(var H=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(P){return[parseInt(P[1]),parseInt(P[2]),parseInt(P[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(P){return[parseInt(P[1],16),parseInt(P[2],16),parseInt(P[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(P){return[parseInt(P[1]+P[1],16),parseInt(P[2]+P[2],16),parseInt(P[3]+P[3],16)]}}],I=0;I<H.length;I++){var Y=H[I].re,U=H[I].process,o=Y.exec(P);if(o){var x=U(o);this.r=x[0],this.g=x[1],this.b=x[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,
this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var P=this.r.toString(16),v=this.g.toString(16),r=this.b.toString(16);return 1==P.length&&(P="0"+P),1==v.length&&(v="0"+v),1==r.length&&(r="0"+r),"#"+P+v+r},this.getHelpXML=function(){for(var P=new Array,m=0;m<H.length;m++)for(var I=H[m].example,Y=0;Y<I.length;Y++)P[P.length]=I[Y];for(var U in r)P[P.length]=U;var o=document.createElement("ul");o.setAttribute("id","rgbcolor-examples");for(var m=0;m<P.length;m++)try{var x=document.createElement("li"),N=new v(P[m]),E=document.createElement("div");E.style.cssText="margin: 3px; border: 1px solid black; background:"+N.toHex()+"; color:"+N.toHex(),E.appendChild(document.createTextNode("test"));var s=document.createTextNode(" "+P[m]+" -> "+N.toRGB()+" -> "+N.toHex());x.appendChild(E),x.appendChild(s),o.appendChild(x)}catch(P){}return o}}P.RGBColor=v}("undefined"!=typeof P?P:this),function(P){function v(P){for(var v=P.data,r=P.width*P.height*4,m=0;m<r;m+=4){var H=v[m+3]/255;v[m]*=H,v[m+1]*=H,v[m+2]*=H}}function r(P){for(var v=P.data,r=P.width*P.height*4,m=0;m<r;m+=4){var H=v[m+3];0!=H&&(H=255/H,v[m]*=H,v[m+1]*=H,v[m+2]*=H)}}function m(P,v,r,m){var Y=document.getElementById(P),U=Y.naturalWidth,o=Y.naturalHeight,x=document.getElementById(v);x.style.width=U+"px",x.style.height=o+"px",x.width=U,x.height=o;var N=x.getContext("2d");N.clearRect(0,0,U,o),N.drawImage(Y,0,0),isNaN(r)||r<1||(m?H(v,0,0,U,o,r):I(v,0,0,U,o,r))}function H(P,m,H,I,x,N){if(!(isNaN(N)||N<1)){N|=0;var E,s=document.getElementById(P),W=s.getContext("2d");try{try{E=W.getImageData(m,H,I,x)}catch(P){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),E=W.getImageData(m,H,I,x)}catch(P){throw alert("Cannot access local image"),new Error("unable to access local image data: "+P)}}}catch(P){throw alert("Cannot access image"),new Error("unable to access image data: "+P)}v(E);var f,G,t,L,O,Q,q,Z,S,C,u,g,n,J,K,j,b,k,M,a,i,$,X,_,w=E.data,c=N+N+1,h=I-1,e=x-1,D=N+1,R=D*(D+1)/2,z=new Y,B=z;for(t=1;t<c;t++)if(B=B.next=new Y,t==D)var l=B;B.next=z;var d=null,V=null;q=Q=0;var T=U[N],p=o[N];for(G=0;G<x;G++){for(j=b=k=M=Z=S=C=u=0,g=D*(a=w[Q]),n=D*(i=w[Q+1]),J=D*($=w[Q+2]),K=D*(X=w[Q+3]),Z+=R*a,S+=R*i,C+=R*$,u+=R*X,B=z,t=0;t<D;t++)B.r=a,B.g=i,B.b=$,B.a=X,B=B.next;for(t=1;t<D;t++)L=Q+((h<t?h:t)<<2),Z+=(B.r=a=w[L])*(_=D-t),S+=(B.g=i=w[L+1])*_,C+=(B.b=$=w[L+2])*_,u+=(B.a=X=w[L+3])*_,j+=a,b+=i,k+=$,M+=X,B=B.next;for(d=z,V=l,f=0;f<I;f++)w[Q]=Z*T>>p,w[Q+1]=S*T>>p,w[Q+2]=C*T>>p,w[Q+3]=u*T>>p,Z-=g,S-=n,C-=J,u-=K,g-=d.r,n-=d.g,J-=d.b,K-=d.a,L=q+((L=f+N+1)<h?L:h)<<2,j+=d.r=w[L],b+=d.g=w[L+1],k+=d.b=w[L+2],M+=d.a=w[L+3],Z+=j,S+=b,C+=k,u+=M,d=d.next,g+=a=V.r,n+=i=V.g,J+=$=V.b,K+=X=V.a,j-=a,b-=i,k-=$,M-=X,V=V.next,Q+=4;q+=I}for(f=0;f<I;f++){for(b=k=M=j=S=C=u=Z=0,Q=f<<2,g=D*(a=w[Q]),n=D*(i=w[Q+1]),J=D*($=w[Q+2]),K=D*(X=w[Q+3]),Z+=R*a,S+=R*i,C+=R*$,u+=R*X,B=z,t=0;t<D;t++)B.r=a,B.g=i,B.b=$,B.a=X,B=B.next;for(O=I,t=1;t<=N;t++)Q=O+f<<2,Z+=(B.r=a=w[Q])*(_=D-t),S+=(B.g=i=w[Q+1])*_,C+=(B.b=$=w[Q+2])*_,u+=(B.a=X=w[Q+3])*_,j+=a,b+=i,k+=$,M+=X,B=B.next,t<e&&(O+=I);for(Q=f,d=z,V=l,G=0;G<x;G++)L=Q<<2,w[L]=Z*T>>p,w[L+1]=S*T>>p,w[L+2]=C*T>>p,w[L+3]=u*T>>p,Z-=g,S-=n,C-=J,u-=K,g-=d.r,n-=d.g,J-=d.b,K-=d.a,L=f+((L=G+D)<e?L:e)*I<<2,Z+=j+=d.r=w[L],S+=b+=d.g=w[L+1],C+=k+=d.b=w[L+2],u+=M+=d.a=w[L+3],d=d.next,g+=a=V.r,n+=i=V.g,J+=$=V.b,K+=X=V.a,j-=a,b-=i,k-=$,M-=X,V=V.next,Q+=I}r(E),W.putImageData(E,m,H)}}function I(P,v,r,m,H,I){if(!(isNaN(I)||I<1)){I|=0;var x,N=document.getElementById(P),E=N.getContext("2d");try{try{x=E.getImageData(v,r,m,H)}catch(P){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),x=E.getImageData(v,r,m,H)}catch(P){throw alert("Cannot access local image"),new Error("unable to access local image data: "+P)}}}catch(P){throw alert("Cannot access image"),new Error("unable to access image data: "+P)}var s,W,f,G,t,L,O,Q,q,Z,S,C,u,g,n,J,K,j,b,k,M=x.data,a=I+I+1,i=m-1,$=H-1,X=I+1,_=X*(X+1)/2,w=new Y,c=w;for(f=1;f<a;f++)if(c=c.next=new Y,f==X)var h=c;c.next=w;var e=null,D=null;O=L=0;var R=U[I],z=o[I];for(W=0;W<H;W++){for(g=n=J=Q=q=Z=0,S=X*(K=M[L]),C=X*(j=M[L+1]),u=X*(b=M[L+2]),Q+=_*K,q+=_*j,Z+=_*b,c=w,f=0;f<X;f++)c.r=K,c.g=j,c.b=b,c=c.next;for(f=1;f<X;f++)G=L+((i<f?i:f)<<2),Q+=(c.r=K=M[G])*(k=X-f),q+=(c.g=j=M[G+1])*k,Z+=(c.b=b=M[G+2])*k,g+=K,n+=j,J+=b,c=c.next;for(e=w,D=h,s=0;s<m;s++)M[L]=Q*R>>z,M[L+1]=q*R>>z,M[L+2]=Z*R>>z,Q-=S,q-=C,Z-=u,S-=e.r,C-=e.g,u-=e.b,G=O+((G=s+I+1)<i?G:i)<<2,g+=e.r=M[G],n+=e.g=M[G+1],J+=e.b=M[G+2],Q+=g,q+=n,Z+=J,e=e.next,S+=K=D.r,C+=j=D.g,u+=b=D.b,g-=K,n-=j,J-=b,D=D.next,L+=4;O+=m}for(s=0;s<m;s++){for(n=J=g=q=Z=Q=0,L=s<<2,S=X*(K=M[L]),C=X*(j=M[L+1]),u=X*(b=M[L+2]),Q+=_*K,q+=_*j,Z+=_*b,c=w,f=0;f<X;f++)c.r=K,c.g=j,c.b=b,c=c.next;for(t=m,f=1;f<=I;f++)L=t+s<<2,Q+=(c.r=K=M[L])*(k=X-f),q+=(c.g=j=M[L+1])*k,Z+=(c.b=b=M[L+2])*k,g+=K,n+=j,J+=b,c=c.next,f<$&&(t+=m);for(L=s,e=w,D=h,W=0;W<H;W++)G=L<<2,M[G]=Q*R>>z,M[G+1]=q*R>>z,M[G+2]=Z*R>>z,Q-=S,q-=C,Z-=u,S-=e.r,C-=e.g,u-=e.b,G=s+((G=W+X)<$?G:$)*m<<2,Q+=g+=e.r=M[G],q+=n+=e.g=M[G+1],Z+=J+=e.b=M[G+2],e=e.next,S+=K=D.r,C+=j=D.g,u+=b=D.b,g-=K,n-=j,J-=b,D=D.next,L+=m}E.putImageData(x,v,r)}}function Y(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var U=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],x={image:m,canvasRGBA:H,canvasRGB:I};P.stackBlur=x}("undefined"!=typeof P?P:this),function(P,v){P.canvg=v(P.RGBColor,P.stackBlur)}("undefined"!=typeof P?P:this,function(v,r){function m(P){var v=[0,0,0],r=function(r,m){var H=P.match(r);null!=H&&(v[m]+=H.length,P=P.replace(r," "))};return P=P.replace(/:not\(([^\)]*)\)/g,"     $1 "),P=P.replace(/{[\s\S]*/gm," "),r(o,1),r(x,0),r(N,1),r(E,2),r(s,1),r(W,1),P=P.replace(/[\*\s\+>~]/g," "),P=P.replace(/[#\.]/g," "),r(f,2),v.join("")}function I(I){var U={opts:I};U.FRAMERATE=30,U.MAX_VIRTUAL_PIXELS=3e4,U.log=function(P){},1==U.opts.log&&"undefined"!=typeof console&&(U.log=function(P){console.log(P)}),U.init=function(P){var v=0;U.UniqueId=function(){return v++,"canvg"+v},U.Definitions={},U.Styles={},U.StylesSpecificity={},U.Animations=[],U.Images=[],U.ctx=P,U.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(P,v){this.viewPorts.push({width:P,height:v})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){var P,v=this.Current();return v&&(P=v.width)?P:100},this.height=function(){var P,v=this.Current();return v&&(P=v.height)?P:100},this.ComputeSize=function(P){return null!=P&&"number"==typeof P?P:"x"==P?this.width():"y"==P?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},U.init(),U.ImagesLoaded=function(){for(var P=0;P<U.Images.length;P++)if(!U.Images[P].loaded)return!1;return!0},U.trim=function(P){return P.replace(/^\s+|\s+$/g,"")},U.compressSpaces=function(P){return P.replace(/[\s\r\t\n]+/gm," ")},U.ajax=function(P){P=H.Default.beforeLoadURL(P);var v=new H.Request,r={};return r.url=encodeURI(P),r.sync=!0,v.send(r),v.getResponseText()},U.parseXml=function(v){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var r=new Windows.Data.Xml.Dom.XmlDocument,m=new Windows.Data.Xml.Dom.XmlLoadSettings;return m.prohibitDtd=!1,r.loadXml(v,m),r}if(P.DOMParser){var H=new DOMParser;return H.parseFromString(v,"text/xml")}v=v.replace(/<!DOCTYPE svg[^>]*>/,"");var r=new ActiveXObject("Microsoft.XMLDOM");return r.async="false",r.loadXML(v),r},U.Property=function(P,v){this.name=P,this.value=v},U.Property.prototype.getValue=function(){return this.value},U.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},U.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var P=parseFloat(this.value);return(this.value+"").match(/%$/)&&(P/=100),P},U.Property.prototype.valueOrDefault=function(P){return this.hasValue()?this.value:P},U.Property.prototype.numValueOrDefault=function(P){return this.hasValue()?this.numValue():P},U.Property.prototype.addOpacity=function(P){var r=this.value;if(null!=P.value&&""!=P.value&&"string"==typeof this.value){var m=new v(this.value);m.ok&&(r="rgba("+m.r+", "+m.g+", "+m.b+", "+P.numValue()+")")}return new U.Property(this.name,r)},U.Property.prototype.getDefinition=function(){var P=this.value.match(/#([^\)'"]+)/);return P&&(P=P[1]),P||(P=this.value),U.Definitions[P]},U.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},U.Property.prototype.getFillStyleDefinition=function(P,v){var r=this.getDefinition();if(null!=r&&r.createGradient)return r.createGradient(U.ctx,P,v);if(null!=r&&r.createPattern){if(r.getHrefAttribute().hasValue()){var m=r.attribute("patternTransform");r=r.getHrefAttribute().getDefinition(),m.hasValue()&&(r.attribute("patternTransform",!0).value=m.value)}return r.createPattern(U.ctx,P)}return null},U.Property.prototype.getDPI=function(P){return 96},U.Property.prototype.getEM=function(P){var v=12,r=new U.Property("fontSize",U.Font.Parse(U.ctx.font).fontSize);return r.hasValue()&&(v=r.toPixels(P)),v},U.Property.prototype.getUnits=function(){var P=this.value+"";return P.replace(/[0-9\.\-]/g,"")},U.Property.prototype.toPixels=function(P,v){if(!this.hasValue())return 0;var r=this.value+"";if(r.match(/em$/))return this.numValue()*this.getEM(P);if(r.match(/ex$/))return this.numValue()*this.getEM(P)/2;if(r.match(/px$/))return this.numValue();if(r.match(/pt$/))return this.numValue()*this.getDPI(P)*(1/72);if(r.match(/pc$/))return 15*this.numValue();if(r.match(/cm$/))return this.numValue()*this.getDPI(P)/2.54;if(r.match(/mm$/))return this.numValue()*this.getDPI(P)/25.4;if(r.match(/in$/))return this.numValue()*this.getDPI(P);if(r.match(/%$/))return this.numValue()*U.ViewPort.ComputeSize(P);var m=this.numValue();return v&&m<1?m*U.ViewPort.ComputeSize(P):m},U.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var P=this.value+"";return P.match(/s$/)?1e3*this.numValue():P.match(/ms$/)?this.numValue():this.numValue()},U.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var P=this.value+"";return P.match(/deg$/)?this.numValue()*(Math.PI/180):P.match(/grad$/)?this.numValue()*(Math.PI/200):P.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var o={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return U.Property.prototype.toTextBaseline=function(){return this.hasValue()?o[this.value]:null},U.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(P,v,r,m,H,I){var Y=null!=I?this.Parse(I):this.CreateFont("","","","","",U.ctx.font);return{fontFamily:H||Y.fontFamily,fontSize:m||Y.fontSize,fontStyle:P||Y.fontStyle,fontWeight:r||Y.fontWeight,fontVariant:v||Y.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var P=this;this.Parse=function(v){for(var r={},m=U.trim(U.compressSpaces(v||"")).split(" "),H={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},I="",Y=0;Y<m.length;Y++)H.fontStyle||P.Styles.indexOf(m[Y])==-1?H.fontVariant||P.Variants.indexOf(m[Y])==-1?H.fontWeight||P.Weights.indexOf(m[Y])==-1?H.fontSize?"inherit"!=m[Y]&&(I+=m[Y]):("inherit"!=m[Y]&&(r.fontSize=m[Y].split("/")[0]),H.fontStyle=H.fontVariant=H.fontWeight=H.fontSize=!0):("inherit"!=m[Y]&&(r.fontWeight=m[Y]),H.fontStyle=H.fontVariant=H.fontWeight=!0):("inherit"!=m[Y]&&(r.fontVariant=m[Y]),H.fontStyle=H.fontVariant=!0):("inherit"!=m[Y]&&(r.fontStyle=m[Y]),H.fontStyle=!0);return""!=I&&(r.fontFamily=I),r}},U.ToNumberArray=function(P){for(var v=U.trim(U.compressSpaces((P||"").replace(/,/g," "))).split(" "),r=0;r<v.length;r++)v[r]=parseFloat(v[r]);return v},U.Point=function(P,v){this.x=P,this.y=v},U.Point.prototype.angleTo=function(P){return Math.atan2(P.y-this.y,P.x-this.x)},U.Point.prototype.applyTransform=function(P){var v=this.x*P[0]+this.y*P[2]+P[4],r=this.x*P[1]+this.y*P[3]+P[5];this.x=v,this.y=r},U.CreatePoint=function(P){var v=U.ToNumberArray(P);return new U.Point(v[0],v[1])},U.CreatePath=function(P){for(var v=U.ToNumberArray(P),r=[],m=0;m<v.length;m+=2)r.push(new U.Point(v[m],v[m+1]));return r},U.BoundingBox=function(P,v,r,m){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(P,v){null!=P&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=P,this.x2=P),P<this.x1&&(this.x1=P),P>this.x2&&(this.x2=P)),null!=v&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=v,this.y2=v),v<this.y1&&(this.y1=v),v>this.y2&&(this.y2=v))},this.addX=function(P){this.addPoint(P,null)},this.addY=function(P){this.addPoint(null,P)},this.addBoundingBox=function(P){this.addPoint(P.x1,P.y1),this.addPoint(P.x2,P.y2)},this.addQuadraticCurve=function(P,v,r,m,H,I){var Y=P+2/3*(r-P),U=v+2/3*(m-v),o=Y+1/3*(H-P),x=U+1/3*(I-v);this.addBezierCurve(P,v,Y,o,U,x,H,I)},this.addBezierCurve=function(P,v,r,m,H,I,Y,U){var o=[P,v],x=[r,m],N=[H,I],E=[Y,U];this.addPoint(o[0],o[1]),this.addPoint(E[0],E[1]);for(var s=0;s<=1;s++){var W=function(P){return Math.pow(1-P,3)*o[s]+3*Math.pow(1-P,2)*P*x[s]+3*(1-P)*Math.pow(P,2)*N[s]+Math.pow(P,3)*E[s]},f=6*o[s]-12*x[s]+6*N[s],G=-3*o[s]+9*x[s]-9*N[s]+3*E[s],t=3*x[s]-3*o[s];if(0!=G){var L=Math.pow(f,2)-4*t*G;if(!(L<0)){var O=(-f+Math.sqrt(L))/(2*G);0<O&&O<1&&(0==s&&this.addX(W(O)),1==s&&this.addY(W(O)));var Q=(-f-Math.sqrt(L))/(2*G);0<Q&&Q<1&&(0==s&&this.addX(W(Q)),1==s&&this.addY(W(Q)))}}else{if(0==f)continue;var q=-t/f;0<q&&q<1&&(0==s&&this.addX(W(q)),1==s&&this.addY(W(q)))}}},this.isPointInBox=function(P,v){return this.x1<=P&&P<=this.x2&&this.y1<=v&&v<=this.y2},this.addPoint(P,v),this.addPoint(r,m)},U.Transform=function(P){var v=this;this.Type={},this.Type.translate=function(P){this.p=U.CreatePoint(P),this.getMatrix=function(){return[1,0,0,1,this.p.x||0,this.p.y||0]},this.apply=function(P){P.translate(this.p.x||0,this.p.y||0)},this.unapply=function(P){P.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(P){P.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(P){var v=U.ToNumberArray(P);this.angle=new U.Property("angle",v[0]),this.cx=v[1]||0,this.cy=v[2]||0,this.apply=function(P){P.translate(this.cx,this.cy),P.rotate(this.angle.toRadians()),P.translate(-this.cx,-this.cy)},this.getMatrix=function(){var P=this.angle.toRadians(),v=Math.sin(P),r=Math.cos(P),m=this.cx,H=this.cy;return[r,v,-v,r,r*-m+v*H+m,v*-m-r*H+H]},this.unapply=function(P){P.translate(this.cx,this.cy),P.rotate(-1*this.angle.toRadians()),P.translate(-this.cx,-this.cy)},this.applyToPoint=function(P){var v=this.angle.toRadians();P.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),P.applyTransform([Math.cos(v),Math.sin(v),-Math.sin(v),Math.cos(v),0,0]),P.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(P){this.p=U.CreatePoint(P),this.getMatrix=function(){return[this.p.x||1,0,0,this.p.y||this.p.x||1,0,0]},this.apply=function(P){P.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(P){P.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(P){P.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(P){this.m=U.ToNumberArray(P),this.getMatrix=function(){return this.m},this.apply=function(P){P.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(P){var v=this.m[0],r=this.m[2],m=this.m[4],H=this.m[1],I=this.m[3],Y=this.m[5],U=0,o=0,x=1,N=1/(v*(I*x-Y*o)-r*(H*x-Y*U)+m*(H*o-I*U));P.transform(N*(I*x-Y*o),N*(Y*U-H*x),N*(m*o-r*x),N*(v*x-m*U),N*(r*Y-m*I),N*(m*H-v*Y))},this.applyToPoint=function(P){P.applyTransform(this.m)}},this.Type.SkewBase=function(P){this.base=v.Type.matrix,this.base(P),this.angle=new U.Property("angle",P)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(P){this.base=v.Type.SkewBase,this.base(P),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(P){this.base=v.Type.SkewBase,this.base(P),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.getMatrix=function(){for(var P=1,v=0,r=0,m=1,H=0,I=0,Y=0;Y<this.transforms.length;Y++){var U=this.transforms[Y].getMatrix(),o=P,x=v,N=r,E=m,s=H,W=I;P=o*U[0]+N*U[1],v=x*U[0]+E*U[1],r=o*U[2]+N*U[3],m=x*U[2]+E*U[3],H=o*U[4]+N*U[5]+s,I=x*U[4]+E*U[5]+W}return[P,v,r,m,H,I]},this.apply=function(P){for(var v=0;v<this.transforms.length;v++)this.transforms[v].apply(P)},this.unapply=function(P){for(var v=this.transforms.length-1;v>=0;v--)this.transforms[v].unapply(P)},this.applyToPoint=function(P){for(var v=0;v<this.transforms.length;v++)this.transforms[v].applyToPoint(P)};for(var r=U.trim(U.compressSpaces(P)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),m=0;m<r.length;m++){var H=U.trim(r[m].split("(")[0]),I=r[m].split("(")[1].replace(")",""),Y=this.Type[H];if("undefined"!=typeof Y){var o=new Y(I);o.type=H,this.transforms.push(o)}}},U.AspectRatio=function(P,v,r,m,H,I,Y,o,x,N){v=U.compressSpaces(v),v=v.replace(/^defer\s/,"");var E=v.split(" ")[0]||"xMidYMid",s=v.split(" ")[1]||"meet",W=r/m,f=H/I,G=Math.min(W,f),t=Math.max(W,f);"meet"==s&&(m*=G,I*=G),"slice"==s&&(m*=t,I*=t),x=new U.Property("refX",x),N=new U.Property("refY",N),x.hasValue()&&N.hasValue()?P.translate(-G*x.toPixels("x"),-G*N.toPixels("y")):(E.match(/^xMid/)&&("meet"==s&&G==f||"slice"==s&&t==f)&&P.translate(r/2-m/2,0),E.match(/YMid$/)&&("meet"==s&&G==W||"slice"==s&&t==W)&&P.translate(0,H/2-I/2),E.match(/^xMax/)&&("meet"==s&&G==f||"slice"==s&&t==f)&&P.translate(r-m,0),E.match(/YMax$/)&&("meet"==s&&G==W||"slice"==s&&t==W)&&P.translate(0,H-I)),"none"==E?P.scale(W,f):"meet"==s?P.scale(G,G):"slice"==s&&P.scale(t,t),P.translate(null==Y?0:-Y,null==o?0:-o)},U.Element={},U.EmptyProperty=new U.Property("EMPTY",""),U.Element.ElementBase=function(P){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(P,v){var r=this.attributes[P];return null!=r?r:(1==v&&(r=new U.Property(P,""),this.attributes[P]=r),r||U.EmptyProperty)},this.getHrefAttribute=function(){for(var P in this.attributes)if("href"==P||P.match(/:href$/))return this.attributes[P];return U.EmptyProperty},this.style=function(P,v,r){var m=this.styles[P];if(null!=m)return m;var H=this.attribute(P);if(null!=H&&H.hasValue())return this.styles[P]=H,H;if(1!=r){var I=this.parent;if(null!=I){var Y=I.style(P);if(null!=Y&&Y.hasValue())return Y}}return 1==v&&(m=new U.Property(P,""),this.styles[P]=m),m||U.EmptyProperty},this.render=function(P){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(P.save(),this.style("mask").hasValue()){var v=this.style("mask").getDefinition();null!=v&&v.apply(P,this)}else this.setContext(P),this.renderChildren(P),this.clearContext(P);P.restore()}},this.setContext=function(P){},this.clearContext=function(P){},this.renderChildren=function(P){for(var v=0;v<this.children.length;v++)this.children[v].render(P)},this.addChild=function(P,v){var r=P;v&&(r=U.CreateElement(P)),r.parent=this,"title"!=r.type&&this.children.push(r)},this.addStylesFromStyleDefinition=function(){for(var v in U.Styles)if("@"!=v[0]&&Y(P,v)){var r=U.Styles[v],m=U.StylesSpecificity[v];if(null!=r)for(var H in r){var I=this.stylesSpecificity[H];"undefined"==typeof I&&(I="000"),m>I&&(this.styles[H]=r[H],this.stylesSpecificity[H]=m)}}};var v=new RegExp("^[A-Z-]+$"),r=function(P){return v.test(P)?P.toLowerCase():P};if(null!=P&&1==P.nodeType){for(var m=0;m<P.attributes.length;m++){var H=P.attributes[m],I=r(H.nodeName);this.attributes[I]=new U.Property(I,H.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var o=this.attribute("style").value.split(";"),m=0;m<o.length;m++)if(""!=U.trim(o[m])){var x=o[m].split(":"),N=U.trim(x[0]),E=U.trim(x[1]);this.styles[N]=new U.Property(N,E)}this.attribute("id").hasValue()&&null==U.Definitions[this.attribute("id").value]&&(U.Definitions[this.attribute("id").value]=this);for(var m=0;m<P.childNodes.length;m++){var s=P.childNodes[m];if(1==s.nodeType&&this.addChild(s,!0),this.captureTextNodes&&(3==s.nodeType||4==s.nodeType)){var W=s.value||s.text||s.textContent||"";""!=U.compressSpaces(W)&&this.addChild(new U.Element.tspan(s),!1)}}}},U.Element.RenderedElementBase=function(P){this.base=U.Element.ElementBase,this.base(P),this.setContext=function(P){if(this.style("fill").isUrlDefinition()){var v=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=v&&(P.fillStyle=v)}else if(this.style("fill").hasValue()){var r=this.style("fill");"currentColor"==r.value&&(r.value=this.style("color").value),"inherit"!=r.value&&(P.fillStyle="none"==r.value?"rgba(0,0,0,0)":r.value)}if(this.style("fill-opacity").hasValue()){var r=new U.Property("fill",P.fillStyle);r=r.addOpacity(this.style("fill-opacity")),P.fillStyle=r.value}if(this.style("stroke").isUrlDefinition()){var v=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=v&&(P.strokeStyle=v)}else if(this.style("stroke").hasValue()){var m=this.style("stroke");"currentColor"==m.value&&(m.value=this.style("color").value),"inherit"!=m.value&&(P.strokeStyle="none"==m.value?"rgba(0,0,0,0)":m.value)}if(this.style("stroke-opacity").hasValue()){var m=new U.Property("stroke",P.strokeStyle);m=m.addOpacity(this.style("stroke-opacity")),P.strokeStyle=m.value}if(this.style("stroke-width").hasValue()){var H=this.style("stroke-width").toPixels();P.lineWidth=0==H?.001:H}if(this.style("stroke-linecap").hasValue()&&(P.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(P.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(P.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var I=U.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof P.setLineDash?P.setLineDash(I):"undefined"!=typeof P.webkitLineDash?P.webkitLineDash=I:"undefined"==typeof P.mozDash||1==I.length&&0==I[0]||(P.mozDash=I);var Y=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof P.lineDashOffset?P.lineDashOffset=Y:"undefined"!=typeof P.webkitLineDashOffset?P.webkitLineDashOffset=Y:"undefined"!=typeof P.mozDashOffset&&(P.mozDashOffset=Y)}if("undefined"!=typeof P.font&&(P.font=U.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()){var o=new U.Transform(this.style("transform",!1,!0).value);o.apply(P)}if(this.style("clip-path",!1,!0).hasValue()){var x=this.style("clip-path",!1,!0).getDefinition();null!=x&&x.apply(P)}this.style("opacity").hasValue()&&(P.globalAlpha=this.style("opacity").numValue())}},U.Element.RenderedElementBase.prototype=new U.Element.ElementBase,U.Element.PathElementBase=function(P){this.base=U.Element.RenderedElementBase,this.base(P),this.path=function(P){return null!=P&&P.beginPath(),new U.BoundingBox},this.renderChildren=function(P){this.path(P),U.Mouse.checkPath(this,P),""!=P.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?P.fill(this.style("fill-rule").value):P.fill()),""!=P.strokeStyle&&P.stroke();var v=this.getMarkers();if(null!=v){if(this.style("marker-start").isUrlDefinition()){var r=this.style("marker-start").getDefinition();r.render(P,v[0][0],v[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var r=this.style("marker-mid").getDefinition(),m=1;m<v.length-1;m++)r.render(P,v[m][0],v[m][1]);if(this.style("marker-end").isUrlDefinition()){var r=this.style("marker-end").getDefinition();r.render(P,v[v.length-1][0],v[v.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},U.Element.PathElementBase.prototype=new U.Element.RenderedElementBase,U.Element.svg=function(v){this.base=U.Element.RenderedElementBase,this.base(v),this.baseClearContext=this.clearContext,this.clearContext=function(P){this.baseClearContext(P),U.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(v){v.strokeStyle="rgba(0,0,0,0)",v.lineCap="butt",v.lineJoin="miter",v.miterLimit=4,"undefined"!=typeof v.font&&"undefined"!=typeof P.getComputedStyle&&(v.font=P.getComputedStyle(v.canvas).getPropertyValue("font")),this.baseSetContext(v),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),v.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var r=U.ViewPort.width(),m=U.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){r=this.attribute("width").toPixels("x"),m=this.attribute("height").toPixels("y");var H=0,I=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(H=-this.attribute("refX").toPixels("x"),I=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(v.beginPath(),v.moveTo(H,I),v.lineTo(r,I),v.lineTo(r,m),v.lineTo(H,m),v.closePath(),v.clip())}if(U.ViewPort.SetCurrent(r,m),this.attribute("viewBox").hasValue()){var Y=U.ToNumberArray(this.attribute("viewBox").value),o=Y[0],x=Y[1];r=Y[2],m=Y[3],U.AspectRatio(v,this.attribute("preserveAspectRatio").value,U.ViewPort.width(),r,U.ViewPort.height(),m,o,x,this.attribute("refX").value,this.attribute("refY").value),U.ViewPort.RemoveCurrent(),U.ViewPort.SetCurrent(Y[2],Y[3])}}},U.Element.svg.prototype=new U.Element.RenderedElementBase,U.Element.rect=function(P){this.base=U.Element.PathElementBase,this.base(P),this.path=function(P){var v=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),m=this.attribute("width").toPixels("x"),H=this.attribute("height").toPixels("y"),I=this.attribute("rx").toPixels("x"),Y=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(Y=I),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(I=Y),I=Math.min(I,m/2),Y=Math.min(Y,H/2),null!=P&&(P.beginPath(),P.moveTo(v+I,r),P.lineTo(v+m-I,r),P.quadraticCurveTo(v+m,r,v+m,r+Y),P.lineTo(v+m,r+H-Y),P.quadraticCurveTo(v+m,r+H,v+m-I,r+H),P.lineTo(v+I,r+H),P.quadraticCurveTo(v,r+H,v,r+H-Y),P.lineTo(v,r+Y),P.quadraticCurveTo(v,r,v+I,r),P.closePath()),new U.BoundingBox(v,r,v+m,r+H)}},U.Element.rect.prototype=new U.Element.PathElementBase,U.Element.circle=function(P){this.base=U.Element.PathElementBase,this.base(P),this.path=function(P){var v=this.attribute("cx").toPixels("x"),r=this.attribute("cy").toPixels("y"),m=this.attribute("r").toPixels();return null!=P&&(P.beginPath(),P.arc(v,r,m,0,2*Math.PI,!0),P.closePath()),new U.BoundingBox(v-m,r-m,v+m,r+m)}},U.Element.circle.prototype=new U.Element.PathElementBase,U.Element.ellipse=function(P){this.base=U.Element.PathElementBase,this.base(P),this.path=function(P){var v=4*((Math.sqrt(2)-1)/3),r=this.attribute("rx").toPixels("x"),m=this.attribute("ry").toPixels("y"),H=this.attribute("cx").toPixels("x"),I=this.attribute("cy").toPixels("y");return null!=P&&(P.beginPath(),P.moveTo(H,I-m),P.bezierCurveTo(H+v*r,I-m,H+r,I-v*m,H+r,I),P.bezierCurveTo(H+r,I+v*m,H+v*r,I+m,H,I+m),P.bezierCurveTo(H-v*r,I+m,H-r,I+v*m,H-r,I),P.bezierCurveTo(H-r,I-v*m,H-v*r,I-m,H,I-m),P.closePath()),new U.BoundingBox(H-r,I-m,H+r,I+m)}},U.Element.ellipse.prototype=new U.Element.PathElementBase,U.Element.line=function(P){this.base=U.Element.PathElementBase,this.base(P),this.getPoints=function(){return[new U.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new U.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(P){var v=this.getPoints();return null!=P&&(P.beginPath(),P.moveTo(v[0].x,v[0].y),P.lineTo(v[1].x,v[1].y)),new U.BoundingBox(v[0].x,v[0].y,v[1].x,v[1].y)},this.getMarkers=function(){var P=this.getPoints(),v=P[0].angleTo(P[1]);return[[P[0],v],[P[1],v]]}},U.Element.line.prototype=new U.Element.PathElementBase,U.Element.polyline=function(P){this.base=U.Element.PathElementBase,this.base(P),this.points=U.CreatePath(this.attribute("points").value),this.path=function(P){var v=new U.BoundingBox(this.points[0].x,this.points[0].y);null!=P&&(P.beginPath(),P.moveTo(this.points[0].x,this.points[0].y));for(var r=1;r<this.points.length;r++)v.addPoint(this.points[r].x,this.points[r].y),null!=P&&P.lineTo(this.points[r].x,this.points[r].y);return v},this.getMarkers=function(){for(var P=[],v=0;v<this.points.length-1;v++)P.push([this.points[v],this.points[v].angleTo(this.points[v+1])]);return P.length>0&&P.push([this.points[this.points.length-1],P[P.length-1][1]]),P}},U.Element.polyline.prototype=new U.Element.PathElementBase,U.Element.polygon=function(P){this.base=U.Element.polyline,this.base(P),this.basePath=this.path,this.path=function(P){var v=this.basePath(P);return null!=P&&(P.lineTo(this.points[0].x,this.points[0].y),P.closePath()),v}},U.Element.polygon.prototype=new U.Element.polyline,U.Element.path=function(P){this.base=U.Element.PathElementBase,this.base(P);var v=this.attribute("d").value;v=v.replace(/,/gm," ");for(var r=0;r<2;r++)v=v.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");v=v.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),v=v.replace(/([0-9])([+\-])/gm,"$1 $2");for(var r=0;r<2;r++)v=v.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");v=v.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),v=U.compressSpaces(v),v=U.trim(v),
this.PathParser=new function(P){this.tokens=P.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new U.Point(0,0),this.control=new U.Point(0,0),this.current=new U.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var P=new U.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(P)},this.getAsControlPoint=function(){var P=this.getPoint();return this.control=P,P},this.getAsCurrentPoint=function(){var P=this.getPoint();return this.current=P,P},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var P=new U.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return P},this.makeAbsolute=function(P){return this.isRelativeCommand()&&(P.x+=this.current.x,P.y+=this.current.y),P},this.addMarker=function(P,v,r){null!=r&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(r)),this.addMarkerAngle(P,null==v?null:v.angleTo(P))},this.addMarkerAngle=function(P,v){this.points.push(P),this.angles.push(v)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var P=0;P<this.angles.length;P++)if(null==this.angles[P])for(var v=P+1;v<this.angles.length;v++)if(null!=this.angles[v]){this.angles[P]=this.angles[v];break}return this.angles}}(v),this.path=function(P){var v=this.PathParser;v.reset();var r=new U.BoundingBox;for(null!=P&&P.beginPath();!v.isEnd();)switch(v.nextCommand(),v.command){case"M":case"m":var m=v.getAsCurrentPoint();for(v.addMarker(m),r.addPoint(m.x,m.y),null!=P&&P.moveTo(m.x,m.y),v.start=v.current;!v.isCommandOrEnd();){var m=v.getAsCurrentPoint();v.addMarker(m,v.start),r.addPoint(m.x,m.y),null!=P&&P.lineTo(m.x,m.y)}break;case"L":case"l":for(;!v.isCommandOrEnd();){var H=v.current,m=v.getAsCurrentPoint();v.addMarker(m,H),r.addPoint(m.x,m.y),null!=P&&P.lineTo(m.x,m.y)}break;case"H":case"h":for(;!v.isCommandOrEnd();){var I=new U.Point((v.isRelativeCommand()?v.current.x:0)+v.getScalar(),v.current.y);v.addMarker(I,v.current),v.current=I,r.addPoint(v.current.x,v.current.y),null!=P&&P.lineTo(v.current.x,v.current.y)}break;case"V":case"v":for(;!v.isCommandOrEnd();){var I=new U.Point(v.current.x,(v.isRelativeCommand()?v.current.y:0)+v.getScalar());v.addMarker(I,v.current),v.current=I,r.addPoint(v.current.x,v.current.y),null!=P&&P.lineTo(v.current.x,v.current.y)}break;case"C":case"c":for(;!v.isCommandOrEnd();){var Y=v.current,o=v.getPoint(),x=v.getAsControlPoint(),N=v.getAsCurrentPoint();v.addMarker(N,x,o),r.addBezierCurve(Y.x,Y.y,o.x,o.y,x.x,x.y,N.x,N.y),null!=P&&P.bezierCurveTo(o.x,o.y,x.x,x.y,N.x,N.y)}break;case"S":case"s":for(;!v.isCommandOrEnd();){var Y=v.current,o=v.getReflectedControlPoint(),x=v.getAsControlPoint(),N=v.getAsCurrentPoint();v.addMarker(N,x,o),r.addBezierCurve(Y.x,Y.y,o.x,o.y,x.x,x.y,N.x,N.y),null!=P&&P.bezierCurveTo(o.x,o.y,x.x,x.y,N.x,N.y),v.previousCommand=v.command}break;case"Q":case"q":for(;!v.isCommandOrEnd();){var Y=v.current,x=v.getAsControlPoint(),N=v.getAsCurrentPoint();v.addMarker(N,x,x),r.addQuadraticCurve(Y.x,Y.y,x.x,x.y,N.x,N.y),null!=P&&P.quadraticCurveTo(x.x,x.y,N.x,N.y)}break;case"T":case"t":for(;!v.isCommandOrEnd();){var Y=v.current,x=v.getReflectedControlPoint();v.control=x;var N=v.getAsCurrentPoint();v.addMarker(N,x,x),r.addQuadraticCurve(Y.x,Y.y,x.x,x.y,N.x,N.y),null!=P&&P.quadraticCurveTo(x.x,x.y,N.x,N.y),v.previousCommand=v.command}break;case"A":case"a":for(;!v.isCommandOrEnd();){var Y=v.current,E=v.getScalar(),s=v.getScalar(),W=v.getScalar()*(Math.PI/180),f=v.getScalar(),G=v.getScalar(),N=v.getAsCurrentPoint(),t=new U.Point(Math.cos(W)*(Y.x-N.x)/2+Math.sin(W)*(Y.y-N.y)/2,-Math.sin(W)*(Y.x-N.x)/2+Math.cos(W)*(Y.y-N.y)/2),L=Math.pow(t.x,2)/Math.pow(E,2)+Math.pow(t.y,2)/Math.pow(s,2);L>1&&(E*=Math.sqrt(L),s*=Math.sqrt(L));var O=(f==G?-1:1)*Math.sqrt((Math.pow(E,2)*Math.pow(s,2)-Math.pow(E,2)*Math.pow(t.y,2)-Math.pow(s,2)*Math.pow(t.x,2))/(Math.pow(E,2)*Math.pow(t.y,2)+Math.pow(s,2)*Math.pow(t.x,2)));isNaN(O)&&(O=0);var Q=new U.Point(O*E*t.y/s,O*-s*t.x/E),q=new U.Point((Y.x+N.x)/2+Math.cos(W)*Q.x-Math.sin(W)*Q.y,(Y.y+N.y)/2+Math.sin(W)*Q.x+Math.cos(W)*Q.y),Z=function(P){return Math.sqrt(Math.pow(P[0],2)+Math.pow(P[1],2))},S=function(P,v){return(P[0]*v[0]+P[1]*v[1])/(Z(P)*Z(v))},C=function(P,v){return(P[0]*v[1]<P[1]*v[0]?-1:1)*Math.acos(S(P,v))},u=C([1,0],[(t.x-Q.x)/E,(t.y-Q.y)/s]),g=[(t.x-Q.x)/E,(t.y-Q.y)/s],n=[(-t.x-Q.x)/E,(-t.y-Q.y)/s],J=C(g,n);S(g,n)<=-1&&(J=Math.PI),S(g,n)>=1&&(J=0);var K=1-G?1:-1,j=u+K*(J/2),b=new U.Point(q.x+E*Math.cos(j),q.y+s*Math.sin(j));if(v.addMarkerAngle(b,j-K*Math.PI/2),v.addMarkerAngle(N,j-K*Math.PI),r.addPoint(N.x,N.y),null!=P){var S=E>s?E:s,k=E>s?1:E/s,M=E>s?s/E:1;P.translate(q.x,q.y),P.rotate(W),P.scale(k,M),P.arc(0,0,S,u,u+J,1-G),P.scale(1/k,1/M),P.rotate(-W),P.translate(-q.x,-q.y)}}break;case"Z":case"z":null!=P&&P.closePath(),v.current=v.start}return r},this.getMarkers=function(){for(var P=this.PathParser.getMarkerPoints(),v=this.PathParser.getMarkerAngles(),r=[],m=0;m<P.length;m++)r.push([P[m],v[m]]);return r}},U.Element.path.prototype=new U.Element.PathElementBase,U.Element.pattern=function(P){this.base=U.Element.ElementBase,this.base(P),this.createPattern=function(P,v){var r=this.attribute("width").toPixels("x",!0),m=this.attribute("height").toPixels("y",!0),H=new U.Element.svg;H.attributes.viewBox=new U.Property("viewBox",this.attribute("viewBox").value),H.attributes.width=new U.Property("width",r+"px"),H.attributes.height=new U.Property("height",m+"px"),H.attributes.transform=new U.Property("transform",this.attribute("patternTransform").value),H.children=this.children;var I=document.createElement("canvas");I.width=r,I.height=m;var Y=I.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&Y.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var o=-1;o<=1;o++)for(var x=-1;x<=1;x++)Y.save(),H.attributes.x=new U.Property("x",o*I.width),H.attributes.y=new U.Property("y",x*I.height),H.render(Y),Y.restore();var N=P.createPattern(I,"repeat");return N}},U.Element.pattern.prototype=new U.Element.ElementBase,U.Element.marker=function(P){this.base=U.Element.ElementBase,this.base(P),this.baseRender=this.render,this.render=function(P,v,r){P.translate(v.x,v.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&P.rotate(r),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&P.scale(P.lineWidth,P.lineWidth),P.save();var m=new U.Element.svg;m.attributes.viewBox=new U.Property("viewBox",this.attribute("viewBox").value),m.attributes.refX=new U.Property("refX",this.attribute("refX").value),m.attributes.refY=new U.Property("refY",this.attribute("refY").value),m.attributes.width=new U.Property("width",this.attribute("markerWidth").value),m.attributes.height=new U.Property("height",this.attribute("markerHeight").value),m.attributes.fill=new U.Property("fill",this.attribute("fill").valueOrDefault("black")),m.attributes.stroke=new U.Property("stroke",this.attribute("stroke").valueOrDefault("none")),m.children=this.children,m.render(P),P.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&P.scale(1/P.lineWidth,1/P.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&P.rotate(-r),P.translate(-v.x,-v.y)}},U.Element.marker.prototype=new U.Element.ElementBase,U.Element.defs=function(P){this.base=U.Element.ElementBase,this.base(P),this.render=function(P){}},U.Element.defs.prototype=new U.Element.ElementBase,U.Element.GradientBase=function(P){this.base=U.Element.ElementBase,this.base(P),this.stops=[];for(var v=0;v<this.children.length;v++){var r=this.children[v];"stop"==r.type&&this.stops.push(r)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(P){for(var v=0;v<this.attributesToInherit.length;v++){var r=this.attributesToInherit[v];!this.attribute(r).hasValue()&&P.attribute(r).hasValue()&&(this.attribute(r,!0).value=P.attribute(r).value)}},this.createGradient=function(P,v,r){var m=this;this.getHrefAttribute().hasValue()&&(m=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(m));var H=function(P){if(r.hasValue()){var v=new U.Property("color",P);return v.addOpacity(r).value}return P},I=this.getGradient(P,v);if(null==I)return H(m.stops[m.stops.length-1].color);for(var Y=0;Y<m.stops.length;Y++)I.addColorStop(m.stops[Y].offset,H(m.stops[Y].color));if(this.attribute("gradientTransform").hasValue()){var o=U.ViewPort.viewPorts[0],x=new U.Element.rect;x.attributes.x=new U.Property("x",-U.MAX_VIRTUAL_PIXELS/3),x.attributes.y=new U.Property("y",-U.MAX_VIRTUAL_PIXELS/3),x.attributes.width=new U.Property("width",U.MAX_VIRTUAL_PIXELS),x.attributes.height=new U.Property("height",U.MAX_VIRTUAL_PIXELS);var N=new U.Element.g;N.attributes.transform=new U.Property("transform",this.attribute("gradientTransform").value),N.children=[x];var E=new U.Element.svg;E.attributes.x=new U.Property("x",0),E.attributes.y=new U.Property("y",0),E.attributes.width=new U.Property("width",o.width),E.attributes.height=new U.Property("height",o.height),E.children=[N];var s=document.createElement("canvas");s.width=o.width,s.height=o.height;var W=s.getContext("2d");W.fillStyle=I,E.render(W);var f=W.createPattern(s,"no-repeat");return f.gradient=I,f.gradientTransform=this.attribute("gradientTransform").value,f.trans=new U.Transform(this.attribute("gradientTransform").value).getMatrix(),f}return I}},U.Element.GradientBase.prototype=new U.Element.ElementBase,U.Element.linearGradient=function(P){this.base=U.Element.GradientBase,this.base(P),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(P,v){var r="objectBoundingBox"==this.gradientUnits()?v.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var m="objectBoundingBox"==this.gradientUnits()?r.x()+r.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),H="objectBoundingBox"==this.gradientUnits()?r.y()+r.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),I="objectBoundingBox"==this.gradientUnits()?r.x()+r.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),Y="objectBoundingBox"==this.gradientUnits()?r.y()+r.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return m==I&&H==Y?null:P.createLinearGradient(m,H,I,Y)}},U.Element.linearGradient.prototype=new U.Element.GradientBase,U.Element.radialGradient=function(P){this.base=U.Element.GradientBase,this.base(P),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(P,v){var r=v.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var m="objectBoundingBox"==this.gradientUnits()?r.x()+r.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),H="objectBoundingBox"==this.gradientUnits()?r.y()+r.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),I=m,Y=H;this.attribute("fx").hasValue()&&(I="objectBoundingBox"==this.gradientUnits()?r.x()+r.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(Y="objectBoundingBox"==this.gradientUnits()?r.y()+r.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var U="objectBoundingBox"==this.gradientUnits()?(r.width()+r.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return P.createRadialGradient(I,Y,0,m,H,U)}},U.Element.radialGradient.prototype=new U.Element.GradientBase,U.Element.stop=function(P){this.base=U.Element.ElementBase,this.base(P),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var v=this.style("stop-color",!0);""===v.value&&(v.value="#000"),this.style("stop-opacity").hasValue()&&(v=v.addOpacity(this.style("stop-opacity"))),this.color=v.value},U.Element.stop.prototype=new U.Element.ElementBase,U.Element.AnimateBase=function(P){this.base=U.Element.ElementBase,this.base(P),U.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var P=this.attribute("attributeType").value,v=this.attribute("attributeName").value;return"CSS"==P?this.parent.style(v,!0):this.parent.attribute(v,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(P){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+P;var v=!1;if(this.begin<this.duration){var r=this.calcValue();if(this.attribute("type").hasValue()){var m=this.attribute("type").value;r=m+"("+r+")"}this.getProperty().value=r,v=!0}return v},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var P={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var v=P.progress*(this.values.value.length-1),r=Math.floor(v),m=Math.ceil(v);P.from=new U.Property("from",parseFloat(this.values.value[r])),P.to=new U.Property("to",parseFloat(this.values.value[m])),P.progress=(v-r)/(m-r)}else P.from=this.from,P.to=this.to;return P}},U.Element.AnimateBase.prototype=new U.Element.ElementBase,U.Element.animate=function(P){this.base=U.Element.AnimateBase,this.base(P),this.calcValue=function(){var P=this.progress(),v=P.from.numValue()+(P.to.numValue()-P.from.numValue())*P.progress;return v+this.initialUnits}},U.Element.animate.prototype=new U.Element.AnimateBase,U.Element.animateColor=function(P){this.base=U.Element.AnimateBase,this.base(P),this.calcValue=function(){var P=this.progress(),r=new v(P.from.value),m=new v(P.to.value);if(r.ok&&m.ok){var H=r.r+(m.r-r.r)*P.progress,I=r.g+(m.g-r.g)*P.progress,Y=r.b+(m.b-r.b)*P.progress;return"rgb("+parseInt(H,10)+","+parseInt(I,10)+","+parseInt(Y,10)+")"}return this.attribute("from").value}},U.Element.animateColor.prototype=new U.Element.AnimateBase,U.Element.animateTransform=function(P){this.base=U.Element.AnimateBase,this.base(P),this.calcValue=function(){for(var P=this.progress(),v=U.ToNumberArray(P.from.value),r=U.ToNumberArray(P.to.value),m="",H=0;H<v.length;H++)m+=v[H]+(r[H]-v[H])*P.progress+" ";return m}},U.Element.animateTransform.prototype=new U.Element.animate,U.Element.font=function(P){this.base=U.Element.ElementBase,this.base(P),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var v=0;v<this.children.length;v++){var r=this.children[v];"font-face"==r.type?(this.fontFace=r,r.style("font-family").hasValue()&&(U.Definitions[r.style("font-family").value]=this)):"missing-glyph"==r.type?this.missingGlyph=r:"glyph"==r.type&&(""!=r.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[r.unicode]&&(this.glyphs[r.unicode]=[]),this.glyphs[r.unicode][r.arabicForm]=r):this.glyphs[r.unicode]=r)}},U.Element.font.prototype=new U.Element.ElementBase,U.Element.fontface=function(P){this.base=U.Element.ElementBase,this.base(P),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},U.Element.fontface.prototype=new U.Element.ElementBase,U.Element.missingglyph=function(P){this.base=U.Element.path,this.base(P),this.horizAdvX=0},U.Element.missingglyph.prototype=new U.Element.path,U.Element.glyph=function(P){this.base=U.Element.path,this.base(P),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},U.Element.glyph.prototype=new U.Element.path,U.Element.text=function(P){this.captureTextNodes=!0,this.base=U.Element.RenderedElementBase,this.base(P),this.baseSetContext=this.setContext,this.setContext=function(P){this.baseSetContext(P);var v=this.style("dominant-baseline").toTextBaseline();null==v&&(v=this.style("alignment-baseline").toTextBaseline()),null!=v&&(P.textBaseline=v)},this.getBoundingBox=function(){var P=this.attribute("x").toPixels("x"),v=this.attribute("y").toPixels("y"),r=this.parent.style("font-size").numValueOrDefault(U.Font.Parse(U.ctx.font).fontSize);return new U.BoundingBox(P,v-r,P+Math.floor(2*r/3)*this.children[0].getText().length,v)},this.renderChildren=function(P){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(P,this,0);for(var v=0;v<this.children.length;v++)this.renderChild(P,this,this,v)},this.getAnchorDelta=function(P,v,r){var m=this.style("text-anchor").valueOrDefault("start");if("start"!=m){for(var H=0,I=r;I<v.children.length;I++){var Y=v.children[I];if(I>r&&Y.attribute("x").hasValue())break;Y.measureTextRecursive&&(H+=Y.measureTextRecursive(P))}return-1*("end"==m?H:H/2)}return 0},this.renderChild=function(P,v,r,m){var H=r.children[m];H.attribute("x").hasValue()?(H.x=H.attribute("x").toPixels("x")+v.getAnchorDelta(P,r,m),H.attribute("dx").hasValue()&&(H.x+=H.attribute("dx").toPixels("x"))):(H.attribute("dx").hasValue()&&(v.x+=H.attribute("dx").toPixels("x")),H.x=v.x),v.x=H.x+(H.measureText?H.measureText(P):0),H.attribute("y").hasValue()?(H.y=H.attribute("y").toPixels("y"),H.attribute("dy").hasValue()&&(H.y+=H.attribute("dy").toPixels("y"))):(H.attribute("dy").hasValue()&&(v.y+=H.attribute("dy").toPixels("y")),H.y=v.y),v.y=H.y,H.render(P);for(var m=0;m<H.children.length;m++)v.renderChild(P,v,H,m)}},U.Element.text.prototype=new U.Element.RenderedElementBase,U.Element.TextElementBase=function(P){this.base=U.Element.RenderedElementBase,this.base(P),this.getGlyph=function(P,v,r){var m=v[r],H=null;if(P.isArabic){var I="isolated";(0==r||" "==v[r-1])&&r<v.length-2&&" "!=v[r+1]&&(I="terminal"),r>0&&" "!=v[r-1]&&r<v.length-2&&" "!=v[r+1]&&(I="medial"),r>0&&" "!=v[r-1]&&(r==v.length-1||" "==v[r+1])&&(I="initial"),"undefined"!=typeof P.glyphs[m]&&(H=P.glyphs[m][I],null==H&&"glyph"==P.glyphs[m].type&&(H=P.glyphs[m]))}else H=P.glyphs[m];return null==H&&(H=P.missingGlyph),H},this.renderChildren=function(P){var v=this.parent.style("font-family").getDefinition();if(null==v)""!=P.fillStyle&&P.fillText(U.compressSpaces(this.getText()),this.x,this.y),""!=P.strokeStyle&&P.strokeText(U.compressSpaces(this.getText()),this.x,this.y);else{var r=this.parent.style("font-size").numValueOrDefault(U.Font.Parse(U.ctx.font).fontSize),m=this.parent.style("font-style").valueOrDefault(U.Font.Parse(U.ctx.font).fontStyle),H=this.getText();v.isRTL&&(H=H.split("").reverse().join(""));for(var I=U.ToNumberArray(this.parent.attribute("dx").value),Y=0;Y<H.length;Y++){var o=this.getGlyph(v,H,Y),x=r/v.fontFace.unitsPerEm;P.translate(this.x,this.y),P.scale(x,-x);var N=P.lineWidth;P.lineWidth=P.lineWidth*v.fontFace.unitsPerEm/r,"italic"==m&&P.transform(1,0,.4,1,0,0),o.render(P),"italic"==m&&P.transform(1,0,-.4,1,0,0),P.lineWidth=N,P.scale(1/x,-1/x),P.translate(-this.x,-this.y),this.x+=r*(o.horizAdvX||v.horizAdvX)/v.fontFace.unitsPerEm,"undefined"==typeof I[Y]||isNaN(I[Y])||(this.x+=I[Y])}}},this.getText=function(){},this.measureTextRecursive=function(P){for(var v=this.measureText(P),r=0;r<this.children.length;r++)v+=this.children[r].measureTextRecursive(P);return v},this.measureText=function(P){var v=this.parent.style("font-family").getDefinition();if(null!=v){var r=this.parent.style("font-size").numValueOrDefault(U.Font.Parse(U.ctx.font).fontSize),m=0,H=this.getText();v.isRTL&&(H=H.split("").reverse().join(""));for(var I=U.ToNumberArray(this.parent.attribute("dx").value),Y=0;Y<H.length;Y++){var o=this.getGlyph(v,H,Y);m+=(o.horizAdvX||v.horizAdvX)*r/v.fontFace.unitsPerEm,"undefined"==typeof I[Y]||isNaN(I[Y])||(m+=I[Y])}return m}var x=U.compressSpaces(this.getText());if(!P.measureText)return 10*x.length;P.save(),this.setContext(P);var N=P.measureText(x).width;return P.restore(),N}},U.Element.TextElementBase.prototype=new U.Element.RenderedElementBase,U.Element.tspan=function(P){this.captureTextNodes=!0,this.base=U.Element.TextElementBase,this.base(P),this.text=U.compressSpaces(P.value||P.text||P.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},U.Element.tspan.prototype=new U.Element.TextElementBase,U.Element.tref=function(P){this.base=U.Element.TextElementBase,this.base(P),this.getText=function(){var P=this.getHrefAttribute().getDefinition();if(null!=P)return P.children[0].getText()}},U.Element.tref.prototype=new U.Element.TextElementBase,U.Element.a=function(v){this.base=U.Element.TextElementBase,this.base(v),this.hasText=v.childNodes.length>0;for(var r=0;r<v.childNodes.length;r++)3!=v.childNodes[r].nodeType&&(this.hasText=!1);this.text=this.hasText?v.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(P){if(this.hasText){this.baseRenderChildren(P);var v=new U.Property("fontSize",U.Font.Parse(U.ctx.font).fontSize);U.Mouse.checkBoundingBox(this,new U.BoundingBox(this.x,this.y-v.toPixels("y"),this.x+this.measureText(P),this.y))}else if(this.children.length>0){var r=new U.Element.g;r.children=this.children,r.parent=this,r.render(P)}},this.onclick=function(){P.open(this.getHrefAttribute().value)},this.onmousemove=function(){U.ctx.canvas.style.cursor="pointer"}},U.Element.a.prototype=new U.Element.TextElementBase,U.Element.image=function(P){this.base=U.Element.RenderedElementBase,this.base(P);var v=this.getHrefAttribute().value;if(""!=v){var r=v.match(/\.svg$/);if(U.Images.push(this),this.loaded=!1,r)this.img=U.ajax(v),this.loaded=!0;else{this.img=document.createElement("img"),1==U.opts.useCORS&&(this.img.crossOrigin="Anonymous");var m=this;this.img.onload=function(){m.loaded=!0},this.img.onerror=function(){U.log('ERROR: image "'+v+'" not found'),m.loaded=!0},this.img.src=v}this.renderChildren=function(P){var v=this.attribute("x").toPixels("x"),m=this.attribute("y").toPixels("y"),H=this.attribute("width").toPixels("x"),I=this.attribute("height").toPixels("y");0!=H&&0!=I&&(P.save(),r?P.drawSvg(this.img,v,m,H,I):(P.translate(v,m),U.AspectRatio(P,this.attribute("preserveAspectRatio").value,H,this.img.width,I,this.img.height,0,0),P.drawImage(this.img,0,0)),P.restore())},this.getBoundingBox=function(){var P=this.attribute("x").toPixels("x"),v=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),m=this.attribute("height").toPixels("y");return new U.BoundingBox(P,v,P+r,v+m)}}},U.Element.image.prototype=new U.Element.RenderedElementBase,U.Element.g=function(P){this.base=U.Element.RenderedElementBase,this.base(P),this.getBoundingBox=function(){for(var P=new U.BoundingBox,v=0;v<this.children.length;v++)P.addBoundingBox(this.children[v].getBoundingBox());return P}},U.Element.g.prototype=new U.Element.RenderedElementBase,U.Element.symbol=function(P){this.base=U.Element.RenderedElementBase,this.base(P),this.render=function(P){}},U.Element.symbol.prototype=new U.Element.RenderedElementBase,U.Element.switch=function(P){this.base=U.Element.RenderedElementBase,this.base(P)},U.Element.switch.prototype=new U.Element.symbol,U.Element.style=function(P){this.base=U.Element.ElementBase,this.base(P);for(var v="",r=0;r<P.childNodes.length;r++)v+=P.childNodes[r].data;v=v.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),v=U.compressSpaces(v);for(var H=v.split("}"),r=0;r<H.length;r++)if(""!=U.trim(H[r]))for(var I=H[r].split("{"),Y=I[0].split(","),o=I[1].split(";"),x=0;x<Y.length;x++){var N=U.trim(Y[x]);if(""!=N){for(var E=U.Styles[N]||{},s=0;s<o.length;s++){var W=o[s].indexOf(":"),f=o[s].substr(0,W),G=o[s].substr(W+1,o[s].length-W);null!=f&&null!=G&&(E[U.trim(f)]=new U.Property(U.trim(f),U.trim(G)))}if(U.Styles[N]=E,U.StylesSpecificity[N]=m(N),"@font-face"==N)for(var t=E["font-family"].value.replace(/"/g,""),L=E.src.value.split(","),O=0;O<L.length;O++)if(L[O].indexOf('format("svg")')>0)for(var Q=L[O].indexOf("url"),q=L[O].indexOf(")",Q),Z=L[O].substr(Q+5,q-Q-6),S=U.parseXml(U.ajax(Z)),C=S.getElementsByTagName("font"),u=0;u<C.length;u++){var g=U.CreateElement(C[u]);U.Definitions[t]=g}}}},U.Element.style.prototype=new U.Element.ElementBase,U.Element.use=function(P){this.base=U.Element.RenderedElementBase,this.base(P),this.baseSetContext=this.setContext,this.setContext=function(P){this.baseSetContext(P),this.attribute("x").hasValue()&&P.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&P.translate(0,this.attribute("y").toPixels("y"))};var v=this.getHrefAttribute().getDefinition();this.path=function(P){null!=v&&v.path(P)},this.getBoundingBox=function(){if(null!=v)return v.getBoundingBox()},this.renderChildren=function(P){if(null!=v){var r=v;"symbol"==v.type&&(r=new U.Element.svg,r.type="svg",r.attributes.viewBox=new U.Property("viewBox",v.attribute("viewBox").value),r.attributes.preserveAspectRatio=new U.Property("preserveAspectRatio",v.attribute("preserveAspectRatio").value),r.attributes.overflow=new U.Property("overflow",v.attribute("overflow").value),r.children=v.children),"svg"==r.type&&(this.attribute("width").hasValue()&&(r.attributes.width=new U.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(r.attributes.height=new U.Property("height",this.attribute("height").value)));var m=r.parent;r.parent=null,r.render(P),r.parent=m}}},U.Element.use.prototype=new U.Element.RenderedElementBase,U.Element.mask=function(P){this.base=U.Element.ElementBase,this.base(P),this.apply=function(P,v){var r=this.attribute("x").toPixels("x"),m=this.attribute("y").toPixels("y"),H=this.attribute("width").toPixels("x"),I=this.attribute("height").toPixels("y"),Y=1,o=2048;if(0==H&&0==I){for(var x=new U.BoundingBox,N=0;N<this.children.length;N++)this.children[N].getBoundingBox&&x.addBoundingBox(this.children[N].getBoundingBox());r=Math.floor(x.x1),m=Math.floor(x.y1),H=Math.floor(x.width()),I=Math.floor(x.height())}if(H&&I){var E=r+H,s=m+I;(E>o||s>o)&&(Y=Math.min(o/E,o/s),E*=Y,s*=Y);var W=v.style("mask").value;v.style("mask").value="";var f=document.createElement("canvas");f.width=E,f.height=s;var G=f.getContext("2d");if(G.save(),1!==Y&&G.scale(Y,Y),this.renderChildren(G),G.restore(),f.width&&f.height){var t=document.createElement("canvas");t.width=E,t.height=s;var L=t.getContext("2d");L.save(),1!==Y&&L.scale(Y,Y),v.render(L),L.restore(),L.globalCompositeOperation="destination-in",L.fillStyle=G.createPattern(f,"no-repeat"),L.fillRect(0,0,E,s),P.save(),1!==Y&&P.scale(1/Y,1/Y),P.fillStyle=L.createPattern(t,"no-repeat"),P.fillRect(0,0,E,s),P.restore(),v.style("mask").value=W}}},this.render=function(P){}},U.Element.mask.prototype=new U.Element.ElementBase,U.Element.clipPath=function(P){this.base=U.Element.ElementBase,this.base(P),this.apply=function(P){var v=P.beginPath;P.beginPath=function(){};var r=P.closePath;P.closePath=function(){};var m;this.style("transform",!1,!0).hasValue()&&(m=new U.Transform(this.style("transform",!1,!0).value),m.apply(P)),v.call(P);for(var H=0;H<this.children.length;H++){var I=this.children[H];if("undefined"!=typeof I.path){var Y=null;I.style("transform",!1,!0).hasValue()&&(Y=new U.Transform(I.style("transform",!1,!0).value),Y.apply(P)),I.path(P),P.closePath=r,Y&&Y.unapply(P)}}r.call(P),P.clip(),m&&m.unapply(P),P.beginPath=v,P.closePath=r},this.render=function(P){}},U.Element.clipPath.prototype=new U.Element.ElementBase,U.Element.filter=function(P){this.base=U.Element.ElementBase,this.base(P),this.apply=function(P,v){return},this.render=function(P){}},U.Element.filter.prototype=new U.Element.ElementBase,U.Element.feMorphology=function(P){this.base=U.Element.ElementBase,this.base(P),this.apply=function(P,v,r,m,H){}},U.Element.feMorphology.prototype=new U.Element.ElementBase,U.Element.feComposite=function(P){this.base=U.Element.ElementBase,this.base(P),this.apply=function(P,v,r,m,H){}},U.Element.feComposite.prototype=new U.Element.ElementBase,U.Element.feColorMatrix=function(P){function v(P,v,r,m,H,I){return P[r*m*4+4*v+I]}function r(P,v,r,m,H,I,Y){P[r*m*4+4*v+I]=Y}function m(P,v){var r=H[P];return r*(r<0?v-255:v)}this.base=U.Element.ElementBase,this.base(P);var H=U.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var I=H[0];H=[.213+.787*I,.715-.715*I,.072-.072*I,0,0,.213-.213*I,.715+.285*I,.072-.072*I,0,0,.213-.213*I,.715-.715*I,.072+.928*I,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var Y=H[0]*Math.PI/180,o=function(P,v,r){return P+Math.cos(Y)*v+Math.sin(Y)*r};H=[o(.213,.787,-.213),o(.715,-.715,-.715),o(.072,-.072,.928),0,0,o(.213,-.213,.143),o(.715,.285,.14),o(.072,-.072,-.283),0,0,o(.213,-.213,-.787),o(.715,-.715,.715),o(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(P,H,I,Y,U){if(Y&&U){for(var o=P.getImageData(0,0,Y,U),I=0;I<U;I++)for(var H=0;H<Y;H++){var x=v(o.data,H,I,Y,U,0),N=v(o.data,H,I,Y,U,1),E=v(o.data,H,I,Y,U,2),s=v(o.data,H,I,Y,U,3);r(o.data,H,I,Y,U,0,m(0,x)+m(1,N)+m(2,E)+m(3,s)+m(4,1)),r(o.data,H,I,Y,U,1,m(5,x)+m(6,N)+m(7,E)+m(8,s)+m(9,1)),r(o.data,H,I,Y,U,2,m(10,x)+m(11,N)+m(12,E)+m(13,s)+m(14,1)),r(o.data,H,I,Y,U,3,m(15,x)+m(16,N)+m(17,E)+m(18,s)+m(19,1))}P.clearRect(0,0,Y,U),P.putImageData(o,0,0)}}},U.Element.feColorMatrix.prototype=new U.Element.ElementBase,U.Element.feGaussianBlur=function(P){this.base=U.Element.ElementBase,this.base(P),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(P,v,m,H,I){return"undefined"==typeof r.canvasRGBA?void U.log("ERROR: StackBlur.js must be included for blur to work"):(P.canvas.id=U.UniqueId(),P.canvas.style.display="none",document.body.appendChild(P.canvas),
r.canvasRGBA(P.canvas.id,v,m,H,I,this.blurRadius),void document.body.removeChild(P.canvas))}},U.Element.feGaussianBlur.prototype=new U.Element.ElementBase,U.Element.title=function(P){},U.Element.title.prototype=new U.Element.ElementBase,U.Element.desc=function(P){},U.Element.desc.prototype=new U.Element.ElementBase,U.Element.MISSING=function(P){U.log("ERROR: Element '"+P.nodeName+"' not yet implemented.")},U.Element.MISSING.prototype=new U.Element.ElementBase,U.CreateElement=function(P){var v=P.nodeName.replace(/^[^:]+:/,"");v=v.replace(/\-/g,"");var r=null;return r="undefined"!=typeof U.Element[v]?new U.Element[v](P):new U.Element.MISSING(P),r.type=P.nodeName,r},U.load=function(P,v){U.loadXml(P,U.ajax(v))},U.loadXml=function(P,v){U.loadXmlDoc(P,U.parseXml(v))},U.loadXmlDoc=function(v,r){U.init(v);var m=function(r){for(var m=v.canvas;m;)r.x-=m.offsetLeft,r.y-=m.offsetTop,m=m.offsetParent;return P.scrollX&&(r.x+=P.scrollX),P.scrollY&&(r.y+=P.scrollY),r};1!=U.opts.ignoreMouse&&(v.canvas.onclick=function(P){var v=m(new U.Point(null!=P?P.clientX:event.clientX,null!=P?P.clientY:event.clientY));U.Mouse.onclick(v.x,v.y)},v.canvas.onmousemove=function(P){var v=m(new U.Point(null!=P?P.clientX:event.clientX,null!=P?P.clientY:event.clientY));U.Mouse.onmousemove(v.x,v.y)});var H=U.CreateElement(r.documentElement);H.root=!0,H.addStylesFromStyleDefinition();var I=!0,Y=function(){U.ViewPort.Clear(),v.canvas.parentNode&&U.ViewPort.SetCurrent(v.canvas.parentNode.clientWidth,v.canvas.parentNode.clientHeight),1!=U.opts.ignoreDimensions&&(H.style("width").hasValue()&&(v.canvas.width=H.style("width").toPixels("x"),v.canvas.style.width=v.canvas.width+"px"),H.style("height").hasValue()&&(v.canvas.height=H.style("height").toPixels("y"),v.canvas.style.height=v.canvas.height+"px"));var P=v.canvas.clientWidth||v.canvas.width,m=v.canvas.clientHeight||v.canvas.height;if(1==U.opts.ignoreDimensions&&H.style("width").hasValue()&&H.style("height").hasValue()&&(P=H.style("width").toPixels("x"),m=H.style("height").toPixels("y")),U.ViewPort.SetCurrent(P,m),null!=U.opts.offsetX&&(H.attribute("x",!0).value=U.opts.offsetX),null!=U.opts.offsetY&&(H.attribute("y",!0).value=U.opts.offsetY),null!=U.opts.scaleWidth||null!=U.opts.scaleHeight){var Y=null,o=null,x=U.ToNumberArray(H.attribute("viewBox").value);null!=U.opts.scaleWidth&&(H.attribute("width").hasValue()?Y=H.attribute("width").toPixels("x")/U.opts.scaleWidth:isNaN(x[2])||(Y=x[2]/U.opts.scaleWidth)),null!=U.opts.scaleHeight&&(H.attribute("height").hasValue()?o=H.attribute("height").toPixels("y")/U.opts.scaleHeight:isNaN(x[3])||(o=x[3]/U.opts.scaleHeight)),null==Y&&(Y=o),null==o&&(o=Y),H.attribute("width",!0).value=U.opts.scaleWidth,H.attribute("height",!0).value=U.opts.scaleHeight,H.style("transform",!0,!0).value+=" scale("+1/Y+","+1/o+")"}1!=U.opts.ignoreClear&&v.clearRect(0,0,P,m),H.render(v),I&&(I=!1,"function"==typeof U.opts.renderCallback&&U.opts.renderCallback(r))},o=!0;U.ImagesLoaded()&&(o=!1,Y()),U.intervalID=setInterval(function(){var P=!1;if(o&&U.ImagesLoaded()&&(o=!1,P=!0),1!=U.opts.ignoreMouse&&(P|=U.Mouse.hasEvents()),1!=U.opts.ignoreAnimation)for(var v=0;v<U.Animations.length;v++)P|=U.Animations[v].update(1e3/U.FRAMERATE);"function"==typeof U.opts.forceRedraw&&1==U.opts.forceRedraw()&&(P=!0),P&&(Y(),U.Mouse.runEvents())},1e3/U.FRAMERATE)},U.stop=function(){U.intervalID&&clearInterval(U.intervalID)},U.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(P,v){this.events.push({type:"onclick",x:P,y:v,run:function(P){P.onclick&&P.onclick()}})},this.onmousemove=function(P,v){this.events.push({type:"onmousemove",x:P,y:v,run:function(P){P.onmousemove&&P.onmousemove()}})},this.eventElements=[],this.checkPath=function(P,v){for(var r=0;r<this.events.length;r++){var m=this.events[r];v.isPointInPath&&v.isPointInPath(m.x,m.y)&&(this.eventElements[r]=P)}},this.checkBoundingBox=function(P,v){for(var r=0;r<this.events.length;r++){var m=this.events[r];v.isPointInBox(m.x,m.y)&&(this.eventElements[r]=P)}},this.runEvents=function(){U.ctx.canvas.style.cursor="";for(var P=0;P<this.events.length;P++)for(var v=this.events[P],r=this.eventElements[P];r;)v.run(r),r=r.parent;this.events=[],this.eventElements=[]}},U}var Y,U=function(P,v,r){if(null!=P||null!=v||null!=r){"string"==typeof P&&(P=document.getElementById(P)),null!=P.svg&&P.svg.stop();var m=I(r||{});1==P.childNodes.length&&"OBJECT"==P.childNodes[0].nodeName||(P.svg=m);var H=P.getContext("2d");"undefined"!=typeof v.documentElement?m.loadXmlDoc(H,v):"<"==v.substr(0,1)?m.loadXml(H,v):m.load(H,v)}else for(var Y=document.querySelectorAll("svg"),o=0;o<Y.length;o++){var x=Y[o],N=document.createElement("canvas");N.width=x.clientWidth,N.height=x.clientHeight,x.parentNode.insertBefore(N,x),x.parentNode.removeChild(x);var E=document.createElement("div");E.appendChild(x),U(N,E.innerHTML)}};"undefined"!=typeof Element.prototype.matches?Y=function(P,v){return P.matches(v)}:"undefined"!=typeof Element.prototype.webkitMatchesSelector?Y=function(P,v){return P.webkitMatchesSelector(v)}:"undefined"!=typeof Element.prototype.mozMatchesSelector?Y=function(P,v){return P.mozMatchesSelector(v)}:"undefined"!=typeof Element.prototype.msMatchesSelector?Y=function(P,v){return P.msMatchesSelector(v)}:"undefined"!=typeof Element.prototype.oMatchesSelector?Y=function(P,v){return P.oMatchesSelector(v)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(Y=function(P,v){return $(P).is(v)}),"undefined"==typeof Y&&(Y=Sizzle.matchesSelector));var o=/(\[[^\]]+\])/g,x=/(#[^\s\+>~\.\[:]+)/g,N=/(\.[^\s\+>~\.\[:]+)/g,E=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,s=/(:[\w-]+\([^\)]*\))/gi,W=/(:[^\s\+>~\.\[:]+)/g,f=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(P,v,r,m,H,I){var Y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:v,offsetY:r,scaleWidth:m,scaleHeight:H};for(var o in I)I.hasOwnProperty(o)&&(Y[o]=I[o]);U(this.canvas,P,Y)}),U})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object),function(P,v,r){function m(P){this._pointer=0,this._data=P,this._eof=!1}function H(P,v){return P<=9?v:P>=10&&P<=59?parseFloat(v):P>=60&&P<=99?parseInt(v):P>=100&&P<=109?v:P>=110&&P<=149?parseFloat(v):P>=160&&P<=179?parseInt(v):P>=210&&P<=239?parseFloat(v):P>=270&&P<=289?parseInt(v):P>=290&&P<=299?I(v):P>=300&&P<=369?v:P>=370&&P<=389?parseInt(v):P>=390&&P<=399?v:P>=400&&P<=409?parseInt(v):P>=410&&P<=419?v:P>=420&&P<=429?parseInt(v):P>=430&&P<=439?v:P>=440&&P<=459?parseInt(v):P>=460&&P<=469?parseFloat(v):P>=470&&P<=481?v:999===P?v:P>=1e3&&P<=1009?v:P>=1010&&P<=1059?parseFloat(v):P>=1060&&P<=1071?parseInt(v):(console.log("WARNING: Group code does not have a defined type: %j",{code:P,value:v}),v)}function I(P){if("0"===P)return!1;if("1"===P)return!0;throw TypeError("String '"+P+"' cannot be cast to Boolean type")}function Y(P){P&&P.sanitize!==r&&(this.sanitize=P.sanitize)}function U(P){G.debug("unhandled group "+o(P))}function o(P){return P.code+":"+P.value}function x(P){return t[P]}var N="ht",E=P[N],s=E.Default,W=s.getInternal();W.addMethod(s,{cadToShape:function(P,v){var r=new E.DxfViewer(v);return r.toShape(P)},shapeToCad:function(P,v,r){var m=new E.DxfWriter(r);return m.toDxf(P,v)}});var f=function(){},G={debug:f,warn:f,error:f},t=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];m.prototype.next=function(){var P;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return P={code:parseInt(this._data[this._pointer])},this._pointer++,P.value=H(P.code,this._data[this._pointer].trim()),this._pointer++,0===P.code&&"EOF"===P.value&&(this._eof=!0),P},m.prototype.hasNext=function(){return!this._eof&&!(this._pointer>this._data.length-2)},m.prototype.isEOF=function(){return this._eof},Y.prototype.parse=function(P,v){throw new Error("read() not implemented. Use readSync()")},Y.prototype.parseSync=function(P){return"string"==typeof P?this._parse(P):(console.error("Cannot read dxf source of type `"+typeof P),null)},Y.prototype.parseStream=function(P,v){function r(P){I+=P}function m(){try{var P=Y._parse(I)}catch(P){return v(P)}v(null,P)}function H(P){v(P)}var I="",Y=this;P.on("data",r),P.on("end",m),P.on("error",H)},Y.prototype.sanitizeFileName=function(){var P=/[\/\?<>\\:\*\|":]/g,v=/[\x00-\x1f\x80-\x9f]/g,r=/^\.+$/,m=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,H=/[\. ]+$/;return function(I){var Y=this.sanitize;return null==Y?I:I.replace(P,Y).replace(v,Y).replace(r,Y).replace(m,Y).replace(H,Y)}}(),Y.prototype._parse=function(P){var H,I,Y=this,N={},E=0,s=P.split(/\r\n|\r|\n/g);if(H=new m(s),!H.hasNext())throw Error("Empty file");var W=function(){for(I=H.next();!H.isEOF();)if(0===I.code&&"SECTION"===I.value){if(I=H.next(),2!==I.code){console.error("Unexpected code %s after 0:SECTION",o(I)),I=H.next();continue}"HEADER"===I.value?(G.debug("> HEADER"),N.header=t(),G.debug("<")):"BLOCKS"===I.value?(G.debug("> BLOCKS"),N.blocks=L(),G.debug("<")):"ENTITIES"===I.value?(G.debug("> ENTITIES"),N.entities=n(!1),G.debug("<")):"TABLES"===I.value?(G.debug("> TABLES"),N.tables=Q(),G.debug("<")):"EOF"===I.value?G.debug("EOF"):G.warn("Skipping section '%s'",I.value)}else I=H.next()},f=function(P,v){return I.code===P&&I.value===v},t=function(){var P=null,v=null,r={};for(I=H.next();;){if(f(0,"ENDSEC")){P&&(r[P]=v);break}9===I.code?(P&&(r[P]=v),P=I.value):10===I.code?v={x:I.value}:20===I.code?v.y=I.value:30===I.code?v.z=I.value:v=I.value,I=H.next()}return I=H.next(),r},L=function(){var P,v={};for(I=H.next();"EOF"!==I.value&&!f(0,"ENDSEC");)f(0,"BLOCK")?(G.debug("block {"),P=O(),G.debug("}"),V(P),P.name?v[P.name]=P:G.error('block with handle "'+P.handle+'" is missing a name.')):(U(I),I=H.next());return v},O=function(){var P={};for(I=H.next();"EOF"!==I.value;){switch(I.code){case 1:P.xrefPath=I.value,I=H.next();break;case 2:P.name=Y.sanitizeFileName(I.value),I=H.next();break;case 3:P.name2=Y.sanitizeFileName(I.value),I=H.next();break;case 5:P.handle=I.value,I=H.next();break;case 8:P.layer=I.value,I=H.next();break;case 10:P.position=b();break;case 67:P.paperSpace=!(!I.value||1!=I.value),I=H.next();break;case 70:0!=I.value&&(P.type=I.value),I=H.next();break;case 100:I=H.next();break;case 330:P.ownerHandle=I.value,I=H.next();break;case 0:if("ENDBLK"==I.value)break;H._pointer-=2,P.entities=n(!0);break;default:U(I),I=H.next()}if(f(0,"ENDBLK")){I=H.next();break}}return P},Q=function(){var P={};for(I=H.next();"EOF"!==I.value&&!f(0,"ENDSEC");)if(f(0,"TABLE")){I=H.next();var v=g[I.value];v?(G.debug(I.value+" Table {"),P[g[I.value].tableName]=Z(),G.debug("}")):G.debug("Unhandled Table "+I.value)}else I=H.next();return I=H.next(),P},q="ENDTAB",Z=function(){var P,r=g[I.value],m={},Y=0;for(I=H.next();!f(0,q);)switch(I.code){case 5:m.handle=I.value,I=H.next();break;case 330:m.ownerHandle=I.value,I=H.next();break;case 100:"AcDbSymbolTable"===I.value?I=H.next():(U(I),I=H.next());break;case 70:Y=I.value,I=H.next();break;case 0:I.value===r.dxfSymbolName?m[r.tableRecordsProperty]=r.parseTableRecords():(U(I),I=H.next());break;default:U(I),I=H.next()}var o=m[r.tableRecordsProperty];return o&&(o.constructor===Array?P=o.length:"object"==typeof o&&(P=v.keys(o).length),Y!==P&&G.warn("Parsed "+P+" "+r.dxfSymbolName+"'s but expected "+Y)),I=H.next(),m},S=function(){var P=[],v={};for(G.debug("ViewPort {"),I=H.next();!f(0,q);)switch(I.code){case 2:v.name=I.value,I=H.next();break;case 10:v.lowerLeftCorner=b();break;case 11:v.upperRightCorner=b();break;case 12:v.center=b();break;case 13:v.snapBasePoint=b();break;case 14:v.snapSpacing=b();break;case 15:v.gridSpacing=b();break;case 16:v.viewDirectionFromTarget=b();break;case 17:v.viewTarget=b();break;case 40:v.viewHeight=I.value,v.aspectRatio!==r&&(v.viewWidth=I.value*v.aspectRatio),I=H.next();break;case 41:v.aspectRatio=I.value,v.viewHeight!==r&&(v.viewWidth=I.value*v.viewHeight),I=H.next();break;case 42:v.lensLength=I.value,I=H.next();break;case 43:v.frontClippingPlane=I.value,I=H.next();break;case 44:v.backClippingPlane=I.value,I=H.next();break;case 45:v.viewHeight=I.value,I=H.next();break;case 50:v.snapRotationAngle=I.value,I=H.next();break;case 51:v.viewTwistAngle=I.value,I=H.next();break;case 79:v.orthographicType=I.value,I=H.next();break;case 110:v.ucsOrigin=b();break;case 111:v.ucsXAxis=b();break;case 112:v.ucsYAxis=b();break;case 110:v.ucsOrigin=b();break;case 281:v.renderMode=I.value,I=H.next();break;case 281:v.defaultLightingType=I.value,I=H.next();break;case 292:v.defaultLightingOn=I.value,I=H.next();break;case 330:v.ownerHandle=I.value,I=H.next();break;case 63:case 421:case 431:v.ambientColor=I.value,I=H.next();break;case 0:"VPORT"===I.value&&(G.debug("}"),P.push(v),G.debug("ViewPort {"),v={},I=H.next());break;default:U(I),I=H.next()}return G.debug("}"),P.push(v),P},C=function(){var P,v,r={},m={};for(G.debug("LType {"),I=H.next();!f(0,"ENDTAB");)switch(I.code){case 2:m.name=I.value,P=I.value,I=H.next();break;case 3:m.description=I.value,I=H.next();break;case 73:v=I.value,v>0&&(m.pattern=[]),I=H.next();break;case 40:m.patternLength=I.value,I=H.next();break;case 49:m.pattern.push(I.value),I=H.next();break;case 0:G.debug("}"),v>0&&v!==m.pattern.length&&G.warn("lengths do not match on LTYPE pattern"),r[P]=m,m={},G.debug("LType {"),I=H.next();break;default:I=H.next()}return G.debug("}"),r[P]=m,r},u=function(){var P,v={},m={};for(G.debug("Layer {"),I=H.next();!f(0,"ENDTAB");)switch(I.code){case 2:m.name=I.value,P=I.value,I=H.next();break;case 62:m.visible=I.value>=0,m.color=x(Math.abs(I.value)),I=H.next();break;case 6:m.lineType=I.value,I=H.next();break;case 0:"LAYER"===I.value&&(G.debug("}"),v[P]=m,G.debug("Layer {"),m={},P=r,I=H.next());break;default:U(I),I=H.next()}return G.debug("}"),v[P]=m,v},g={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:S},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:C},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:u}},n=function(P){var v=[],r=P?"ENDBLK":"ENDSEC";for(I=H.next();;)if(0===I.code){if(I.value===r)break;var m;if("LWPOLYLINE"===I.value)G.debug("LWPOLYLINE {"),m=X(),G.debug("}");else if("POLYLINE"===I.value)G.debug("POLYLINE {"),m=_(),G.debug("}");else if("LINE"===I.value)G.debug("LINE {"),m=w(),G.debug("}");else if("CIRCLE"===I.value)G.debug("CIRCLE {"),m=c(),G.debug("}");else if("ARC"===I.value)G.debug("ARC {"),m=c(),G.debug("}");else if("ELLIPSE"===I.value)G.debug("ELLIPSE {"),m=h(),G.debug("}");else if("SPLINE"===I.value)G.debug("SPLINE {"),m=R(),G.debug("}");else if("TEXT"===I.value)G.debug("TEXT {"),m=z(),G.debug("}");else if("DIMENSION"===I.value)G.debug("DIMENSION {"),m=B(),G.debug("}");else if("INSERT"===I.value)G.debug("INSERT {"),m=e(),G.debug("}");else if("HATCH"===I.value)G.debug("HATCH {"),m=D(),G.debug("}");else if("SOLID"===I.value)G.debug("SOLID {"),m=l(),G.debug("}");else if("POINT"===I.value)G.debug("POINT {"),m=d(),G.debug("}");else if("MTEXT"===I.value)G.debug("MTEXT {"),m=i(),G.debug("}");else{if("ATTDEF"!==I.value){G.warn("Unhandled entity "+I.value),I=H.next();continue}G.debug("ATTDEF {"),m=$(),G.debug("}")}V(m),v.push(m)}else I=H.next();return"ENDSEC"==r&&(I=H.next()),v},J=function(P){switch(I.code){case 0:P.type=I.value,I=H.next();break;case 5:P.handle=I.value,I=H.next();break;case 6:P.lineType=I.value,I=H.next();break;case 8:P.layer=I.value,I=H.next();break;case 48:P.lineTypeScale=I.value,I=H.next();break;case 60:P.visible=0===I.value,I=H.next();break;case 62:P.colorIndex=I.value,P.color=x(Math.abs(I.value)),I=H.next();break;case 67:P.inPaperSpace=0!==I.value,I=H.next();break;case 210:P.extrusionDirection=b();break;case 230:P.extrusionDirection={x:0,y:0,z:I.value},I=H.next();break;case 330:P.ownerHandle=I.value,I=H.next();break;case 347:P.materialObjectHandle=I.value,I=H.next();break;case 370:P.lineweight=I.value,I=H.next();break;case 420:P.color=I.value,I=H.next();break;case 100:if("AcDbEntity"==I.value){I=H.next();break}default:U(I),I=H.next()}},K=function(){var P={type:I.value};for(I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 10:P.x=I.value,I=H.next();break;case 20:P.y=I.value,I=H.next();break;case 30:P.z=I.value,I=H.next();break;case 40:case 41:case 42:I=H.next();break;case 70:P.curveFittingVertex=0!==(1|I.value),P.curveFitTangent=0!==(2|I.value),P.splineVertex=0!==(8|I.value),P.splineControlPoint=0!==(16|I.value),P.ThreeDPolylineVertex=0!==(32|I.value),P.ThreeDPolylineMesh=0!==(64|I.value),P.polyfaceMeshVertex=0!==(128|I.value),I=H.next();break;case 50:case 71:case 72:case 73:case 74:I=H.next();break;default:J(P)}return P},j=function(){var P={type:I.value};for(I=H.next();"EOF"!=I&&0!=I.code;)J(P);return P},b=function(){var P={},v=I.code;if(P.x=I.value,v+=10,I=H.next(),I.code!=v)throw new Error("Expected code for point value to be "+v+" but got "+I.code+".");return P.y=I.value,v+=10,I=H.next(),I.code!=v?P:(P.z=I.value,I=H.next(),P)},k=function(){var P={},v=I.code;return P.x=I.value,v+=1,I=H.next(),I.code!=v?(H._pointer-=2,P.y=1):P.y=I.value,v+=1,I=H.next(),I.code!=v?(H._pointer-=2,P.z=1):P.z=I.value,I=H.next(),P},M=function(P){if(!P||P<=0)throw Error("n must be greater than 0 verticies");var v,r=[],m=!1,Y=!1;for(v=0;v<P;v++){for(var U={};"EOF"!==I&&0!==I.code&&!Y;){switch(I.code){case 10:if(m){Y=!0;continue}U.x=I.value,m=!0;break;case 20:U.y=I.value;break;case 30:U.z=I.value;break;case 40:U.startWidth=I.value;break;case 41:U.endWidth=I.value;break;case 42:0!=I.value&&(U.bulge=I.value);break;default:if(m){Y=!0;continue}}I=H.next()}r.push(U),m=!1,Y=!1}return r},a=function(){for(var P=[];"EOF"!==I;)if(0===I.code)if("VERTEX"===I.value)P.push(K());else if("SEQEND"===I.value){j();break}return P},i=function(){var P={type:I.value};for(I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 1:P.text=I.value,I=H.next();break;case 3:P.text+=I.value,I=H.next();break;case 10:P.position=b();break;case 40:P.height=I.value,I=H.next();break;case 41:P.width=I.value,I=H.next();break;case 71:P.attachmentPoint=I.value,I=H.next();break;case 72:P.drawingDirection=I.value,I=H.next();break;case 50:P.angle=2*I.value*Math.PI/360,I=H.next();break;case 11:P.directionX=I.value,I=H.next();break;case 21:P.directionY=I.value,I=H.next();break;default:J(P)}return P},$=function(){var P={type:I.value,scale:1,textStyle:"STANDARD"};for(I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 1:P.text=I.value,I=H.next();break;case 2:P.tag=I.value,I=H.next();break;case 3:P.prompt=I.value,I=H.next();break;case 7:P.textStyle=I.value,I=H.next();break;case 10:P.x=I.value,I=H.next();break;case 20:P.y=I.value,I=H.next();break;case 30:P.z=I.value,I=H.next();break;case 39:P.thickness=I.value,I=H.next();break;case 40:P.textHeight=I.value,I=H.next();break;case 41:P.scale=I.value,I=H.next();break;case 50:P.rotation=I.value,I=H.next();break;case 51:P.obliqueAngle=I.value,I=H.next();break;case 70:P.invisible=!!(1&I.value),P.constant=!!(2&I.value),P.verificationRequired=!!(4&I.value),P.preset=!!(8&I.value),I=H.next();break;case 71:P.backwards=!!(2&I.value),P.mirrored=!!(4&I.value),I=H.next();break;case 72:P.horizontalJustification=I.value,I=H.next();break;case 73:P.fieldLength=I.value,I=H.next();break;case 74:P.verticalJustification=I.value,I=H.next();break;case 100:I=H.next();break;case 210:P.extrusionDirectionX=I.value,I=H.next();break;case 220:P.extrusionDirectionY=I.value,I=H.next();break;case 230:P.extrusionDirectionZ=I.value,I=H.next();break;default:J(P)}return P},X=function(){var P={type:I.value,vertices:[]},v=0;for(I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 38:P.elevation=I.value,I=H.next();break;case 39:P.depth=I.value,I=H.next();break;case 70:P.shape=1===I.value,I=H.next();break;case 90:v=I.value,I=H.next();break;case 10:P.vertices=M(v);break;case 40:0!==I.value&&(P.startWidth=I.value),I=H.next();break;case 41:0!==I.value&&(P.endWidth=I.value),I=H.next();break;case 43:0!==I.value&&(P.width=I.value),I=H.next();break;default:J(P)}return P},_=function(){var P={type:I.value,vertices:[]};for(I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 10:case 20:case 30:case 39:I=H.next();break;case 40:0!==I.value&&(P.startWidth=I.value),I=H.next();break;case 41:0!==I.value&&(P.endWidth=I.value),I=H.next();break;case 70:P.shape=1===I.value,I=H.next();break;case 71:case 72:case 73:case 74:case 75:I=H.next();break;case 100:I=H.next();break;default:J(P)}return P.vertices=a(),P},w=function(){var P={type:I.value,vertices:[]};for(I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 10:P.vertices.unshift(b());break;case 11:P.vertices.push(b());break;case 100:if("AcDbLine"==I.value){I=H.next();break}default:J(P)}return P},c=function(){var P,v;for(P={type:I.value},I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 10:P.center=b();break;case 40:P.radius=I.value,I=H.next();break;case 50:P.startAngle=Math.PI/180*I.value,I=H.next();break;case 51:v=Math.PI/180*I.value,v<P.startAngle?P.angleLength=v+2*Math.PI-P.startAngle:P.angleLength=v-P.startAngle,P.endAngle=v,I=H.next();break;default:J(P)}return P},h=function(){var P,v;for(P={type:I.value},I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 10:P.center=b();break;case 11:P.major=b();break;case 40:P.ratio=I.value,I=H.next();break;case 41:P.startAngle=I.value,I=H.next();break;case 42:v=I.value,v<P.startAngle?P.angleLength=v+2*Math.PI-P.startAngle:P.angleLength=v-P.startAngle,P.endAngle=v,I=H.next();break;default:J(P)}return P},e=function(){var P;for(P={type:I.value},I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 2:P.block=Y.sanitizeFileName(I.value),I=H.next();break;case 10:P.center=b();break;case 41:P.scale=k();break;case 50:P.deg=I.value,I=H.next();break;default:J(P)}return P},D=function(){var P;for(P={type:I.value},I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 2:P.block=Y.sanitizeFileName(I.value),I=H.next();break;case 10:P.center=b();break;case 41:P.scale=k();break;case 50:P.deg=I.value,I=H.next();break;default:J(P)}return P},R=function(){var P,v;for(P={type:I.value},I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 10:P.center=b();break;case 11:P.major=b();break;case 40:P.ratio=I.value,I=H.next();break;case 41:P.startAngle=I.value,I=H.next();break;case 42:v=I.value,v<P.startAngle?P.angleLength=v+2*Math.PI-P.startAngle:P.angleLength=v-P.startAngle,P.endAngle=v,I=H.next();break;default:J(P)}return P},z=function(){var P;for(P={type:I.value},I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 10:P.startPoint=b();break;case 11:P.endPoint=b();break;case 40:P.textHeight=I.value,I=H.next();break;case 41:P.xScale=I.value,I=H.next();break;case 1:P.text=I.value,I=H.next();break;case 7:P.font=I.value,I=H.next();break;case 71:P.generationFlags=I.value,I=H.next();break;case 72:P.halign=I.value,I=H.next();break;case 73:P.valign=I.value,I=H.next();break;case 50:P.rotation=2*I.value*Math.PI/360,I=H.next();break;default:J(P)}return P},B=function(){var P;for(P={type:I.value},I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 2:P.block=Y.sanitizeFileName(I.value),I=H.next();break;case 10:P.anchorPoint=b();break;case 11:P.middleOfText=b();break;case 71:P.attachmentPoint=I.value,I=H.next();break;case 42:P.actualMeasurement=I.value,I=H.next();break;case 1:P.text=I.value,I=H.next();break;case 50:P.angle=I.value,I=H.next();break;default:J(P)}return P},l=function(){var P;for(P={type:I.value},P.points=[],I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 10:P.points[0]=b();break;case 11:P.points[1]=b();break;case 12:P.points[2]=b();break;case 13:P.points[3]=b();break;default:J(P)}return P},d=function(){var P;for(P={type:I.value},I=H.next();"EOF"!==I&&0!==I.code;)switch(I.code){case 10:P.position=b();break;case 39:P.thickness=I.value,I=H.next();break;case 100:if("AcDbPoint"==I.value){I=H.next();break}default:J(P)}return P},V=function(P){if(!P)throw new TypeError("entity cannot be undefined or null");P.handle||(P.handle=E++)};return W(),N};var L=E.DxfViewer=function(P){var v=this;v.init(P)};L.prototype={},L.prototype.constructor=L;var O={LINE:["LINE","POLYLINE","LWPOLYLINE"],CIRCLE:["CIRCLE","ARC"],ELLIPSE:["ELLIPSE"],TEXT:["TEXT","MTEXT"],SOLID:["SOLID"],POINT:["POINT"]};v.defineProperties(L.prototype,{dxf:{get:function(){return this._dxf}}}),L.prototype.init=function(P){var v=this,r=v.options={};P=P||{},r.font=P.font||"Standard",r.textScaleRatio=P.textScaleRatio||1,r.size=P.size,r.scale=P.scale,r.blockSize=P.blockSize||256,r.filter=P.filter,r.defaultColor=P.defaultColor||0,r.edgeLayer=P.edgeLayer,r.showText=P.showText||!0,r.mapColor=P.mapColor,r.circleSegments=P.circleSegments||72,r.browserMinFontSize=P.browserMinFontSize||8,r.useDxfViewport=P.useDxfViewport||!0,P.sanitize!==!1&&(r.sanitize=P.sanitize||"_")},L.prototype.toShape=function(P){var v=this;v.parseFile(P);var r,m,H,I=v._dxf.blocks,Y=v.sortBlocks(I);v._blockDef={};for(var U=Y.length-1;U>=0;U--)m=Y[U],H=I[m],H.entities&&(v._blockDef[m]||(r=v.entitiesToShape(H.entities,H.position,null,!1),r&&(r.flag=H.type,v._blockDef[m]=r)));return r=v.entitiesToShape(v._dxf.entities,null,v.options.size,!0,v.options.scale),r.sortedBlockName=Y,r.blockDef=v._blockDef,r.layers=v._dxf.tables.layer.layers,r},L.prototype.entitiesToShape=function(P,v,r,m,H){var I=this;I._minFontSize=12,I._bound={xMin:1/0,yMin:1/0,xMax:-(1/0),yMax:-(1/0)},v=v||{x:0,y:0,z:0};var Y,U,o,x=I._models={},N=I._dxf;for(Y=0,U=P.length;Y<U;Y++)o=P[Y],I._groupEntity(x,o,N);if(m&&I.options.useDxfViewport){var E=I._dxfViewport;!E||isNaN(E.x)||isNaN(E.y)||isNaN(E.width)||isNaN(E.height)||(I._bound={xMin:E.x-E.width/2,xMax:E.x+E.width/2,yMin:E.y-E.height/2,yMax:E.y+E.height/2})}I._shiftX=I._bound.xMin,I._shiftY=I._bound.yMax;var s=I._bound.xMax-I._bound.xMin,W=I._bound.yMax-I._bound.yMin;if(!(s<0||W<0)){if(s=s||1,W=W||1,I._bound.pos=v,H)I._scale=H;else{if(r){var f=r/s,G=r/W;I._scale=Math.min(f,G)}else I._scale=1;I._scale*=Math.max(1,Math.ceil(I.options.browserMinFontSize/I._minFontSize))}I.shapeComps=[],I.drawLine(),I.drawSolid(),I.drawCircle(),I.drawEllipse(),I.options.showText&&I.drawText(),I.drawBlock();var t={width:s*I._scale,height:W*I._scale,comps:I.shapeComps,scale:I._scale,anchorX:-(I._bound.xMin-v.x)/s,anchorY:(I._bound.yMax-v.y)/W,bound:I._bound};return I._calcBoundExtend(t),t}},L.prototype._calcBoundExtend=function(P){var v=1,r=!1;P.comps.forEach(function(P){v=Math.max(v,P.borderWidth||0),P.borderWidthAbsolute&&(r=!0)}),P.boundExtend=v,r&&(P.boundExtendAbsolute=!0)},L.prototype._bulgesAt=function(P,v){return P[v].bulge},L.prototype._isStraightLine=function(P){return!P||Math.abs(P)<1e-6},L.prototype._getDistance=function(P,v){var r=P.x-v.x,m=P.y-v.y;return Math.sqrt(r*r+m*m)},L.prototype._getBulgeSegment=function(P,v,r){var m=this,H=r<0,I=4*Math.atan(r);if(Math.abs(I)>2*Math.PI-1e-6)return[v];var Y={x:(P.x+v.x)/2,y:(P.y+v.y)/2},U=m._getDistance(P,v)/2,o=Math.atan2(v.y-P.y,v.x-P.x),x=Math.abs(U/Math.sin(I/2)),N=Math.abs(x*x-U*U),E=Math.sqrt(N);r>0?o+=Math.PI/2:o-=Math.PI/2,Math.abs(I)>Math.PI&&(E*=-1);var s,o,W=E*Math.cos(o)+Y.x,f=E*Math.sin(o)+Y.y,G=Math.atan2(P.y-f,P.x-W),t=Math.atan2(v.y-f,v.x-W),L=[];if(s=2*Math.PI/m.options.circleSegments,o=G,H){for(;t>G;)t-=2*Math.PI;for(;o>t;)o-=s,o<t&&(o=t),L.push({x:W+x*Math.cos(o),y:f+x*Math.sin(o)})}else{for(;t<G;)t+=2*Math.PI;for(;o<t;)o+=s,o>t&&(o=t),L.push({x:W+x*Math.cos(o),y:f+x*Math.sin(o)})}return L},L.prototype.drawLine=function(){var P,v,m,H,I,Y,U,o,x,N,E,s,W,f,G,t,L,Q,q,Z,S=this,C=S._models;for(P=O.LINE,H=0,I=P.length;H<I;H++){v=P[H],m=C[v];for(o in m)for(x=m[o],Y=0,U=x.length;Y<U;Y++)if(N=x[Y],E=N.vertices,E&&E.length){for(G=S.toLocal(E[0].x,1),t=S.toLocal(E[0].y,2),Q={type:"shape",cadType:v,maybeEdge:N.layer===S.options.edgeLayer,borderColor:o,points:[G,t],segments:[1]},Z=r,N.startWidth?Z=(N.startWidth+(N.endWidth?N.endWidth:N.startWidth))/2:N.width&&(Z=N.width),Z?Q.borderWidth=S.toLocal(Z):(Q.borderWidthAbsolute=!0,Q.borderWidth=1),W=1,f=E.length;W<f;W++)s=E[W],L=S._bulgesAt(E,W-1),S._isStraightLine(L)?(Q.points.push(S.toLocal(s.x,1),S.toLocal(s.y,2)),Q.segments.push(2)):(q=S._getBulgeSegment(E[W-1],s,L),q.forEach(function(P){Q.points.push(S.toLocal(P.x,1),S.toLocal(P.y,2)),Q.segments.push(2)}));N.shape&&(L=S._bulgesAt(E,E.length-1),S._isStraightLine(L)?Q.segments.push(5):(q=S._getBulgeSegment(E[E.length-1],E[0],L),q.forEach(function(P){Q.points.push(S.toLocal(P.x,1),S.toLocal(P.y,2)),Q.segments.push(2)}))),Q.handle=N.handle,S.shapeComps.push(Q)}}},L.prototype.drawBlock=function(){var P,v,r,m,H,I,Y,U,o,x,N,E,s=this,W=s._models.BLOCK;if(W)for(P=0,v=W.length;P<v;P++)r=W[P],m=r.block,H=s._blockDef[m],N=r.transform,I=Math.atan2(N.b,N.a),I===Math.PI||0===I?(o=Math.cos(I),Y=N.a/o,U=N.d/o):(x=Math.sin(I),Y=N.b/x,U=-N.c/x),E={type:"image",cadType:"block",handle:r.handle,name:m,rect:[[s.toLocal(N.tx,1),s.toLocal(N.ty,2)],s.toLocal(H.width/H.scale),s.toLocal(H.height/H.scale)],rotation:I},1===Y&&1===U||(E.scaleX=Y,E.scaleY=U),s.shapeComps.push(E)},L.prototype.drawSolid=function(){var P,v,r,m,H,I,Y,U,o,x,N,E=this,s=E._models;for(P=O.SOLID,m=0,H=P.length;m<H;m++){v=P[m],r=s[v];for(U in r)for(o=r[U],I=0,Y=o.length;I<Y;I++)x=o[I],N=x.points,E.shapeComps.push({type:"shape",cadType:v,handle:x.handle,background:U,points:[E.toLocal(N[0].x,1),E.toLocal(N[0].y,2),E.toLocal(N[1].x,1),E.toLocal(N[1].y,2),E.toLocal(N[3].x,1),E.toLocal(N[3].y,2),E.toLocal(N[2].x,1),E.toLocal(N[2].y,2)],segments:[1,2,2,2,5]})}},L.prototype.extrusionZNagative=function(P){var v=P.extrusionDirection;return!!v&&Math.abs(v.z+1)<1e-5},L.prototype.drawCircle=function(){var P,v,r,m,H,I,Y,U,o,x,N,E,s,W,f,G,t,L,Q,q,Z=this,S=Z._models;for(P=O.CIRCLE,m=0,H=P.length;m<H;m++){v=P[m],r=S[v];for(U in r)for(o=r[U],I=0,Y=o.length;I<Y;I++){if(x=o[I],N=x.startAngle||0,E=x.angleLength||2*Math.PI,s=N+E,W=Z.toLocal(x.radius),f=x.addonAngle||0,G=Z.toLocal(x.center.x,1),t=Z.toLocal(x.center.y,2),q=x.xInvert^Z.extrusionZNagative(x),
Q=x.yInvert,Q||q?q&&Q?(N=Math.PI+N,s=Math.PI+s,L=!1):(N=Math.PI*(q?1:2)-N,s=Math.PI*(q?1:2)-s,L=!0):L=!1,L=!L,N=2*Math.PI-N-f,s=2*Math.PI-s-f,L){var C=N;N=s,s=C}Z.shapeComps.push({type:"arc",cadType:v,handle:x.handle,borderColor:U,borderWidth:1,borderWidthAbsolute:!0,rect:[G-W,t-W,2*W,2*W],arcFrom:N,arcTo:s,arcClose:!1})}}},L.prototype.drawText=function(){var P,v,r,m,H,I,Y,U,o,x,N,E,s,W,f,G,t,L,Q,q,Z,S,C,u,g,n=this,J=n._models;for(P=O.TEXT,u=n.options.textScaleRatio,m=0,H=P.length;m<H;m++){v=P[m],r=J[v];for(U in r)for(o=r[U],I=0,Y=o.length;I<Y;I++)if(x=o[I],N=x.text,N&&N.length){if("MTEXT"===v)E=n.toLocal(x.height||12),s=n.toLocal(x.position.x,1),W=n.toLocal(x.position.y,2),q=x.angle?x.angle:x.directionX?Math.atan2(x.directionY,x.directionX):0,q+=x.addonAngle||0,C=1,Q=x.attachmentPoint||1,t=Q%3,L=Math.floor(Q/3),L=1===L?"middle":0===L?"top":"bottom",G=0===t?"right":2===t?"center":"left";else{E=n.toLocal(x.textHeight||12);var K=x.endPoint;K||(K=x.startPoint),s=K.x,W=K.y,q=x.rotation||0,C=x.xScale||1,2===x.generationFlags?q=2*Math.PI-q:4===x.generationFlags?q=Math.PI-q:6===x.generationFlags&&(q=Math.PI+q),s=n.toLocal(s,1),W=n.toLocal(W,2),t=x.halign,L=x.valign,G=2===t?"right":1===t?"center":"left",L=3===L?"top":2===L?"middle":"bottom"}W+=E/4;if(q=2*Math.PI-q,f=E*u+"px "+(x.font||n.options.font),"MTEXT"===v)for(N=N.replace(/\\{/g,"#@#"),N=N.replace(/\\}/g,"#@@"),N=N.replace(/({|})/g,""),N=N.replace(/#@#/g,"{"),N=N.replace(/#@@/g,"}"),N=N.replace(/\\[ACT]\d+;/g,""),(g=N.match(/\\f[^;]*;/))&&(N=N.replace(g[0],""),g=g[0].match(/\|p(\d+)/),g&&(f=g[0]/10*E*u+"px "+f)),W-=E/6,Z=N.split("\\P"),S=0;S<Z.length;S++)n.shapeComps.push({type:"text",cadType:v,handle:x.handle,color:U,text:Z[S],rotation:q,rect:[s,W+S*E*1.5,0,0],align:G,vAlign:L,font:f});else n.shapeComps.push({type:"text",cadType:v,handle:x.handle,color:U,text:N,scaleX:C,rotation:q,rect:[s,W,1e-5,1e-5],align:G,vAlign:L,font:f})}}},L.prototype.drawEllipse=function(){var P,v,r,m,H,I,Y,U,o,x,N,E,s,W,f,G,t,L,Q,q,Z,S,C=this,u=C._models;for(P=O.ELLIPSE,m=0,H=P.length;m<H;m++){v=P[m],r=u[v];for(U in r)for(o=r[U],I=0,Y=o.length;I<Y;I++){if(x=o[I],N=x.major,E=Math.atan2(N.y,N.x),s=C.toLocal(Math.sqrt(N.x*N.x+N.y*N.y)),W=s*x.ratio,f=x.startAngle||0,G=x.angleLength||2*Math.PI,t=f+G,L=C.toLocal(x.center.x,1),Q=C.toLocal(x.center.y,2),q=x.xInvert,Z=x.yInvert^C.extrusionZNagative(x),Z^=1,Z||q?q&&Z?(f=Math.PI+f,t=Math.PI+t,S=!1):(f=Math.PI*(q?1:2)-f,t=Math.PI*(q?1:2)-t,S=!0):S=!1,S){var g=f;f=t,t=g}E=2*Math.PI-E,C.shapeComps.push({type:"arc",cadType:v,handle:x.handle,borderColor:U,borderWidth:1,borderWidthAbsolute:!0,rotation:E,rect:[L-s,Q-W,2*s,2*W],arcFrom:f,arcTo:t,arcClose:!1,arcOval:!0})}}},L.prototype._transformPoint=function(P,v,r){if(P){var m=P.x,H=P.y;return r=r||1,{x:m*r*v.a+H*v.c+v.tx,y:m*r*v.b+H*v.d+v.ty}}},L.prototype._groupEntity=function(P,v,r,m,H){var I=this,Y=I.getColor(v,r);if(Y&&(!I.options.filter||!I.options.filter(v,H))){var U,o,x,N=I._transformPoint,E=v.type;if("DIMENSION"===E||"INSERT"===E){if(!v.block)return;var s=r.blocks[v.block];if(!s||!s.entities)return;if(!(x=I._blockDef[v.block]))return void console.log("no entity ",v.block);var W=m||{a:1,b:0,c:0,d:1,tx:0,ty:0};if("INSERT"===E){var f=v.scale?v.scale.x:1,G=v.scale?v.scale.y:1,t=0,L=1,O=0;if(v.deg&&(t=v.deg*Math.PI/180,t=2*Math.PI-t,L=Math.cos(t),O=Math.sin(t)),m){var Q=f*L,q=f*O,Z=-G*O,S=G*L,C=v.center.x,u=v.center.y;W={a:m.a*Q+m.c*q,b:m.b*Q+m.d*q,c:m.a*Z+m.c*S,d:m.b*Z+m.d*S,tx:m.a*C+m.c*u+m.tx,ty:m.b*C+m.d*u+m.ty}}else W={a:f*L,b:f*O,c:-G*O,d:G*L,tx:v.center.x,ty:v.center.y}}I.extrusionZNagative(v)&&(W.a*=-1,W.c*=-1,W.tx*=-1);var g=x.bound,n=(g.pos.x,g.pos.y,N({x:g.xMin,y:g.yMin},W)),J=N({x:g.xMax,y:g.yMax},W),K=N({x:g.xMin,y:g.yMax},W),j=N({x:g.xMax,y:g.yMin},W),b=I._bound;b.xMin=Math.min(b.xMin,n.x,J.x,K.x,j.x),b.yMin=Math.min(b.yMin,n.y,J.y,K.y,j.y),b.xMax=Math.max(b.xMax,n.x,J.x,K.x,j.x),b.yMax=Math.max(b.yMax,n.y,J.y,K.y,j.y);var k;return(k=I._models.BLOCK)||(I._models.BLOCK=k=[]),void k.push({handle:v.handle,block:v.block,transform:W})}(U=P[E])||(U=P[E]={}),(o=U[Y])||(o=U[Y]=[]);var M=I.extrusionZNagative(v)&&["POINT","LINE","ELLIPSE"].indexOf(E)<0;if(m||M){m||(m={a:1,b:0,c:0,d:1,tx:0,ty:0});var a={};for(var i in v)a[i]=v[i];a.radius&&(a.radius*=Math.sqrt(m.a*m.a+m.b*m.b)),a.textHeight&&(a.textHeight*=Math.sqrt(m.a*m.a+m.b*m.b));var $=M?-1:1;if(a.position=N(a.position,m,$),a.startPoint=N(a.startPoint,m,$),a.center=N(a.center,m,$),"ELLIPSE"===E){var X;X=N({x:v.major.x+v.center.x,y:v.major.y+v.center.y},m,$),a.major={x:X.x-a.center.x,y:X.y-a.center.y},I.extrusionZNagative(v)&&(a.major.x*=-1)}var _;a.vertices&&(_=[],a.vertices.forEach(function(P){var v=N(P,m,$);P.bulge&&(v.bulge=P.bulge),_.push(v)}),a.vertices=_),a.points&&(_=[],a.points.forEach(function(P){var v=N(P,m,$);P.bulge&&(v.bulge=P.bulge),_.push(v)}),a.points=_);var w=Math.atan2(m.b,m.a),c=Math.cos(w);a.yInvert=m.d*c<0,a.xInvert=m.a*c<0,0!==w&&(a.addonAngle=w),v=a}I.mergeBound(v),o.push(v)}},L.prototype.getPointsBound=function(P){for(var v=1/0,r=1/0,m=-(1/0),H=-(1/0),I=0,Y=P.length;I<Y;I++){var U=P[I];v=Math.min(v,U.x),r=Math.min(r,U.y),m=Math.max(m,U.x),H=Math.max(H,U.y)}return{xMin:v,yMin:r,xMax:m,yMax:H}},L.prototype.mergeBound=function(P){var v,r,m=this;r=P.type;for(v in O)if(O[v].indexOf(r)>=0)break;var H,I,Y,U,o,x,N,E,s,W,f,G,t,L,Q,q,Z,S,C,u,g,n=m.getPointsBound;switch(v){case"LINE":for(H=n(P.vertices),u=P.vertices.length,S=0;S<u;S++)C=P.vertices[S],m._isStraightLine(C.bulge)||(S!==u-1||P.shape)&&(g=n(m._getBulgeSegment(C,P.vertices[(S+1)%u],C.bulge)),H.xMin=Math.min(H.xMin,g.xMin),H.yMin=Math.min(H.yMin,g.yMin),H.xMax=Math.max(H.xMax,g.xMax),H.yMax=Math.max(H.yMax,g.yMax));break;case"SOLID":H=n(P.points);break;case"POINT":if(!P.position)return;I=P.position.x,Y=P.position.y,H={xMin:I,yMin:Y,xMax:I,yMax:Y};break;case"TEXT":if(!P.text||!P.text.length)return;I=P.position?P.position.x:P.startPoint.x,Y=P.position?P.position.y:P.startPoint.y,Z=P.height||P.textHeight||12,m._minFontSize=Math.min(m._minFontSize,Z),H={xMin:I,yMin:Y,xMax:I+Z*P.text.length,yMax:Y+Z};break;case"CIRCLE":for(I=P.center.x,Y=P.center.y,U=P.radius,o=[],x=P.startAngle||0,N=x+(P.angleLength||2*Math.PI),E=P.xInvert^m.extrusionZNagative(P),s=P.yInvert,W=E?-1:1,f=s?-1:1,G=x;G<N+Math.PI/30;G+=Math.PI/30)G=Math.min(G,N),o.push({x:I+W*U*Math.cos(G),y:Y+f*U*Math.sin(G)});H=n(o);break;case"ELLIPSE":for(I=P.center.x,Y=P.center.y,o=[],t=Math.sqrt(P.major.x*P.major.x+P.major.y*P.major.y),L=t*P.ratio,U=Math.atan2(P.major.y,P.major.x),Q=Math.sin(U),q=Math.cos(U),x=P.startAngle||0,N=x+(P.angleLength||2*Math.PI),E=P.xInvert,s=P.yInvert^m.extrusionZNagative(P),W=E?-1:1,f=s?-1:1,G=x;G<N+Math.PI/30;G+=Math.PI/30){G=Math.min(G,N);var J=W*t*Math.cos(G),K=f*L*Math.sin(G);o.push({x:I+(q*J-Q*K),y:Y+(Q*J+q*K)})}H=n(o);break;default:return}var j=m._bound;j.xMin=Math.min(j.xMin,H.xMin),j.yMin=Math.min(j.yMin,H.yMin),j.xMax=Math.max(j.xMax,H.xMax),j.yMax=Math.max(j.yMax,H.yMax)},L.prototype.parseFile=function(P){var v=this,r="string"==typeof v.options.sanitize?{sanitize:v.options.sanitize}:null,m=new Y(r),H=m.parseSync(P);v._dxf=H,v._isAc2015="AC1015"===H.header.$ACADVER,v._dxfViewport=v.getCameraParametersFromDxf(H)},L.prototype.toLocal=function(P,v){var r,m=this;return r=2===v?-(P-m._shiftY):1===v?P-m._shiftX:P,r*m._scale},L.prototype.getCameraParametersFromDxf=function(P){var v,r,m,H,I,Y,U,o,x,N,E,s,W=0;if(!v&&P.tables&&P.tables.viewPort){N=P.tables.viewPort.viewPorts;for(x in N)if(E=N[x],s=E.viewDirectionFromTarget,E.center&&(E.renderMode===W||s&&0===s.x&&0===s.y&&1===s.z)){m=E.center,H=E.upperRightCorner,I=E.lowerLeftCorner,v={x:H.x,y:H.y},r={x:I.x,y:I.y},Y=E.viewWidth||0,U=E.viewHeight||0,E.viewTarget&&(m={x:m.x+E.viewTarget.x,y:m.y+E.viewTarget.y});break}}return!v&&P.header&&(o=P.header,o.$EXTMIN&&o.$EXTMAX&&(v=o.$EXTMAX,r=o.$EXTMIN)),Y=Math.max(Y,v.x-r.x),U=Math.max(U,v.y-r.y),m=m||{x:Y/2+r.x,y:U/2+r.y},{width:Y,height:U,x:m.x,y:m.y}},L.prototype.getColor=function(P,v){var m,H=this;if(P||console.log("no entity",P),v.tables&&v.tables.layer&&(m=v.tables.layer.layers[P.layer]),!m||m.visible){var I;P.color!==r?(I=P.color,0===I&&(I=H.options.defaultColor)):m&&(I=m.color),I&&16777215!==I||(I=H.options.defaultColor);var I="#"+((1<<24)+I).toString(16).slice(1);return H.options.mapColor&&(I=H.options.mapColor(I)),I}},L.prototype.sortBlocks=function(P){var r,m,H,I,Y=v.keys(P),U={};for(r in P)if(m=P[r],m.entities)for(var o=0,x=m.entities.length;o<x;o++)H=m.entities[o],I=H.type,"DIMENSION"!==I&&"INSERT"!==I||H.block&&(U[r]||(U[r]=[]),U[r].push(H.block));for(var N=Y.length,E=N,s={},W=new Array(N),f=!1,G=function(P,v,r){if(r.indexOf(P)>=0)return void(f=!0);if(!s[v]){s[v]=!0;var m=U[P],H=m?m.length:0;if(H){var I=r.concat(P);do{var o=m[--H];if(G(o,Y.indexOf(o),I),f)break}while(H)}W[--N]=P}};E--;)s[E]||G(Y[E],E,[]);return f?[]:W};var Q=E.DxfWriter=function(P){var v=this;v.init(P)};Q.prototype={},Q.prototype.constructor=Q,v.defineProperties(Q.prototype,{}),Q.prototype.init=function(P){var r=this,m=E.DxfWriter.template;m.converted||(v.keys(m).forEach(function(P){m[P]=m[P].join("\n")}),m.converted=!0),r._transformFunc=P.transformFunc||function(P){return P},r._drawingScale=P.scale,r._matchFunc=P.matchFunc||function(){return!0},r._maxHandleId=262128},Q.prototype.toDxf=function(P,v){var r=this;r.dxfContent=P,r.gv=v,r.outputEntityLines=["ENTITIES","  0","ENDSEC"],r._fetchEntityContent(),r._collectGvEntity(),r._insertEntities();var m=r._write();return m},Q.prototype._collectGvEntity=function(){var P=this;P.gv.dm().toDatas(P._matchFunc).each(function(v){var r=v.a("handle");r&&P._recordMaxHandleId(r)})},Q.prototype._fetchEntityContent=function(){var P=this,v=P.dxfContent,r="ENDSEC",m=P.entitiesStartIndex=v.indexOf("ENTITIES"),H=P.entitiesEndIndex=v.indexOf(r,m)+r.length;P.entitiesContent=v.slice(m,H),P.dxfEntityLines=P.entitiesContent.split(/\r\n|\n/)},Q.prototype._updateEntities=function(){var P=this,v=P.outputEntityLines,m=P.dxfEntityLines,H=P.gvEntities;v.push(m[0]);for(var I,Y,U,o,x,N,E,s,W,f,G,t,L,O,Q=1,q=1e5,Z=P._findCode,S=P._toFloat;q--;){if(o=m[Q+1].trim(),"ENDSEC"===o){v.push(m[Q]),v.push(m[Q+1]);break}for(I=Q+2;q--&&"0"!==m[I].trim();)I+=2;if(x=m[Z("5",m,Q,I)],P._recordMaxHandleId(x),N=H[x]){for(Y=v.length,G=Q;G<I;G++)v.push(m[G]);if(U=v.length,Q=I,"edge"!==N.a("shapeType")){if("image"===N.a("shapeType")){for(E=P._getNodeRealScale(N),W=2*Math.PI-N.getRotation();W>=2*Math.PI;)W-=2*Math.PI;for(;W<0;)W+=2*Math.PI;s=P._transformFunc(N.getPosition()),Math.abs(E.x-1)<1e-5&&Math.abs(E.y+1)<1e-5&&(E.x=-1,E.y=1,W=2*Math.PI-W);var C={};[{key:"10",value:s.x},{key:"20",value:s.y},{key:"42",value:E.y,default:1,before:["50"]},{key:"41",value:E.x,default:1,dependOn:"42",before:["42","50"]},{key:"50",value:180*W/Math.PI,default:0}].forEach(function(P){if(t=P.key,L=P.value,O=P.default!==r&&Math.abs(L-P.default)<1e-5,L=S(L,"10"===t||"20"===t||"50"===t),f=Z(t,v,Y,U))L!==v[f].trim()&&(v[f]=L);else{if(O&&(!P.dependOn||C[P.dependOn]))return void(C[t]=!0);var m=!1;do{if(!P.before)break;if(f=r,P.before.forEach(function(P){var r=Z(P,v,Y,U);r&&(!f||r<f)&&(f=r)}),!f)break;v.splice(f-1,0," "+t,L),m=!0}while(!1);m||(v.push(" "+t),v.push(L)),U+=2}})}}else P._tryUpdateEdge(v,Y,U,o,N)}else console.log("have no entity with handle "+x+" "+o),Q=I}},Q.prototype._recordMaxHandleId=function(P){var v=parseInt("0x"+P),r=this;r._maxHandleId=Math.max(r._maxHandleId,v)},Q.prototype._nextHandleId=function(){var P=this,v=++P._maxHandleId;return v.toString(16).toUpperCase()},Q.prototype._getNodeRealScale=function(P){var v=this,r=P.getScale(),m=P.getSize(),H=E.Default.getImage(P.getImage());return{x:r.x*m.width*H.scale/(H.width*v._drawingScale),y:r.y*m.height*H.scale/(H.height*v._drawingScale)}},Q.template={INSERT:["  0","INSERT","  5","$HANDLE","330","1F","100","AcDbEntity","  8","0","100","AcDbBlockReference","  2","$BLOCK"," 10","$POSITION.X"," 20","$POSITION.Y"," 30","0.0"," 41","$SCALE.X"," 42","$SCALE.Y"," 50","$ROTATION"]},Q.prototype._insertEntities=function(){var P,v=this;v.gv.dm().toDatas(v._matchFunc).each(function(r){if(P=null,r.a("addonBlock"))P=v._addonBlock(r);else if(r.a("addonText"))P=v._addonText(r);else if(r.a("addonARC")&&!r.s("shape.arc.oval")){var m=r.s("shape.arc.to"),H=r.s("shape.arc.from")||0;P=!m||Math.abs(m-H)>=2*Math.PI?v._addonCircle(r):v._addonARC(r)}else r.a("addonARC")&&r.s("shape.arc.oval")?P=v._addonEllipse(r):r.a("addonLine")?P=v._addonLine(r):r.a("addonRect")&&(P=v._addonRect(r));if(P){var I=P.length,Y=v.outputEntityLines.length,U=Y+I;v.outputEntityLines.length=U,v.outputEntityLines[U-1]=v.outputEntityLines[Y-1],v.outputEntityLines[U-2]=v.outputEntityLines[Y-2];for(var o=0,x=Y-2;o<I;++o,++x)v.outputEntityLines[x]=P[o]}})};var q=function(P){if(P instanceof E.Shape){var v=new E.Matrix,r=P.getPosition();return v.translate(-r.x,-r.y).scale(P.getScaleX(),P.getScaleY()).rotate(P.getRotation()).translate(r.x,r.y),v}return P.getMatrix?P.getMatrix():new E.Matrix};Q.prototype._addonRect=function(P){var v=this,r=P.getPoints(),m=P.getSegments(),H=!0;m&&(H=5===m.get(m.size()-1));var I,Y=["  0","LWPOLYLINE","  5",P.a("handle")||v._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbPolyline"," 90","        "+r.size()," 70","     "+(H?1:0)," 43","0.0"],U=v._toFloat,o=q(P);return r.each(function(P){I=v._transformFunc(o.tf(P)),Y.push.apply(Y,[" 10",U(I.x,!0)," 20",U(I.y,!0)])}),Y},Q.prototype._addonCircle=function(P){var v=this,r=["  0","CIRCLE","  5",P.a("handle")||v._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"],m=v._toFloat,H=v._transformFunc(P.getPosition());r.push.apply(r,[" 10",m(H.x,!0)," 20",m(H.y,!0)," 30","0.0"]);var I=P.getScale(),Y=P.getWidth()*I.x,U=P.getHeight()*I.y;return r.push.apply(r,[" 40",.5*Math.min(Y,U)/v._drawingScale]),r},Q.prototype._addonLine=function(P){var v,r=this,m=[],H=r._toFloat,I=P.getPoints(),Y=q(P),U=r._transformFunc(Y.tf(I.get(0))),o=P.a("handle")||r._nextHandleId();return I.each(function(P,I){0!==I&&(m.push.apply(m,["  0","LINE","  5",o,"330","1F","100","AcDbEntity","  8","0","100","AcDbLine"]),m.push.apply(m,[" 10",H(U.x,!0)," 20",H(U.y,!0)," 30","0.0"]),v=r._transformFunc(Y.tf(P)),m.push.apply(m,[" 11",H(v.x,!0)," 21",H(v.y,!0)," 31","0.0"]),U=v,o=r._nextHandleId())}),m},Q.prototype._addonEllipse=function(P){var v=this,r=["  0","ELLIPSE","  5",P.a("handle")||v._nextHandleId()];r.push.apply(r,["330","1F","100","AcDbEntity","  8","0","100","AcDbEllipse"]);var m=v._toFloat,H=v._transformFunc(P.getPosition());r.push(" 10");r.push(m(H.x,!0));r.push(" 20");r.push(m(H.y,!0)),r.push.apply(r,[" 30","0.0"]);var I,Y=P.getScale(),U=P.getWidth()*Y.x/v._drawingScale,o=P.getHeight()*Y.y/v._drawingScale,x=.5*Math.max(U,o),N=0;U>o?I={x:x,y:0}:(I={x:0,y:x},N=.5*-Math.PI);var E=-P.getRotation(),s=Math.sin(E),W=Math.cos(E),f=W*I.x-s*I.y,G=s*I.x+W*I.y;r.push.apply(r,[" 11",m(f,!0)," 21",m(G,!0)," 31","0.0"]),r.push.apply(r,["210","0.0","220","0.0","230","1.0"]);var t=U/o;t>1&&(t=1/t),r.push.apply(r,[" 40",m(t,!0)]);var L=P.s("shape.arc.from"),O=P.s("shape.arc.to"),Q=2*Math.PI-O+N,q=(Q+O-L)%(2*Math.PI);return r.push.apply(r,[" 41",Q," 42",q||2*Math.PI]),r},Q.prototype._addonARC=function(P){var v=this,r=["  0","ARC","  5",P.a("handle")||v._nextHandleId()];r.push.apply(r,["330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"]);var m=v._toFloat,H=v._transformFunc(P.getPosition());r.push(" 10");r.push(m(H.x,!0));r.push(" 20");r.push(m(H.y,!0)),r.push.apply(r,[" 30","0.0"]);var I=P.getScale(),Y=P.getWidth()*I.x,U=P.getHeight()*I.y,o=.5*Math.min(Y,U);r.push.apply(r,[" 40",m(o/v._drawingScale,!0)]),r.push.apply(r,["100","AcDbArc"]);var x=P.getRotation(),N=P.s("shape.arc.from"),E=P.s("shape.arc.to"),s=2*Math.PI,W=(s-E-x)%s,f=(W+E-N)%s;return f=f||2*Math.PI,r.push.apply(r,[" 50",m(180*W/Math.PI,!0)," 51",m(180*f/Math.PI,!0)]),r};var Z={left:0,center:1,right:2},S={top:3,middle:2,bottom:1};Q.prototype._addonText=function(P){var v=this,r=["  0","TEXT","  5",P.a("handle")||v._nextHandleId()];r.push.apply(r,["330","1F","100","AcDbEntity","  8","0","100","AcDbText"]);var m=P.s("text.font")||"16px Standard",H=P.s("text"),I=E.Default.getTextSize(m,H),Y=P.getScale(),U=parseFloat(m)/v._drawingScale*Y.y,o=U/I.height*I.width,x=v._toFloat,N=v._transformFunc(P.getPosition());N.y+=U/4;var s=r.push(" 10");r.push(x(N.x,!0));var W=r.push(" 20");r.push(x(N.y,!0)),r.push.apply(r,[" 30","0.0"]),r.push(" 40"),r.push(U),r.push("  1"),r.push(H);var f=2*Math.PI-P.getRotation();r.push(" 50"),r.push(x(180*f/Math.PI%360,!0)),r.push(" 41"),r.push(Y.x/Y.y),m=m.substr(m.indexOf("px")+3).split(","),r.push("  7"),r.push(m[0]);var G=P.s("text.align")||"left",t=P.s("text.vAlign")||"bottom";if("left"!==G&&(r.push(" 72"),r.push("     "+Z[G])),"bottom"!==t||"left"!==G){r.push(" 11"),r.push(x(N.x,!0)),r.push(" 21"),r.push(x(N.y,!0)),r.push.apply(r,[" 31","0.0"]);var L=0,O=0;"center"===G?L=.5*o:"right"===G&&(L=o),L*=Y.x,"top"===t?O=U:"middle"===t&&(O=.5*U),O*=Y.y;var Q=Math.cos(f+Math.PI),q=Math.sin(f+Math.PI);r[s]=Q*L-q*O+N.x,r[W]=q*L+Q*O+N.y}return r.push.apply(r,["100","AcDbText"]),"bottom"!==t&&(r.push(" 73"),r.push("     "+S[t])),r},Q.prototype._addonBlock=function(P){var v=this,r=E.DxfWriter.template.INSERT;r=r.replace("$HANDLE",P.a("handle")||v._nextHandleId()),r=r.replace("$BLOCK",P.getImage());for(var m=v._getNodeRealScale(P),H=2*Math.PI-P.getRotation();H>=2*Math.PI;)H-=2*Math.PI;for(;H<0;)H+=2*Math.PI;var I=v._transformFunc(P.getPosition());Math.abs(m.x-1)<1e-5&&Math.abs(m.y+1)<1e-5&&(m.x=-1,m.y=1,H=2*Math.PI-H);var Y=v._toFloat;return r=r.replace("$POSITION.X",Y(I.x,!0)),r=r.replace("$POSITION.Y",Y(I.y,!0)),r=r.replace("$SCALE.X",Y(m.x)),r=r.replace("$SCALE.Y",Y(m.y)),r=r.replace("$ROTATION",Y(180*H/Math.PI,!0)),r.split(/\r\n|\n/)},Q.prototype._tryUpdateEdge=function(P,v,r,m,H){var I=this,Y=E.Default.getInternal(),U=Y.getEdgeAgentPosition(I.gv,H.getSourceAgent(),H.s("edge.source.position"),H.s("edge.source.offset.x"),H.s("edge.source.offset.y"),H.s("edge.source.anchor.x"),H.s("edge.source.anchor.y")),o=Y.getEdgeAgentPosition(I.gv,H.getTargetAgent(),H.s("edge.target.position"),H.s("edge.target.offset.x"),H.s("edge.target.offset.y"),H.s("edge.target.anchor.x"),H.s("edge.target.anchor.y"));U=I._transformFunc(U),o=I._transformFunc(o);var x=I._findCode;if("LINE"===m)P[x("10",P,v,r)]=U.x,P[x("20",P,v,r)]=U.y,P[x("11",P,v,r)]=o.x,P[x("21",P,v,r)]=o.y;else if("LWPOLYLINE"===m){for(var N,s=x("10",P,v,r),W=s;N=x("10",P,W+1,r);)W=N;W=(N=x("30",P,W+1,r))?N:x("20",P,W+1,r),P.splice(s-1,W-s+2);var f=[U];H.s("edge.points").each(function(P){f.push(I._transformFunc(P))}),f.push(o);var G=s-1;f.forEach(function(v){P.splice(G,0,"10",v.x,"20",v.y),G+=4})}},Q.prototype._findCode=function(P,v,r,m){for(var H=r,I=!1;H<m;){if(P===v[H].trim()){I=!0;break}H+=2}if(I)return H+1},Q.prototype._toFloat=function(P,v){return v||(P=Math.round(1e8*P)/1e8),P=""+P,P.indexOf(".")<0&&(P+=".0"),P},Q.prototype._write=function(){var P=this,v=P.dxfContent,r=P.outputEntityLines.join("\n"),m=P.entitiesStartIndex,H=P.entitiesEndIndex;return v.slice(0,m)+r+v.slice(H)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object),function(P,v,r){var m="ht",H=P[m],I=H.Default,Y=I.getInternal();Y.addMethod(I,{fontToShape:function(P,v,r){var m=new H.FontConverter(v);return m.toShape(P,r)}}),function(v){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=v();else if("function"==typeof define&&define.amd)define([],v);else{var r;r="undefined"!=typeof P?P:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.opentype=v()}}(function(){return function P(v,r,m){function H(Y,U){if(!r[Y]){if(!v[Y]){var o="function"==typeof require&&require;if(!U&&o)return o(Y,!0);if(I)return I(Y,!0);var x=new Error("Cannot find module '"+Y+"'");throw x.code="MODULE_NOT_FOUND",x}var N=r[Y]={exports:{}};v[Y][0].call(N.exports,function(P){var r=v[Y][1][P];return H(r?r:P)},N,N.exports,P,v,r,m)}return r[Y].exports}for(var I="function"==typeof require&&require,Y=0;Y<m.length;Y++)H(m[Y]);return H}({1:[function(P,v,r){r.argument=function(P,v){if(!P)throw new Error(v)},r.assert=r.argument},{}],2:[function(P,v,r){function m(P,v,r,m,H){P.beginPath(),P.moveTo(v,r),P.lineTo(m,H),P.stroke()}r.line=m},{}],3:[function(P,r,m){function H(P){this.font=P}function I(P){this.cmap=P}function Y(P,v){this.encoding=P,this.charset=v}function U(P){var v;switch(P.version){case 1:this.names=m.standardNames.slice();break;case 2:for(this.names=new Array(P.numberOfGlyphs),v=0;v<P.numberOfGlyphs;v++)P.glyphNameIndex[v]<m.standardNames.length?this.names[v]=m.standardNames[P.glyphNameIndex[v]]:this.names[v]=P.names[P.glyphNameIndex[v]-m.standardNames.length];break;case 2.5:for(this.names=new Array(P.numberOfGlyphs),v=0;v<P.numberOfGlyphs;v++)this.names[v]=m.standardNames[v+P.glyphNameIndex[v]];break;case 3:this.names=[]}}function o(P){var r,m,H,I,Y,U,o=P.tables.cmap;if(o)for(r=P.tables.cmap.glyphIndexMap,m=v.keys(r),H=0;H<m.length;H+=1)I=m[H],Y=r[I],U=P.glyphs[Y],U.addUnicode(parseInt(I));for(H=0;H<P.glyphs.length;H+=1)U=P.glyphs[H],P.cffEncoding?U.name=P.cffEncoding.charset[H]:U.name=P.glyphNames.glyphIndexToName(H)}var x=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],N=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],E=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],s=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];H.prototype.charToGlyphIndex=function(P){var v,r,m,H,I;if(v=P.charCodeAt(0),r=this.font.glyphs,!r)return null;for(m=0;m<r.length;m+=1)for(H=r[m],I=0;I<H.unicodes.length;I+=1)if(H.unicodes[I]===v)return m},I.prototype.charToGlyphIndex=function(P){return this.cmap.glyphIndexMap[P.charCodeAt(0)]||0;
},Y.prototype.charToGlyphIndex=function(P){var v,r;return v=P.charCodeAt(0),r=this.encoding[v],this.charset.indexOf(r)},U.prototype.nameToGlyphIndex=function(P){return this.names.indexOf(P)},U.prototype.glyphIndexToName=function(P){return this.names[P]},m.cffStandardStrings=x,m.cffStandardEncoding=N,m.cffExpertEncoding=E,m.standardNames=s,m.DefaultEncoding=H,m.CmapEncoding=I,m.CffEncoding=Y,m.GlyphNames=U,m.addGlyphNames=o},{}],4:[function(v,m,I){function Y(P){P=P||{},this.familyName=P.familyName||" ",this.styleName=P.styleName||" ",this.designer=P.designer||" ",this.designerURL=P.designerURL||" ",this.manufacturer=P.manufacturer||" ",this.manufacturerURL=P.manufacturerURL||" ",this.license=P.license||" ",this.licenseURL=P.licenseURL||" ",this.version=P.version||"Version 0.1",this.description=P.description||" ",this.copyright=P.copyright||" ",this.trademark=P.trademark||" ",this.unitsPerEm=P.unitsPerEm||1e3,this.supported=!0,this.glyphs=P.glyphs||[],this.encoding=new x.DefaultEncoding(this),this.tables={}}var U=v("./path"),o=v("./tables/sfnt"),x=v("./encoding");Y.prototype.hasChar=function(P){return null!==this.encoding.charToGlyphIndex(P)},Y.prototype.charToGlyphIndex=function(P){return this.encoding.charToGlyphIndex(P)},Y.prototype.charToGlyph=function(P){var v,r;return v=this.charToGlyphIndex(P),r=this.glyphs[v],r||(r=this.glyphs[0]),r},Y.prototype.stringToGlyphs=function(P){var v,r,m;for(m=[],v=0;v<P.length;v+=1)r=P[v],m.push(this.charToGlyph(r));return m},Y.prototype.nameToGlyphIndex=function(P){return this.glyphNames.nameToGlyphIndex(P)},Y.prototype.nameToGlyph=function(P){var v,r;return v=this.nametoGlyphIndex(P),r=this.glyphs[v],r||(r=this.glyphs[0]),r},Y.prototype.glyphIndexToName=function(P){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(P):""},Y.prototype.getKerningValue=function(P,v){P=P.index||P,v=v.index||v;var r=this.getGposKerningValue;return r?r(P,v):this.kerningPairs[P+","+v]||0},Y.prototype.forEachGlyph=function(P,v,m,H,I,Y){var U,o,x,N,E,s;if(this.supported)for(v=v!==r?v:0,m=m!==r?m:0,H=H!==r?H:72,I=I||{},U=I.kerning===r||I.kerning,o=1/this.unitsPerEm*H,x=this.stringToGlyphs(P),N=0;N<x.length;N+=1)E=x[N],Y(E,v,m,H,I),E.advanceWidth&&(v+=E.advanceWidth*o),U&&N<x.length-1&&(s=this.getKerningValue(E,x[N+1]),v+=s*o)},Y.prototype.getPath=function(P,v,r,m,H){var I=new U.Path;return this.forEachGlyph(P,v,r,m,H,function(P,v,r,m){var H=P.getPath(v,r,m);I.extend(H)}),I},Y.prototype.draw=function(P,v,r,m,H,I){this.getPath(v,r,m,H,I).draw(P)},Y.prototype.drawPoints=function(P,v,r,m,H,I){this.forEachGlyph(v,r,m,H,I,function(v,r,m,H){v.drawPoints(P,r,m,H)})},Y.prototype.drawMetrics=function(P,v,r,m,H,I){this.forEachGlyph(v,r,m,H,I,function(v,r,m,H){v.drawMetrics(P,r,m,H)})},Y.prototype.validate=function(){function P(P,v){P||r.push(v)}function v(v){P(m[v]&&m[v].trim().length>0,"No "+v+" specified.")}var r=[],m=this;v("familyName"),v("weightName"),v("manufacturer"),v("copyright"),v("version"),P(this.unitsPerEm>0,"No unitsPerEm specified.")},Y.prototype.toTables=function(){return o.fontToTable(this)},Y.prototype.toBuffer=function(){for(var P=this.toTables(),v=P.encode(),r=new ArrayBuffer(v.length),m=new Uint8Array(r),H=0;H<v.length;H++)m[H]=v[H];return r},Y.prototype.download=function(){var v=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",r=this.toBuffer();P.requestFileSystem=P.requestFileSystem||P.webkitRequestFileSystem,P.requestFileSystem(P.TEMPORARY,r.byteLength,function(P){P.root.getFile(v,{create:!0},function(P){P.createWriter(function(v){var m=new DataView(r),I=new Blob([m],{type:"font/opentype"});v.write(I),v.addEventListener("writeend",function(){location.href=P.toURL()},H.Default.eventListenerOptionsFalse)})})},function(P){throw P})},I.Font=Y},{"./encoding":3,"./path":8,"./tables/sfnt":23}],5:[function(P,v,m){function H(P){this.font=P.font||null,this.index=P.index||0,this.name=P.name||null,this.unicode=P.unicode||r,this.unicodes=P.unicodes||P.unicode!==r?[P.unicode]:[],this.xMin=P.xMin||0,this.yMin=P.yMin||0,this.xMax=P.xMax||0,this.yMax=P.yMax||0,this.advanceWidth=P.advanceWidth||0,this.path=P.path||null}var I=P("./check"),Y=P("./draw"),U=P("./path");H.prototype.addUnicode=function(P){0===this.unicodes.length&&(this.unicode=P),this.unicodes.push(P)},H.prototype.getPath=function(P,v,m){var H,I,Y,o;P=P!==r?P:0,v=v!==r?v:0,m=m!==r?m:72,H=1/this.font.unitsPerEm*m,I=new U.Path,Y=this.path.commands;for(var x=0;x<Y.length;x+=1)o=Y[x],"M"===o.type?I.moveTo(P+o.x*H,v+-o.y*H):"L"===o.type?I.lineTo(P+o.x*H,v+-o.y*H):"Q"===o.type?I.quadraticCurveTo(P+o.x1*H,v+-o.y1*H,P+o.x*H,v+-o.y*H):"C"===o.type?I.curveTo(P+o.x1*H,v+-o.y1*H,P+o.x2*H,v+-o.y2*H,P+o.x*H,v+-o.y*H):"Z"===o.type&&I.closePath();return I},H.prototype.getContours=function(){var P,v,m,H;if(this.points===r)return[];for(P=[],v=[],m=0;m<this.points.length;m+=1)H=this.points[m],v.push(H),H.lastPointOfContour&&(P.push(v),v=[]);return I.argument(0===v.length,"There are still points left in the current contour."),P},H.prototype.getMetrics=function(){for(var P=this.path.commands,v=[],r=[],m=0;m<P.length;m+=1){var H=P[m];"Z"!==H.type&&(v.push(H.x),r.push(H.y)),"Q"!==H.type&&"C"!==H.type||(v.push(H.x1),r.push(H.y1)),"C"===H.type&&(v.push(H.x2),r.push(H.y2))}var I={xMin:Math.min.apply(null,v),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,v),yMax:Math.max.apply(null,r),leftSideBearing:0};return I.rightSideBearing=this.advanceWidth-I.leftSideBearing-(I.xMax-I.xMin),I},H.prototype.draw=function(P,v,r,m){this.getPath(v,r,m).draw(P)},H.prototype.drawPoints=function(P,v,m,H){function I(v,r,m,H){var I,Y=2*Math.PI;for(P.beginPath(),I=0;I<v.length;I+=1)P.moveTo(r+v[I].x*H,m+v[I].y*H),P.arc(r+v[I].x*H,m+v[I].y*H,2,0,Y,!1);P.closePath(),P.fill()}var Y,U,o,x,N,E;for(v=v!==r?v:0,m=m!==r?m:0,H=H!==r?H:24,Y=1/this.font.unitsPerEm*H,o=[],x=[],N=this.path,U=0;U<N.commands.length;U+=1)E=N.commands[U],E.x!==r&&o.push({x:E.x,y:-E.y}),E.x1!==r&&x.push({x:E.x1,y:-E.y1}),E.x2!==r&&x.push({x:E.x2,y:-E.y2});P.fillStyle="blue",I(o,v,m,Y),P.fillStyle="red",I(x,v,m,Y)},H.prototype.drawMetrics=function(P,v,m,H){var I;v=v!==r?v:0,m=m!==r?m:0,H=H!==r?H:24,I=1/this.font.unitsPerEm*H,P.lineWidth=1,P.strokeStyle="black",Y.line(P,v,-1e4,v,1e4),Y.line(P,-1e4,m,1e4,m),P.strokeStyle="blue",Y.line(P,v+this.xMin*I,-1e4,v+this.xMin*I,1e4),Y.line(P,v+this.xMax*I,-1e4,v+this.xMax*I,1e4),Y.line(P,-1e4,m+-this.yMin*I,1e4,m+-this.yMin*I),Y.line(P,-1e4,m+-this.yMax*I,1e4,m+-this.yMax*I),P.strokeStyle="green",Y.line(P,v+this.advanceWidth*I,-1e4,v+this.advanceWidth*I,1e4)},m.Glyph=H},{"./check":1,"./draw":2,"./path":8}],6:[function(v,r,m){function H(P){var v,r=new ArrayBuffer(P.length),m=new Uint8Array(r);for(v=0;v<P.length;v+=1)m[v]=P[v];return r}function I(P,r){var m=v("fs");m.readFile(P,function(P,v){return P?r(P.message):void r(null,H(v))})}function Y(P,v){var r=new XMLHttpRequest;r.open("get",P,!0),r.responseType="arraybuffer",r.onload=function(){return 200!==r.status?v("Font could not be loaded: "+r.statusText):v(null,r.response||r.responseText)},r.send()}function U(P){var v,r,m,H,I,Y,U,o,E,W,J,K,j,b,k,M,a,i;if(v=new N.Font,r=new DataView(P,0),m=s.getFixed(r,0),1===m)v.outlinesFormat="truetype";else{if(m=s.getTag(r,0),"OTTO"!==m)throw new Error("Unsupported OpenType version "+m);v.outlinesFormat="cff"}for(H=s.getUShort(r,4),Y=12,I=0;I<H;I+=1){switch(U=s.getTag(r,Y),o=s.getULong(r,Y+8),U){case"cmap":v.tables.cmap=f.parse(r,o),v.encoding=new x.CmapEncoding(v.tables.cmap),v.encoding||(v.supported=!1);break;case"head":v.tables.head=O.parse(r,o),v.unitsPerEm=v.tables.head.unitsPerEm,k=v.tables.head.indexToLocFormat;break;case"hhea":v.tables.hhea=Q.parse(r,o),v.ascender=v.tables.hhea.ascender,v.descender=v.tables.hhea.descender,v.numberOfHMetrics=v.tables.hhea.numberOfHMetrics;break;case"hmtx":E=o;break;case"maxp":v.tables.maxp=C.parse(r,o),v.numGlyphs=M=v.tables.maxp.numGlyphs;break;case"name":v.tables.name=u.parse(r,o),v.familyName=v.tables.name.fontFamily,v.styleName=v.tables.name.fontSubfamily;break;case"OS/2":v.tables.os2=g.parse(r,o);break;case"post":v.tables.post=n.parse(r,o),v.glyphNames=new x.GlyphNames(v.tables.post);break;case"glyf":W=o;break;case"loca":J=o;break;case"CFF ":K=o;break;case"kern":j=o;break;case"GPOS":b=o}Y+=16}return W&&J?(i=0===k,a=S.parse(r,J,M,i),v.glyphs=t.parse(r,W,a,v),q.parse(r,E,v.numberOfHMetrics,v.numGlyphs,v.glyphs),x.addGlyphNames(v)):K?(G.parse(r,K,v),x.addGlyphNames(v)):v.supported=!1,v.supported&&(j?v.kerningPairs=Z.parse(r,j):v.kerningPairs={},b&&L.parse(r,b,v)),v}function o(v,r){var m="undefined"==typeof P,H=m?I:Y;H(v,function(P,v){if(P)return r(P);var m=U(v);return m.supported?r(null,m):r("Font is not supported (is this a Postscript font?)")})}var x=v("./encoding"),N=v("./font"),E=v("./glyph"),s=v("./parse"),W=v("./path"),f=v("./tables/cmap"),G=v("./tables/cff"),t=v("./tables/glyf"),L=v("./tables/gpos"),O=v("./tables/head"),Q=v("./tables/hhea"),q=v("./tables/hmtx"),Z=v("./tables/kern"),S=v("./tables/loca"),C=v("./tables/maxp"),u=v("./tables/name"),g=v("./tables/os2"),n=v("./tables/post");m._parse=s,m.Font=N.Font,m.Glyph=E.Glyph,m.Path=W.Path,m.parse=U,m.load=o},{"./encoding":3,"./font":4,"./glyph":5,"./parse":7,"./path":8,"./tables/cff":10,"./tables/cmap":11,"./tables/glyf":12,"./tables/gpos":13,"./tables/head":14,"./tables/hhea":15,"./tables/hmtx":16,"./tables/kern":17,"./tables/loca":18,"./tables/maxp":19,"./tables/name":20,"./tables/os2":21,"./tables/post":22,fs:r}],7:[function(P,v,m){function H(P,v){this.data=P,this.offset=v,this.relativeOffset=0}m.getByte=function(P,v){return P.getUint8(v)},m.getCard8=m.getByte,m.getUShort=function(P,v){return P.getUint16(v,!1)},m.getCard16=m.getUShort,m.getShort=function(P,v){return P.getInt16(v,!1)},m.getULong=function(P,v){return P.getUint32(v,!1)},m.getFixed=function(P,v){var r,m;return r=P.getInt16(v,!1),m=P.getUint16(v+2,!1),r+m/65535},m.getTag=function(P,v){var r,m="";for(r=v;r<v+4;r+=1)m+=String.fromCharCode(P.getInt8(r));return m},m.getOffset=function(P,v,r){var m,H;for(H=0,m=0;m<r;m+=1)H<<=8,H+=P.getUint8(v+m);return H},m.getBytes=function(P,v,r){var m,H;for(m=[],H=v;H<r;H+=1)m.push(P.getUint8(H));return m},m.bytesToString=function(P){var v,r;for(v="",r=0;r<P.length;r+=1)v+=String.fromCharCode(P[r]);return v};var I={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};H.prototype.parseByte=function(){var P=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,P},H.prototype.parseChar=function(){var P=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,P},H.prototype.parseCard8=H.prototype.parseByte,H.prototype.parseUShort=function(){var P=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,P},H.prototype.parseCard16=H.prototype.parseUShort,H.prototype.parseSID=H.prototype.parseUShort,H.prototype.parseOffset16=H.prototype.parseUShort,H.prototype.parseShort=function(){var P=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,P},H.prototype.parseF2Dot14=function(){var P=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,P},H.prototype.parseULong=function(){var P=m.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,P},H.prototype.parseFixed=function(){var P=m.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,P},H.prototype.parseOffset16List=H.prototype.parseUShortList=function(P){for(var v=new Array(P),r=this.data,H=this.offset+this.relativeOffset,I=0;I<P;I++)v[I]=m.getUShort(r,H),H+=2;return this.relativeOffset+=2*P,v},H.prototype.parseString=function(P){var v=this.data,r=this.offset+this.relativeOffset,m="";this.relativeOffset+=P;for(var H=0;H<P;H++)m+=String.fromCharCode(v.getUint8(r+H));return m},H.prototype.parseTag=function(){return this.parseString(4)},H.prototype.parseLongDateTime=function(){var P=m.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,P},H.prototype.parseFixed=function(){var P=m.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,P/65536},H.prototype.parseVersion=function(){var P=m.getUShort(this.data,this.offset+this.relativeOffset),v=m.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,P+v/4096/10},H.prototype.skip=function(P,v){v===r&&(v=1),this.relativeOffset+=I[P]*v},m.Parser=H},{}],8:[function(P,v,m){function H(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}H.prototype.moveTo=function(P,v){this.commands.push({type:"M",x:P,y:v})},H.prototype.lineTo=function(P,v){this.commands.push({type:"L",x:P,y:v})},H.prototype.curveTo=H.prototype.bezierCurveTo=function(P,v,r,m,H,I){this.commands.push({type:"C",x1:P,y1:v,x2:r,y2:m,x:H,y:I})},H.prototype.quadTo=H.prototype.quadraticCurveTo=function(P,v,r,m){this.commands.push({type:"Q",x1:P,y1:v,x:r,y:m})},H.prototype.close=H.prototype.closePath=function(){this.commands.push({type:"Z"})},H.prototype.extend=function(P){P.commands&&(P=P.commands),Array.prototype.push.apply(this.commands,P)},H.prototype.draw=function(P){var v,r;for(P.beginPath(),v=0;v<this.commands.length;v+=1)r=this.commands[v],"M"===r.type?P.moveTo(r.x,r.y):"L"===r.type?P.lineTo(r.x,r.y):"C"===r.type?P.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?P.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&P.closePath();this.fill&&(P.fillStyle=this.fill,P.fill()),this.stroke&&(P.strokeStyle=this.stroke,P.lineWidth=this.strokeWidth,P.stroke())},H.prototype.toPathData=function(P){function v(v){return Math.round(v)===v?""+Math.round(v):v.toFixed(P)}function m(){for(var P="",r=0;r<arguments.length;r+=1){var m=arguments[r];m>=0&&r>0&&(P+=" "),P+=v(m)}return P}P=P!==r?P:2;for(var H="",I=0;I<this.commands.length;I+=1){var Y=this.commands[I];"M"===Y.type?H+="M"+m(Y.x,Y.y):"L"===Y.type?H+="L"+m(Y.x,Y.y):"C"===Y.type?H+="C"+m(Y.x1,Y.y1,Y.x2,Y.y2,Y.x,Y.y):"Q"===Y.type?H+="Q"+m(Y.x1,Y.y1,Y.x,Y.y):"Z"===Y.type&&(H+="Z")}return H},H.prototype.toSVG=function(P){var v='<path d="';return v+=this.toPathData(P),v+='"',this.fill&"black"!==this.fill&&(v+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(v+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),v+="/>"},m.Path=H},{}],9:[function(P,m,H){function I(P,m,H){var I;for(I=0;I<m.length;I+=1){var Y=m[I];this[Y.name]=Y.value}if(this.tableName=P,this.fields=m,H){var U=v.keys(H);for(I=0;I<U.length;I+=1){var o=U[I],x=H[o];this[o]!==r&&(this[o]=x)}}}var Y=P("./check"),U=P("./types").encode,o=P("./types").sizeOf;I.prototype.sizeOf=function(){for(var P=0,v=0;v<this.fields.length;v+=1){var m=this.fields[v],H=this[m.name];if(H===r&&(H=m.value),"function"==typeof H.sizeOf)P+=H.sizeOf();else{var I=o[m.type];Y.assert("function"==typeof I,"Could not find sizeOf function for field"+m.name),P+=I(H)}}return P},I.prototype.encode=function(){return U.TABLE(this)},H.Table=I},{"./check":1,"./types":24}],10:[function(P,v,m){function H(P,v){if(P===v)return!0;if(Array.isArray(P)&&Array.isArray(v)){if(P.length!==v.length)return!1;for(var r=0;r<P.length;r+=1)if(!H(P[r],v[r]))return!1;return!0}return!1}function I(P,v,r){var m,H,I,Y,U,o,x,N,E;if(m=[],H=[],I=X.getCard16(P,v),0!==I){for(U=X.getByte(P,v+2),o=v+(I+1)*U+2,x=v+3,N=0;N<I+1;N+=1)m.push(X.getOffset(P,x,U)),x+=U;Y=o+m[I]}else Y=v+2;for(N=0;N<m.length-1;N+=1)E=X.getBytes(P,o+m[N],o+m[N+1]),r&&(E=r(E)),H.push(E);return{objects:H,startOffset:v,endOffset:Y}}function Y(P){var v,r,m,H,I,Y;for(v="",r=15,m=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){if(H=P.parseByte(),I=H>>4,Y=15&H,I===r)break;if(v+=m[I],Y===r)break;v+=m[Y]}return parseFloat(v)}function U(P,v){var r,m,H,I;if(28===v)return r=P.parseByte(),m=P.parseByte(),r<<8|m;if(29===v)return r=P.parseByte(),m=P.parseByte(),H=P.parseByte(),I=P.parseByte(),r<<24|m<<16|H<<8|I;if(30===v)return Y(P);if(v>=32&&v<=246)return v-139;if(v>=247&&v<=250)return r=P.parseByte(),256*(v-247)+r+108;if(v>=251&&v<=254)return r=P.parseByte(),256*-(v-251)-r-108;throw new Error("Invalid b0 "+v)}function o(P){var v,r,m,H,I;for(v={},H=0;H<P.length;H+=1){if(r=P[H][0],m=P[H][1],I=1===m.length?m[0]:m,v.hasOwnProperty(r))throw new Error("Object "+v+" already has key "+r);v[r]=I}return v}function x(P,v,m){var H,I,Y,x;for(v=v!==r?v:0,H=new X.Parser(P,v),I=[],Y=[],m=m!==r?m:P.length;H.relativeOffset<m;)x=H.parseByte(),x<=21?(12===x&&(x=1200+H.parseByte()),I.push([x,Y]),Y=[]):Y.push(U(H,x));return o(I)}function N(P,v){return v=v<=390?i.cffStandardStrings[v]:P[v-391]}function E(P,v,m){var H,I,Y,U;for(U={},H=0;H<v.length;H+=1)I=v[H],Y=P[I.op],Y===r&&(Y=I.value!==r?I.value:null),"SID"===I.type&&(Y=N(m,Y)),U[I.name]=Y;return U}function s(P,v){var r={};return r.formatMajor=X.getCard8(P,v),r.formatMinor=X.getCard8(P,v+1),r.size=X.getCard8(P,v+2),r.offsetSize=X.getCard8(P,v+3),r.startOffset=v,r.endOffset=v+4,r}function W(P,v){var r;return r=x(P,0,P.byteLength),E(r,c,v)}function f(P,v,r,m){var H;return H=x(P,v,r),E(H,h,m)}function G(P,v,r,m){var H,I,Y,U,o,x;if(H=new X.Parser(P,v),r-=1,Y=[".notdef"],I=H.parseCard8(),0===I)for(U=0;U<r;U+=1)o=H.parseSID(),Y.push(N(m,o));else if(1===I)for(;Y.length<=r;)for(o=H.parseSID(),x=H.parseCard8(),U=0;U<=x;U+=1)Y.push(N(m,o)),o+=1;else{if(2!==I)throw new Error("Unknown charset format "+I);for(;Y.length<=r;)for(o=H.parseSID(),x=H.parseCard16(),U=0;U<=x;U+=1)Y.push(N(m,o)),o+=1}return Y}function t(P,v,r){var m,H,I,Y,U,o,x,N,E,s;if(m={},H=new X.Parser(P,v),I=H.parseCard8(),0===I)for(Y=H.parseCard8(),U=0;U<Y;U+=1)o=H.parseCard8(),m[o]=U;else{if(1!==I)throw new Error("Unknown encoding format "+I);for(x=H.parseCard8(),o=1,U=0;U<x;U+=1)for(N=H.parseCard8(),E=H.parseCard8(),s=N;s<=N+E;s+=1)m[s]=o,o+=1}return new i.CffEncoding(m,r)}function L(P,v,r){function m(P,v){s&&Y.closePath(),Y.moveTo(P,v),s=!0}function H(){var P;P=o.length%2!==0,P&&!N&&(E=o.shift()+v.nominalWidthX),x+=o.length>>1,o.length=0,N=!0}function I(P){var U,q,Z,S,C,u,g;for(U=0;U<P.length;)switch(Q=P[U],U+=1,Q){case 1:H();break;case 3:H();break;case 4:o.length>1&&!N&&(E=o.shift()+v.nominalWidthX,N=!0),f+=o.pop(),m(W,f);break;case 5:for(;o.length>0;)W+=o.shift(),f+=o.shift(),Y.lineTo(W,f);break;case 6:for(;o.length>0&&(W+=o.shift(),Y.lineTo(W,f),0!==o.length);)f+=o.shift(),Y.lineTo(W,f);break;case 7:for(;o.length>0&&(f+=o.shift(),Y.lineTo(W,f),0!==o.length);)W+=o.shift(),Y.lineTo(W,f);break;case 8:for(;o.length>0;)G=W+o.shift(),t=f+o.shift(),L=G+o.shift(),O=t+o.shift(),W=L+o.shift(),f=O+o.shift(),Y.curveTo(G,t,L,O,W,f);break;case 10:u=o.pop()+v.subrsBias,g=v.subrs[u],g&&I(g);break;case 11:return;case 12:Q=P[U],U+=1;var n,J,K,j,b,k,M;switch(Q){case 35:G=W+o.shift(),t=f+o.shift(),L=G+o.shift(),O=t+o.shift(),n=L+o.shift(),J=O+o.shift(),K=n+o.shift(),j=J+o.shift(),b=K+o.shift(),k=j+o.shift(),W=b+o.shift(),f=k+o.shift(),M=o.shift(),Y.curveTo(G,t,L,O,n,J),Y.curveTo(K,j,b,k,W,f);break;case 34:G=W+o.shift(),t=f,L=G+o.shift(),O=t+o.shift(),n=L+o.shift(),J=O,K=n+o.shift(),j=O,b=K+o.shift(),k=f,W=b+o.shift(),Y.curveTo(G,t,L,O,n,J),Y.curveTo(K,j,b,k,W,f);break;case 36:G=W+o.shift(),t=f+o.shift(),L=G+o.shift(),O=t+o.shift(),n=L+o.shift(),J=O,K=n+o.shift(),j=O,b=K+o.shift(),k=j+o.shift(),W=b+o.shift(),Y.curveTo(G,t,L,O,n,J),Y.curveTo(K,j,b,k,W,f);break;case 37:G=W+o.shift(),t=f+o.shift(),L=G+o.shift(),O=t+o.shift(),n=L+o.shift(),J=O+o.shift(),K=n+o.shift(),j=J+o.shift(),b=K+o.shift(),k=j+o.shift(),Math.abs(b-W)>Math.abs(k-f)?W=b+o.shift():f=k+o.shift(),Y.curveTo(G,t,L,O,n,J),Y.curveTo(K,j,b,k,W,f);break;default:console.log("Glyph "+r+": unknown operator 1200"+Q),o.length=0}break;case 14:o.length>0&&!N&&(E=o.shift()+v.nominalWidthX,N=!0),s&&(Y.closePath(),s=!1);break;case 18:H();break;case 19:case 20:H(),U+=x+7>>3;break;case 21:o.length>2&&!N&&(E=o.shift()+v.nominalWidthX,N=!0),f+=o.pop(),W+=o.pop(),m(W,f);break;case 22:o.length>1&&!N&&(E=o.shift()+v.nominalWidthX,N=!0),W+=o.pop(),m(W,f);break;case 23:H();break;case 24:for(;o.length>2;)G=W+o.shift(),t=f+o.shift(),L=G+o.shift(),O=t+o.shift(),W=L+o.shift(),f=O+o.shift(),Y.curveTo(G,t,L,O,W,f);W+=o.shift(),f+=o.shift(),Y.lineTo(W,f);break;case 25:for(;o.length>6;)W+=o.shift(),f+=o.shift(),Y.lineTo(W,f);G=W+o.shift(),t=f+o.shift(),L=G+o.shift(),O=t+o.shift(),W=L+o.shift(),f=O+o.shift(),Y.curveTo(G,t,L,O,W,f);break;case 26:for(o.length%2&&(W+=o.shift());o.length>0;)G=W,t=f+o.shift(),L=G+o.shift(),O=t+o.shift(),W=L,f=O+o.shift(),Y.curveTo(G,t,L,O,W,f);break;case 27:for(o.length%2&&(f+=o.shift());o.length>0;)G=W+o.shift(),t=f,L=G+o.shift(),O=t+o.shift(),W=L+o.shift(),f=O,Y.curveTo(G,t,L,O,W,f);break;case 28:q=P[U],Z=P[U+1],o.push((q<<24|Z<<16)>>16),U+=2;break;case 29:u=o.pop()+v.gsubrsBias,g=v.gsubrs[u],g&&I(g);break;case 30:for(;o.length>0&&(G=W,t=f+o.shift(),L=G+o.shift(),O=t+o.shift(),W=L+o.shift(),f=O+(1===o.length?o.shift():0),Y.curveTo(G,t,L,O,W,f),0!==o.length);)G=W+o.shift(),t=f,L=G+o.shift(),O=t+o.shift(),f=O+o.shift(),W=L+(1===o.length?o.shift():0),Y.curveTo(G,t,L,O,W,f);break;case 31:for(;o.length>0&&(G=W+o.shift(),t=f,L=G+o.shift(),O=t+o.shift(),f=O+o.shift(),W=L+(1===o.length?o.shift():0),Y.curveTo(G,t,L,O,W,f),0!==o.length);)G=W,t=f+o.shift(),L=G+o.shift(),O=t+o.shift(),W=L+o.shift(),f=O+(1===o.length?o.shift():0),Y.curveTo(G,t,L,O,W,f);break;default:Q<32?console.log("Glyph "+r+": unknown operator "+Q):Q<247?o.push(Q-139):Q<251?(q=P[U],U+=1,o.push(256*(Q-247)+q+108)):Q<255?(q=P[U],U+=1,o.push(256*-(Q-251)-q-108)):(q=P[U],Z=P[U+1],S=P[U+2],C=P[U+3],U+=4,o.push((q<<24|Z<<16|S<<8|C)/65536))}}var Y,U,o,x,N,E,s,W,f,G,t,L,O,Q;return Y=new _.Path,o=[],x=0,N=!1,E=v.defaultWidthX,s=!1,W=f=0,I(P),U=new $.Glyph({font:v,index:r}),U.path=Y,U.advanceWidth=E,U}function O(P){var v;return v=P.length<1240?107:P.length<33900?1131:32768}function Q(P,v,r){var m,H,Y,U,o,x,N,E,Q,q,Z,S,C,u;r.tables.cff={},m=s(P,v),H=I(P,m.endOffset,X.bytesToString),Y=I(P,H.endOffset),U=I(P,Y.endOffset,X.bytesToString),o=I(P,U.endOffset),r.gsubrs=o.objects,r.gsubrsBias=O(r.gsubrs);var g=new DataView(new Uint8Array(Y.objects[0]).buffer);for(x=W(g,U.objects),r.tables.cff.topDict=x,N=v+x.private[1],E=f(P,N,x.private[0],U.objects),r.defaultWidthX=E.defaultWidthX,r.nominalWidthX=E.nominalWidthX,0!==E.subrs?(Q=N+E.subrs,q=I(P,Q),r.subrs=q.objects,r.subrsBias=O(r.subrs)):(r.subrs=[],r.subrsBias=0),S=I(P,v+x.charStrings),r.nGlyphs=S.objects.length,C=G(P,v+x.charset,r.nGlyphs,U.objects),0===x.encoding?r.cffEncoding=new i.CffEncoding(i.cffStandardEncoding,C):1===x.encoding?r.cffEncoding=new i.CffEncoding(i.cffExpertEncoding,C):r.cffEncoding=t(P,v+x.encoding,C),r.encoding=r.encoding||r.cffEncoding,r.glyphs=[],u=0;u<r.nGlyphs;u+=1)Z=S.objects[u],r.glyphs.push(L(Z,r,u))}function q(P,v){var r,m;return r=i.cffStandardStrings.indexOf(P),r>=0&&(m=r),r=v.indexOf(P),r>=0?m=r+i.cffStandardStrings.length:(m=i.cffStandardStrings.length+v.length,v.push(P)),m}function Z(){return new w.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function S(P){var v=new w.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);v.names=[];for(var r=0;r<P.length;r+=1)v.names.push({name:"name_"+r,type:"NAME",value:P[r]});return v}function C(P,v,m){var I,Y,U,o={};for(I=0;I<P.length;I+=1)Y=P[I],U=v[Y.name],U===r||H(U,Y.value)||("SID"===Y.type&&(U=q(U,m)),o[Y.op]={name:Y.name,type:Y.type,value:U});return o}function u(P,v){var r=new w.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=C(c,P,v),r}function g(P){var v=new w.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return v.topDicts=[{name:"topDict_0",type:"TABLE",value:P}],v}function n(P){var v=new w.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);v.strings=[];for(var r=0;r<P.length;r+=1)v.strings.push({name:"string_"+r,type:"STRING",value:P[r]});return v}function J(){return new w.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function K(P,v){for(var r=new w.Table("Charsets",[{name:"format",type:"Card8",value:0}]),m=0;m<P.length;m+=1){var H=P[m],I=q(H,v);r.fields.push({name:"glyph_"+m,type:"SID",value:I})}return r}function j(P){var v,r,m,H,I,Y,U,o,x,N,E=[],s=P.path;for(E.push({name:"width",type:"NUMBER",value:P.advanceWidth}),v=0,r=0,m=0;m<s.commands.length;m+=1){if(H=s.commands[m],"Q"===H.type){var W=1/3,f=2/3;H={type:"C",x:H.x,y:H.y,x1:W*v+f*H.x1,y1:W*r+f*H.y1,x2:W*H.x+f*H.x1,y2:W*H.y+f*H.y1}}"M"===H.type?(I=Math.round(H.x-v),Y=Math.round(H.y-r),E.push({name:"dx",type:"NUMBER",value:I}),E.push({name:"dy",type:"NUMBER",value:Y}),E.push({name:"rmoveto",type:"OP",value:21}),v=Math.round(H.x),r=Math.round(H.y)):"L"===H.type?(I=Math.round(H.x-v),Y=Math.round(H.y-r),E.push({name:"dx",type:"NUMBER",value:I}),E.push({name:"dy",type:"NUMBER",value:Y}),E.push({name:"rlineto",type:"OP",value:5}),v=Math.round(H.x),r=Math.round(H.y)):"C"===H.type?(U=Math.round(H.x1-v),o=Math.round(H.y1-r),x=Math.round(H.x2-H.x1),N=Math.round(H.y2-H.y1),I=Math.round(H.x-H.x2),Y=Math.round(H.y-H.y2),E.push({name:"dx1",type:"NUMBER",value:U}),E.push({name:"dy1",type:"NUMBER",value:o}),E.push({name:"dx2",type:"NUMBER",value:x}),E.push({name:"dy2",type:"NUMBER",value:N}),E.push({name:"dx",type:"NUMBER",value:I}),E.push({name:"dy",type:"NUMBER",value:Y}),E.push({name:"rrcurveto",type:"OP",value:8}),v=Math.round(H.x),r=Math.round(H.y)):"Z"===H.type}return E.push({name:"endchar",type:"OP",value:14}),E}function b(P){for(var v=new w.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<P.length;r+=1){var m=P[r],H=j(m);v.charStrings.push({name:m.name,type:"CHARSTRING",value:H})}return v}function k(P,v){var r=new w.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=C(h,P,v),r}function M(P){var v=new w.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);return v.privateDicts=[{name:"privateDict_0",type:"TABLE",value:P}],v}function a(P,v){var r=new w.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]),m={version:v.version,fullName:v.fullName,familyName:v.familyName,weight:v.weightName,charset:999,encoding:0,charStrings:999};m.private=[0,999];for(var H={},I=[],Y=1;Y<P.length;Y+=1)I.push(P[Y].name);var U=[];r.header=Z(),r.nameIndex=S([v.postScriptName]);var o=u(m,U);r.topDictIndex=g(o),r.globalSubrIndex=J(),r.charsets=K(I,U),r.charStringsIndex=b(P);var x=k(H,U);r.privateDictIndex=M(x),r.stringIndex=n(U);var N=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return m.charset=N,m.encoding=0,m.charStrings=m.charset+r.charsets.sizeOf(),m.private[1]=m.charStrings+r.charStringsIndex.sizeOf(),o=u(m,U),r.topDictIndex=g(o),r}var i=P("../encoding"),$=P("../glyph"),X=P("../parse"),_=P("../path"),w=P("../table"),c=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],h=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];m.parse=Q,m.make=a},{"../encoding":3,"../glyph":5,"../parse":7,"../path":8,"../table":9}],11:[function(P,v,m){function H(P,v){var r,m,H,I,Y,U,N,E,s,W,f,G,t,L,O,Q,q,Z,S,C,u={};for(u.version=r=x.getUShort(P,v),o.argument(0===r,"cmap table version should be 0."),u.numtables=m=x.getUShort(P,v+2),H=-1,O=0;O<m;O+=1)if(I=x.getUShort(P,v+4+8*O),Y=x.getUShort(P,v+4+8*O+2),3===I&&(1===Y||0===Y)){H=x.getULong(P,v+4+8*O+4);break}if(H===-1)return null;for(S=new x.Parser(P,v+H),u.format=U=S.parseUShort(),o.argument(4===U,"Only format 4 cmap tables are supported."),u.length=S.parseUShort(),u.language=S.parseUShort(),u.segCount=N=S.parseUShort()>>1,S.skip("uShort",3),u.glyphIndexMap={},E=new x.Parser(P,v+H+14),s=new x.Parser(P,v+H+16+2*N),W=new x.Parser(P,v+H+16+4*N),f=new x.Parser(P,v+H+16+6*N),G=v+H+16+8*N,O=0;O<N-1;O+=1)for(t=E.parseUShort(),L=s.parseUShort(),q=W.parseShort(),Z=f.parseUShort(),Q=L;Q<=t;Q+=1)0!==Z?(G=f.offset+f.relativeOffset-2,G+=Z,G+=2*(Q-L),C=x.getUShort(P,G),0!==C&&(C=C+q&65535)):C=Q+q&65535,u.glyphIndexMap[Q]=C;return u}function I(P,v,r){P.segments.push({end:v,start:v,delta:-(v-r),offset:0})}function Y(P){P.segments.push({end:65535,start:65535,delta:1,offset:0})}function U(P){var v,m,H,U=new N.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(U.segments=[],v=0;v<P.length;v+=1){for(H=P[v],m=0;m<H.unicodes.length;m+=1)I(U,H.unicodes[m],v);U.segments=U.segments.sort(function(P,v){return P.start-v.start})}Y(U);var o;o=U.segments.length,U.segCountX2=2*o,U.searchRange=2*Math.pow(2,Math.floor(Math.log(o)/Math.log(2))),U.entrySelector=Math.log(U.searchRange/2)/Math.log(2),U.rangeShift=U.segCountX2-U.searchRange;var x=[],E=[],s=[],W=[],f=[];for(v=0;v<o;v+=1){var G=U.segments[v];x=x.concat({name:"end_"+v,type:"USHORT",value:G.end}),E=E.concat({name:"start_"+v,type:"USHORT",value:G.start}),s=s.concat({name:"idDelta_"+v,type:"SHORT",value:G.delta}),W=W.concat({name:"idRangeOffset_"+v,type:"USHORT",value:G.offset}),G.glyphId!==r&&(f=f.concat({name:"glyph_"+v,type:"USHORT",value:G.glyphId}))}return U.fields=U.fields.concat(x),U.fields.push({name:"reservedPad",type:"USHORT",value:0}),U.fields=U.fields.concat(E),U.fields=U.fields.concat(s),U.fields=U.fields.concat(W),U.fields=U.fields.concat(f),U.length=14+2*x.length+2+2*E.length+2*s.length+2*W.length+2*f.length,U}var o=P("../check"),x=P("../parse"),N=P("../table");m.parse=H,m.make=U},{"../check":1,"../parse":7,"../table":9}],12:[function(P,v,r){function m(P,v,r,m,H){var I;return(v&m)>0?(I=P.parseByte(),0===(v&H)&&(I=-I),I=r+I):I=(v&H)>0?r:r+P.parseShort(),I}function H(P,v,r,H){var I,Y,U,o,s,W,f,G,t,L,O,Q,q,Z,S;if(I=new E.Parser(P,v),Y=new N.Glyph({font:H,index:r}),Y.numberOfContours=I.parseShort(),Y.xMin=I.parseShort(),Y.yMin=I.parseShort(),Y.xMax=I.parseShort(),Y.yMax=I.parseShort(),Y.numberOfContours>0){for(f=Y.endPointIndices=[],o=0;o<Y.numberOfContours;o+=1)f.push(I.parseUShort());for(Y.instructionLength=I.parseUShort(),Y.instructions=[],o=0;o<Y.instructionLength;o+=1)Y.instructions.push(I.parseByte());for(G=f[f.length-1]+1,W=[],o=0;o<G;o+=1)if(U=I.parseByte(),W.push(U),(8&U)>0)for(t=I.parseByte(),s=0;s<t;s+=1)W.push(U),o+=1;if(x.argument(W.length===G,"Bad flags."),f.length>0){if(L=[],G>0){for(o=0;o<G;o+=1)U=W[o],O={},O.onCurve=!!(1&U),O.lastPointOfContour=f.indexOf(o)>=0,L.push(O);for(Q=0,o=0;o<G;o+=1)U=W[o],O=L[o],O.x=m(I,U,Q,2,16),Q=O.x;for(q=0,o=0;o<G;o+=1)U=W[o],O=L[o],
O.y=m(I,U,q,4,32),q=O.y}Y.points=L}else Y.points=[]}else if(0===Y.numberOfContours)Y.points=[];else for(Y.isComposite=!0,Y.points=[],Y.components=[],S=!0;S;)W=I.parseUShort(),Z={glyphIndex:I.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0},(1&W)>0?(Z.dx=I.parseShort(),Z.dy=I.parseShort()):(Z.dx=I.parseChar(),Z.dy=I.parseChar()),(8&W)>0?Z.xScale=Z.yScale=I.parseF2Dot14():(64&W)>0?(Z.xScale=I.parseF2Dot14(),Z.yScale=I.parseF2Dot14()):(128&W)>0&&(Z.xScale=I.parseF2Dot14(),Z.scale01=I.parseF2Dot14(),Z.scale10=I.parseF2Dot14(),Z.yScale=I.parseF2Dot14()),Y.components.push(Z),S=!!(32&W);return Y}function I(P,v){var r,m,H,I;for(r=[],m=0;m<P.length;m+=1)H=P[m],I={x:v.xScale*H.x+v.scale01*H.y+v.dx,y:v.scale10*H.x+v.yScale*H.y+v.dy,onCurve:H.onCurve,lastPointOfContour:H.lastPointOfContour},r.push(I);return r}function Y(P){var v,r,m,H;for(v=[],r=[],m=0;m<P.length;m+=1)H=P[m],r.push(H),H.lastPointOfContour&&(v.push(r),r=[]);return x.argument(0===r.length,"There are still points left in the current contour."),v}function U(P){var v,r,m,H,I,U,o,x,N,E,W,f;if(v=new s.Path,!P)return v;for(r=Y(P),m=0;m<r.length;m+=1){for(U=r[m],x=U[0],f=U[U.length-1],x.onCurve?(W=null,H=!0):(x=f.onCurve?f:{x:(x.x+f.x)/2,y:(x.y+f.y)/2},W=x,H=!1),v.moveTo(x.x,x.y),I=H?1:0;I<U.length;I+=1)if(o=U[I],N=0===I?x:U[I-1],N.onCurve&&o.onCurve)v.lineTo(o.x,o.y);else if(N.onCurve&&!o.onCurve)W=o;else if(N.onCurve||o.onCurve){if(N.onCurve||!o.onCurve)throw new Error("Invalid state.");v.quadraticCurveTo(W.x,W.y,o.x,o.y),W=null}else E={x:(N.x+o.x)/2,y:(N.y+o.y)/2},v.quadraticCurveTo(N.x,N.y,E.x,E.y),W=o;x!==f&&(W?v.quadraticCurveTo(W.x,W.y,x.x,x.y):v.lineTo(x.x,x.y))}return v.closePath(),v}function o(P,v,r,m){var Y,o,x,E,s,W,f,G,t;for(Y=[],o=0;o<r.length-1;o+=1)E=r[o],s=r[o+1],E!==s?Y.push(H(P,v+E,o,m)):Y.push(new N.Glyph({font:m,index:o}));for(o=0;o<Y.length;o+=1){if(W=Y[o],W.isComposite)for(x=0;x<W.components.length;x+=1)f=W.components[x],G=Y[f.glyphIndex],G.points&&(t=I(G.points,f),W.points=W.points.concat(t));W.path=U(W.points)}return Y}var x=P("../check"),N=P("../glyph"),E=P("../parse"),s=P("../path");r.parse=o},{"../check":1,"../glyph":5,"../parse":7,"../path":8}],13:[function(P,v,m){function H(P,v){for(var r=new E.Parser(P,v),m=r.parseUShort(),H=[],I=0;I<m;I++)H[r.parseTag()]={offset:r.parseUShort()};return H}function I(P,v){var r=new E.Parser(P,v),m=r.parseUShort(),H=r.parseUShort();if(1===m)return r.parseUShortList(H);if(2===m){for(var I,Y,U,o,x=[];H--;)for(Y=r.parseUShort(),U=r.parseUShort(),o=r.parseUShort(),I=Y;I<=U;I++)x[o++]=I;return x}}function Y(P,v){var r=new E.Parser(P,v),m=r.parseUShort();if(1===m){var H=r.parseUShort(),I=r.parseUShort(),Y=r.parseUShortList(I);return function(P){return Y[P-H]||0}}if(2===m){for(var U=r.parseUShort(),o=[],x=[],N=[],s=0;s<U;s++)o[s]=r.parseUShort(),x[s]=r.parseUShort(),N[s]=r.parseUShort();return function(P){var v,r,m;for(v=0,m=o.length-1;v<m;)r=v+m+1>>1,P<o[r]?m=r-1:v=r;return o[v]<=P&&P<=x[v]?N[v]||0:0}}}function U(P,v){var r,m,H,U,o,x,N,s,W,f,G=new E.Parser(P,v);if(r=G.parseUShort(),m=G.parseUShort(),H=I(P,v+m),U=G.parseUShort(),o=G.parseUShort(),4===U&&0===o){if(x={},1===r){var t,L,O,Q,q,Z;for(t=G.parseUShort(),Z=[],L=G.parseOffset16List(t),N=0;N<t;N++){if(O=L[N],Q=x[O],!Q)for(Q={},G.relativeOffset=O,q=G.parseUShort();q--;)s=G.parseUShort(),U&&(W=G.parseShort()),o&&(f=G.parseShort()),Q[s]=W;Z[H[N]]=Q}return function(P,v){var r=Z[P];if(r)return r[v]}}if(2===r){var S,C,u,g,n,J,K,j,b,k,M;for(S=G.parseUShort(),C=G.parseUShort(),u=G.parseUShort(),g=G.parseUShort(),K=Y(P,v+S),j=Y(P,v+C),b=[],n=0;n<u;n++)for(k=b[n]=[],J=0;J<g;J++)U&&(W=G.parseShort()),o&&(f=G.parseShort()),k[J]=W;for(M={},n=0;n<H.length;n++)M[H[n]]=1;return function(P,v){if(M[P]){var r=K(P),m=j(v),H=b[r];return H?H[m]:void 0}}}}}function o(P,v){var m,H,I,Y,o,x,N,s,W=new E.Parser(P,v);if(H=W.parseUShort(),I=W.parseUShort(),Y=16&I,o=W.parseUShort(),x=W.parseOffset16List(o),m={lookupType:H,lookupFlag:I,markFilteringSet:Y?W.parseUShort():-1},2===H){for(N=[],s=0;s<o;s++)N.push(U(P,v+x[s]));m.getKerningValue=function(P,v){for(var m=N.length;m--;){var H=N[m](P,v);if(H!==r)return H}return 0}}return m}function x(P,v,r){var m,I,Y,U,x,s,W,f,G,t;for(m=new E.Parser(P,v),I=m.parseFixed(),N.argument(1===I,"Unsupported GPOS table version."),U=H(P,v+m.parseUShort()),s=H(P,v+m.parseUShort()),Y=m.parseUShort(),m.relativeOffset=Y,W=m.parseUShort(),f=m.parseOffset16List(W),G=v+Y,x=0;x<W;x++)t=o(P,G+f[x]),2!==t.lookupType||r.getGposKerningValue||(r.getGposKerningValue=t.getKerningValue)}var N=P("../check"),E=P("../parse");m.parse=x},{"../check":1,"../parse":7}],14:[function(P,v,r){function m(P,v){var r={},m=new Y.Parser(P,v);return r.version=m.parseVersion(),r.fontRevision=Math.round(1e3*m.parseFixed())/1e3,r.checkSumAdjustment=m.parseULong(),r.magicNumber=m.parseULong(),I.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=m.parseUShort(),r.unitsPerEm=m.parseUShort(),r.created=m.parseLongDateTime(),r.modified=m.parseLongDateTime(),r.xMin=m.parseShort(),r.yMin=m.parseShort(),r.xMax=m.parseShort(),r.yMax=m.parseShort(),r.macStyle=m.parseUShort(),r.lowestRecPPEM=m.parseUShort(),r.fontDirectionHint=m.parseShort(),r.indexToLocFormat=m.parseShort(),r.glyphDataFormat=m.parseShort(),r}function H(P){return new U.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],P)}var I=P("../check"),Y=P("../parse"),U=P("../table");r.parse=m,r.make=H},{"../check":1,"../parse":7,"../table":9}],15:[function(P,v,r){function m(P,v){var r={},m=new I.Parser(P,v);return r.version=m.parseVersion(),r.ascender=m.parseShort(),r.descender=m.parseShort(),r.lineGap=m.parseShort(),r.advanceWidthMax=m.parseUShort(),r.minLeftSideBearing=m.parseShort(),r.minRightSideBearing=m.parseShort(),r.xMaxExtent=m.parseShort(),r.caretSlopeRise=m.parseShort(),r.caretSlopeRun=m.parseShort(),r.caretOffset=m.parseShort(),m.relativeOffset+=8,r.metricDataFormat=m.parseShort(),r.numberOfHMetrics=m.parseUShort(),r}function H(P){return new Y.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],P)}var I=P("../parse"),Y=P("../table");r.parse=m,r.make=H},{"../parse":7,"../table":9}],16:[function(P,v,r){function m(P,v,r,m,H){var Y,U,o,x,N;for(Y=new I.Parser(P,v),U=0;U<m;U+=1)U<r&&(x=Y.parseUShort(),N=Y.parseShort()),o=H[U],o.advanceWidth=x,o.leftSideBearing=N}function H(P){for(var v=new Y.Table("hmtx",[]),r=0;r<P.length;r+=1){var m=P[r],H=m.advanceWidth||0,I=m.leftSideBearing||0;v.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:H}),v.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:I})}return v}var I=P("../parse"),Y=P("../table");r.parse=m,r.make=H},{"../parse":7,"../table":9}],17:[function(P,v,r){function m(P,v){var r,m,Y,U,o,x,N,E,s;for(r={},m=new I.Parser(P,v),Y=m.parseUShort(),H.argument(0===Y,"Unsupported kern table version."),m.skip("uShort",1),U=m.parseUShort(),H.argument(0===U,"Unsupported kern sub-table version."),m.skip("uShort",2),o=m.parseUShort(),m.skip("uShort",3),x=0;x<o;x+=1)N=m.parseUShort(),E=m.parseUShort(),s=m.parseShort(),r[N+","+E]=s;return r}var H=P("../check"),I=P("../parse");r.parse=m},{"../check":1,"../parse":7}],18:[function(P,v,r){function m(P,v,r,m){var I,Y,U,o,x;for(I=new H.Parser(P,v),Y=m?I.parseUShort:I.parseULong,U=[],x=0;x<r+1;x+=1)o=Y.call(I),m&&(o*=2),U.push(o);return U}var H=P("../parse");r.parse=m},{"../parse":7}],19:[function(P,v,r){function m(P,v){var r={},m=new I.Parser(P,v);return r.version=m.parseVersion(),r.numGlyphs=m.parseUShort(),1===r.version&&(r.maxPoints=m.parseUShort(),r.maxContours=m.parseUShort(),r.maxCompositePoints=m.parseUShort(),r.maxCompositeContours=m.parseUShort(),r.maxZones=m.parseUShort(),r.maxTwilightPoints=m.parseUShort(),r.maxStorage=m.parseUShort(),r.maxFunctionDefs=m.parseUShort(),r.maxInstructionDefs=m.parseUShort(),r.maxStackElements=m.parseUShort(),r.maxSizeOfInstructions=m.parseUShort(),r.maxComponentElements=m.parseUShort(),r.maxComponentDepth=m.parseUShort()),r}function H(P){return new Y.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:P}])}var I=P("../parse"),Y=P("../table");r.parse=m,r.make=H},{"../parse":7,"../table":9}],20:[function(P,v,m){function H(P,v){var r={},m=new N.Parser(P,v);r.format=m.parseUShort();var H,I,Y,U,o,x,E,W,f,G,t,L=m.parseUShort(),O=m.offset+m.parseUShort(),Q=0;for(f=0;f<L;f++)if(H=m.parseUShort(),I=m.parseUShort(),Y=m.parseUShort(),U=m.parseUShort(),o=s[U],x=m.parseUShort(),E=m.parseUShort(),3===H&&1===I&&1033===Y){t=[];var q=x/2;for(G=0;G<q;G++,E+=2)t[G]=N.getShort(P,O+E);W=String.fromCharCode.apply(null,t),o?r[o]=W:(Q++,r["unknown"+Q]=W)}return 1===r.format&&(r.langTagCount=m.parseUShort()),r}function I(P,v,r,m,H,I){return new E.Table("NameRecord",[{name:"platformID",type:"USHORT",value:P},{name:"encodingID",type:"USHORT",value:v},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:m},{name:"length",type:"USHORT",value:H},{name:"offset",type:"USHORT",value:I}])}function Y(P,v,r,m){var H=x.STRING(r);return P.records.push(I(1,0,0,v,H.length,m)),P.strings.push(H),m+=H.length}function U(P,v,r,m){var H=x.UTF16(r);return P.records.push(I(3,1,1033,v,H.length,m)),P.strings.push(H),m+=H.length}function o(P){var v,m,H=new E.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);H.records=[],H.strings=[];var I=0;for(v=0;v<s.length;v+=1)P[s[v]]!==r&&(m=P[s[v]],I=Y(H,v,m,I));for(v=0;v<s.length;v+=1)P[s[v]]!==r&&(m=P[s[v]],I=U(H,v,m,I));for(H.count=H.records.length,H.stringOffset=6+12*H.count,v=0;v<H.records.length;v+=1)H.fields.push({name:"record_"+v,type:"TABLE",value:H.records[v]});for(v=0;v<H.strings.length;v+=1)H.fields.push({name:"string_"+v,type:"LITERAL",value:H.strings[v]});return H}var x=P("../types").encode,N=P("../parse"),E=P("../table"),s=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];m.parse=H,m.make=o},{"../parse":7,"../table":9,"../types":24}],21:[function(P,v,r){function m(P){for(var v=0;v<o.length;v+=1){var r=o[v];if(P>=r.begin&&P<r.end)return v}return-1}function H(P,v){var r={},m=new Y.Parser(P,v);r.version=m.parseUShort(),r.xAvgCharWidth=m.parseShort(),r.usWeightClass=m.parseUShort(),r.usWidthClass=m.parseUShort(),r.fsType=m.parseUShort(),r.ySubscriptXSize=m.parseShort(),r.ySubscriptYSize=m.parseShort(),r.ySubscriptXOffset=m.parseShort(),r.ySubscriptYOffset=m.parseShort(),r.ySuperscriptXSize=m.parseShort(),r.ySuperscriptYSize=m.parseShort(),r.ySuperscriptXOffset=m.parseShort(),r.ySuperscriptYOffset=m.parseShort(),r.yStrikeoutSize=m.parseShort(),r.yStrikeoutPosition=m.parseShort(),r.sFamilyClass=m.parseShort(),r.panose=[];for(var H=0;H<10;H++)r.panose[H]=m.parseByte();return r.ulUnicodeRange1=m.parseULong(),r.ulUnicodeRange2=m.parseULong(),r.ulUnicodeRange3=m.parseULong(),r.ulUnicodeRange4=m.parseULong(),r.achVendID=String.fromCharCode(m.parseByte(),m.parseByte(),m.parseByte(),m.parseByte()),r.fsSelection=m.parseUShort(),r.usFirstCharIndex=m.parseUShort(),r.usLastCharIndex=m.parseUShort(),r.sTypoAscender=m.parseShort(),r.sTypoDescender=m.parseShort(),r.sTypoLineGap=m.parseShort(),r.usWinAscent=m.parseUShort(),r.usWinDescent=m.parseUShort(),r.version>=1&&(r.ulCodePageRange1=m.parseULong(),r.ulCodePageRange2=m.parseULong()),r.version>=2&&(r.sxHeight=m.parseShort(),r.sCapHeight=m.parseShort(),r.usDefaultChar=m.parseUShort(),r.usBreakChar=m.parseUShort(),r.usMaxContent=m.parseUShort()),r}function I(P){return new U.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],P)}var Y=P("../parse"),U=P("../table"),o=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];r.unicodeRanges=o,r.getUnicodeRange=m,r.parse=H,r.make=I},{"../parse":7,"../table":9}],22:[function(P,v,r){function m(P,v){var r,m,H={},U=new Y.Parser(P,v);switch(H.version=U.parseVersion(),H.italicAngle=U.parseFixed(),H.underlinePosition=U.parseShort(),H.underlineThickness=U.parseShort(),H.isFixedPitch=U.parseULong(),H.minMemType42=U.parseULong(),H.maxMemType42=U.parseULong(),H.minMemType1=U.parseULong(),H.maxMemType1=U.parseULong(),H.version){case 1:H.names=I.standardNames.slice();break;case 2:for(H.numberOfGlyphs=U.parseUShort(),H.glyphNameIndex=new Array(H.numberOfGlyphs),r=0;r<H.numberOfGlyphs;r++)H.glyphNameIndex[r]=U.parseUShort();for(H.names=[],r=0;r<H.numberOfGlyphs;r++)H.glyphNameIndex[r]>=I.standardNames.length&&(m=U.parseChar(),H.names.push(U.parseString(m)));break;case 2.5:for(H.numberOfGlyphs=U.parseUShort(),H.offset=new Array(H.numberOfGlyphs),r=0;r<H.numberOfGlyphs;r++)H.offset[r]=U.parseChar()}return H}function H(){return new U.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var I=P("../encoding"),Y=P("../parse"),U=P("../table");r.parse=m,r.make=H},{"../encoding":3,"../parse":7,"../table":9}],23:[function(P,v,m){function H(P){return Math.log(P)/Math.log(2)|0}function I(P){for(;P.length%4!==0;)P.push(0);for(var v=0,r=0;r<P.length;r+=4)v+=(P[r]<<24)+(P[r+1]<<16)+(P[r+2]<<8)+P[r+3];return v%=Math.pow(2,32)}function Y(P,v,m,H){return new s.Table("Table Record",[{name:"tag",type:"TAG",value:P!==r?P:""},{name:"checkSum",type:"ULONG",value:v!==r?v:0},{name:"offset",type:"ULONG",value:m!==r?m:0},{name:"length",type:"ULONG",value:H!==r?H:0}])}function U(P){var v=new s.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);v.tables=P,v.numTables=P.length;var r=Math.pow(2,H(v.numTables));v.searchRange=16*r,v.entrySelector=H(r),v.rangeShift=16*v.numTables-v.searchRange;for(var m=[],U=[],o=v.sizeOf()+Y().sizeOf()*v.numTables;o%4!==0;)o+=1,U.push({name:"padding",type:"BYTE",value:0});for(var x=0;x<P.length;x+=1){var N=P[x];E.argument(4===N.tableName.length,"Table name"+N.tableName+" is invalid.");var W=N.sizeOf(),f=Y(N.tableName,I(N.encode()),o,W);for(m.push({name:f.tag+" Table Record",type:"TABLE",value:f}),U.push({name:N.tableName+" table",type:"TABLE",value:N}),o+=W,E.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!==0;)o+=1,U.push({name:"padding",type:"BYTE",value:0})}return m.sort(function(P,v){return P.value.tag>v.value.tag?1:-1}),v.fields=v.fields.concat(m),v.fields=v.fields.concat(U),v}function o(P,v,r){for(var m=0;m<v.length;m+=1){var H=P.charToGlyphIndex(v[m]);if(H>0){var I=P.glyphs[H];return I.getMetrics()}}return r}function x(P){for(var v=0,r=0;r<P.length;r+=1)v+=P[r];return v/P.length}function N(P){for(var v=[],r=[],m=[],H=[],Y=[],N=[],E=[],s=null,S=0,C=0,u=0,g=0,n=0,J=0;J<P.glyphs.length;J+=1){var K=P.glyphs[J],j=0|K.unicode;(s>j||null===s)&&(s=j),S<j&&(S=j);var b=q.getUnicodeRange(j);if(b<32)C|=1<<b;else if(b<64)u|=1<<b-32;else if(b<96)g|=1<<b-64;else{if(!(b<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");n|=1<<b-96}if(".notdef"!==K.name){var k=K.getMetrics();v.push(k.xMin),r.push(k.yMin),m.push(k.xMax),H.push(k.yMax),N.push(k.leftSideBearing),E.push(k.rightSideBearing),Y.push(K.advanceWidth)}}var M={xMin:Math.min.apply(null,v),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,m),yMax:Math.max.apply(null,H),advanceWidthMax:Math.max.apply(null,Y),advanceWidthAvg:x(Y),minLeftSideBearing:Math.min.apply(null,N),maxLeftSideBearing:Math.max.apply(null,N),minRightSideBearing:Math.min.apply(null,E)};M.ascender=M.yMax,M.descender=M.yMin;var a=G.make({unitsPerEm:P.unitsPerEm,xMin:M.xMin,yMin:M.yMin,xMax:M.xMax,yMax:M.yMax}),i=t.make({ascender:M.ascender,descender:M.descender,advanceWidthMax:M.advanceWidthMax,minLeftSideBearing:M.minLeftSideBearing,minRightSideBearing:M.minRightSideBearing,xMaxExtent:M.maxLeftSideBearing+(M.xMax-M.xMin),numberOfHMetrics:P.glyphs.length}),$=O.make(P.glyphs.length),X=q.make({xAvgCharWidth:Math.round(M.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:s,usLastCharIndex:S,ulUnicodeRange1:C,ulUnicodeRange2:u,ulUnicodeRange3:g,ulUnicodeRange4:n,sTypoAscender:M.ascender,sTypoDescender:M.descender,sTypoLineGap:0,usWinAscent:M.ascender,usWinDescent:-M.descender,sxHeight:o(P,"xyvw",{yMax:0}).yMax,sCapHeight:o(P,"HIKLEFJMNTZBDPRAGOQSUVWXY",M).yMax,usBreakChar:P.hasChar(" ")?32:0}),_=L.make(P.glyphs),w=W.make(P.glyphs),c=P.familyName+" "+P.styleName,h=P.familyName.replace(/\s/g,"")+"-"+P.styleName,e=Q.make({copyright:P.copyright,fontFamily:P.familyName,fontSubfamily:P.styleName,uniqueID:P.manufacturer+":"+c,fullName:c,version:P.version,postScriptName:h,trademark:P.trademark,manufacturer:P.manufacturer,designer:P.designer,description:P.description,manufacturerURL:P.manufacturerURL,designerURL:P.designerURL,license:P.license,licenseURL:P.licenseURL,preferredFamily:P.familyName,preferredSubfamily:P.styleName}),D=Z.make(),R=f.make(P.glyphs,{version:P.version,fullName:c,familyName:P.familyName,weightName:P.styleName,postScriptName:h}),z=[a,i,$,X,e,w,D,R,_],B=U(z),l=B.encode(),d=I(l),V=B.fields,T=!1;for(J=0;J<V.length;J+=1)if("head table"===V[J].name){V[J].value.checkSumAdjustment=2981146554-d,T=!0;break}if(!T)throw new Error("Could not find head table with checkSum to adjust.");return B}var E=P("../check"),s=P("../table"),W=P("./cmap"),f=P("./cff"),G=P("./head"),t=P("./hhea"),L=P("./hmtx"),O=P("./maxp"),Q=P("./name"),q=P("./os2"),Z=P("./post");m.computeCheckSum=I,m.make=U,m.fontToTable=N},{"../check":1,"../table":9,"./cff":10,"./cmap":11,"./head":14,"./hhea":15,"./hmtx":16,"./maxp":19,"./name":20,"./os2":21,"./post":22}],24:[function(P,m,H){function I(P){return function(){return P}}var Y=P("./check"),U=32768,o=2147483648,x={},N={},E={};N.BYTE=function(P){return Y.argument(P>=0&&P<=255,"Byte value should be between 0 and 255."),[P]},E.BYTE=I(1),N.CHAR=function(P){return[P.charCodeAt(0)]},E.BYTE=I(1),N.CHARARRAY=function(P){for(var v=[],r=0;r<P.length;r+=1)v.push(P.charCodeAt(r));return v},E.CHARARRAY=function(P){return P.length},N.USHORT=function(P){return[P>>8&255,255&P]},E.USHORT=I(2),N.SHORT=function(P){return P>=U&&(P=-(2*U-P)),[P>>8&255,255&P]},E.SHORT=I(2),N.UINT24=function(P){return[P>>16&255,P>>8&255,255&P]},E.UINT24=I(3),N.ULONG=function(P){return[P>>24&255,P>>16&255,P>>8&255,255&P]},E.ULONG=I(4),N.LONG=function(P){return P>=o&&(P=-(2*o-P)),[P>>24&255,P>>16&255,P>>8&255,255&P]},E.LONG=I(4),N.FIXED=N.ULONG,E.FIXED=E.ULONG,N.FWORD=N.SHORT,E.FWORD=E.SHORT,N.UFWORD=N.USHORT,E.UFWORD=E.USHORT,N.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},E.LONGDATETIME=I(8),N.TAG=function(P){return Y.argument(4===P.length,"Tag should be exactly 4 ASCII characters."),[P.charCodeAt(0),P.charCodeAt(1),P.charCodeAt(2),P.charCodeAt(3)]},E.TAG=I(4),N.Card8=N.BYTE,E.Card8=E.BYTE,N.Card16=N.USHORT,E.Card16=E.USHORT,N.OffSize=N.BYTE,E.OffSize=E.BYTE,N.SID=N.USHORT,E.SID=E.USHORT,N.NUMBER=function(P){return P>=-107&&P<=107?[P+139]:P>=108&&P<=1131?(P-=108,[(P>>8)+247,255&P]):P>=-1131&&P<=-108?(P=-P-108,[(P>>8)+251,255&P]):P>=-32768&&P<=32767?N.NUMBER16(P):N.NUMBER32(P)},E.NUMBER=function(P){return N.NUMBER(P).length},N.NUMBER16=function(P){return[28,P>>8&255,255&P]},E.NUMBER16=I(2),N.NUMBER32=function(P){return[29,P>>24&255,P>>16&255,P>>8&255,255&P]},E.NUMBER32=I(4),N.NAME=N.CHARARRAY,E.NAME=E.CHARARRAY,N.STRING=N.CHARARRAY,E.STRING=E.CHARARRAY,N.UTF16=function(P){for(var v=[],r=0;r<P.length;r+=1)v.push(0),v.push(P.charCodeAt(r));return v},E.UTF16=function(P){return 2*P.length},N.INDEX=function(P){var v,m,H,I,Y,U,o,x,E,s;for(m=1,H=[m],o=[],x=0,E=0;E<P.length;E+=1)s=N.OBJECT(P[E]),Array.prototype.push.apply(o,s),x+=s.length,m+=s.length,H.push(m);if(0===o.length)return[0,0];for(Y=[],v=1+Math.floor(Math.log(x)/Math.log(2))/8|0,I=[r,N.BYTE,N.USHORT,N.UINT24,N.ULONG][v],E=0;E<H.length;E+=1)U=I(H[E]),Array.prototype.push.apply(Y,U);return Array.prototype.concat(N.Card16(P.length),N.OffSize(v),Y,o)},E.INDEX=function(P){return N.INDEX(P).length},N.DICT=function(P){for(var r=[],m=v.keys(P),H=m.length,I=0;I<H;I+=1){var Y=parseInt(m[I],0),U=P[Y];r=r.concat(N.OPERAND(U.value,U.type)),r=r.concat(N.OPERATOR(Y))}return r},E.DICT=function(P){return N.DICT(P).length},N.OPERATOR=function(P){return P<1200?[P]:[12,P-1200]},N.OPERAND=function(P,v){var r,m;if(r=[],Array.isArray(v))for(m=0;m<v.length;m+=1)Y.argument(P.length===v.length,"Not enough arguments given for type"+v),r=r.concat(N.OPERAND(P[m],v[m]));else r="SID"===v?r.concat(N.NUMBER(P)):"offset"===v?r.concat(N.NUMBER32(P)):r.concat(N.NUMBER(P));return r},N.OP=N.BYTE,E.OP=E.BYTE;var s="function"==typeof WeakMap&&new WeakMap;N.CHARSTRING=function(P){if(s&&s.has(P))return s.get(P);var v,r,m=[],H=P.length;for(r=0;r<H;r+=1)v=P[r],m=m.concat(N[v.type](v.value));return s&&s.set(P,m),m},E.CHARSTRING=function(P){return N.CHARSTRING(P).length},N.OBJECT=function(P){var v=N[P.type];return Y.argument(v!==r,"No encoding function for type "+P.type),v(P.value)},N.TABLE=function(P){var v,m=[],H=P.fields.length;for(v=0;v<H;v+=1){var I=P.fields[v],U=N[I.type];Y.argument(U!==r,"No encoding function for field type "+I.type);var o=P[I.name];o===r&&(o=I.value);var x=U(o);m=m.concat(x)}return m},N.LITERAL=function(P){return P},E.LITERAL=function(P){return P.length},H.decode=x,H.encode=N,H.sizeOf=E},{"./check":1}]},{},[6])(6)});var U=H.FontConverter=function(P){var v=this;v._objPool=[],v.initConfig(P||{})};U.prototype={},U.prototype.constructor=U,U.prototype.initConfig=function(P){var v,r=this;v=r.options={},v.texts=P.texts,v.color=P.color||"black",v.width=P.width||100,v.height=P.height||100},U.prototype.toShape=function(P,v){var r=this;return"string"==typeof P?(H.Default.xhrLoad(P,function(P){r.toShapeImpl(P,v)},{responseType:"arraybuffer"}),null):r.toShapeImpl(P,v)},U.prototype.toShapeImpl=function(P,r){var m=this,H=opentype.parse(P);H.styleName||(H.styleName="");var I,Y,U,o,x,N,E=m.convertToTypeface(H),s=[],W=E.glyphs,f=m.options,G=0,t=f.texts,L=f.width,O=f.height;for(t||(t=v.keys(W)),I=0,Y=t.length;I<Y;I++)U=t[I],o=m.createShape(U,W[U]),o&&(s.push(o),G++);for(var Q=Math.ceil(Math.sqrt(G*L*O)/L),q=0;q<G;q++)x=q%Q,N=Math.floor(q/Q),m.fitPointsToRect(s[q].points,x*L,N*O,L,O);var Z={width:Q*L,height:Math.ceil(G/Q)*O,comps:s,familyName:H.familyName,styleName:H.styleName};return r&&r(Z),Z},U.prototype.createShape=function(P,v){if(!v)return!1;if(!v.o)return!1;var r,m,H=this,I=v.o.split(" "),Y=I.length,U=[],o=[];for(r=0;r<Y;)switch(m=I[r++]){case"m":U.push(1*I[r++]),U.push(1*I[r++]),o.push(1);break;case"l":U.push(1*I[r++]),U.push(1*I[r++]),o.push(2);break;case"q":U.push(1*I[r+2]),U.push(1*I[r+3]),U.push(1*I[r+0]),U.push(1*I[r+1]),r+=4,o.push(3);break;case"b":U.push(1*I[r+2]),U.push(1*I[r+3]),U.push(1*I[r+4]),U.push(1*I[r+5]),U.push(1*I[r+0]),U.push(1*I[r+1]),r+=6,o.push(4)}return{type:"shape",points:U,segments:o,borderColor:null,borderWidth:0,background:H.options.color,displayName:P}},U.prototype.fitPointsToRect=function(P,v,r,m,H){var I,Y,U,o,x,N={x:1/0,y:1/0},E={x:-(1/0),y:-(1/0)},s=P.length;for(I=0;I<s;I+=2)Y=P[I],U=P[I+1],N.x=Math.min(N.x,Y),N.y=Math.min(N.y,U),E.x=Math.max(E.x,Y),E.y=Math.max(E.y,U);for(o=E.x-N.x,x=E.y-N.y,I=0;I<s;I+=2)P[I]=(P[I]-N.x)*m/o+v,P[I+1]=(E.y-P[I+1])*H/x+r},U.prototype.convertToTypeface=function(P){var v=1e5/(72*(P.unitsPerEm||2048)),m={};m.glyphs={};var H=this.options.texts;return P.glyphs.forEach(function(P){if(P.unicode!=r){var I=String.fromCharCode(P.unicode);if(!(H&&H.indexOf(I)<0)){var Y={};Y.ha=Math.round(P.advanceWidth*v),Y.x_min=Math.round(P.xMin*v),Y.x_max=Math.round(P.xMax*v),Y.o="",P.path.commands.forEach(function(P,m){"c"===P.type.toLowerCase()&&(P.type="b"),Y.o+=P.type.toLowerCase(),Y.o+=" ",P.x!==r&&P.y!==r&&(Y.o+=Math.round(P.x*v),Y.o+=" ",Y.o+=Math.round(P.y*v),Y.o+=" "),P.x1!==r&&P.y1!==r&&(Y.o+=Math.round(P.x1*v),Y.o+=" ",Y.o+=Math.round(P.y1*v),Y.o+=" "),P.x2!==r&&P.y2!==r&&(Y.o+=Math.round(P.x2*v),Y.o+=" ",Y.o+=Math.round(P.y2*v),Y.o+=" ")}),m.glyphs[I]=Y}}}),m.familyName=P.familyName,m.ascender=Math.round(P.ascender*v),m.descender=Math.round(P.descender*v),m.underlinePosition=P.tables.post.underlinePosition,m.underlineThickness=P.tables.post.underlineThickness,m.boundingBox={yMin:P.tables.head.yMin,xMin:P.tables.head.xMin,yMax:P.tables.head.yMax,xMax:P.tables.head.xMax},m.resolution=1e3,m.original_font_information=P.tables.name,P.styleName.toLowerCase().indexOf("bold")>-1?m.cssFontWeight="bold":m.cssFontWeight="normal",P.styleName.toLowerCase().indexOf("italic")>-1?m.cssFontStyle="italic":m.cssFontStyle="normal",m},U.prototype.reverseCommands=function(P){var v,m=[];P.forEach(function(P){"m"===P.type.toLowerCase()?(v=[P],m.push(v)):"z"!==P.type.toLowerCase()&&v.push(P)});var H=[];return m.forEach(function(P){var v={type:"m",x:P[P.length-1].x,y:P[P.length-1].y};H.push(v);for(var m=P.length-1;m>0;m--){var I=P[m];v={type:I.type},I.x2!==r&&I.y2!==r?(v.x1=I.x2,v.y1=I.y2,v.x2=I.x1,v.y2=I.y1):I.x1!==r&&I.y1!==r&&(v.x1=I.x1,v.y1=I.y1),v.x=P[m-1].x,v.y=P[m-1].y,H.push(v)}}),H}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);var ir=function(){function P(v,r){var m=this;hv(this,P),this.editor=r,this.handler=v,this.cookie=0,this.callbacks={},this.cmds={};var H=dv.config.host||window.location.hostname,I=dv.config.port||window.location.port,Y=window.location.protocol+"//"+H+":"+I;this.socket=io.connect(Y),this.socket.on("connect",function(){m.handler({type:"connected",message:Y})}),this.socket.on("disconnect",function(){
m.handler({type:"disconnected",message:Y})}),this.socket.on("fileChanged",function(P){m.handler({type:"fileChanged",path:P.path,event:P.event})}),this.socket.on("operationDone",function(P,v){m.handleRespone(P,v)}),this.socket.on("download",function(P){m.handler({type:"download",path:P})}),this.socket.on("confirm",function(P,v){m.handler({type:"confirm",path:P,datas:v})})}return P.prototype.request=function(P,v,r){var m=++this.cookie;this.callbacks[m]=r,this.cmds[m]=P;var H=this.editor.sid;this.socket.emit(P,m,v,H?{sid:H}:null);var I=P;v&&(GP(v)?I=P+": "+v:v.path&&(I=P+": "+v.path)),this.handler({type:"request",message:I,cmd:P,data:v})},P.prototype.handleRespone=function(P,v){var r=this.callbacks[P],m=this.cmds[P];delete this.callbacks[P],delete this.cmds[P],this.handler({type:"response",message:m,cmd:m,data:v}),r&&r(v)},P}(),$r=function(P){function v(r,m){var H=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];hv(this,v);var I=Rv(this,P.call(this,m));return I.editor=r,I.editable=H,I.dragToIndexEnabled=!0,I.addTopPainter(I.$1$.bind(I)),I}return Dv(v,P),v.prototype.getLabelColor=function(v){return v!==this.draggingData||this.isSelected(v)?P.prototype.getLabelColor.call(this,v):dv.config.color_select},v.prototype.handleDelete=function(){this.editable&&this.removeSelection()},v.prototype.isDroppable=function(P,v){return!1},v.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},v.prototype._endDrag=function(P,v){},v.prototype._endCrossDrag=function(P,v){},v.prototype.$1$=function(P){P.texureImage2D=!0;var v=void 0;if(this._dragInfo&&this._dragInfo.inView?v=this._dragInfo:this._crossDragInfo&&(v=this._crossDragInfo),v){var r=this.getWidth(),m=this.getRowHeight(),H=v.type,I=v.parent,Y=I?this.getRowDatas().indexOf(I):-1,U=dv.config.color_select_dark;if(v.refData){if(d(P,U,0,Y*m,r,m,2),"up"===H||"down"===H){var o=v.x,x=v.y;P.beginPath(),P.arc(o-3,x,3,0,2*Math.PI,!0),P.moveTo(o,x),P.lineTo(r,x),P.lineWidth=2,P.strokeStyle=U,P.stroke()}}else{var N=this.getViewRect();d(P,U,N.x,N.y,N.width,N.height,2)}}},v.prototype._dragging=function(P,v){var r=this.getRowHeight(),m=this.lp(P),H=m.y/r,I=Math.floor(H),Y=this.getRowSize();if(I>Y-1)v.refData=null,v.type="parent",v.parent=null;else{var U=m.y-I*r;this.dragToIndexEnabled?U<.25*r?v.type="up":U>.75*r?v.type="down":v.type="parent":v.type="parent";var o=v.refData=this.getRowDatas().get(I);"up"===v.type?(v.parent=o.getParent(),v.x=(this.getLevel(o)+1)*this.getIndent(),v.y=I*r):"down"===v.type?(this.getToggleIcon(o)===this.getExpandIcon()?(v.parent=o,v.x=(this.getLevel(o)+2)*this.getIndent()):(v.parent=o.getParent(),v.x=(this.getLevel(o)+1)*this.getIndent()),v.y=(I+1)*r):v.parent=o}this.autoScroll(P),this.redraw()},v.prototype.$2$=function(){var P="";if(this.draggingData&&(P=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var v=this.sm().size();P+=v>1?" (+"+v+") ":""}return P},v.prototype.handleDragAndDrop=function(P,v){if(this.editable){if("prepare"===v)return void this._clearDragInfo();"begin"===v&&(this._dragInfo={tip:this.$2$(),view:this});var r=this._dragInfo;if(r){var m=this.editor.dnd;if("begin"===v||"between"===v){var H=this.getView().contains(C(P));return H?(r.inView=!0,this._dragging(P,r),m.clearDropView(P,r)):(r.inView&&this.redraw(),r.inView=!1,m.crossDrag(P,r)),void m.showTip(r.tip,P)}return"end"===v?(r.inView?this._endDrag(P,r):m.crossDrop(P,r),void this._clearDragInfo()):"cancel"===v?(r.inView||m.crossCancel(P,r),void this._clearDragInfo()):void 0}}},v.prototype.handleCrossDrag=function(P,v,r){return"exit"===v||"cancel"===v?(this._crossDragInfo=null,void this.redraw()):"enter"===v||"over"===v?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(P,this._crossDragInfo)):"drop"===v?(this._endCrossDrag(P,r),this._crossDragInfo=null,void this.redraw()):void 0},v.prototype.isEditable=function(P){return this.editable},v.prototype.rename=function(P,v){P.setName(v)},v.prototype.handleDataDoubleSelect=function(P,v){if(this.isEditable(v)){var r=this.getLevel(v);r+=this.getIcon(v)?2:1,this.lp(P).x>r*this.getIndent()&&this.beginEditing(v)}},v.prototype.getEditingLabel=function(P){return this.getLabel(P)},v.prototype.beginEditing=function(P){var v=this;this.cancelEditing(),this.makeVisible(P),this.validate();var r=this.getLevel(P);r+=this.getIcon(P)?2:1;var m=this.getIndent()*r,H=this.ty()+this.getRowIndex(P)*this.getRowHeight(),I=Math.max(1,this.getWidth()-m),Y=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=P;var U=this._currentEditor.getElement(),o=this.getEditingLabel(P);U.value=null==o?"":o,U.onblur=function(P){v.endEditing()},U.onkeydown=function(P){t(P)?v.endEditing():L(P)&&v.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),i(this._currentEditor,m,H,I,Y),this._currentEditor.setFocus(),ht.Default.callLater(U.select,U)},v.prototype.endEditing=function(){var P=this._currentEditor;P&&(this.rename(P.data,P.getValue()),delete this._currentEditor,_(P.getView()),this.redraw())},v.prototype.cancelEditing=function(){var P=this._currentEditor;P&&(delete this._currentEditor,_(P.getView()),this.redraw())},v}(ar);dv.DNDTree=$r;var Xr=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r.editor,r.dataModel,m));return H.explorer=r,H.dragToIndexEnabled=!1,H.setSortFunc(dv.config.createFileTreeSortFunc(H)),H}return Dv(v,P),v.prototype.isVisible=function(P){return P.a("visible")!==!1&&((!this._visibleFunc||this._visibleFunc(P)!==!1)&&(P.fileType===Fv||P.fileType===pv))},v.prototype.getLabel=function(P){return H("url:"+P.url,!0)||this.getEditingLabel(P)},v.prototype.getEditingLabel=function(P){return P.getName()},v.prototype.handleBackgroundClick=function(P){},v.prototype.handleDelete=function(){this.editable&&dv.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},v.prototype.isDroppable=function(P,v){return!(!this.editable||v.view!==this.explorer.list)||v.view===this.editor.dndFromOutside},v.prototype._endCrossDrag=function(P,v){var r=this;if(this._crossDragInfo){var m=v.view,H=this._crossDragInfo.parent;H||(H=this.explorer.rootNode),m===this.explorer.list?m.isSelected(m.draggingData)?m.sm().toSelection().each(function(P){r.editor.moveFile(P,H)}):this.editor.moveFile(m.draggingData,H):m===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(P,H)}},v.prototype._endDrag=function(P,v){var r=this,m=v.parent;if(m||(m=this.explorer.rootNode),this.isSelected(this.draggingData)){var H=this.getTopRowOrderSelection();H.each(function(P){r.editor.moveFile(P,m)})}else this.editor.moveFile(this.draggingData,m),this.sm().ss(this.draggingData);m&&this.expand(m)},v.prototype.isEditable=function(P){return this.editable&&P.a("editable")!==!1},v.prototype.beginEditing=function(v){var r={data:v,url:v.url};this.editor.fireEvent("fileRenaming",r),r.preventDefault||P.prototype.beginEditing.call(this,v)},v.prototype.rename=function(P,v){this.editor.renameFile(P,v,function(){P.s("label")?P.s("label",v):P.setName(v)})},v.prototype.getIcon=function(P){return void 0!==P.getIcon()?P.getIcon():P.fileType===Fv?this.hasExpandedChild(P)?"editor.direxpanded":"editor.dircollapsed":P.fileType===pv?"editor.root.state":null},v}($r),_r=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this,r));return m._lastSelectDataTime=Date.now(),m}return Dv(v,P),v.prototype.isVScrollable=function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},v.prototype.isV=function(P){var v=this.gv.getViewRect();return this.isVScrollable()&&(v.x+v.width-this.gv.lp(P).x)*this.gv.getZoom()<ht.Default.scrollBarInteractiveSize},v.prototype.clear=function(P){P&&this._dragging&&!this._dragCancel&&this.gv.handleDragAndDrop(P,"end"),this.gv.draggingData&&(this.gv.draggingData.iv(),this.gv.draggingData=null,this.gv.redraw()),this._dragging=this._dragCancel=this._clientPoint=null},v.prototype.handle_mousedown=function(P){this.handle_touchstart(P)},v.prototype.handle_touchstart=function(P){if(!this.isV(P)&&!zP(P.target)){F(P),this.clear(P),this._clientPoint=S(P);var v=this.gv.getDataAt(P);Q(P)?v?(this.gv.draggingData=v,v.iv(),this.gv.redraw(),this.gv.handleDragAndDrop(P,"prepare"),Z(this,P)):this.gv.sm().cs():(v&&this.handleSelection(P,v),this.clear(P))}},v.prototype.handle_mouseup=function(P){this.handle_touchend(P)},v.prototype.handle_touchend=function(P){if(this._clientPoint&&!this._dragging&&!this.gv._justDoubleClickData){var v=this.gv.getDataAt(P);v&&this.handleSelection(P,v)}this.gv._justDoubleClickData=!1,this.clear(P)},v.prototype.handleWindowMouseMove=function(P){this.handleWindowTouchMove(P)},v.prototype.handleWindowMouseUp=function(P){this.handleWindowTouchEnd(P)},v.prototype.handleWindowTouchMove=function(P){F(P),this._dragging?this._dragCancel||this.gv.handleDragAndDrop(P,"between"):this._clientPoint&&this.gv.draggingData&&n(S(P),this._clientPoint)>2&&(this._dragging=!0,this.gv.handleDragAndDrop(P,"begin"))},v.prototype.handleWindowTouchEnd=function(P){F(P),this.clear(P)},v.prototype.handleSelection=function(P,v){var r=this.gv.sm();if(h(P))this.gv.isSelected(v)?r.removeSelection(v):r.appendSelection(v);else if(c(P)){var m=r.ld();if(m)for(var H=this.gv.nodes,I=H.indexOf(m),Y=H.indexOf(v);I!==Y;)I+=Y>I?1:-1,r.as(H[I]);else r.ss(v)}else if(Q(P)){var U=Date.now();if(r.contains(v)){var o=U-this._lastSelectDataTime;o>500&&o<1500&&this.gv.handleDataDoubleSelect(P,v)}r.ss(v),this._lastSelectDataTime=U}else r.contains(v)||r.ss(v)},v.prototype.handle_keydown=function(P){if(!zP(P.target))if(L(P))this._dragging&&!this._dragCancel&&(this.gv.handleDragAndDrop(P,"cancel"),this._dragCancel=!0);else if(W(P)||G(P)||s(P)||f(P)){var v=this.gv.sm(),r=this.gv.nodes,m=v.ld();if(r.length){var H=void 0;if(m){var I=r.indexOf(m);W(P)||s(P)?0!==I&&(H=r[I-1]):I!==r.length-1&&(H=r[I+1])}else H=r[0];H&&(c(P)?v.as(H):v.ss(H))}}},v}(ht.graph.Interactor),wr=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this,r.editor,r.dm));return m.displayView=r,m.graphView=r.graphView,m.nodeIcon=eP(m),m.initMenu(),r.dm.addDataPropertyChangeListener(function(P){var v=P.data;(v instanceof ht.Shape||v instanceof ht.Edge)&&(v.editorIcon=null)}),m}return Dv(v,P),v.prototype.getBorderColor=function(P){return null},v.prototype.onDataDoubleClicked=function(P,v){v.altKey?this.graphView.fitData(P,!0,dv.config.fitPadding):this.graphView.makeCenter(P,!0)},v.prototype.onPropertyChanged=function(v){"filter"===v.property&&(this.visibleMap=null,this.ivm()),P.prototype.onPropertyChanged.call(this,v)},v.prototype.handleDataPropertyChange=function(v){!this._filter||"name"!==v.property&&"displayName"!==v.property?P.prototype.handleDataPropertyChange.call(this,v):(this.visibleMap=null,this.ivm())},v.prototype.checkVisible=function(P){if(!this._filter)return!0;var v=this.getLabel(P);return null!=v&&(v=(v+"").toLowerCase(),v.indexOf(this._filter)>=0)},v.prototype.validateModel=function(){var v=this;this._filter&&!this.visibleMap&&(this.visibleMap={},this.getDataModel().each(function(P){if(v.checkVisible(P)){v.visibleMap[P._id]=!0;for(var r=P.getParent();r&&!v.visibleMap[r._id];)v.visibleMap[r._id]=!0,r=r.getParent()}})),P.prototype.validateModel.call(this),dv.config.filterDisplayViewEnabled&&this.graphView.setVisibleFunc(function(P){return v.isVisible(P)})},v.prototype.isVisible=function(P){return!P._refGraph&&(!this._filter||this.visibleMap&&this.visibleMap[P._id])},v.prototype.validate=function(){this.graphView.validate(),P.prototype.validate.call(this)},v.prototype.getLabel=function(P){var v=P.toLabel();return null==v&&P.s("editor.folder")?H("ht.Folder"):P.toLabel()||H(P.getClassName())},v.prototype.getIcon=function(P){return P instanceof ht.SubGraph?"editor.subgraph":P instanceof ht.Group?"editor.group":P instanceof ht.RefGraph||P instanceof ht.Text?P.getIcon():P instanceof ht.Block?"editor.block":P instanceof ht.Shape?(P.editorIcon||(P.editorIcon=RP(P)),P.editorIcon):P instanceof ht.Edge?(P.editorIcon||(P.editorIcon=DP(this,P)),P.editorIcon):P instanceof ht.Node?this.nodeIcon:P.s("editor.folder")?this.hasExpandedChild(P)?"editor.direxpanded":"editor.dircollapsed":null},v.prototype.isDroppable=function(P,v){return v.view===this.editor.symbols.getFileListView()||(v.view===this.editor.assets.getFileListView()||v.view===this.editor.displays.getFileListView())},v.prototype._endCrossDrag=function(P,v){var r=this;if(this._crossDragInfo){this.editor.beginTransaction();var m=[],H=v.view,I=this._crossDragInfo.type,Y=this._crossDragInfo.parent,U=this._crossDragInfo.refData;H!==this.editor.symbols.getFileListView()&&H!==this.editor.assets.getFileListView()||H.toDraggingDatas("down"===I).forEach(function(P){var v=new ht.Node;v.setImage(P.getFileUUID()),v.setDisplayName(M(P.getName())),m.push(v),r.displayView.addData(v,!0),r.editor.gv.$64$([v]),r._dropData(v,I,Y,U)}),H===this.editor.displays.getFileListView()&&H.toDraggingDatas("down"===I).forEach(function(P){if(P.url!==r.editor.url){var v=new ht.RefGraph;v.setRef(P.getFileUUID()),v.setDisplayName(M(P.getName())),m.push(v),r.displayView.addData(v,!0),r._dropData(v,I,Y,U)}}),m.length&&this.sm().ss(m),this.editor.endTransaction()}},v.prototype._endDrag=function(P,v){var r=this;this.editor.beginTransaction();var m=v.type,H=v.parent,I=v.refData;if(this.isSelected(this.draggingData)){var Y=this.getTopRowOrderSelection();"down"===m&&Y.reverse(),Y.each(function(P){r._dropData(P,m,H,I)})}else this._dropData(this.draggingData,m,H,I),this.sm().ss(this.draggingData);H&&this.expand(H),this.editor.endTransaction()},v.prototype._dropData=function(P,v,r,m){if(P.setParent(r),"down"===v||"up"===v){var H=r?r.getChildren():this.dm().getRoots(),I=H.indexOf(m);"down"===v&&I++,H.indexOf(P)<I&&I--,this.dm().moveTo(P,I)}else r||this.dm().moveToBottom(P)},v.prototype.rename=function(P,v){P.setDisplayName(v)},v.prototype.initMenu=function(){var P=this,v=function(){for(var v=P.editor.selection,r=0;r<v.length;r++)if(v[r].s("editor.folder"))return!0;return!1};this.menu=new gr;var r=[{id:"folder",label:H("editor.folder"),action:function(){P.editor.folder()},visible:function(){return P.editable&&!!P.editor.ld}},{id:"unfolder",label:H("editor.unfolder"),action:function(){P.editor.unfolder()},visible:function(){return P.editable&&v()}},{separator:!0,visible:function(){return P.editable&&!!P.editor.ld}},{id:"copy",label:H("editor.copy"),action:function(){P.editor.copy()},visible:function(){return P.editable&&!!P.editor.ld}},{id:"paste",label:H("editor.paste"),action:function(){P.editor.paste()},visible:function(){return P.editable&&P.editor.hasCopyInfo()}},{id:"delete",label:H("editor.delete"),action:function(){P.editor.delete()},visible:function(){return P.editable&&!!P.editor.ld}},{separator:!0,visible:function(){return P.editable&&!!P.editor.ld}},{id:"bringToFront",label:H("editor.bringtofront"),action:function(){P.editor.bringToFront()},visible:function(){return P.editable&&!!P.editor.ld}},{id:"bringForward",label:H("editor.bringforward"),action:function(){P.editor.bringForward()},visible:function(){return P.editable&&!!P.editor.ld}},{id:"sendBackward",label:H("editor.sendbackward"),action:function(){P.editor.sendBackward()},visible:function(){return P.editable&&!!P.editor.ld}},{id:"sendToBack",label:H("editor.sendtoback"),action:function(){P.editor.sendToBack()},visible:function(){return P.editable&&!!P.editor.ld}},{separator:!0,visible:function(){return P.editable&&!!P.editor.ld}},{id:"expandAll",label:H("editor.expandall"),action:function(){P.expandAll(P.editor.ld)}},{id:"collapseAll",label:H("editor.collapseall"),action:function(){P.collapseAll(P.editor.ld)}}];this.menu.setItems(r),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},v.prototype.onClosed=function(){I(this.editor.menus,this.menu)},ev(v,[{key:"editable",get:function(){return this.displayView.editable},set:function(P){}}]),v}($r);T(wr,{ms_ac:["filter"]});var cr=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r.dataModel));return H.explorer=r,H.editable=m,H.editor=r.editor,H.getHScrollBar().style.display="none",H.setMaxFileSize(dv.config.imageSize),H.enableToolTip(),H.setPannable(!1),H.setInteractors([new ht.graph.ScrollBarInteractor(H),new _r(H),new ht.graph.DefaultInteractor(H),new ht.graph.TouchInteractor(H,{editable:!1})]),H}return Dv(v,P),v.prototype.getToolTip=function(P){var v=this.getDataAt(P);return v?this._filter?v.url:this.getLabel(v):null},v.prototype.getLabel=function(P){return H("url:"+P.url,!0)||this.getEditingLabel(P)},v.prototype.isEditable=function(P){return this.editable&&P.a("editable")!==!1},v.prototype.getEditingLabel=function(P){return P.s("label")||P.getName()},v.prototype.rename=function(P,v){this.editor.renameFile(P,v,function(){P.s("label")?P.s("label",v):P.setName(v)})},v.prototype.handleDelete=function(){this.editable&&dv.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},v.prototype.beginEditing=function(P){var v=this,r={data:P,url:P.url};if(this.editor.fireEvent("fileRenaming",r),!r.preventDefault){this.cancelEditing(),this.makeVisible(P),this.validate();var m=this.getDataUI(P),H=!1,I=void 0;if(this.explorer.isAccordionMode()&&P.fileType===Fv?(I=P.getRect(),H=!0):m&&m.labelInfo&&(I=m.labelInfo.rect),I){var Y=void 0,U=void 0,o=void 0,x=void 0;if(H)Y=I.x,U=I.y,o=I.width,x=I.height;else if(this._layoutType===Ir)Y=this._rowHeight,U=P.p().y-this._rowHeight/2,o=this.getWidth()-Y,x=this._rowHeight;else{var N=m.labelInfo.rect||P.getRect();Y=P.p().x-P.getWidth()/2,U=N.y,o=P.getWidth(),x=N.height}U+=this.ty(),this._currentEditor=new ht.widget.TextField,this._currentEditor.data=P;var E=this._currentEditor.getElement(),s=this.getEditingLabel(P);E.value=null==s?"":s,E.onblur=function(P){v.endEditing()},E.onkeydown=function(P){t(P)?v.endEditing():L(P)&&v.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),i(this._currentEditor,Y,U,o,x),this._currentEditor.setFocus(),ht.Default.callLater(E.select,E)}}},v.prototype.endEditing=function(){var P=this._currentEditor;P&&(this.rename(P.data,P.getValue()),delete this._currentEditor,_(P.getView()),this.redraw())},v.prototype.cancelEditing=function(){var P=this._currentEditor;P&&(delete this._currentEditor,_(P.getView()),this.redraw())},v.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},v.prototype.handleDragAndDrop=function(P,v){if("prepare"===v)return void this._clearDragInfo();"begin"===v&&(this._dragInfo={tip:this.$2$(),view:this});var r=this._dragInfo;if(r){var m=this.editor.dnd;if("begin"===v||"between"===v){var H=this.getView().contains(C(P));return H?(r.inView=!0,this._dragging(P,r),m.clearDropView(P,r)):(r.inView&&this.redraw(),r.inView=!1,m.crossDrag(P,r)),void m.showTip(r.tip,P)}return"end"===v?(r.inView?this._endDrag(P,r):m.crossDrop(P,r),void this._clearDragInfo()):"cancel"===v?(r.inView||m.crossCancel(P,r),void this._clearDragInfo()):void 0}},v.prototype._dragging=function(P,v){if(this.editable){var r=this.getDataAt(P);r&&r.fileType===Fv?v.targetData=r:v.targetData=null,this.autoScroll(P),this.redraw()}},v.prototype.$2$=function(){var P="";if(this.draggingData&&(P=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var v=this.sm().size();P+=v>1?" (+"+v+") ":""}return P},v.prototype._endDrag=function(P,v){},v.prototype.handleSelectionChange=function(v){P.prototype.handleSelectionChange.call(this,v),this.redraw()},v.prototype.handleCrossDrag=function(P,v,r){if(this.editable)return"exit"===v||"cancel"===v?(this._crossDragInfo=null,void this.redraw()):"enter"===v||"over"===v?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(P,this._crossDragInfo)):"drop"===v?(this._endCrossDrag(P,r),this._crossDragInfo=null,void this.redraw()):void 0},v.prototype._endCrossDrag=function(P,v){if(this.editable&&this._crossDragInfo){var r=this._crossDragInfo.targetData;if(r&&r.fileType===Fv||(r=this.dm().sm().ld()),r){var m=v.view;"displays"===this.explorer.rootDir&&m instanceof wr&&this.handleDisplayTreeDrop(m,r),m===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(P,r)}}},v}(nr);T(cr,{ms_ac:["layoutType","fileSize","fileGap","rowHeight","maxFileSize","filter"],_fileRect:{x:0,y:0,width:0,height:0},_layoutType:Hr,_fileSize:50,_fileGap:6,_rowHeight:21,_maxFileSize:200});var hr={filter:!0,layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,visibleFunc:!0},er=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r,m));return H.nodes=[],H.doLayoutBind=H.doLayout.bind(H),H.dm().sm().ms(function(){H.sm().cs(),H.doLayoutLater()}),H.dm().mm(function(){H.doLayoutLater()}),H.addInteractorListener(H.handleInteraction.bind(H)),H.addBottomPainter(H.paintBottom.bind(H)),H.addTopPainter(H.paintTop.bind(H)),H}return Dv(v,P),v.prototype.getDataAt=function(v){if(this._layoutType===Ir){var r=Math.floor(this.lp(v).y/this._rowHeight);return this.nodes[r]}return P.prototype.getDataAt.call(this,v)},v.prototype.paintBottom=function(P){var v=this,r=this._rowHeight,m=this.getWidth();this.nodes.forEach(function(H){if(v.isSelected(H))if(v._layoutType===Ir)P.beginPath(),P.rect(0,H.p().y-r/2,m,r),P.fillStyle=dv.config.color_select,P.fill();else{var I=H.getRect();d(P,dv.config.color_select,I.x-2,I.y-2,I.width+4,I.height+4,1)}})},v.prototype.paintTop=function(P){P.texureImage2D=!0;var v=void 0;if(this._dragInfo&&this._dragInfo.inView?v=this._dragInfo:this._crossDragInfo&&(v=this._crossDragInfo),v){var r=dv.config.color_select_dark,m=v.targetData;if(P.texureImage2D=!0,m)if(this._layoutType===Ir){var H=0,I=m.p().y-this._rowHeight/2,Y=this.getWidth(),U=this._rowHeight;d(P,r,H,I,Y,U,2)}else{var o=m.getRect();P.beginPath(),P.rect(o.x,o.y,o.width,o.height),P.lineWidth=2,P.strokeStyle=dv.config.color_select_dark,P.stroke()}else{var x=this.getViewRect();d(P,r,x.x,x.y,x.width,x.height,2)}}},v.prototype.toDraggingDatas=function(P){var v=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(P){P.fileType!==Fv&&v.push(P)}),P&&v.reverse()):this.draggingData.fileType!==Fv&&v.push(this.draggingData),v},v.prototype.isDroppable=function(P,v){return"displays"===this.explorer.rootDir&&v.view instanceof wr||v.view===this.editor.dndFromOutside},v.prototype._endDrag=function(P,v){var r=this,m=v.targetData;m&&(this.isSelected(this.draggingData)?this.sm().toSelection().each(function(P){r.editor.moveFile(P,m)}):this.editor.moveFile(this.draggingData,m))},v.prototype.handleDisplayTreeDrop=function(P,v){var r=this,m=void 0;m=P.isSelected(P.draggingData)?P.getTopRowOrderSelection().toArray():[P.draggingData];var I={};m.forEach(function(P){p(P,I)});var Y=new ht.JSONSerializer(P.getDataModel(),!0);Y.isSerializable=function(P){return I[P._id]};var U=Y.serialize(),o=H("editor.inputnewdisplayname")+" ["+v.url+"]";BP(o,P.getLabel(P.draggingData),{nullable:!1,trim:!0,maxLength:dv.config.maxFileNameLength,checkFunc:dv.config.checkFileName},function(P,m){"ok"===m&&!function(){IP(P)||(P+=".json");var m=v.url+"/"+P,H={path:m,content:U};r.editor.request("upload",H,function(P){P===!0&&!function(){var P=r.editor.gv,v=P.isVisible;P.isVisible=function(r){return v.call(P,r)&&I[r._id]},r.editor.saveImage(P,m.substr(0,m.length-5)+".png"),P.isVisible=v,P.redraw()}(),r.editor.fireEvent("displayViewSaved",{url:m})})}()})},v.prototype.handleDataDoubleSelect=function(P,v){if(this.isEditable(v)){var r=this.lp(P);if(this._layoutType===Ir)r.x>this._rowHeight&&this.beginEditing(v);else{var m=this.getDataUI(v);m&&m.labelInfo&&m.labelInfo.rect&&ht.Default.containsPoint(m.labelInfo.rect,r)&&this.beginEditing(v)}}},v.prototype.getLabelColor=function(P){return P!==this.draggingData||this.isSelected(P)?this._layoutType===Ir?this.isSelected(P)?dv.config.color_light:ht.Default.labelColor:this.isSelected(P)?dv.config.color_select:ht.Default.labelColor:dv.config.color_select},v.prototype.handleInteraction=function(P){var v=P.kind,r=P.data,m=P.event;if("clickData"===v&&this._filter)this.dm().sm().ss(r.getParent());else if("doubleClickData"===v)1===this.sm().size()&&(this.setFilter(""),this._justDoubleClickData=!0,r.fileType===Fv?this.dm().sm().ss(r):this.editor.open(r,c(m)));else if("doubleClickBackground"===P.kind&&!this._filter){var H=this.dm().sm().ld();H&&H.getParent()&&this.dm().sm().ss(H.getParent())}},v.prototype.handleScroll=function(P,v){F(P),c(P)?v>0?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1)):(Nr||P.wheelDelta!==P.wheelDeltaX)&&(v=Nr?-P.detail:P.wheelDelta/40,this.translate(0,20*v))},v.prototype.handlePinch=function(P,v,r){r<v?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1))},v.prototype.onPropertyChanged=function(P){cr.prototype.onPropertyChanged.apply(this,arguments),hr[P.property]&&this.doLayoutLater()},v.prototype.isVisible=function(P){if(P.a("visible")===!1)return!1;if(this._visibleFunc&&this._visibleFunc(P)===!1)return!1;if(this._filter){var v=this.getLabel(P);if(!v||v.indexOf(this._filter)<0)return!1}else{var r=this.dm().sm().ld();if(!r||P.getParent()!==r)return!1}return P.fileType!==Tv},v.prototype.isMovable=function(){return!1},v.prototype.onValidated=function(){this._lastWidth===this.getWidth()&&this._lastHeight===this.getHeight()||this.doLayoutLater()},v.prototype.adjustTranslateX=function(){return 0},v.prototype.adjustTranslateY=function(P){var v=this.getHeight()-this._fileRect.height;return P<v&&(P=v),P>0?0:Math.round(P)},v.prototype.getContentRect=function(){return this._fileRect},v.prototype.doLayoutLater=function(){this._doLayoutLater||(this._doLayoutLater=!0,requestAnimationFrame(this.doLayoutBind))},v.prototype.doLayout=function(){var P=this;this._doLayoutLater=!1,this.redraw();var v=this.nodes=[];this.dm().getDatas().each(function(r){P.isVisible(r)&&v.push(r)});var r=this._lastWidth=this.getWidth();this._lastHeight=this.getHeight();var m=this._fileGap;if(this._layoutType===Ir){for(var H=this._rowHeight,I=Math.max(H-4,2),Y=0;Y<v.length;Y++){var U=v[Y];U.setPosition(m+I/2,H*Y+2+I/2),U.setSize(I,I),U.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0})}this._fileRect={x:0,y:0,width:r,height:H*v.length}}else{for(var o=this._fileSize,x=o+m,N=o+m+16,E=m,s=m,W=0,f=0;f<v.length;f++){var G=v[f];G.setPosition(E+o/2,s+o/2),G.setSize(o,o),G.s({"label.position":31,"label.offset.x":0,"label.offset.y":2,"label.max":o}),(W+2)*x+m>r?(E=m,f!==v.length-1&&(s+=N),W=0):(E+=x,W++)}this._fileRect={x:0,y:0,width:r,height:s+N}}this.tx(this.tx()),this.ty(this.ty()),this.showScrollBar()},v}(cr),Dr=function(P){function v(r,m,H,I){hv(this,v);var Y=Rv(this,P.call(this));Y.setSize(20,20),Y._id=Y.url=m?m+"/"+H:H,Y.path=m,Y.value=I,Y.rootDir=r,Y.uuid=tP(I)&&GP(I.fileType)&&null!=I.uuid?I.uuid:Y.url,Y.postfix=I?I.postfix:"";var U=Tv,o=void 0,x=void 0;return Y.s({"select.width":0,pixelPerfect:!1,"image.stretch":"centerUniform"}),""===m?(U=pv,x="editor.root.state"):"assets"===r&&(x=Y.getFileImage(H))?U=yv:IP(H)&&"displays"===r?(U=Pr,x=fP(Y.url),Y.s("label",M(H))):IP(H)&&"symbols"===r?(U=Av,x=fP(Y.url),Y.s("label",M(H))):IP(H)&&"components"===r?(U=vr,x=fP(Y.url),Y.s("label",M(H))):IP(H)&&"scenes"===r?(U=mr,x=fP(Y.url),Y.s("label",M(H))):IP(H)&&"models"===r&&(U=rr,x=fP(Y.url),Y.s("label",M(H))),tP(I)&&(GP(I.fileType)?(U=I.fileType,o=I.fileIcon,x=I.fileImage||x||o,x||I.fileType!==Fv||(x="editor.dir"),Y.a(I.attrs),Y.s(I.styles)):(U=Fv,x="editor.dir")),x||(x="editor.unknown"),Y.fileType=U,Y.setIcon(o),Y.setImage(x),Y.setName(H),Y}return Dv(v,P),v.prototype.getFileUUID=function(){return this.postfix?this.uuid+"."+this.postfix:this.uuid},v.prototype.getFileImage=function(P){return HP(P)?this.url:xP(P)?"editor.dxf.state":NP(P)?"editor.obj.state":EP(P)?"editor.mtl.state":sP(P)?"editor.ttf.state":WP(P)?"editor.otf.state":YP(P)?"editor.sound.state":UP(P)?"editor.video.state":void 0},v}(ht.Node);ht.Default.setCompType("accordion-title-comp",function(P,v,r,m,H){var I=dv.config.drawAccordionTitle;if(I)return void I(P,v,m,H,{isHover:m.__hover,isExpanded:m.expanded,hoverColor:dv.config.color_hover,selectColor:dv.config.color_select});var Y=m.__hover,U=v.x,o=v.y,x=v.width,N=v.height,E=H.getLabel(m),s=8,W=H.getFileGap();P.save(),(Y||H.isSelected(m))&&(P.fillStyle=dv.config.color_hover,P.fillRect(U,o,x,N)),P.fillStyle=dv.config.color_select,P.fillRect(U+W,o+(N-s)/2,s,s),E&&ht.Default.drawText(P,E,"bold 14px Arial","black",U+W+s+8,o,200,N,"left","middle"),P.restore()}),ht.Default.setImage("accordion-title",{width:160,height:24,fitSize:!0,pixelPerfect:!1,interactive:!0,boundExtend:2,onDown:function(P,v,r,m,H,I){ht.Default.isLeftButton(P)&&(r.getMutex()&&!v.expanded&&r.dirs.forEach(function(P){P!==v&&(P.expanded=!1)}),v.expanded=!v.expanded,r.ivm())},onEnter:function(P,v,r,m,H,I){v.__hover=!0,v.iv()},onLeave:function(P,v,r,m,H,I){v.__hover=!1,v.iv()},comps:[{type:"accordion-title-comp",displayName:"clock-pointer",rect:[0,0,160,24]}]});var Rr={layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,filePadding:!0,titleHeight:!0},zr=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r,m));return H.setFileGap(10),H.setMutex(dv.config.accordionMutex),H.nodes=[],H.dirs=[],H.bottomRects=[],H.addViewListener(function(P){"beginValidate"===P.kind&&H.doLayout()}),H.setSelectionModelShared(!1),H.dm().sm().ms(function(){H.sm().cs()}),H._layouted=!1,H.mi(H.handleInteraction.bind(H)),H.addBottomPainter(H.paintBottom.bind(H)),H.addTopPainter(H.paintTop.bind(H)),H}return Dv(v,P),v.prototype.paintBottom=function(P){var v=this,r=this._rowHeight,m=this.getWidth();this.nodes.forEach(function(H){if(v._layoutType===Ir)v.isSelected(H)&&(P.beginPath(),P.rect(0,H.p().y-r/2,m,r),P.fillStyle=dv.config.color_select,P.fill());else{var I=v.isSelected(H)?dv.config.color_select:dv.config.color_mask,Y=H.getRect(),U=Y.x,o=Y.y,x=Y.width,N=Y.height,E=v._filePadding;d(P,I,U-E,o-E,x+2*E,N+2*E,1)}}),this.bottomRects.forEach(function(v){var r=v.x,m=v.y,H=v.width,I=v.height;P.beginPath(),P.lineWidth=2,P.strokeStyle=dv.config.color_hover,P.moveTo(r+10,m+I/2),P.lineTo(r+H-10,m+I/2),P.stroke()})},v.prototype.isDroppable=function(P,v){return"displays"===this.explorer.rootDir&&v.view instanceof wr||v.view===this.editor.dndFromOutside},v.prototype.handleDragAndDrop=function(v,r){var m=this.draggingData;m&&m.fileType!==Fv&&P.prototype.handleDragAndDrop.call(this,v,r)},v.prototype.isLabelVisible=function(P){return P.fileType!==Fv},v.prototype.paintTop=function(P){P.texureImage2D=!0;var v=void 0;if(this._dragInfo&&this._dragInfo.inView?v=this._dragInfo:this._crossDragInfo&&(v=this._crossDragInfo),v){var r=dv.config.color_select_dark,m=v.targetData;if(P.texureImage2D=!0,m){var H=m.getRect();P.beginPath(),P.rect(H.x,H.y,H.width,H.height),P.lineWidth=2,P.strokeStyle=dv.config.color_select_dark,P.stroke()}else{var I=this.getViewRect();d(P,r,I.x,I.y,I.width,I.height,2)}}},v.prototype.getDataAt=function(v){if(this._layoutType!==Ir)return P.prototype.getDataAt.call(this,v);var r=P.prototype.getDataAt.call(this,v);if(r)return r;for(var m=this.lp(v).y,H=0;H<this.nodes.length;H++){var I=this.nodes[H],Y=I.getY(),U=this._rowHeight,o=Y-U/2,x=Y+U/2;if(m>=o&&m<x)return I}},v.prototype.handleInteraction=function(P){var v=P.kind,r=P.data,m=P.event;"doubleClickData"===v&&1===this.sm().size()&&r.fileType!==Fv&&(this.setFilter(""),r.getParent().expanded=!0,this.sm().ss(r),this.ivm(),this.editor.open(r,c(m)),console.log("open"))},v.prototype.handleDataDoubleSelect=function(P,v){if(this.isEditable(v)){var r=this.lp(P);if(v.fileType!==Fv)if(this._layoutType===Ir)r.x>this._rowHeight&&this.beginEditing(v);else{var m=this.getDataUI(v);m&&m.labelInfo&&m.labelInfo.rect&&ht.Default.containsPoint(m.labelInfo.rect,r)&&this.beginEditing(v)}}},v.prototype.getLabelColor=function(P){
return P!==this.draggingData||this.isSelected(P)?this._layoutType===Ir?this.isSelected(P)?dv.config.color_light:ht.Default.labelColor:this.isSelected(P)?dv.config.color_select:ht.Default.labelColor:dv.config.color_select},v.prototype.isVisible=function(P){if(!this._layouted)return!1;if(this._visibleFunc&&this._visibleFunc(P)===!1)return!1;var v=this.explorer.rootDir,r=P.getParent();if(P.a("visible")===!1)return!1;if(P.fileType===Tv||!r)return!1;if(this._visibleFunc&&!this._visibleFunc(P))return!1;if(this._filter){var m=this.getLabel(P);if(r.url===v&&P.fileType===Fv){for(var H=P.getChildren(),I=0;I<H.length;I++){var Y=H.get(I);if(this.isVisible(Y))return!0}return!1}if(r.getParent()&&r.getParent().url===v&&P.fileType!==Fv)return!(!m||m.indexOf(this._filter)<0)}return r.url===v&&P.fileType===Fv||!(!r.getParent()||r.getParent().url!==v||P.fileType===Fv)&&!!r.expanded},v.prototype.adjustTranslateX=function(P){return 0},v.prototype.adjustTranslateY=function(P){if(!this.contentHeight)return 0;var v=this.getViewRect(),r=v.height-this.contentHeight;return P>=0||r>=0?0:P>r?P:r},v.prototype.getImage=function(P){if(P.getImage)return P.fileType===Fv?"accordion-title":P.getImage()},v.prototype.doLayout=function(){var P=this;if(this._lastWidth!==this.getWidth()||this._lastHeight!==this.getHeight()||this._lastFileSize!==this.getFileSize()){this._doLayoutLater=!1,this.redraw();var v=this.dirs=[],r=this.nodes=[],m=this.bottomRects=[];this.dm().each(function(r){P.isVisible(r)&&r.fileType===Fv&&v.push(r)});var H=this._lastWidth=this.getWidth(),I=this._titleHeight,Y=0,U=0;this._lastHeight=this.getHeight(),this._lastFileSize=this._fileSize,this._expandIds&&(this.dirs.forEach(function(v){v.expanded=P._expandIds.indexOf(v.getId())>=0}),delete this._expandIds),v.forEach(function(v){v.setAnchor(0,0),v.p(Y,U),v.setSize(H,I),v.s("label",null),U+=I;var o=[];v.getChildren().each(function(v){P.isVisible(v)&&(o.push(v),r.push(v))}),U=P.layoutChildren(o,U),v.expanded&&(m.push({x:0,y:U,width:H,height:16}),U+=16)}),this.contentHeight=U,this._layouted=!0}},v.prototype.layoutChildren=function(P,v){var r=this;if(!P||0===P.length)return v;var m=this._fileGap;if(this._layoutType===Ir){var H=function(){var H=r._rowHeight,I=Math.max(H-4,15);return P.forEach(function(P,r){P.setPosition(m+I/2,v+2+I/2),P.setSize(I,I),P.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0}),v+=H}),{v:v}}();if("object"==typeof H)return H.v}else{var I=function(){var H=r.getWidth(),I=r._fileSize,Y=r._filePadding,U=I+2*Y,o=m,x=v+m,N=0,E=I+m+2*Y,s=I+m+16+2*Y;return P.forEach(function(v,r){v.setPosition(o+U/2,x+U/2),v.setSize(I,I),v.s({"label.position":31,"label.offset.x":0,"label.offset.y":2+Y,"label.max":U}),(N+2)*E+m>H?(o=m,r!==P.length-1&&(x+=s),N=0):(o+=E,N++)}),{v:x+s}}();if("object"==typeof I)return I.v}},v.prototype.handleScroll=function(P){var v=Nr?-P.detail:P.wheelDelta/10;(Nr||P.wheelDelta!==P.wheelDeltaX)&&this.translate(0,v)},v.prototype.adjustZoom=function(){return 1},v.prototype.onPropertyChanged=function(v){P.prototype.onPropertyChanged.call(this,v);var r=v.property;"dataModel"!==r&&"fileSize"!==r||this.doLayout()},v.prototype._endDrag=function(P,v){var r=this,m=v.targetData;m&&m.fileType===Fv&&(this.isSelected(this.draggingData)?this.sm().toSelection().each(function(P){r.editor.moveFile(P,m)}):this.editor.moveFile(this.draggingData,m),this.doLayout(),this.redraw())},v.prototype.toDraggingDatas=function(P){var v=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(P){P.fileType!==Fv&&v.push(P)}),P&&v.reverse()):this.draggingData.fileType!==Fv&&v.push(this.draggingData),v},v.prototype.invalidateModel=function(){this._lastWidth=null,this.iv()},v.prototype.ivm=function(){this.invalidateModel()},v.prototype.getContentRect=function(){return{x:0,y:0,width:this.getWidth(),height:this.contentHeight||0}},v.prototype.onPropertyChanged=function(v){P.prototype.onPropertyChanged.apply(this,arguments),Rr[v.property]&&this.ivm()},ev(v,[{key:"expandIds",get:function(){var P=[];return this.dirs.forEach(function(v){v.expanded&&P.push(v.getId())}),P},set:function(P){this._expandIds=P,this._lastWidth=null}}]),v}(cr);T(zr,{ms_ac:["filePadding","titleHeight","mutex"],_mutex:!1,_filePadding:6,_titleHeight:36});var Br=function(P){function v(r,m){var H=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];hv(this,v);var I=Rv(this,P.call(this));I.editor=r,I.rootDir=m,I.copyFileInfos=[],I.dataModel=new ht.DataModel,I.dataModel.setAutoAdjustIndex(!1);var Y=I.mode=dv.config.explorerMode;Y===Yr&&(I.accordion=new zr(I,H)),I.tree=new Xr(I,H),I.list=new er(I,H),I.controlPane=new Bv,I.controlPane.addRow([{id:"filter",textField:{}},{id:"url",textField:{editable:!1}},{id:"slider",slider:{min:1,max:I.getFileListView().getMaxFileSize(),step:1,onValueChanged:function(P,v){I.getFileListView().setFileSize(v),I.getFileListView().setLayoutType(v>16?Hr:Ir)}}}],[.1,.2,ht.Default.isTouchable?70:50]);var U=I.controlPane.getViewById("filter").getElement();U.onkeyup=function(P){L(P)&&(U.value=""),Y===Yr?(I.accordion.setFilter(U.value),I.accordion.ivm()):I.list.setFilter(U.value)};var o=Y===Yr?I.accordion:I.list;o.mp(function(P){"filter"===P.property&&(U.value=P.newValue||"")});var x=I.controlPane.getItemById("slider").element;return x.getToolTip=function(){},I.getFileListView().mp(function(P){"fileSize"===P.property&&x.setValue(P.newValue)}),I.bottomPane=new ur,I.bottomPane.setCenterView(I.getFileListView()),I.bottomPane.setBottomView(I.controlPane),I.bottomPane.setBottomHeight(ht.Default.widgetRowHeight+8),I.setOrientation("vertical"),Y===Yr?(I.setLeftView(I.bottomPane),I.setPosition(1),I.accordion.sm().ms(function(){I.$52$(I.accordion)}),I.accordion.setFileSize(dv.config.fileSize),I.setDraggable(!1)):(I.setLeftView(I.tree),I.setRightView(I.bottomPane),I.setPosition(dv.config.explorerSplitViewPosition),I.list.setSelectionModelShared(!1),I.list.sm().ms(function(){I.$52$(I.list)}),I.list.setFileSize(dv.config.fileSize)),I.tree.menu=new gr,I.treeMenuItems=[],I.initTreeMenu(I.tree.menu,I.treeMenuItems),I.tree.menu.setItems(I.treeMenuItems),I.tree.menu.addTo(I.tree.getView()),I.editor.menus.push(I.tree.menu),I.list.menu=new gr,I.listMenuItems=[],I.initListMenu(I.list.menu,I.listMenuItems),I.list.menu.setItems(I.listMenuItems),I.list.menu.addTo(I.list.getView()),I.editor.menus.push(I.list.menu),I.isAccordionMode()&&(I.accordion.menu=new gr,I.accordionMenuItems=[],I.initAccordionMenu(I.accordion.menu,I.accordionMenuItems),I.accordion.menu.setItems(I.accordionMenuItems),I.accordion.menu.addTo(I.accordion.getView()),I.editor.menus.push(I.accordion.menu)),I}return Dv(v,P),v.prototype.$52$=function(P){var v=P.sm().ld();this.controlPane.v("url",v?v.getFileUUID():"")},v.prototype.isAccordionMode=function(){return this.mode===Yr},v.prototype.parse=function(P){var v=this,r=void 0,m=void 0,H=void 0,I=void 0;if(this.mode===Yr?(m=this.accordion.expandIds,r=this.accordion.ty()):(r=this.tree.ty(),m=this.tree.expandIds,H=this.tree.selectionIds,I=this.tree.dm().size()),this.dataModel.clear(),OP(P))P.forEach(function(P){if(P){var r=P.attrs&&P.attrs.path?P.attrs.path:"",m=v.rootNode=new Dr(v.rootDir,r,P.name,P);v.dataModel.add(m),v.parseRoot(m,P)}});else{var Y=this.rootNode=new Dr(this.rootDir,"",this.rootDir);this.dataModel.add(Y),this.parseRoot(Y,P)}var U=this.dataModel.getDatas(),o={};U.toArray().forEach(function(P,v){o[P._id]=v}),U.sort(function(P,v){return P.fileType===pv?-1:v.fileType===pv?1:P.fileType===Fv&&v.fileType!==Fv?-1:P.fileType!==Fv&&v.fileType===Fv?1:o[P._id]-o[v._id]}),this.mode===Yr?(this.accordion.expandIds=m,this.accordion.ty(r)):(this.tree.expandIds=m,this.tree.selectionIds=H,this.tree.ty(r),0===I&&(this.tree.expand(this.rootNode),this.tree.sm().ss(this.rootNode)));var x={explorer:this};this.editor.fireEvent("explorerUpdated",x)},v.prototype.parseRoot=function(P,v){P.a("editor.editable",!1);var r=void 0;v.fileType===Fv||v.fileType===pv?(P.a(v.attrs),P.s(v.styles),v.fileIcon&&(P.setIcon(v.fileIcon),P.setImage(v.fileIcon)),r=v.children):r=v;for(var m in r)this.parseChild(P,m,r[m])},v.prototype.parseChild=function(P,v,r){var m=new Dr(this.rootDir,P.url,v,r);m.setParent(P),this.dataModel.add(m);var H=void 0;r&&r.fileType===Fv?H=r.children:m.fileType===Fv&&(H=r);for(var I in H)this.parseChild(m,I,H[I]);return m},v.prototype.deleteSelection=function(P){var v=this,r=[];if(P.sm().getTopSelection().forEach(function(P){var m={data:P,url:P.url};v.editor.fireEvent("fileDeleting",m),m.preventDefault||r.push(P)}),r.length){var m=P.getLabel(r[0])||r[0].getName(),I=H("editor.delete")+" ["+m+"]";r.length>1&&(I+=" ("+r.length+")");var Y=function(){v.editor.removeFiles(r)};dv.config.deleteFileConfirm?lP(I,H("editor.deleteselection"),Y,function(){}):Y()}},v.prototype.$53$=function(P){var v=this;P.push("separator"),P.push({id:"expandAll",label:H("editor.expandall"),action:function(){v.tree.expandAll()}}),P.push({id:"collapseAll",label:H("editor.collapseall"),action:function(){v.tree.collapseAll()}})},v.prototype.addDeleteItem=function(P,v){var r=this;P.push({id:"delete",label:H("editor.delete"),action:function(){r.deleteSelection(v)},visible:function(){return v.sm().ld()&&v.isEditable(v.sm().ld())}})},v.prototype.addNewFolderItem=function(P,v){var r=this;P.push({id:"newFolder",label:H("editor.newfolder"),action:function(){r.editor.newFolder(v)},visible:function(){return v.editable}})},v.prototype.addLocateTreeFileItem=function(P){var v=this;dv.config.locateFileEnabled&&P.push({id:"locateFile",label:H("editor.locatefile"),action:function(){var P=v.tree.sm().ld()||v.rootNode;v.editor.locate(P)}})},v.prototype.addLocateListFileItem=function(P){var v=this;dv.config.locateFileEnabled&&P.push({id:"locateFile",label:H("editor.locatefile"),action:function(){var P=v.ld||v.tree.sm().ld()||v.rootNode;v.editor.locate(P)}})},v.prototype.$55$=function(P){var v=this;P.push({id:"open",label:H("editor.open"),action:function(){v.editor.open(v.ld)},visible:function(){var P=v.ld;return!!P&&(P.fileType===Pr||P.fileType===Av||P.fileType===vr||P.fileType===mr)}})},v.prototype.addExportItem=function(P){var v=this;P.push({id:"export",label:H("editor.export"),action:function(){var P=[],r=v.getFileListView().sm();r.size()>0&&(r.each(function(v){P.push(v.url)}),v.editor.request("export",P))},visible:function(){var P=v.getFileListView().sm().ld();return!!P&&(P.fileType===Pr||P.fileType===Av||P.fileType===vr||P.fileType===mr)}})},v.prototype.addRenameItem=function(P,v){P.push({id:"rename",label:H("editor.rename"),action:function(){var P=v.sm().ld();P&&P.a("editable")!==!1&&v.beginEditing(P)},visible:function(){var P=v.sm().ld();return P&&v.isEditable(P)}})},v.prototype.addInsertItem=function(P){var v=this;P.push({id:"insert",label:H("editor.insert"),action:function(){v.editor.$100$(v.getFileListView().sm().ld())},visible:function(){var P=v.getFileListView().sm().ld();return!!P&&(!!v.editor.gv&&(v.editor.url!==P.url&&(P.fileType===vr?!!v.editor.symbolView:P.fileType===Av||P.fileType===yv)))}})},v.prototype.addCopyItem=function(P){var v=this;P.push({id:"copy",label:H("editor.copy"),action:function(){v.copyFiles()},visible:function(){if(!v.getFileListView().editable)return!1;var P=v.getFileListView().sm().ld();return!(!P||P.a("editable")===!1)}})},v.prototype.addPasteItem=function(P){var v=this;P.push({id:"paste",label:H("editor.paste"),action:function(){v.pasteFiles()},visible:function(){return!!v.getFileListView().editable&&(!v.isAccordionMode()||!!v.ld)}})},v.prototype.copyFiles=function(){var P=this;this.copyFileInfos.length=0,this.getFileListView().sm().each(function(v){if(v.fileType!==pv&&v.fileType!==Fv&&v.fileType!==Tv){var r={url:v.url,name:v.getName()};P.copyFileInfos.push(r),P.editor.fireEvent("copyFile",{url:v.url}),P.loadFileInfo(r)}})},v.prototype.loadFileInfo=function(P){var v=P.url;if(this.editor.requestBase64(v,function(v){P.content=v}),IP(v)){var r=fP(v);this.dataModel.getDataById(r)&&this.editor.requestBase64(r,function(v){P.image=v})}},v.prototype.pasteFiles=function(){var P=this;this.copyFileInfos.forEach(function(v){if(v.content){var r=v.url,m=void 0,H=2,I=P.currentDir+"/"+M(v.name),Y=r.substring(r.lastIndexOf("."),r.length);for(m=I+Y;P.dataModel.getDataById(m);)m=I+" "+H++ +Y;var U={path:m,content:v.content};P.editor.request("upload",U),P.editor.fireEvent("pasteFile",{url:m}),v.image&&(U.path=fP(m),U.content=v.image,P.editor.request("upload",U),P.editor.fireEvent("pasteFile",{url:U.path}))}})},v.prototype.enableDroppableToSymbolView=function(){var P=this.list;this.mode===Yr&&(P=this.accordion),P.isDroppableToSymbolView=!0},v.prototype.enableDroppableToDisplayView=function(){var P=this.list;this.mode===Yr&&(P=this.accordion),P.isDroppableToDisplayView=!0},v.prototype.getFileListView=function(){return this.mode===Yr?this.accordion:this.list},v.prototype.initTreeMenu=function(P,v){},v.prototype.initListMenu=function(P,v){},v.prototype.initAccordionMenu=function(P,v){},ev(v,[{key:"currentDir",get:function(){var P=void 0;return this.isAccordionMode()?(P=this.ld,P&&P.fileType!==Fv&&(P=P.getParent()),P?P.url:this.accordion.dirs[this.accordion.dirs.length-1].url):(P=this.tree.sm().ld(),P?P.url:this.rootDir)}},{key:"ld",get:function(){return this.getFileListView().sm().ld()}}]),v}(jr);dv.Explorer=Br;var lr=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r,"displays",m));return H.enableDroppableToDisplayView(),H}return Dv(v,P),v.prototype.initTreeMenu=function(P,v){this.addLocateTreeFileItem(v),this.addNewFolderItem(v,this.tree),this.addNewDisplayItem(v,this.tree),this.addRenameItem(v,this.tree),this.addDeleteItem(v,this.tree),this.$53$(v)},v.prototype.initListMenu=function(P,v){this.$55$(v),this.addLocateListFileItem(v),this.addNewFolderItem(v,this.list),this.addNewDisplayItem(v,this.list),this.addCopyItem(v),this.addPasteItem(v),this.addRenameItem(v,this.list),this.addDeleteItem(v,this.list),this.addExportItem(v)},v.prototype.initAccordionMenu=function(P,v){this.$55$(v),this.addLocateListFileItem(v),this.addNewFolderItem(v,this.accordion),this.addNewDisplayItem(v,this.accordion),this.addCopyItem(v),this.addPasteItem(v),this.addRenameItem(v,this.accordion),this.addDeleteItem(v,this.accordion),this.addExportItem(v)},v.prototype.addNewDisplayItem=function(P,v){var r=this;P.push({id:"newDisplayView",label:H("editor.newdisplayview"),action:function(){r.editor.newDisplayView(),r.editor.save()},visible:function(){if(!v.editable)return!1;if(r.isAccordionMode()){var P=r.accordion.sm().ld();return P&&P.fileType===Fv}return!0}})},v}(Br),dr=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r,"symbols",m));return H.enableDroppableToDisplayView(),H.enableDroppableToSymbolView(),H}return Dv(v,P),v.prototype.initTreeMenu=function(P,v){this.addLocateTreeFileItem(v),this.addNewFolderItem(v,this.tree),this.addNewSymbolItem(v,this.tree),this.addRenameItem(v,this.tree),this.addDeleteItem(v,this.tree),this.$53$(v)},v.prototype.initListMenu=function(P,v){this.$55$(v),this.addInsertItem(v),this.addLocateListFileItem(v),this.addNewFolderItem(v,this.list),this.addNewSymbolItem(v,this.list),this.addCopyItem(v),this.addPasteItem(v),this.addRenameItem(v,this.list),this.addDeleteItem(v,this.list),this.addExportItem(v)},v.prototype.initAccordionMenu=function(P,v){this.$55$(v),this.addInsertItem(v),this.addLocateListFileItem(v),this.addNewFolderItem(v,this.accordion),this.addNewSymbolItem(v,this.accordion),this.addCopyItem(v),this.addPasteItem(v),this.addRenameItem(v,this.accordion),this.addDeleteItem(v,this.accordion),this.addExportItem(v)},v.prototype.addNewSymbolItem=function(P,v){var r=this;P.push({id:"newSymbolView",label:H("editor.newsymbolview"),action:function(){r.editor.newSymbolView(),r.editor.save()},visible:function(){return v.editable}})},v}(Br),Vr=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r,"components",m));return H.enableDroppableToSymbolView(),H}return Dv(v,P),v.prototype.initTreeMenu=function(P,v){this.addLocateTreeFileItem(v),this.addNewFolderItem(v,this.tree),this.addNewComponentItem(v,this.tree),this.addRenameItem(v,this.tree),this.addDeleteItem(v,this.tree),this.$53$(v)},v.prototype.initListMenu=function(P,v){this.$55$(v),this.addInsertItem(v),this.addLocateListFileItem(v),this.addNewFolderItem(v,this.list),this.addNewComponentItem(v,this.list),this.addCopyItem(v),this.addPasteItem(v),this.addRenameItem(v,this.list),this.addDeleteItem(v,this.list),this.addExportItem(v)},v.prototype.initAccordionMenu=function(P,v){this.$55$(v),this.addInsertItem(v),this.addLocateListFileItem(v),this.addNewFolderItem(v,this.accordion),this.addNewComponentItem(v,this.accordion),this.addCopyItem(v),this.addPasteItem(v),this.addRenameItem(v,this.accordion),this.addDeleteItem(v,this.accordion),this.addExportItem(v)},v.prototype.addNewComponentItem=function(P,v){var r=this;P.push({id:"newComponent",label:H("editor.newcomponent"),action:function(){r.editor.newComponent()},visible:function(){return v.editable}})},v}(Br),Tr=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r,"scenes",m));return H.enableDroppableToDisplayView(),H}return Dv(v,P),v.prototype.initTreeMenu=function(P,v){},v.prototype.initListMenu=function(P,v){},v.prototype.initAccordionMenu=function(P,v){},v}(Br),pr=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r,"models",m));return H.enableDroppableToDisplayView(),H}return Dv(v,P),v.prototype.initTreeMenu=function(P,v){},v.prototype.initListMenu=function(P,v){},v.prototype.initAccordionMenu=function(P,v){},v}(Br),Fr=function(P){function v(r){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];hv(this,v);var H=Rv(this,P.call(this,r,"assets",m));return H.enableDroppableToDisplayView(),H.enableDroppableToSymbolView(),H}return Dv(v,P),v.prototype.initTreeMenu=function(P,v){this.addLocateTreeFileItem(v),this.addNewFolderItem(v,this.tree),this.addRenameItem(v,this.tree),this.addDeleteItem(v,this.tree),this.$53$(v)},v.prototype.initListMenu=function(P,v){this.addInsertItem(v),this.addLocateListFileItem(v),this.addNewFolderItem(v,this.list),this.addCopyItem(v),this.addPasteItem(v),this.addRenameItem(v,this.list),this.addDeleteItem(v,this.list),this.$54$(v)},v.prototype.initAccordionMenu=function(P,v){this.addInsertItem(v),this.addLocateListFileItem(v),this.addNewFolderItem(v,this.accordion),this.addCopyItem(v),this.addPasteItem(v),this.addRenameItem(v,this.accordion),this.addDeleteItem(v,this.accordion),this.$54$(v)},v.prototype.$54$=function(P){var v=this;P.push("separator"),P.push({id:"convertToDisplay",label:H("editor.converttodisplay"),action:function(){v.editor.open(v.getFileListView().sm().ld(),!1)},visible:function(){var P=v.getFileListView().sm().ld();return!!P&&(oP(P.url)||xP(P.url))}}),P.push({id:"convertToSymbol",label:H("editor.converttosymbol"),action:function(){v.editor.open(v.getFileListView().sm().ld(),!0)},visible:function(){var P=v.getFileListView().sm().ld();return!!P&&(oP(P.url)||xP(P.url)||sP(P.url)||WP(P.url))}}),P.push({id:"batchConvert",label:H("editor.batchconvertsvg"),action:function(){v.editor.batchConvertSVG(v.getFileListView().sm().getSelection().toArray())},visible:function(){var P=v.getFileListView().sm().ld();return!!P&&oP(P.url)}})},v}(Br),yr=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m}return Dv(v,P),v.prototype.$6$=function(P){this.setGraphView(this.editor.gv)},v}(Kr),Ar=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editView=r,m.editor=r.editor,m._topCanvas=D(),m._topDiv=R(),m._view.insertBefore(m._topCanvas,m._scrollBarDiv),m._view.insertBefore(m._topDiv,m._scrollBarDiv);var H=[];return m.menu=new gr(H),m.menu.beforeShow=function(P){m._rightClickPosition=m.lp(P)},m.initMenuItems(H),m.menu.addTo(m.getView()),m.editor.menus.push(m.menu),m.addTopPainter(function(P){return P.texureImage2D=!0}),m}return Dv(v,P),v.prototype.isEditable=function(v){return!!this.editable&&P.prototype.isEditable.call(this,v)},v.prototype.isMovable=function(v){return!!this.editable&&P.prototype.isMovable.call(this,v)},v.prototype.onGroupDoubleClicked=function(v,r,m){this.editable&&P.prototype.onGroupDoubleClicked.call(this,v,r,m)},v.prototype.onEdgeDoubleClicked=function(v,r,m){this.editable&&P.prototype.onEdgeDoubleClicked.call(this,v,r,m)},v.prototype.checkDoubleClickOnNote=function(v,r){return!!this.editable&&P.prototype.checkDoubleClickOnNote.call(this,v,r)},v.prototype.$57$=function(P){var v=this;P.push({id:"copy",label:H("editor.copy"),action:function(){v.editor.copy()},visible:function(){return!!v.editor.ld}}),P.push({id:"paste",label:H("editor.paste"),action:function(){v.editor.paste(!1,v._rightClickPosition)},visible:function(){return v.editor.hasCopyInfo()}})},v.prototype.$56$=function(P){var v=this;P.push({separator:!0,visible:function(){return!!v.editor.ld}}),P.push({id:"bringToFront",label:H("editor.bringtofront"),action:function(){v.editor.bringToFront()},visible:function(){return!!v.editor.ld}}),P.push({id:"bringForward",label:H("editor.bringforward"),action:function(){v.editor.bringForward()},visible:function(){return!!v.editor.ld}}),P.push({id:"sendBackward",label:H("editor.sendbackward"),action:function(){v.editor.sendBackward()},visible:function(){return!!v.editor.ld}}),P.push({id:"sendToBack",label:H("editor.sendtoback"),action:function(){v.editor.sendToBack()},visible:function(){return!!v.editor.ld}})},v.prototype.initMenuItems=function(P){},v.prototype.onClosed=function(){I(this.editor.menus,this.menu)},v.prototype.$58$=function(P){return P&&this.copyMap[P._id]?P._id:P},v.prototype.$50$=function(P,v){return P instanceof ht.Data?this.dm().contains(P)?P:void 0:v[P]},v.prototype.getSelectWidth=function(P){return!this.isEditable(P)||P instanceof ht.Edge?P.s("select.width"):0},v.prototype.onSelectionChanged=function(P){if(1===this.sm().size()&&("set"===P.kind||"append"===P.kind)){var v=this.sm().ld();v&&document.activeElement===this.getView()&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(v)}},v.prototype.getContentRect=function(){var v=P.prototype.getContentRect.call(this);return v.width&&v.height||(v={x:0,y:0,width:this.dm().a("width")||100,height:this.dm().a("height")||100,empty:!0}),v},v.prototype.isDroppable=function(P,v){return!1},v.prototype.$59$=function(P){if(this.dragImage){var v=dv.config.dragImageSize,r=u(P);this.dragImage.style.left=r.x-v/2+"px",this.dragImage.style.top=r.y-v/2+"px"}},v.prototype.removeDragImage=function(){this.dragImage&&(_(this.dragImage),this.dragImage=null)},v.prototype.handleCrossDrag=function(P,v,r){var m=this,H=r.view,I=H.draggingData;if("enter"===v){if(this._topDiv.style.border="solid "+dv.config.color_select_dark+" 2px",!this.dragImage&&I){var Y=void 0===I.a("dragImage")?I.getImage():I.a("dragImage");if(ht.Default.getImage(Y)!==ht.Default.getImage("editor.unknown")){var U=dv.config.dragImageSize;this.dragImage=ht.Default.toCanvas(Y,U,U,"centerUniform",I,r.view,null,ht.Default.devicePixelRatio),this.$59$(P),this.dragImage.style.opacity=dv.config.dragImageOpacity,this.dragImage.className="ht-editor-dnd-image",ht.Default.appendToScreen(this.dragImage)}}}else"exit"===v||"cancel"===v?(this._topDiv.style.border="",this.removeDragImage()):"over"===v?this.$59$(P):"drop"===v&&(this._topDiv.style.border="",I?!function(){m.removeDragImage();var v=m.lp(P);H.isSelected(I)?H.sm().toSelection().each(function(r){H.handleDropToEditView?H.handleDropToEditView(m.editView,r,v,P):m.editor.$100$(r,v,!0)}):H.handleDropToEditView?H.handleDropToEditView(m.editView,I,v,P):m.editor.$100$(I,v,!0)}():H===this.editor.dndFromOutside&&this.editor.dropLocalFileOnGraphView(P))},ev(v,[{key:"editable",get:function(){return this.editView.editable},set:function(P){}}]),v}(nr),Pm=function(P){function v(r){return hv(this,v),Rv(this,P.call(this,r))}return Dv(v,P),v.prototype.handleDataModelChange=function(v){P.prototype.handleDataModelChange.call(this,v),this.editor&&this.editor.fireEvent("displayViewDataModelChanged",{displayView:this.editView,event:v})},v.prototype.handleDataModelPropertyChange=function(v){P.prototype.handleDataModelPropertyChange.call(this,v),this.editor&&this.editor.fireEvent("displayViewDataModelPropertyChanged",{displayView:this.editView,event:v})},v.prototype.handleDataPropertyChange=function(v){P.prototype.handleDataPropertyChange.call(this,v),this.editor&&this.editor.fireEvent("displayViewDataPropertyChanged",{displayView:this.editView,event:v})},v.prototype.initMenuItems=function(P){this.$57$(P),this.$56$(P),this.addBlockItems(P)},v.prototype.isDroppable=function(P,v){return!!v.view.isDroppableToDisplayView},v.prototype.isSelectable=function(v,r){return!v._refGraph&&P.prototype.isSelectable.call(this,v,r)},v.prototype.addBlockItems=function(P){var v=this,r=function(){return v.sm().size()>0},m=function(){for(var P=0;P<v.sm().size();P++){var r=v.sm().getSelection().get(P);if(r instanceof ht.Block&&!(r instanceof ht.RefGraph))return!0}return!1};P.push({separator:!0,visible:function(){return r()||m()}}),P.push({id:"block",label:H("editor.block"),action:function(){v.editor.block()},visible:r}),P.push({id:"unblock",label:H("editor.unblock"),action:function(){v.editor.unblock()},visible:m})},v}(Ar),vm=function(P){function v(r,m,H,I){hv(this,v);var Y=Rv(this,P.call(this));return Y.fromDrop=I,Y.defaultValueMap={},Y.parse(r,m,H),Y}return Dv(v,P),v.prototype.toLabel=function(){return this.getDisplayName()||this.s("type")||H("editor.comptype.comp")},v.prototype.getClass=function(){return v},v.prototype.getStyle=function(v,r){var m=P.prototype.getStyle.call(this,v,r);return void 0===m&&(m=this.defaultValueMap[v]),m},v.prototype.$61$=function(P){var v=this;this.properties&&(this.properties=null),this.disableDirty=!0,this.defaultValueMap={};var r=this.s("type"),m=ht.Default.getCompType(r);m?!function(){v.$60$&&v.fromDrop&&m.events&&(v.a(m.events),v.fromDrop=!1),v.$60$=null;var r={cache:m,width:{value:100,isSafeFunc:!0,func:function(P){return P._width}},height:{value:100,isSafeFunc:!0,func:function(P){return P._height}},comps:[{type:{func:function(P){return P.compType},isSafeFunc:!0}}]};if(!m.width||v._width>0||v.setWidth(m.width),!m.height||v._height>0||v.setHeight(m.height),m.properties){v.properties=m.properties;for(var H in v.properties){var I=v.properties[H];r.comps[0][H]={func:"style@"+H},P?bP(v,H,P[H],I.defaultValue):void 0===v.s(H)&&bP(v,H,void 0,I.defaultValue),v.defaultValueMap[H]=I.defaultValue}}var Y=dv.config.customProperties.comp;Y&&Y.length&&Y.forEach(function(P){var v=P.property;r.comps[0][v]={func:"style@"+v}}),v.setImage(r),v.ivLater()}():(this.$60$=P,"editor.comp"!==this.getImage()&&(this.setImage("editor.comp"),this.ivLater())),this.disableDirty=!1},v.prototype.ivLater=function(){var P=this;ht.Default.callLater(function(){P.disableDirty=!0,P.iv(),P.disableDirty=!1})},v.prototype.onStyleChanged=function(v,r,m){P.prototype.onStyleChanged.call(this,v,r,m),"type"===v&&this.$61$(this.parsingComp)},v.prototype.parse=function(P,v,r){if(P){if(this.parsingComp=P,bP(this,"type",P.type),this.$61$(P),KP(this,P,v,r),!this.$60$&&this.fromDrop){var m=this.s("type"),H=ht.Default.getCompType(m);H.events&&this.a(H.events),this.fromDrop=!1}this.parsingComp=null}},v.prototype.toJSON=function(){var P={};if(uP(this,P,"type","type",void 0),jP(this,P),this.properties)for(var v in this.properties){var r=this.properties[v];uP(this,P,v,v,r.defaultValue)}return P},ev(v,[{key:"compType",get:function(){var P=this.s("type");return this.$60$?this.$61$(this.$60$):P&&ht.Default.getCompType(P)!==this.getImage().cache&&this.$61$(),P}}]),v}(ht.Node),rm=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.s({border_color:dv.config.color_dark,border_width:1}),I.setImage("border_image"),I.parse(r,m,H),I}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.border")},v.prototype.parse=function(P,v,r){P&&(bP(this,"type",P.type,"border"),bP(this,"border_color",P.color,dv.config.color_dark),bP(this,"border_width",P.width,1),KP(this,P,v,r))},v.prototype.toJSON=function(){var P={};return uP(this,P,"type","type",void 0),uP(this,P,"border_color","color",void 0),uP(this,P,"border_width","width",void 0),jP(this,P),P},ev(v,[{key:"compType",get:function(){return this.s("type")}}]),v}(ht.Node),mm=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.setSize(100,100),I.setImage("pieChart_image"),I.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.hollw":!1,"chart.start.angle":0,"chart.values":[],"chart.colors":void 0}),I.parse(r,m,H),I}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.piechart")},v.prototype.parse=function(P,v,r){P&&(bP(this,"chart.type",P.type,"pieChart"),bP(this,"chart.label",P.label,!1),bP(this,"chart.label.color",P.labelColor,ht.Default.labelColor),bP(this,"chart.label.font",P.labelFont,ht.Default.labelFont),bP(this,"chart.hollow",P.hollow,!1),bP(this,"chart.start.angle",P.startAngle,0),bP(this,"chart.values",P.values,[]),bP(this,"chart.colors",P.colors,void 0),KP(this,P,v,r))},v.prototype.toJSON=function(){var P={};return uP(this,P,"chart.type","type",void 0),uP(this,P,"chart.label","label",!1),uP(this,P,"chart.label.color","labelColor",ht.Default.labelColor),uP(this,P,"chart.label.font","labelFont",ht.Default.labelFont),uP(this,P,"chart.hollow","hollow",!1),uP(this,P,"chart.start.angle","startAngle",0),uP(this,P,"chart.values","values",[]),uP(this,P,"chart.colors","colors",void 0),jP(this,P),P},ev(v,[{key:"compType",get:function(){return this.s("chart.type")}}]),v}(ht.Node),Hm=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.setSize(100,100),I.setImage("columnChart_image"),I.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0}),I.parse(r,m,H),I}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.columnchart")},v.prototype.parse=function(P,v,r){P&&(bP(this,"chart.type",P.type,void 0),bP(this,"chart.label",P.label,!1),bP(this,"chart.label.color",P.labelColor,ht.Default.labelColor),bP(this,"chart.label.font",P.labelFont,ht.Default.labelFont),bP(this,"chart.series",P.series,[]),bP(this,"chart.min.value",P.minValue,0),bP(this,"chart.max.value",P.maxValue,void 0),KP(this,P,v,r))},v.prototype.toJSON=function(){var P={};return uP(this,P,"chart.type","type",void 0),uP(this,P,"chart.label","label",!1),uP(this,P,"chart.label.color","labelColor",ht.Default.labelColor),uP(this,P,"chart.label.font","labelFont",ht.Default.labelFont),uP(this,P,"chart.series","series",[]),uP(this,P,"chart.min.value","minValue",0),uP(this,P,"chart.max.value","maxValue",void 0),jP(this,P),P},ev(v,[{key:"compType",get:function(){return this.s("chart.type")}}]),v}(ht.Node),Im=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.setSize(100,100),I.setImage("lineChart_image"),I.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0,"chart.line.point":!1,"chart.line.width":2,"chart.line.3d":!1}),I.parse(r,m,H),I}return Dv(v,P),v.prototype.getClass=function(){return v},v.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.linechart")},v.prototype.parse=function(P,v,r){P&&(bP(this,"chart.type",P.type,void 0),bP(this,"chart.label",P.label,!1),bP(this,"chart.label.color",P.labelColor,ht.Default.labelColor),
bP(this,"chart.label.font",P.labelFont,ht.Default.labelFont),bP(this,"chart.series",P.series,[]),bP(this,"chart.min.value",P.minValue,0),bP(this,"chart.max.value",P.maxValue,void 0),bP(this,"chart.line.point",P.linePoint,!1),bP(this,"chart.line.width",P.lineWidth,2),bP(this,"chart.line.3d",P.line3d,!1),KP(this,P,v,r))},v.prototype.toJSON=function(){var P={};return uP(this,P,"chart.type","type",void 0),uP(this,P,"chart.label","label",!1),uP(this,P,"chart.label.color","labelColor",ht.Default.labelColor),uP(this,P,"chart.label.font","labelFont",ht.Default.labelFont),uP(this,P,"chart.series","series",[]),uP(this,P,"chart.min.value","minValue",0),uP(this,P,"chart.max.value","maxValue",void 0),uP(this,P,"chart.line.point","linePoint",!1),uP(this,P,"chart.line.width","lineWidth",2),uP(this,P,"chart.line.3d","line3d",!1),jP(this,P),P},ev(v,[{key:"compType",get:function(){return this.s("chart.type")}}]),v}(ht.Node),Ym=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this,r.getView().graphView));return I.tab=r,I.editView=r.getView(),I.editor=I.editView.editor,I.clazz=m,I.type=H,I}return Dv(v,P),v.prototype.beginTransaction=function(){this._isBeginTransaction||(this._isBeginTransaction=!0,this.dm.beginTransaction())},v.prototype.endTransaction=function(){this._isBeginTransaction&&(this._isBeginTransaction=!1,this.dm.endTransaction())},v.prototype.getDataAt=function(P){return this.gv.getDataAt(P)},v.prototype.getNodeAt=function(P){var v=this.getDataAt(P);return v instanceof ht.Node?v:null},v.prototype.setUp=function(){P.prototype.setUp.call(this),this.sm.cs()},v.prototype.$0$=function(P){},v.prototype.drawDiamond=function(P,v,r,m){var H=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;v=this.toPoint(v),m&&(P.fillStyle=m),r&&(P.strokeStyle=r);var I=v,Y=I.x,U=I.y;P.lineWidth=1,P.beginPath(),P.moveTo(Y,U-H),P.lineTo(Y+H,U),P.lineTo(Y,U+H),P.lineTo(Y-H,U),P.closePath(),m&&P.fill(),r&&P.stroke()},v.prototype.drawRect=function(P,v,r,m){v=this.toRect(v),m&&(P.fillStyle=m),r&&(P.strokeStyle=r),P.lineWidth=1,P.beginPath(),P.rect(v.x,v.y,v.width,v.height),P.stroke(),m&&P.fill(),r&&P.stroke()},v.prototype.drawPoint=function(P,v,r,m,H){v=this.toPoint(v),H&&(P.fillStyle=H),m&&(P.strokeStyle=m),P.lineWidth=1,P.beginPath(),P.arc(v.x,v.y,r,0,2*Math.PI,!0),H&&P.fill(),m&&P.stroke()},v.prototype.drawPoints=function(P,v,r,m,H){for(var I=0;I<v.length;I++)this.drawPoint(P,v[I],r,m,H)},v.prototype.drawLine=function(P,v,r,m){v=this.toPoint(v),r=this.toPoint(r),P.lineWidth=1,P.strokeStyle=m,P.beginPath(),P.moveTo(v.x,v.y),P.lineTo(r.x,r.y),P.stroke()},v.prototype.toRect=function(P){var v=this.zoom;return{x:P.x*v+this.tx,y:P.y*v+this.ty,width:P.width*v,height:P.height*v}},v.prototype.toPoint=function(P){return{x:P.x*this.zoom+this.tx,y:P.y*this.zoom+this.ty}},v.prototype.add=function(P){this.editView.addData(P)},v.prototype.remove=function(P){this.dm.remove(P)},v.prototype.lp=function(P){return this.gv.lp(P)},ev(v,[{key:"dm",get:function(){return this.gv.dm()}},{key:"sm",get:function(){return this.gv.dm().sm()}},{key:"zoom",get:function(){return this.gv.getZoom()}},{key:"tx",get:function(){return this.gv.tx()}},{key:"ty",get:function(){return this.gv.ty()}}]),v}(ht.graph.Interactor),Um=function(P){function v(r,m,H){return hv(this,v),Rv(this,P.call(this,r,m,H))}return Dv(v,P),v.prototype.tearDown=function(){P.prototype.tearDown.call(this),this.node=this.p1=this.p2=null},v.prototype.$49$=function(P){this.node?this.remove(this.node):this.editView.$5$("edit")},v.prototype.handle_mousedown=function(P){this.handle_touchstart(P)},v.prototype.handle_touchstart=function(P){F(P),Q(P)&&(this.gv.setFocus(P),this.p1=this.lp(P),this.startDragging(P))},v.prototype.handleWindowMouseMove=function(P){this.handleWindowTouchMove(P)},v.prototype.handleWindowMouseUp=function(P){this.handleWindowTouchEnd(P)},v.prototype.handleWindowTouchMove=function(P){if(F(P),this.p1){this.p2=this.lp(P);var v=J(this.p1,this.p2);if(this.node)this.node.setRect(v);else{if(!v.width||!v.height)return;this.beginTransaction(),this.createNode(v,!1)}}},v.prototype.handleWindowTouchEnd=function(P){if(F(P),this.endTransaction(),!this.node&&this.p1&&this.createNode({x:this.p1.x-25,y:this.p1.y-25,width:50,height:50},!0),this.node){var v="display"===this.editView.type?"dataCreated":"compCreated",r={data:this.node};r["display"===this.editView.type?"displayView":"symbolView"]=this.editView,this.editor.fireEvent(v,r)}dv.config.continuousCreating?this.node=this.p1=this.p2=null:this.editView.$5$("edit")},v.prototype.createNode=function(P,v){LP(this.type)?this.node=this.type(P,v):this.node=new this.clazz,v?this.node.setPosition(P.x+P.width/2,P.y+P.height/2):this.node.setRect(P),this.node.setParent(this.editView.graphView.getCurrentSubGraph()),this.dm.add(this.node),this.dm.sm().ss(this.node),this.editView.graphView.setFocus()},v.prototype.$0$=function(P){this.node&&this.drawRect(P,this.node.getRect(),dv.config.color_data_border)},v}(Ym),om=function(P){function v(r,m,H){return hv(this,v),Rv(this,P.call(this,r,m,H))}return Dv(v,P),v.prototype.tearDown=function(){P.prototype.tearDown.call(this),this.draggingPoint=this.n1=this.n2=null},v.prototype.$49$=function(P){this.n1?(this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()):this.editView.$5$("edit")},v.prototype.drawAttachPoints=function(P,v,r){var m=this,H=this.gv.getAttachPoints(v);H&&H.forEach(function(H,I){var Y=H.x,U=H.y,o=H.offsetX,x=H.offsetY;I===r?m.drawDiamond(P,v.getAttachPosition(Y,U,o,x),dv.config.color_select,dv.config.color_select,6):m.drawDiamond(P,v.getAttachPosition(Y,U,o,x),dv.config.color_select,dv.config.color_light)})},v.prototype.drawCurve=function(P,v,r){var m=this.gv.getEditInteractor();if(!m)return null;var H=m.getSubModule("Curve");return H?(H.drawEdgeHostHighlight(P,v,r),void this.editView.validateCanvasLater()):null},v.prototype.$0$=function(P){if(this.n1&&(this.n1 instanceof ht.Edge?this.drawCurve(P,this.n1,this.edgePosition1):(this.drawRect(P,this.gv.getNodeRect(this.n1),dv.config.color_data_border),this.drawAttachPoints(P,this.n1,this.attachIndex1)),this.draggingPoint)){var v=void 0,r=void 0;v=this.n1 instanceof ht.Edge?this.edgePosition1.point:this.attachIndex1||0===this.attachIndex1?this.getAttachPosition(this.n1,this.attachIndex1):this.n1.p(),this.n2 instanceof ht.Edge?r=this.edgePosition2.point:this.n2&&(this.attachIndex2||0===this.attachIndex2)&&(r=this.getAttachPosition(this.n2,this.attachIndex2)),this.drawLine(P,v,r||this.draggingPoint,dv.config.color_data_border)}if(this.n2)if(this.n2 instanceof ht.Edge)this.drawCurve(P,this.n2,this.edgePosition2);else{var m=this.gv.getNodeRect(this.n2);this.n1!==this.n2&&(this.drawRect(P,m,dv.config.color_data_border),this.drawAttachPoints(P,this.n2,this.attachIndex2));var H=this.toPoint({x:m.x,y:m.y}),I=3;P.beginPath(),P.moveTo(H.x,H.y-15-I),P.lineTo(H.x+10,H.y-15-I),P.lineTo(H.x+10,H.y-I),P.lineTo(H.x+5,H.y-7-I),P.moveTo(H.x+10,H.y-I),P.lineTo(H.x+15,H.y-7-I),P.lineWidth=1,P.strokeStyle=dv.config.color_data_border,P.stroke()}},v.prototype.handle_mousemove=function(P){if(F(P),!this.draggingPoint){var v=this.getDataAt(P);if(v instanceof ht.Edge)this.edgePosition1=this.gv.calculateEdgePosition(v,this.lp(P));else{var r=this.attachIndex1;if(v){var m=this.gv.calculateAttachPoint(v,this.lp(P));this.attachIndex1=m?m.index:null}else this.attachIndex1=null;if(v===this.n1&&r===this.attachIndex1)return}this.n1=v,this.editView.validateCanvas()}},v.prototype.handle_mousedown=function(P){this.handle_touchstart(P)},v.prototype.handle_touchstart=function(P){F(P),Q(P)&&(this.gv.setFocus(P),this.draggingPoint||(this.n1=this.getDataAt(P),this.n1&&(this.draggingPoint=this.lp(P),this.startDragging(P))))},v.prototype.handleWindowMouseMove=function(P){this.handleWindowTouchMove(P)},v.prototype.handleWindowMouseUp=function(P){this.handleWindowTouchEnd(P)},v.prototype.handleWindowTouchMove=function(P){var v=this.getDataAt(P);if(this.draggingPoint=this.lp(P),this.autoScroll(P),dv.config.edgeLoop||this.n1!==v){if(this.n2=v,v)if(v instanceof ht.Edge)this.edgePosition2=this.gv.calculateEdgePosition(v,this.lp(P));else{var r=this.gv.calculateAttachPoint(v,this.lp(P));this.attachIndex2=r?r.index:null}}else this.attachIndex2=null,this.edgePosition2=null;this.editView.validateCanvas()},v.prototype.handleWindowTouchEnd=function(P){if(this.n1&&this.n2){var v=void 0;GP(this.type)?(v=new this.clazz(this.n1,this.n2),v.s("edge.type",this.type)):v=LP(this.type)?this.type(this.n1,this.n2):new this.clazz(this.n1,this.n2);var r=void 0,m=void 0;if(this.n1 instanceof ht.Edge)void 0!==this.edgePosition1.index?v.setStyle("edge.source.index",this.edgePosition1.index):void 0!==this.edgePosition1.percent&&v.setStyle("edge.source.percent",this.edgePosition1.percent);else if(r=this.getAttachPoint(this.n1,this.attachIndex1)){var H=r,I=H.x,Y=H.y,U=H.offsetX,o=H.offsetY;v.s({"edge.source.anchor.x":I,"edge.source.anchor.y":Y,"edge.source.offset.x":U,"edge.source.offset.y":o})}if(this.n2 instanceof ht.Edge)void 0!==this.edgePosition2.index?v.setStyle("edge.target.index",this.edgePosition2.index):void 0!==this.edgePosition2.percent&&v.setStyle("edge.target.percent",this.edgePosition2.percent);else if(m=this.getAttachPoint(this.n2,this.attachIndex2)){var x=m,N=x.x,E=x.y,s=x.offsetX,W=x.offsetY;v.s({"edge.target.anchor.x":N,"edge.target.anchor.y":E,"edge.target.offset.x":s,"edge.target.offset.y":W})}(r||m)&&v.s("edge.offset",0),this.add(v),dv.config.continuousCreating||this.editView.$5$("edit")}this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()},v.prototype.getAttachPoint=function(P,v){if(null===v||void 0===v)return null;var r=this.gv.getAttachPoints(P);return r&&0!==r.length?r[v]:null},v.prototype.getAttachPosition=function(P,v){var r=this.getAttachPoint(P,v),m=r.x,H=r.y,I=r.offsetX,Y=r.offsetY;return P.getAttachPosition(m,H,I,Y)},v}(Ym),xm=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this,r,m,H));return I.points=[],I.segments=[],I.nextPoint=null,I.closePath=!1,I}return Dv(v,P),v.prototype.tearDown=function(){P.prototype.tearDown.call(this),this.points=[],this.segments=[],this.nextPoint=null,this.isBreak=!1},v.prototype.$49$=function(P){this.isBreak?this.createShape():(this.preCtrl=null,this.isBreak=!0,this.editView.validateCanvas())},v.prototype.createShape=function(){if(this.points.length>1){var P=void 0;LP(this.type)?P=this.type(this.points,this.segments):(P=new this.clazz,P.setPoints(this.points),P.setSegments(this.segments)),this.closePath&&P.setClosePath&&P.setClosePath(!0),this.add(P)}this.editView.$5$("edit"),this.editor.pointsEditingMode=!0},v.prototype.handle_mousedown=function(P){this.handle_touchstart(P)},v.prototype.isCloseStart=function(P){var v=this.points[0];if(!v)return!1;var r=this.lp(P),m=ht.Default.getDistance(v,r);return m<5},v.prototype.handle_touchstart=function(P){if(F(P),Q(P)){if(this.gv.setFocus(P),q(P))this.createShape();else{if(this.isCloseStart(P))return this.closePath=!0,void this.createShape();var v=this.judgeNextPoint(P,!0);if(this.points.length){var r=this.points[this.points.length-1];if(Math.abs(r.x-v.x)<.01&&Math.abs(r.y-v.y)<.01)return}this.preCtrl?(this.points.push(this.preCtrl),this.points.push(v),this.points.push(v),this.segments.push(4),this.preCtrl=null):(this.isBreak?(this.segments.push(1),this.isBreak=!1):this.segments.push(this.points.length>0?2:1),this.points.push(v)),this.nextPoint=this.lp(P),this.editView.validateCanvas()}this.downPoint=this.lp(P),this.startDragging(P),this._dragging=!0}},v.prototype.judgeNextPoint=function(P,v){var r=this.lp(P);if(this._dragging||this.isBreak&&!v)return null;if(ht.Default.isShiftDown()&&this.points.length>0){var m=this.points[this.points.length-1],H=r.x-m.x,I=r.y-m.y,Y=Math.atan2(I,H),U=ht.Default.getDistance(m,r),o=Y%(Math.PI/4);return Y-=o,Math.abs(o)>Math.PI/8&&(o>0?Y+=Math.PI/4:Y-=Math.PI/4),{x:m.x+Math.cos(Y)*U,y:m.y+Math.sin(Y)*U}}var x=this.gv.getEditInteractor(),N=x.gridGuide.findClosest(r);return N&&(N.x&&(r.x+=N.x),N.y&&(r.y+=N.y)),r},v.prototype.handle_mousemove=function(P){this.nextPoint=this.judgeNextPoint(P),this.editView.validateCanvas()},v.prototype.handle_touchend=function(P){},v.prototype.handle_mouseup=function(P){this.handle_touchend(P)},v.prototype.handleWindowTouchMove=function(P){return this.handleWindowMouseMove(P)},v.prototype.updateCtrl=function(P){var v=this.points.length,r=this.points[v-1],m=this.downPoint,H=this.lp(P),I=this.gv.getZoom(),Y=ht.Default.getDistance(m,H),U=this.segments[this.segments.length-1];if(Y*I>5){if(ht.Default.isShiftDown()){var o=Math.abs;o(r.x-H.x)>=o(r.y-H.y)?H.y=r.y:H.x=r.x}else{var x=this.gv.getEditInteractor(),N=x.gridGuide.findClosest(H);N&&(N.x&&(H.x+=N.x),N.y&&(H.y+=N.y))}var E={x:2*r.x-H.x,y:2*r.y-H.y};4===U?this.points[v-2]=E:1!==U&&(this.segments.pop(),this.segments.push(4),this.points.splice(v-1,0,E),this.points.push(this.points[v-1])),this.preCtrl=H}else 4===U&&(this.points[v-2]=this.points[v-1],this.preCtrl=null)},v.prototype.handleWindowMouseMove=function(P){0!==this.points.length&&(this.updateCtrl(P),this.editView.validateCanvas())},v.prototype.handleWindowTouchEnd=function(P){return this.handleWindowMouseUp(P)},v.prototype.handleWindowMouseUp=function(P){0!==this.points.length&&(this._dragging=!1,this.updateCtrl(P),this.nextPoint=this.judgeNextPoint(P,!0))},v.prototype.$0$=function(P){var v=[];P.beginPath();for(var r=0,m=void 0,H=void 0,I=void 0,Y=0;Y<this.segments.length;Y++){var U=this.segments[Y];1===U?(m=this.toPoint(this.points[r++]),P.moveTo(m.x,m.y)):2===U?(m=this.toPoint(this.points[r++]),P.lineTo(m.x,m.y)):3===U?(m=this.toPoint(this.points[r++]),H=this.toPoint(this.points[r++]),P.quadraticCurveTo(m.x,m.y,H.x,H.y)):4===U?(m=this.toPoint(this.points[r++]),H=this.toPoint(this.points[r++]),I=this.toPoint(this.points[r++]),P.bezierCurveTo(m.x,m.y,H.x,H.y,I.x,I.y)):5===U&&P.closePath(),v.push(this.points[r-1])}var o=this.preCtrl;if(this.nextPoint)if(o)m=this.toPoint(o),H=this.toPoint(this.nextPoint),I=this.toPoint(this.nextPoint),P.bezierCurveTo(m.x,m.y,H.x,H.y,I.x,I.y);else{var x=this.toPoint(this.nextPoint);P.lineTo(x.x,x.y)}if(P.strokeStyle=dv.config.color_data_border,P.lineWidth=1,P.stroke(),this.drawPoints(P,v,4,dv.config.color_data_border,dv.config.color_data_background),o){var N=this.points[this.points.length-1],E=this.gv.getZoom(),s=3/E,W=6/E,f={x:2*N.x-o.x,y:2*N.y-o.y};this.drawLine(P,o,f,dv.config.color_data_border),this.drawRect(P,{x:f.x-s,y:f.y-s,width:W,height:W},dv.config.color_data_border,dv.config.color_data_background),this.drawRect(P,{x:o.x-s,y:o.y-s,width:W,height:W},dv.config.color_data_border,dv.config.color_data_background)}},v}(Ym),Nm={width:!0,height:!0,position:!0,rotation:!0,anchor:!0,scale:!0,expanded:!0},Em={border:rm,rect:Or,circle:Or,oval:Or,roundRect:Or,star:Or,triangle:Or,hexagon:Or,pentagon:Or,diamond:Or,rightTriangle:Or,parallelogram:Or,trapezoid:Or,polygon:Or,arc:Or,image:qr,shape:Qr,text:Zr,pieChart:mm,oneDimensionalColumnChart:Hm,columnChart:Hm,lineChart:Im,comp:vm};ht.Default.getMSMap().hteditor_editview=function(P,v){Object.defineProperties(P,{dirty:{get:function(){return this.tab.a("dirty")},set:function(P){ht.Default.loadingRefGraph||this.tab.a("dirty",P)}}}),P.resetGrid=function(){},P.clear=function(){this.dm.setName(void 0),this.dm.setBackground(void 0),this.dm.setHierarchicalRendering(!1),this.dm.setLayers(void 0),this.dm.clear(),this.dm.setAttrObject(void 0),this.dm.a("rotateAsClock",dv.config.rotateAsClock),this.resetGrid()},P.parse=function(P,v){(P||v)&&(this.url=P,v?this.update(v):w(P,this.update.bind(this)))},P.update=function(P,v){var r=this;if(P){v?!function(){var m=b(r.content),H=P,I={undo:function(){r.updateImpl(m,!0)},redo:function(){r.updateImpl(H,!0)}};r.dm.disableHistoryManager(),r.updateImpl(P,v),r.dm.enableHistoryManager(),r.dm.addHistory(I)}():(this.dm.disableHistoryManager(),this.updateImpl(P,v),this.dm.enableHistoryManager(),this.dm.clearHistoryManager());var m=void 0,H=this.type+"View";v?m=H+"Committed":this.isOpened?m=H+"Reloaded":(m=H+"Opened",this.isOpened=!0);var I={url:this.url,json:P};I[H]=this,this.editor.fireEvent(m,I)}},P.updateImpl=function(P,v){var m=this,H=k(P);this.clear(),this.isDeserializing=!0,this.dm.deserialize(H,void 0,{disableOnPreDeserialize:!0,disableOnPostDeserialize:!0}),this.isDeserializing=!1,this.dirty=!!v,!v&&dv.config.fitContentForDisplayView&&(H.contentRect?!function(){var P=r(H.contentRect);ht.Default.grow(P,dv.config.fitPadding),m.graphView.getWidth()&&m.graphView.getHeight()?m.graphView.fitRect(P,dv.config.animate):setTimeout(function(){m.graphView.fitRect(P,dv.config.animate)},500)}():this.graphView.fitContent(dv.config.animate,dv.config.fitPadding))}};var sm=function(){function P(v,r,m,H,I){var Y=this;hv(this,P),this.editor=v,this.tab=r,this.type=H,this.mute=I,r.setView(this);var U=this.gv=this.graphView=new m(this);this._view=e(!0,this),U.addViewListener(function(P){"validate"===P.kind&&Y.validateCanvas()}),this._hRuler=D(),this._vRuler=D(),this._view.appendChild(U.getView()),this.$5$("edit"),U.isInteractive=function(){return!1},U.addPropertyChangeListener(function(){Y.iv()}),U.addInteractorListener(function(P){Y.handleInteractorEvent(P)}),this.dm.sm().addSelectionChangeListener(function(P){Y.iv()}),this.dm.addDataModelChangeListener(function(P){Y.handleDataModelChanged(P)}),this.dm.addDataPropertyChangeListener(function(P){Y.handleDataPropertyChanged(P)}),this.dm.addPropertyChangeListener(function(P){Y.handleDataModelPropertyChanged(P)}),this.dm.addHierarchyChangeListener(function(P){Y.handleHierarchyChanged(P)}),this.dm.layout=function(P,v){Y._autoLayout||(Y._autoLayout=new ht.layout.AutoLayout(U)),Y._autoLayout.options=v||{};var r=Y.graphView.getZoom(),m=Y.graphView.tx(),H=Y.graphView.ty();Y.dm.beginTransaction(),Y._autoLayout.setAnimate(dv.config.animate);var I=function(){var P=Y.graphView.getZoom(),v=Y.graphView.tx(),I=Y.graphView.ty(),U={undo:function(){Y.graphView.setZoom(r),Y.graphView.tx(m),Y.graphView.ty(H)},redo:function(){Y.graphView.setZoom(P),Y.graphView.tx(v),Y.graphView.ty(I)}};Y.dm.addHistory(U),Y.dm.endTransaction()};Y._autoLayout.layout(P,function(){dv.config.animate?U.fitContent({finishFunc:I}):(U.fitContent(!1,dv.config.fitPadding),I())})},this.graphView.setEditable(!0),this.graphView.setEditStyle("hoverGuideEnabled",!0),this.graphView.getInteractors().each(function(P){P.keep=!0}),this.setRulerEnabled(this.editor.isRulerEnabled()),this.clear()}return P.prototype.handleInteractorEvent=function(P){"prepareMove"!==P.kind&&"prepareEdit"!==P.kind||!P.event.altKey||(this.editor.copy(),this.editor.paste(!0),this.editor.gv.validate())},P.prototype.handleDataModelChanged=function(P){this.dirty=!0},P.prototype.handleDataPropertyChanged=function(P){P.data.disableDirty||this.graphView.fpImageLoaded||"*"!==P.property&&(Nm[P.property]&&this.iv(),this.dirty=!0)},P.prototype.handleHierarchyChanged=function(P){this.dirty=!0},P.prototype.handleDataModelPropertyChanged=function(P){var v=P.property,r=P.newValue;null!=r&&("a:gridBlockSize"===v?this.graphView.setEditStyle("gridBlockSize",r):"a:gridThickLinesEvery"===v?this.graphView.setEditStyle("gridThickLinesEvery",r):"a:gridThickColor"===v?this.graphView.setEditStyle("gridThickColor",r):"a:gridLightColor"===v?this.graphView.setEditStyle("gridLightColor",r):"a:gridAngle"===v?this.graphView.setEditStyle("gridAngle",r):"a:gridRotation"===v?this.graphView.setEditStyle("gridRotation",r):"a:gridZoomThreshold"===v&&this.graphView.setEditStyle("gridZoomThreshold",r)),"a:connectActionType"===v?this.graphView.setCurrentConnectActionType(r):"a:rotateAsClock"===v&&this.graphView.setEditStyle("rotateAsClock",r),this.dirty=!0,this.validateCanvas()},P.prototype.onPropertyChanged=function(P){"rulerEnabled"===P.property&&(this.graphView.getEditInteractor().alignmentGuideEnabled=P.newValue),this.iv()},P.prototype._saveNew=function(P,v,r,m){var I=this,Y=function(r,Y){if("ok"===Y){var U=IP(r)?M(r):r,o=m+"/"+U+".json",x=I.editor.getFileNode(o);x?lP(H("editor.filenameconflict"),o,function(){P&&P()}):(I.tab.setName(U),I.url=o,I.tab.setTag(I.url),I.editor.dataView.updateUrl(),I._saveImpl(v))}else P&&P()},U={name:void 0};return"display"===this.type?(U.displayView=this,this.editor.fireEvent("displayViewNewNameInputing",U)):"symbol"===this.type&&(U.symbolView=this,this.editor.fireEvent("symbolViewNewNameInputing",U)),!U.preventDefault&&void(U.name?Y(U.name,"ok"):BP(r,this.tab.getName(),{nullable:!1,trim:!0,maxLength:dv.config.maxFileNameLength,checkFunc:dv.config.checkFileName},Y))},P.prototype._saveAs=function(P,v){this.tab.setName(a(v)),this.url=v,this.tab.setTag(this.url),this.editor.dataView.updateUrl(),this._saveImpl(P)},P.prototype._saveImpl=function(P){var v=this,r=this.url,m={url:r};return"display"===this.type?(dv.config.settingDefaultValueBeforeSaving&&this.dm.each(function(P){if(P instanceof ht.Node){var v=ht.Default.getImage(P.getImage());v&&v.dataBindings&&v.dataBindings.forEach(function(v){var r=P.getAttrObject(),m=v.defaultValue;if(void 0!==m){var H=v.attr;r&&void 0!==r[H]||P.a(H,m)}})}}),m.displayView=this,this.editor.fireEvent("displayViewSaving",m)):"symbol"===this.type&&(m.symbolView=this,this.editor.fireEvent("symbolViewSaving",m)),!m.preventDefault&&(m={path:m.url,content:b(this.content)},void this.editor.request("upload",m,function(m){m===!0?v.editor.saveImage(v.dm.a("snapshotURL")||v.graphView,r.substr(0,r.length-5)+".png",function(){P&&P(),v.editor.showMessage(H("editor.savedsuccessfully"),Ur,1e3),v.dirty=!1}):(v.tab&&v.editor.mainTabView.removeTab(v.tab),delete v.tab,v.editor.showMessage(H("editor.savedfailed"),or,1e3))}))},P.prototype.$65$=function(P,v){var r=this;this.tab.getTag()&&v.indexOf("?")===-1&&(v+="?tag="+encodeURI(this.tab.getTag()));var m={url:v};if("display"===this.type?(m.displayView=this,this.editor.fireEvent("displayViewPreviewing",m)):"symbol"===this.type&&(m.symbolView=this,this.editor.fireEvent("symbolViewPreviewing",m)),m.preventDefault)return!1;v=m.url,window.open(v,v);var H=this.content;H.title=this.tab.getName(),m={path:P,content:b(H)},this.editor.request("upload",m,function(P){"display"===r.type?r.editor.fireEvent("displayViewPreview",{displayView:r,url:v}):"symbol"===r.type&&r.editor.fireEvent("symbolViewPreview",{symbolView:r,url:v})})},P.prototype.$4$=function(){return this._interactionState},P.prototype.$5$=function(P,v,r){var m=this,H=this._interactionState;if(H!==P){this._interactionState=P,this.editor.pointsEditingMode=!1;var I=[];if(this.graphView.getInteractors().each(function(v){v.keep?v.disabled="edit"!==P:I.push(v)}),I.forEach(function(P){P.tearDown(),m.graphView.getInteractors().remove(P)}),"edit"!==P){var Y=GP(v)?this.$63$(v,r):this.$62$(v,r);Y.setUp(),this.graphView.getInteractors().add(Y)}this.graphView.invalidateSelection(),this.editor.mainToolbar.iv(),this.fp("interactionState",H,P),this.validateCanvas()}},P.prototype.$62$=function(P,v){var r=new P;return r instanceof ht.Shape?new xm(this.tab,null,function(r,m){var H=new P;return H.setPoints(r),H.setSegments(m),v&&v(H),H}):r instanceof ht.Edge?new om(this.tab,null,function(P,r){var m=new ht.Edge(P,r);return v&&v(m),m}):r instanceof ht.Node?new Um(this.tab,null,function(r,m){var H=new P;return v&&v(H,r,m),H}):void 0},P.prototype.$63$=function(P,v){var r=this,m=Em[P];return"shape"===P?new xm(this.tab,null,function(H,I){var Y={type:"shape",background:null,borderColor:dv.config.color_data_border,borderWidth:1};v&&v(Y,H,I);var U=new m(Y);return U.setPoints(H),U.setSegments(I),r.editor.fireEvent("compInited",{type:P,data:U,symbolView:r.editor.symbolView}),U}):new Um(this.tab,null,function(I,Y){var U=void 0;U="arc"===P?{type:P,rect:[I.x,I.y,I.width,I.height],background:dv.config.color_data_background,borderWidth:1,borderColor:dv.config.color_data_border,arcFrom:0,arcTo:4.1888}:"border"===P?{type:P,rect:[I.x,I.y,I.width,I.height],border:1,color:dv.config.color_data_border}:"text"===P?{type:P,rect:[I.x,I.y,I.width,I.height],text:H("editor.text")}:"comp"===P||"image"===P?Y?{rect:[I.x+I.width/2,I.y+I.height/2,-1,-1]}:{rect:[I.x,I.y,I.width,I.height]}:"pieChart"===P?{type:"pieChart",values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}:"oneDimensionalColumnChart"===P?{type:"columnChart",series:[{values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}]}:"columnChart"===P?{type:"columnChart",series:[{values:[30,40,60,70,80],color:"#7EB6EA"},{values:[20,40,50,80,90],color:"#434348"}]}:"lineChart"===P?{type:"lineChart",series:[{values:[10,40,30,60,70],color:"#7EB6EA"}]}:{type:P,rect:[I.x,I.y,I.width,I.height],background:dv.config.color_data_background,borderWidth:1,borderColor:dv.config.color_data_border},v&&v(U,I,Y);var o=new m(U);return r.editor.fireEvent("compInited",{type:P,data:o,symbolView:r.editor.symbolView}),o})},P.prototype.onClosed=function(){this.graphView.onClosed()},P.prototype.addData=function(P){var v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],m=arguments.length>3&&void 0!==arguments[3]&&arguments[3],H="display"===this.type?"dataCreated":"compCreated",I={data:P};return I["display"===this.type?"displayView":"symbolView"]=this,r?void this.editor.fireEvent(H,I):(this.dm.beginTransaction(),v||P.getParent()||P.setParent(this.graphView.getCurrentSubGraph()),this.dm.add(P),v||(m||this.dm.sm().ss(P),this.graphView.setFocus()),this.editor.fireEvent(H,I),void this.dm.endTransaction())},P.prototype.validateCanvasLater=function(){var P=this;P._drawTimer||(P._drawTimer=setTimeout(function(){P._drawTimer=null,P.validateCanvas()},0))},P.prototype.validateCanvas=function(){var P=this.graphView._topCanvas,v=V(P);v.clearRect(0,0,P.clientWidth,P.clientHeight),this.graphView.getInteractors().each(function(P){P.$0$&&P.$0$(v)}),this.$0$(v),v.restore()},P.prototype.redraw=function(){this._lastWidth=this._lastHeight=null,this.iv()},P.prototype.validateImpl=function(){var P=this._rulerSize,v=this._rulerEnabled,r=this.getWidth(),m=this.getHeight();if(r!==this._lastWidth||m!==this._lastHeight||P!==this._lastRulerSize||v!==this._lastRulerEnabled){if(this._lastWidth=r,this._lastHeight=m,this._lastRulerSize=P,this._lastRulerEnabled=v,v){this._hRuler.parentNode||(this._view.appendChild(this._hRuler),this._view.appendChild(this._vRuler));var H=Math.max(0,r-P),I=Math.max(0,m-P);i(this._hRuler,P,0,H,P),i(this._vRuler,0,P,P,I),i(this.graphView,P,P,H,I),i(this.graphView._topDiv,0,0,H,I),X(this.graphView._topCanvas,H,I),X(this._hRuler,H,P),X(this._vRuler,P,I)}else this._hRuler.parentNode&&(_(this._hRuler),_(this._vRuler)),i(this.graphView,0,0,r,m),i(this.graphView._topDiv,0,0,r,m),X(this.graphView._topCanvas,r,m);this.validateCanvas()}this._hRuler.style.background=this._rulerBackground,this._vRuler.style.background=this._rulerBackground,this.drawRuler()},P.prototype.$0$=function(P){var v=this.graphView.getZoom(),r=this.graphView.tx(),m=this.graphView.ty(),H=Math.round(this.dm.a("width")||0)*v,I=Math.round(this.dm.a("height")||0)*v,Y=this.graphView.getWidth(),U=this.graphView.getHeight();!dv.config.mixMaskAndBackground&&this.dm.getBackground()||H>0&&I>0&&Y>0&&U>0&&(P.beginPath(),r&&P.rect(0,0,r,U),m&&Y-r&&P.rect(r,0,Y-r,m),Y-r-H&&I&&P.rect(r+H,m,Y-r-H,I),Y-r&&U-m-I&&P.rect(r,m+I,Y-r,U-m-I),P.fillStyle=dv.config.color_mask,P.fill())},P.prototype.drawVerticalText=function(P,v,r){P.save(),P.translate(11,r+11),P.rotate(-Math.PI/2),B(P,v,this._rulerFont,this._rulerColor,11,-11,0,this._rulerSize,"right"),P.restore()},P.prototype.drawRuler=function(){if(this._rulerEnabled){var P,v,r,m,H,I,Y=this._rulerFont,U=this._rulerSize,o=this._rulerColor,x=this.graphView,N=x.getUnionNodeRect(x.sm().getSelection()),E=x.getZoom(),s=Math.log(E)/Math.log(10),W=Math.floor(s),f=100,G=10,t=f/Math.pow(10,W)*E,L=t/G,O=W>1?40+10*(W-1):40,Q=Math.round(x.tx()),q=Math.round(x.ty()),Z={x:-Q,y:-q,width:x.getWidth(),height:x.getHeight()},S=Math.floor(Z.x/t),C=Math.ceil((Z.x+Z.width)/t),u=Math.floor(Z.y/t),g=Math.ceil((Z.y+Z.height)/t);for(V(this._hRuler,0,0,1,{x:0,y:0,width:Z.width,height:U}).restore(),m=V(this._hRuler,Q,0,1),m.lineWidth=1,m.strokeStyle=o,N&&(m.beginPath(),m.rect(N.x*E,0,N.width*E,U),m.fillStyle=dv.config.color_line,m.fill()),m.beginPath(),P=S;P<=C;P++)H=P*t,I=W>1?(H/E).toFixed(W-1):Math.round(H/E),H=Math.round(H),m.moveTo(H,U),m.lineTo(H,0),B(m,I,Y,o,H,0,1,U,"left");for(m.stroke(),m.beginPath(),P=S;P<=C;P++)for(r=1;r<G;r++)H=P*t+r*L,I=W>1?(H/E).toFixed(W-1):Math.round(H/E),H=Math.round(H),m.moveTo(H,U),5===r?(m.lineTo(H,U-10),B(m,I,Y,o,H,0,1,U,"left")):(m.lineTo(H,U-4),L>O&&B(m,I,Y,o,H,0,1,U,"left"));for(m.stroke(),m.restore(),V(this._vRuler,0,0,1,{x:0,y:0,width:U,height:Z.height}).restore(),m=V(this._vRuler,0,q,1),m.lineWidth=1,m.strokeStyle=o,N&&(m.beginPath(),m.rect(0,N.y*E,U,N.height*E),m.fillStyle=dv.config.color_line,m.fill()),m.beginPath(),v=u;v<=g;v++)H=v*t,I=W>1?(H/E).toFixed(W-1):Math.round(H/E),H=Math.round(H),m.moveTo(U,H),m.lineTo(0,H),this.drawVerticalText(m,I,H);for(m.stroke(),m.beginPath(),v=u;v<=g;v++)for(r=1;r<G;r++)H=v*t+r*L,I=W>1?(H/E).toFixed(W-1):Math.round(H/E),H=Math.round(H),m.moveTo(U,H),5===r?(m.lineTo(U-10,H),this.drawVerticalText(m,I,H)):(m.lineTo(U-4,H),L>O&&this.drawVerticalText(m,I,H));m.stroke(),m.restore()}},ev(P,[{key:"dm",get:function(){return this.graphView.dm()}}]),P}();T(sm,{ms_v:1,ms_fire:1,ms_ac:["rulerEnabled","rulerBackground","rulerFont","rulerColor","rulerSize","guideColor"],hteditor_editview:1,_rulerFont:dv.config.smallFont,_rulerBackground:dv.config.color_pane,_rulerColor:dv.config.color_dark,_rulerSize:dv.config.rulerSize,_guideColor:dv.config.color_transparent,_interactionState:void 0}),dv.EditView=sm;var Wm=function(P){function v(r,m,H,I,Y){hv(this,v);var U=Rv(this,P.call(this,r,m,Pm,"display",Y));U.displayTree=U.list=new wr(U);var o=U.graphView.getEditInteractor();o.gridEnabled=U.editor.isGridEnabled(),U.dirty=!1,U.dm.enableHistoryManager(dv.config.maxUndoRedoSteps),U.dm.setHierarchicalRendering(!0),U.parse(H,I);var x=r.getFileNode(H);return U.editable=!x||x.a("editable")!==!1,H?I||U.editor.fireEvent("displayViewOpening",{displayView:U,url:H}):U.editor.fireEvent("displayViewCreated",{displayView:U,json:I}),U}return Dv(v,P),v.prototype.onClosed=function(){P.prototype.onClosed.call(this),this.displayTree.onClosed()},v.prototype.handleDataModelChanged=function(P){this.mute||"add"!==P.kind||this.isDeserializing||P.data.setLayer(this.editor.currentLayer),this.dirty=!0},v.prototype.reload=function(){if(this.url){var P={displayView:this,url:this.url};return this.editor.fireEvent("displayViewReloading",P),!P.preventDefault&&void this.parse(this.url)}},v.prototype.save=function(P,v){var r=this,m=function(){P&&P(),r.editor.fireEvent("displayViewSaved",{displayView:r,url:r.url}),r.editor.selectFileNode(r.url)};if(v)this._saveAs(m,v);else if(this.url)this._saveImpl(m);else{var I=this.editor.displays.currentDir,Y=H("editor.inputnewdisplayname");this._saveNew(P,m,Y,I)}},v.prototype.clear=function(){P.prototype.clear.call(this),this.dm.a("connectActionType",dv.config.displayConnectActionType)},v.prototype.resetGrid=function(){this.dm.a("gridBlockSize",dv.config.displayGridBlockSize),this.dm.a("gridThickLinesEvery",dv.config.displayGridThickLinesEvery),this.dm.a("gridThickColor",dv.config.displayGridThickColor),this.dm.a("gridLightColor",dv.config.displayGridLightColor),this.dm.a("gridAngle",dv.config.displayGridAngle),this.dm.a("gridRotation",dv.config.displayGridRotation),this.dm.a("gridZoomThreshold",dv.config.displayGridZoomThreshold)},v.prototype.skewGrid=function(){this.dm.a("gridAngle",2*Math.PI/3),this.dm.a("gridRotation",Math.PI/6)},v.prototype.preview=function(){this.$65$("previews/display.json",this.dm.a("previewURL")||dv.config.displayPreviewURL)},ev(v,[{key:"content",get:function(){var P=this.dm,v=P.toJSON();v.modified=(new Date).toString(),P.a("connectActionType")===dv.config.displayConnectActionType&&delete v.connectActionType,P.a("rotateAsClock")===dv.config.rotateAsClock&&delete v.rotateAsClock,P.a("gridBlockSize")===dv.config.displayGridBlockSize&&delete v.a.gridBlockSize,
P.a("gridThickLinesEvery")===dv.config.displayGridThickLinesEvery&&delete v.a.gridThickLinesEvery,P.a("gridThickColor")===dv.config.displayGridThickColor&&delete v.a.gridThickColor,P.a("gridLightColor")===dv.config.displayGridLightColor&&delete v.a.gridLightColor,P.a("gridAngle")===dv.config.displayGridAngle&&delete v.a.gridAngle,P.a("gridRotation")===dv.config.displayGridRotation&&delete v.a.gridRotation,P.a("gridZoomThreshold")===dv.config.displayGridZoomThreshold&&delete v.a.gridZoomThreshold,P.a("xAlignmentGuides")&&!P.a("xAlignmentGuides").length&&delete v.a.xAlignmentGuides,P.a("yAlignmentGuides")&&!P.a("yAlignmentGuides").length&&delete v.a.yAlignmentGuides;var r=this.graphView.getContentRect();return P.a("width")>0&&P.a("height")>0&&(v.contentRect={x:0,y:0,width:P.a("width"),height:P.a("height")}),P.size()&&r&&r.width&&r.height&&(v.contentRect=r),v}}]),v}(sm),fm=function(P){function v(r){return hv(this,v),Rv(this,P.call(this,r))}return Dv(v,P),v.prototype.setDataModel=function(P){var v=this,r=v._dataModel,m=v._selectionModel;r!==P&&(r&&(r.umm(v.handleDataModelChange,v),r.umd(v.handleDataPropertyChange,v),r.removeIndexChangeListener(v.handleIndexChange,v),m||r.sm().ums(v.handleSelectionChange,v)),v._dataModel=P,P.mm(v.handleDataModelChange,v),P.md(v.handleDataPropertyChange,v),P.addIndexChangeListener(v.handleIndexChange,v),m?m._setDataModel(P):P.sm().ms(v.handleSelectionChange,v),v.fp("dataModel",r,P))},v.prototype.handleIndexChange=function(P){this.ivm()},v.prototype.handleDataPropertyChange=function(P){this.invalidateData(P.data)},v.prototype.validateModel=function(){var P=this;P._rows.clear(),P._rowMap={};var v=P._rows=P._dataModel.toDatas(P.isVisible,P),r=0,m=P.getCurrentSortFunc(),H=v.size();for(m&&v.sort(m);r<H;r++)P._rowMap[v.get(r)._id]=r},v}(Jr),Gm=function(P){function v(r,m){var H=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];hv(this,v);var I=Rv(this,P.call(this,m));return I.editor=r,I.editable=H,I.addTopPainter(I.$1$.bind(I)),I}return Dv(v,P),v.prototype.isEditable=function(P){return this.editable},v.prototype.handleDelete=function(){this.editable&&this.removeSelection()},v.prototype.handleDataDoubleSelect=function(P,v){if(this.isEditable(v)){var r=this.getIcon(v)?this.getIndent():0;this.lp(P).x>r&&this.beginEditing(v)}},v.prototype.rename=function(P,v){P.setName(v)},v.prototype.isDroppable=function(P,v){return!1},v.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},v.prototype._endDrag=function(P,v){},v.prototype._endCrossDrag=function(P,v){},v.prototype.$1$=function(P){P.texureImage2D=!0;var v=void 0;if(this._dragInfo&&this._dragInfo.inView?v=this._dragInfo:this._crossDragInfo&&(v=this._crossDragInfo),v){var r=this.getWidth(),m=(this.getRowHeight(),v.type,dv.config.color_select_dark);if(v.refData){var H=v.y;P.beginPath(),P.arc(4,H,3,0,2*Math.PI,!0),P.moveTo(7,H),P.lineTo(r,H),P.lineWidth=2,P.strokeStyle=m,P.stroke()}else{var I=this.getViewRect();d(P,m,I.x,I.y,I.width,I.height,2)}}},v.prototype._dragging=function(P,v){var r=this.getRowHeight(),m=this.lp(P),H=m.y/r,I=Math.floor(H),Y=this.getRowSize();I>Y-1?(v.refData=null,v.type=null,v.parent=null):(v.refData=this.getRowDatas().get(I),m.y-I*r<.5*r?(v.type="up",v.y=I*r):(v.type="down",v.y=(I+1)*r)),this.autoScroll(P),this.redraw()},v.prototype.$2$=function(){var P="";if(this.draggingData&&(P=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var v=this.sm().size();P+=v>1?" (+"+v+") ":""}return P},v.prototype.handleDragAndDrop=function(P,v){if(this.editable){if("prepare"===v)return void this._clearDragInfo();"begin"===v&&(this._dragInfo={tip:this.$2$(),view:this});var r=this._dragInfo;if(r){var m=this.editor.dnd;if("begin"===v||"between"===v){var H=this.getView().contains(C(P));return H?(r.inView=!0,this._dragging(P,r),m.clearDropView(P,r)):(r.inView&&this.redraw(),r.inView=!1,m.crossDrag(P,r)),void m.showTip(r.tip,P)}return"end"===v?(r.inView?this._endDrag(P,r):m.crossDrop(P,r),void this._clearDragInfo()):"cancel"===v?(r.inView||m.crossCancel(P,r),void this._clearDragInfo()):void 0}}},v.prototype.handleCrossDrag=function(P,v,r){if(this.editable)return"exit"===v||"cancel"===v?(this._crossDragInfo=null,void this.redraw()):"enter"===v||"over"===v?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(P,this._crossDragInfo)):"drop"===v?(this._endCrossDrag(P,r),this._crossDragInfo=null,void this.redraw()):void 0},v.prototype.beginEditing=function(P){var v=this;this.cancelEditing(),this.makeVisible(P),this.validate();var r=this.getIcon(P)?this.getIndent():0,m=this.ty()+this.getRowIndex(P)*this.getRowHeight(),H=Math.max(1,this.getWidth()-r),I=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=P;var Y=this._currentEditor.getElement(),U=this.getLabel(P);Y.value=null==U?"":U,Y.onblur=function(P){v.endEditing()},Y.onkeydown=function(P){t(P)?v.endEditing():L(P)&&v.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),i(this._currentEditor,r,m,H,I),this._currentEditor.setFocus(),ht.Default.callLater(Y.select,Y)},v.prototype.endEditing=function(){var P=this._currentEditor;P&&(this.rename(P.data,P.getValue()),delete this._currentEditor,_(P.getView()),this.redraw())},v.prototype.cancelEditing=function(){var P=this._currentEditor;P&&(delete this._currentEditor,_(P.getView()),this.redraw())},v}(fm);dv.DNDIndexList=Gm;var tm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this,r.editor,r.dm));return m.symbolView=r,m.graphView=r.graphView,m.nodeIcon=eP(m),m.initMenu(),r.dm.addDataPropertyChangeListener(function(P){P.data.editorIcon=null}),m}return Dv(v,P),v.prototype.onDataDoubleClicked=function(P,v){v.altKey?this.graphView.fitData(P,!0,dv.config.fitPadding):this.graphView.makeCenter(P,!0)},v.prototype.onPropertyChanged=function(v){"filter"===v.property&&this.ivm(),P.prototype.onPropertyChanged.call(this,v)},v.prototype.handleDataPropertyChange=function(v){!this._filter||"displayName"!==v.property&&"s:text"!==v.property&&"s:type"!==v.property&&"s:image"!==v.property?P.prototype.handleDataPropertyChange.call(this,v):this.ivm()},v.prototype.isVisible=function(P){if(!this._filter)return!0;var v=this.getLabel(P);return null!=v&&(v=(v+"").toLowerCase(),v.indexOf(this._filter)>=0)},v.prototype.validate=function(){this.graphView.validate(),P.prototype.validate.call(this)},v.prototype.validateModel=function(){var v=this;P.prototype.validateModel.call(this),dv.config.filterSymbolViewEnabled&&this.graphView.setVisibleFunc(function(P){return v.isVisible(P)})},v.prototype.getIcon=function(P){return P instanceof Cr?"editor.restore.state":P instanceof ht.Text?P.getIcon():P instanceof ht.Shape?(P.editorIcon||(P.editorIcon=RP(P)),P.editorIcon):P instanceof ht.Node?this.nodeIcon:null},v.prototype.isDroppable=function(P,v){return!1},v.prototype._endCrossDrag=function(P,v){},v.prototype._endDrag=function(P,v){var r=this;this.editor.beginTransaction();var m=v.type,H=v.refData;if(this.isSelected(this.draggingData)){var I=this.getRowOrderSelection();"down"===m&&I.reverse(),I.each(function(P){r._dropData(P,m,H)})}else this._dropData(this.draggingData,m,H),this.sm().ss(this.draggingData);this.editor.endTransaction()},v.prototype._dropData=function(P,v,r){if(r){var m=this.dm().getDatas(),H=m.indexOf(r);"down"===v&&H++,m.indexOf(P)<H&&H--,this.dm().moveToIndex(P,H)}else this.dm().bringToFront(P)},v.prototype.rename=function(P,v){P.setDisplayName(v)},v.prototype.initMenu=function(){var P=this;this.menu=new gr;var v=[{id:"copy",label:H("editor.copy"),action:function(){P.editor.copy()},visible:function(){return P.editable&&!!P.editor.ld}},{id:"paste",label:H("editor.paste"),action:function(){P.editor.paste()},visible:function(){return P.editable&&P.editor.hasCopyInfo()}},{id:"delete",label:H("editor.delete"),action:function(){P.editor.delete()},visible:function(){return P.editable&&!!P.editor.ld}},"separator",{id:"bringToFront",label:H("editor.bringtofront"),action:function(){P.editor.bringToFront()},visible:function(){return P.editable&&!!P.editor.ld}},{id:"bringForward",label:H("editor.bringforward"),action:function(){P.editor.bringForward()},visible:function(){return P.editable&&!!P.editor.ld}},{id:"sendBackward",label:H("editor.sendbackward"),action:function(){P.editor.sendBackward()},visible:function(){return P.editable&&!!P.editor.ld}},{id:"sendToBack",label:H("editor.sendtoback"),action:function(){P.editor.sendToBack()},visible:function(){return P.editable&&!!P.editor.ld}}];this.menu.setItems(v),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},v.prototype.onClosed=function(){I(this.editor.menus,this.menu)},ev(v,[{key:"editable",get:function(){return this.symbolView.editable},set:function(P){}}]),v}(Gm);T(tm,{ms_ac:["filter"]});var Lm=function(P){function v(r){return hv(this,v),Rv(this,P.call(this,r))}return Dv(v,P),v.prototype.handleDataModelChange=function(v){P.prototype.handleDataModelChange.call(this,v),this.editor&&this.editor.fireEvent("symbolViewDataModelChanged",{symbolView:this.editView,event:v})},v.prototype.handleDataModelPropertyChange=function(v){P.prototype.handleDataModelPropertyChange.call(this,v),this.editor&&this.editor.fireEvent("symbolViewDataModelPropertyChanged",{symbolView:this.editView,event:v})},v.prototype.handleDataPropertyChange=function(v){P.prototype.handleDataPropertyChange.call(this,v),this.editor&&this.editor.fireEvent("symbolViewDataPropertyChanged",{symbolView:this.editView,event:v})},v.prototype.isDroppable=function(P,v){return!!v.view.isDroppableToSymbolView},v.prototype.isPixelPerfect=function(P){return!0},v.prototype.initMenuItems=function(P){this.$57$(P),this.$56$(P)},v.prototype.isVisible=function(v){var r=this.editor.symbolStatePane.currentState,m=v.s("state");return(void 0===m||m===r)&&P.prototype.isVisible.call(this,v)},v}(Ar),Om=function(P){function v(r,m,H){hv(this,v);var I=Rv(this,P.call(this));return I.setIcon("editor.func"),I.setImage("editor.func"),I.parse(r,m,H),I}return Dv(v,P),v.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.func")},v.prototype.getClass=function(){return v},v.prototype.parse=function(P,v,r){P&&(this.a("type",P.type),KP(this,P,v,r))},v.prototype.toJSON=function(){var P={};return P.type=this.a("type"),jP(this,P),P},ev(v,[{key:"compType",get:function(){return"function"}}]),v}(ht.Node),Qm={rect:Or,circle:Or,oval:Or,roundRect:Or,star:Or,triangle:Or,hexagon:Or,pentagon:Or,diamond:Or,rightTriangle:Or,parallelogram:Or,trapezoid:Or,polygon:Or,arc:Or,image:qr,shape:Qr,text:Zr,border:rm,pieChart:mm,columnChart:Hm,percentageColumnChart:Hm,stackedColumnChart:Hm,lineChart:Im,clip:Sr,restore:Cr,endClip:Cr};dv.toDatas=function(P,v){var r=[];return P.forEach(function(P){var m=gv(P);if(m){var H=Cv(m),I=uv(H,v);I&&r.push(I)}}),r};var qm=function(P){function v(r,m,H,I){hv(this,v);var Y=Rv(this,P.call(this,r,m,Lm,"symbol"));Y.graphView.vectorDataBindingDisabled=!0,Y.graphView.getLabel=function(){return null},Y.graphView.setVisibleFunc(function(P){return!(P instanceof Cr)}),Y.list=Y.symbolList=new tm(Y),Y.dm.a({name:void 0,comps:[],width:100,height:100,boundExtend:0,fitSize:!1,scrollable:!1,interactive:!1,disableSelectedBorder:!1,pixelPerfect:!0,clip:!1,visible:!0,color:void 0,blendMode:"multiply",opacity:1});var U=dv.config.customProperties.symbol;U&&U.length&&U.forEach(function(P){Y.dm.a(P.property,P.defaultValue)});var o=Y.graphView.getEditInteractor();o.gridEnabled=Y.editor.isGridEnabled(),Y.dm.addIndexChangeListener(function(){Y.dirty=!0}),Y.dirty=!1,Y.dm.enableHistoryManager(dv.config.maxUndoRedoSteps),Y.parse(H,I);var x=r.getFileNode(H);return Y.editable=!x||x.a("editable")!==!1,H?I||Y.editor.fireEvent("symbolViewOpening",{symbolView:Y,url:H}):Y.editor.fireEvent("symbolViewCreated",{symbolView:Y,json:I}),Y}return Dv(v,P),v.prototype.clear=function(){P.prototype.clear.call(this),this.dm.a("connectActionType",dv.config.symbolConnectActionType),this.dm.setAutoAdjustIndex(!1)},v.prototype.onClosed=function(){P.prototype.onClosed.call(this),this.list.onClosed()},v.prototype.updateImpl=function(P,v){var r=this,m=this.dm,H=k(P);this.clear(),m.setBackground(H.background),m.a("previewURL",H.previewURL),m.a("snapshotURL",H.snapshotURL),m.dataBindings=H.dataBindings,null!=H.gridBlockSize&&this.dm.a("gridBlockSize",H.gridBlockSize),null!=H.gridThickLinesEvery&&this.dm.a("gridThickLinesEvery",H.gridThickLinesEvery),null!=H.gridThickColor&&this.dm.a("gridThickColor",H.gridThickColor),null!=H.gridLightColor&&this.dm.a("gridLightColor",H.gridLightColor),null!=H.gridAngle&&this.dm.a("gridAngle",H.gridAngle),null!=H.gridRotation&&this.dm.a("gridRotation",H.gridRotation),null!=H.gridZoomThreshold&&this.dm.a("gridZoomThreshold",H.gridZoomThreshold),H.hasOwnProperty("connectActionType")&&this.dm.a("connectActionType",H.connectActionType),H.hasOwnProperty("rotateAsClock")&&this.dm.a("rotateAsClock",H.rotateAsClock),Vv.forEach(function(P){m.a(P,H[P])}),m.a({name:H.name,renderHTML:H.renderHTML,comps:_P(H.comps,[]),width:_P(H.width,100),height:_P(H.height,100),boundExtend:_P(H.boundExtend,0),fitSize:_P(H.fitSize,!1),scrollable:_P(H.scrollable,!1),interactive:_P(H.interactive,!1),disableSelectedBorder:_P(H.disableSelectedBorder,!1),pixelPerfect:_P(H.pixelPerfect,!0),clip:_P(H.clip,!1),visible:_P(H.visible,!0),color:_P(H.color,void 0),blendMode:_P(H.blendMode,"multiply"),opacity:_P(H.opacity,1),attachPoints:_P(H.attachPoints,void 0),attachStyle:_P(H.attachStyle,void 0),cacheRule:_P(H.cacheRule,!1),state:_P(H.state,void 0),stateEnum:_P(H.stateEnum,void 0),comps_func:wP(H.comps),width_func:wP(H.width),height_func:wP(H.height),fitSize_func:wP(H.fitSize),scrollable_func:wP(H.scrollable),interactive_func:wP(H.interactive),disableSelectedBorder_func:wP(H.disableSelectedBorder),pixelPerfect_func:wP(H.pixelPerfect),visible_func:wP(H.visible),color_func:wP(H.color),blendMode_func:wP(H.blendMode),opacity_func:wP(H.opacity),attachPoints_func:wP(H.attachPoints),attachStyle_func:wP(H.attachStyle),cacheRule_func:wP(H.cacheRule)});var I=dv.config.customProperties.symbol;I&&I.length&&I.forEach(function(P){m.a(P.property,_P(H[P.property],P.defaultValue))}),m.a("comps").forEach(function(P){gv(P,r)}),this.dirty=!!v,!v&&dv.config.fitContentForSymbolView&&this.graphView.fitContent(dv.config.animate,dv.config.fitPadding)},v.prototype.reload=function(){if(this.url){var P={symbolView:this,url:this.url};return this.editor.fireEvent("symbolViewReloading",P),!P.preventDefault&&void this.parse(this.url)}},v.prototype.save=function(P,v){var r=this,m=function(){P&&P(),r.editor.fireEvent("symbolViewSaved",{symbolView:r,url:r.url}),r.editor.selectFileNode(r.url)};if(v)this._saveAs(m,v);else if(this.url)this._saveImpl(m);else{var I=this.editor.symbols.currentDir,Y=H("editor.inputnewsymbolname");this._saveNew(P,m,Y,I)}},v.prototype.addValue=function(P,v,r){var m=this.dm.a(v),H=this.dm.a(v+"_func");JP(P,v,H,m,r)},v.prototype.resetGrid=function(){this.dm.a("gridBlockSize",dv.config.symbolGridBlockSize),this.dm.a("gridThickLinesEvery",dv.config.symbolGridThickLinesEvery),this.dm.a("gridThickColor",dv.config.symbolGridThickColor),this.dm.a("gridLightColor",dv.config.symbolGridLightColor),this.dm.a("gridAngle",dv.config.symbolGridAngle),this.dm.a("gridRotation",dv.config.symbolGridRotation),this.dm.a("gridZoomThreshold",dv.config.symbolGridZoomThreshold)},v.prototype.skewGrid=function(){this.dm.a("gridAngle",2*Math.PI/3),this.dm.a("gridRotation",Math.PI/6)},v.prototype.preview=function(){this.$65$("previews/symbol.json",this.dm.a("previewURL")||dv.config.symbolPreviewURL)},ev(v,[{key:"content",get:function(){var P=this,v=this.graphView.getEditInteractor(),r=(v.gridGuide,this.dm),m={modified:(new Date).toString()};r.getBackground()&&(m.background=r.getBackground()),r.dataBindings&&(m.dataBindings=r.dataBindings),r.a("previewURL")&&(m.previewURL=r.a("previewURL")),r.a("snapshotURL")&&(m.snapshotURL=r.a("snapshotURL")),r.a("connectActionType")!==dv.config.symbolConnectActionType&&(m.connectActionType=r.a("connectActionType")),r.a("rotateAsClock")!==dv.config.rotateAsClock&&(m.rotateAsClock=r.a("rotateAsClock")),r.a("gridBlockSize")!==dv.config.symbolGridBlockSize&&(m.gridBlockSize=r.a("gridBlockSize")),r.a("gridThickLinesEvery")!==dv.config.symbolGridThickLinesEvery&&(m.gridThickLinesEvery=r.a("gridThickLinesEvery")),r.a("gridThickColor")!==dv.config.symbolGridThickColor&&(m.gridThickColor=r.a("gridThickColor")),r.a("gridLightColor")!==dv.config.symbolGridLightColor&&(m.gridLightColor=r.a("gridLightColor")),r.a("gridAngle")!==dv.config.symbolGridAngle&&(m.gridAngle=r.a("gridAngle")),r.a("gridRotation")!==dv.config.symbolGridRotation&&(m.gridRotation=r.a("gridRotation")),r.a("gridZoomThreshold")!==dv.config.symbolGridZoomThreshold&&(m.gridZoomThreshold=r.a("gridZoomThreshold")),r.a("xAlignmentGuides")&&r.a("xAlignmentGuides").length&&(m.xAlignmentGuides=r.a("xAlignmentGuides")),r.a("yAlignmentGuides")&&r.a("yAlignmentGuides").length&&(m.yAlignmentGuides=r.a("yAlignmentGuides")),r.a("cacheRule")&&this.addValue(m,"cacheRule"),r.a("stateEnum")&&r.a("stateEnum").length&&(m.stateEnum=r.a("stateEnum"),r.a("state")&&(m.state=r.a("state"))),Vv.forEach(function(P){r.a(P)&&(m[P]=r.a(P))}),r.a("renderHTML")&&(m.renderHTML=r.a("renderHTML")),this.addValue(m,"width"),this.addValue(m,"height"),this.addValue(m,"boundExtend",0),this.addValue(m,"fitSize",!1),this.addValue(m,"scrollable",!1),this.addValue(m,"interactive",!1),this.addValue(m,"disableSelectedBorder",!1),this.addValue(m,"pixelPerfect",!0),this.addValue(m,"name"),this.addValue(m,"clip",!1),this.addValue(m,"visible",!0),this.addValue(m,"color"),this.addValue(m,"blendMode","multiply"),this.addValue(m,"opacity",1),this.addValue(m,"attachPoints"),this.addValue(m,"attachStyle");var H=dv.config.customProperties.symbol,I=!!dv.config.saveSymbolCustomPropertyDefaultValue;H&&H.length&&H.forEach(function(v){I?P.addValue(m,v.property):P.addValue(m,v.property,v.defaultValue)});var Y=[];return r.a("comps_func")?m.comps={values:Y,func:r.a("comps_func")}:m.comps=Y,r.each(function(P){Y.push(P.toJSON())}),m}}]),v}(sm),Zm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m.getTabModel().sm().ms(function(){m.editor.$6$(m.currentTab)}),m.menu=new gr([{id:"closeTab",label:H("editor.closetab"),action:function(){m.closeTab()}},{id:"closeOtherTabs",label:H("editor.closeothertabs"),action:function(){m.closeOtherTabs()}},{id:"closeTabsToTheRight",label:H("editor.closetabstotheright"),action:function(){m.closeTabsToTheRight()}}]),m.menu.beforeShow=function(P){m._rightClickTab=m.getTabAt(P)},m.menu.addTo(m.getTitleDiv()),m.editor.menus.push(m.menu),m}return Dv(v,P),v.prototype.drawCloseIcon=function(v,r,m,H){v.a("dirty")?(r.fillStyle=m,r.beginPath(),r.arc(H.x+H.width/2,H.y+H.height/2,3,0,2*Math.PI,!0),r.fill()):P.prototype.drawCloseIcon.call(this,v,r,m,H)},v.prototype.open=function(P){if(P){var v=P.fileType,r=v===Pr,m=v===Av,H=v===mr&&dv.SceneView;if(r||m||H){var I=P.url,Y=this.getTabModel().getDataByTag(I);Y||(Y=new ht.Tab,Y.setTag(I),Y.setClosable(!0),Y.setName(M(P.getName())),r?(Y.setIcon("editor.display"),new Wm(this.editor,Y,I)):m?(Y.setIcon("editor.symbol"),new qm(this.editor,Y,I)):H&&(Y.setIcon("editor.scene"),new dv.SceneView(this.editor,Y,I)),this.editor.addTab(Y)),this.getTabModel().sm().ss(Y)}}},v.prototype.newDisplayView=function(P){var v=new ht.Tab;v.setClosable(!0),v.setIcon("editor.display"),v.setName(P||H("editor.untitled"));var r=new Wm(this.editor,v);return this.editor.addTab(v,!0),r},v.prototype.newSymbolView=function(P){var v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new ht.Tab;r.setClosable(!0),r.setIcon("editor.symbol"),r.setName(P||H("editor.untitled"));var m=new qm(this.editor,r);return this.editor.addTab(r,!0),v&&this.editor.zoomToFit(),m},v.prototype.$101$=function(){this.getTabModel().each(function(P){P.getView().graphView.invalidateAll()})},v.prototype.reload=function(){this.currentTab&&this.currentTab.getView().reload()},v.prototype.save=function(P,v){this.currentTab&&this.currentTab.getView().save(P,v)},v.prototype.saveAll=function(P){var v=this.tabs,r=-1,m=function(){r++,r<v.length?v[r].getView().save(m):P()};m()},v.prototype.preview=function(){this.currentTab&&this.currentTab.getView().preview()},v.prototype.selectTab=function(P){P&&this.getTabModel().sm().ss(P)},v.prototype.onTabClosing=function(P,v){return this.closeTab(P),!1},v.prototype.closeTab=function(P,v,r){P=P||this._rightClickTab||this.currentTab,P&&this.closeTabs([P],v,r)},v.prototype.closeOtherTabs=function(P,v){var r=this._rightClickTab||this.currentTab;this.closeTabs(this.tabs.filter(function(P){return P!==r}),P,v)},v.prototype.closeTabsToTheRight=function(P,v){var r=this._rightClickTab||this.currentTab;if(r){var m=this.tabs.indexOf(r);this.closeTabs(this.tabs.slice(m+1),P,v)}},v.prototype.closeAllTabs=function(P,v){this.closeTabs(this.tabs,P,v)},v.prototype.closeTabs=function(P,v,r){var m=this,H=void 0,I=function(Y){if("cancel"!==Y&&P.length){var U=P.shift(0);void 0===H&&(H=m.tabs.indexOf(U)-1),m.$66$(U,I,r)}else{v&&v();var o=m.tabs.length;!m.currentTab&&o&&((void 0===H||H<0)&&(H=0),H>o-1&&(H=o-1),m.selectTab(m.tabs[H]))}};I(),this._rightClickTab=null},v.prototype.removeTab=function(P){var v=P.getView(),r={url:v.url};"display"===v.type?(r.displayView=v,this.editor.fireEvent("displayViewClosing",r)):"symbol"===v.type&&(r.symbolView=v,this.editor.fireEvent("symbolViewClosing",r)),r.preventDefault||(v.onClosed(),this.getTabModel().remove(P),this.editor.fireEvent("tabClosed",{tab:P}),"display"===v.type?this.editor.fireEvent("displayViewClosed",r):"symbol"===v.type&&this.editor.fireEvent("symbolViewClosed",r))},v.prototype.$66$=function(P,v,r){var m=this,I=P.getView();if(!r&&I.dirty){var Y={tab:P};this.editor.fireEvent("tabPrompting",Y),"notSave"===Y.action?(this.removeTab(P),v&&v("notSave")):"save"===Y.action?I.save(function(){m.removeTab(P),v&&v("save")}):"cancel"===Y.action?v&&v("cancel"):!function(){var r=[{label:H("editor.notsave"),action:function(){Y.hide(),m.removeTab(P),v&&v("notSave")}},{label:H("editor.save"),action:function(){I.save(function(){Y.hide(),m.removeTab(P),v&&v("save")})}},{label:H("editor.cancel"),action:function(){Y.hide(),v&&v("cancel")}}],Y=new zv({title:P.getName(),contentPadding:20,width:260,draggable:!0,content:"<p>"+H("editor.savechange")+"</p>",buttons:r});Y.$49$=r[2].action,Y.$48$=r[1].action,Y.show()}()}else this.removeTab(P),v&&v()},ev(v,[{key:"currentTab",get:function(){return this.getTabModel().sm().ld()}},{key:"tabs",get:function(){return this.getTabModel().getRoots().toArray()}}]),v}(kr),Sm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editor=r,m.buttons={};var H=[];H.push(m.createItem("distributeHorizontal")),H.push(m.createItem("distributeVertical")),H.push(m.createItem("alignLeft")),H.push(m.createItem("alignHorizontal")),H.push(m.createItem("alignRight")),H.push(m.createItem("alignTop")),H.push(m.createItem("alignVertical")),H.push(m.createItem("alignBottom")),m.addSearchItem(H);var I=22,U=[I,I,I,I,I,I,I,I,.1];return Y(dv.config.compactFilter)||(m.addCompactItem(H),U.push(I)),m.addRow(H,U),m.updateItems(),m}return Dv(v,P),v.prototype.createItem=function(P){var v=this,r="editor.align."+P.toLocaleLowerCase();return this.buttons[P]=TP(null,H(r),r,function(){v[P]()})},v.prototype.updateItems=function(){var P=this,v=this.buttons;this.dataModel?!function(){var r=[];P.dataModel.sm().each(function(P){P instanceof ht.Node&&r.push(P)}),r.length>2?(v.distributeHorizontal.setDisabled(!1),v.distributeVertical.setDisabled(!1),v.alignLeft.setDisabled(!1),v.alignHorizontal.setDisabled(!1),v.alignRight.setDisabled(!1),v.alignTop.setDisabled(!1),v.alignVertical.setDisabled(!1),v.alignBottom.setDisabled(!1)):r.length>1?(v.distributeHorizontal.setDisabled(!0),v.distributeVertical.setDisabled(!0),v.alignLeft.setDisabled(!1),v.alignHorizontal.setDisabled(!1),v.alignRight.setDisabled(!1),v.alignTop.setDisabled(!1),v.alignVertical.setDisabled(!1),v.alignBottom.setDisabled(!1)):(v.distributeHorizontal.setDisabled(!0),v.distributeVertical.setDisabled(!0),v.alignLeft.setDisabled(!0),v.alignHorizontal.setDisabled(!0),v.alignRight.setDisabled(!0),v.alignTop.setDisabled(!0),v.alignVertical.setDisabled(!0),v.alignBottom.setDisabled(!0))}():(v.distributeHorizontal.setDisabled(!0),v.distributeVertical.setDisabled(!0),v.alignLeft.setDisabled(!0),v.alignHorizontal.setDisabled(!0),v.alignRight.setDisabled(!0),v.alignTop.setDisabled(!0),v.alignVertical.setDisabled(!0),v.alignBottom.setDisabled(!0))},v.prototype.$6$=function(P){this.dataModel&&this.dataModel.sm().ums(this.updateItems,this),P?(this.dataModel=P.getView().dm,this.dataModel.sm().ms(this.updateItems,this)):this.dataModel=null,this.updateItems()},v.prototype.getUnionRect=function(P){return this.editor.gv?this.editor.gv.getUnionNodeRect(P):null},v.prototype.isSelected=function(P){return this.dataModel&&this.dataModel.sm().contains(P)},v.prototype.hasSelectedGroupParent=function(P){return P instanceof ht.Group&&(!!this.isSelected(P)||this.hasSelectedGroupParent(P.getParent()))},v.prototype.hasSelectedHost=function(P){var v=this,r=function(m){return m!==P&&(m instanceof ht.Node&&(!!v.isSelected(m)||r(m.getHost())))};return r(P.getHost())},v.prototype.distributeHorizontal=function(){this.editor.beginTransaction();var P=this.editor.gv,v=this.selection,r=this.getUnionRect(v);P&&r&&!function(){v.sort(function(v,r){return P.getNodeRect(v).x-P.getNodeRect(r).x});var m={},H=0;v.forEach(function(v){var r=P.getNodeRect(v);m[v._id]=r,H+=r.width});var I=(r.width-H)/(v.length-1),Y=r.x;v.forEach(function(v){var r=P.getNodeRect(v);v.translate(Y-r.x,0),Y+=r.width+I})}(),this.editor.endTransaction()},v.prototype.distributeVertical=function(){this.editor.beginTransaction();var P=this.editor.gv,v=this.selection,r=this.getUnionRect(v);P&&r&&!function(){v.sort(function(v,r){return P.getNodeRect(v).y-P.getNodeRect(r).y});var m={},H=0;v.forEach(function(v){var r=P.getNodeRect(v);m[v._id]=r,H+=r.height});var I=(r.height-H)/(v.length-1),Y=r.y;v.forEach(function(v){var r=P.getNodeRect(v);v.translate(0,Y-r.y),Y+=r.height+I})}(),this.editor.endTransaction()},v.prototype.alignLeft=function(){this.editor.beginTransaction();var P=this.editor.gv,v=this.selection,r=this.getUnionRect(v);P&&r&&v.forEach(function(v){var m=P.getNodeRect(v);v.translate(r.x-m.x,0)}),this.editor.endTransaction()},v.prototype.alignHorizontal=function(){this.editor.beginTransaction();var P=this.editor.gv,v=this.selection,r=this.getUnionRect(v);P&&r&&v.forEach(function(v){var m=P.getNodeRect(v);v.translate(r.x+r.width/2-m.x-m.width/2,0)}),this.editor.endTransaction()},v.prototype.alignRight=function(){this.editor.beginTransaction();var P=this.editor.gv,v=this.selection,r=this.getUnionRect(v);P&&r&&v.forEach(function(v){var m=P.getNodeRect(v);v.translate(r.x+r.width-m.x-m.width,0)}),this.editor.endTransaction()},v.prototype.alignTop=function(){this.editor.beginTransaction();var P=this.editor.gv,v=this.selection,r=this.getUnionRect(v);P&&r&&v.forEach(function(v){var m=P.getNodeRect(v);v.translate(0,r.y-m.y)}),this.editor.endTransaction()},v.prototype.alignVertical=function(){this.editor.beginTransaction();var P=this.editor.gv,v=this.selection,r=this.getUnionRect(v);P&&r&&v.forEach(function(v){var m=P.getNodeRect(v);v.translate(0,r.y+r.height/2-m.y-m.height/2)}),this.editor.endTransaction()},v.prototype.alignBottom=function(){this.editor.beginTransaction();var P=this.editor.gv,v=this.selection,r=this.getUnionRect(v);P&&r&&v.forEach(function(v){var m=P.getNodeRect(v);v.translate(0,r.y+r.height-m.y-m.height)}),this.editor.endTransaction()},v.prototype.addSearchItem=function(P){var v=this;this.searchField=new ht.widget.TextField;var r=this.searchField.getElement();r.onkeyup=function(P){L(P)&&(r.value=""),v.editor.filterProperties()},P.push(this.searchField)},v.prototype.addCompactItem=function(P){var v=this,r=pP("editor.filter",function(){return v.editor.inspectorCompact}),m=function(){v.editor.inspectorCompact=!v.editor.inspectorCompact};P.push(TP(null,H("editor.inspectorcompact"),r,m))},ev(v,[{key:"selection",get:function(){var P=this,v=[];return this.dataModel&&this.dataModel.sm().each(function(r){r instanceof ht.Node&&(P.hasSelectedGroupParent(r.getParent())||P.hasSelectedHost(r)||v.push(r))}),v}},{key:"filter",get:function(){return this.searchField.getElement().value}}]),v}(Bv);dv.InspectorTool=Sm;var Cm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m.initForm(),m.visible=!1,m.$6$(),m.oopsImageJSON=ht.Default.getImage("editor.oops"),m.oopsImage=ht.Default.toCanvas(m.oopsImageJSON,m.oopsImageJSON.width,m.oopsImageJSON.height,"fill",null,null,null,ht.Default.devicePixelRatio).toDataURL(),m}return Dv(v,P),v.prototype.initForm=function(){var P=this;this.addRow([{id:"content",textArea:{}}],[.1],.1),this.addRow([{id:"url",textField:{editable:!1}},{id:"edit",button:{onClicked:function(){P.editing=!P.editing}}},{id:"commit",button:{label:H("editor.commit"),onClicked:function(){P.currentView.update(P.content,!0),P.editing=!1}}}],[.1,50,50]),this.getView().style.background=dv.config.color_pane,this.textArea=this.getViewById("content").getElement(),this.editing=!1},v.prototype.$67$=function(){var P=this;this.visible&&!this.editing&&(this._updateContentLater||(this._updateContentLater=!0,setTimeout(function(){P.updateContent()},100)))},v.prototype.updateContent=function(){this.visible&&!this.editing&&(this._updateContentLater=!1,this.content=this.currentView?b(this.currentView.content):"")},v.prototype.updateUrl=function(){this.v("url",this.tab&&this.tab.getTag()||"")},v.prototype.$6$=function(P){this.editing=!1,this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.$67$,this),this.dataModel.removeDataPropertyChangeListener(this.$67$,this),this.dataModel.removePropertyChangeListener(this.$67$,this)),P?(this.currentView=P.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.$67$,this),this.dataModel.addDataPropertyChangeListener(this.$67$,this),this.dataModel.addPropertyChangeListener(this.$67$,this),this.setDisabled(!1)):(this.currentView=null,this.dataModel=null,this.setDisabled(!0)),this.tab=P,this.updateUrl(),this.$67$()},ev(v,[{key:"editing",get:function(){return this._editing},set:function(P){this._editing!==P&&(this._editing=P,this.getViewById("edit").setLabel(H(P?"editor.cancel":"editor.edit")),this.getViewById("commit").setDisabled(!P),this.getViewById("content").setEditable(P),P||this.$67$())}},{key:"visible",get:function(){return this._visible},set:function(P){this._visible!==P&&(this._visible=P,P?this.updateContent():this.editing||(this.content=""))}},{key:"content",get:function(){return this.v("content")},set:function(P){if(P&&P.length>dv.config.maxStringLength){P="Oops, tooooo long!",this.setDisabled(!0,this.oopsImage);var v=this.oopsImageJSON.width,r=this.oopsImageJSON.height;this.getDisabledDiv().style.backgroundSize=v+"px "+r+"px"}else this.setDisabled(!1);this.v("content",P)}}]),v}(Bv),um=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m.centerPane=new ur,m.setCenterView(m.centerPane),m.controlPane=new Bv,m.controlPane.addRow([{id:"filter",textField:{}}],[.1,ht.Default.isTouchable?32:18]),m.setBottomView(m.controlPane),m.setBottomHeight(ht.Default.widgetRowHeight+8),m.input=m.controlPane.getViewById("filter").getElement(),m.input.onkeyup=function(P){m.list&&(L(P)&&(m.input.value=""),m.list.setFilter(m.input.value))},m}return Dv(v,P),v.prototype.$6$=function(P){this.tab=P,this.list=P?P.getView().list:null,this.controlPane.v("filter",this.list?this.list.getFilter()||"":"")},ev(v,[{key:"list",get:function(){return this.centerPane.getCenterView()},set:function(P){this.centerPane.setCenterView(P)}}]),v}(ur),gm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m._layerNames=[],m.setDisabled(!0),m.tableModel=new ht.DataModel,
m.tablePane=new br(m.tableModel),m.tableView=m.tablePane.getTableView(),m.tableView.setEditable(!0),m.tablePane.getView().style.border=dv.config.color_line+" solid 1px",m.tablePane.addColumns([m.$74$("name",H("editor.name"),100),m.$74$("visible",H("editor.visible"),50),m.$74$("selectable",H("editor.selectable"),50),m.$74$("movable",H("editor.movable"),50),m.$74$("editable",H("editor.editable"),50)]),m.addRow([m.tablePane],[.1],.1),m.addRow([{button:{icon:"editor.add",toolTip:H("editor.add"),onClicked:function(){m.addLayer(ht.Data.prototype._layer,!0,!0,!0,!0),m.updateLayers()}}},{button:{icon:"editor.delete",toolTip:H("editor.delete"),onClicked:function(){m.tableView.sm().size()&&(m.tableView.removeSelection(),m.updateLayers())}}},null,{button:{icon:"editor.top",toolTip:H("editor.bringtofront"),onClicked:function(){m.tableView.sm().size()&&(m.tableModel.moveSelectionToTop(),m.updateLayers())}}},{button:{icon:"editor.up",toolTip:H("editor.bringforward"),onClicked:function(){m.tableView.sm().size()&&(m.tableModel.moveSelectionUp(),m.updateLayers())}}},{button:{icon:"editor.down",toolTip:H("editor.sendbackward"),onClicked:function(){m.tableView.sm().size()&&(m.tableModel.moveSelectionDown(),m.updateLayers())}}},{button:{icon:"editor.bottom",toolTip:H("editor.sendtoback"),onClicked:function(){m.tableView.sm().size()&&(m.tableModel.moveSelectionToBottom(),m.updateLayers())}}}],[20,20,.1,20,20,20,20]),m}return Dv(v,P),v.prototype.addLayer=function(P,v,r,m,H){v!==!1&&(v=!0),r!==!1&&(r=!0),m!==!1&&(m=!0),H!==!1&&(H=!0);var I=new ht.Data;I.a({name:P,visible:v,selectable:r,movable:m,editable:H}),this.tableModel.add(I)},v.prototype.$74$=function(P,v,r){var m=this;return{name:P,tag:P,accessType:"attr",width:r,displayName:v,align:"center",editable:!0,setValue:function(v,r,H){H!==v.a(P)&&(v.a(P,H),m.updateLayers())}}},v.prototype.$6$=function(P){this.dataModel&&this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this);var v=this.editor.displayView;v?(this.dataModel=v.dm,this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.setDisabled(!1)):(this.dataModel=null,this.setDisabled(!0)),this.updateTable()},v.prototype.handleDataModelPropertyChange=function(P){var v=this;if("layers"===P.property){this.updateTable(),this._layerNames=[];var r=this.dataModel.getLayers();r&&r.forEach(function(P){v._layerNames.push(tP(P)?P.name:P)}),this.editor.inspector&&this.editor.inspector.$35$()}},v.prototype.updateLayers=function(){if(this.dataModel){var P=this.tableModel.size()?[]:null;P&&this.tableModel.getRoots().forEach(function(v){P.push({name:v.a("name"),visible:v.a("visible"),selectable:v.a("selectable"),movable:v.a("movable"),editable:v.a("editable")})}),this.isSettingLayers=!0,this.dataModel.setLayers(P),this.isSettingLayers=!1}},v.prototype.updateTable=function(){var P=this;if(!this.isSettingLayers&&(this.tableModel.clear(),this.dataModel)){var v=this.dataModel.getLayers();v&&v.forEach(function(v){tP(v)?P.addLayer(v.name,v.visible,v.selectable,v.movable,v.editable):P.addLayer(v,!0,!0,!0,!0)})}},ev(v,[{key:"currentLayer",get:function(){var P=this.tableModel.sm().ld();if(P)return P.a("name");var v=this.tableModel.getRoots();return v.size()?(P=v.get(v.size()-1),P.a("name")):ht.Data.prototype._layer}},{key:"layerNames",get:function(){return this._layerNames}}]),v}(Bv),nm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editor=r;var I=m.tableModel=new ht.DataModel,Y=m.tablePane=new br(I);m.tableView=Y.getTableView();return I.mm(m.handleUpdate,m),I.md(m.handleTableDataPropertyChange,m),I.sm().setSelectionMode("single"),Y.addColumns([{name:"stateName",displayName:H("editor.state"),accessType:"attr",editable:!0,valueType:"string",tag:"stateName"},{name:"stateDisplayName",displayName:H("editor.name"),accessType:"attr",editable:!0,valueType:"string",tag:"stateDisplayName"},{name:"isDefault",displayName:H("editor.default"),accessType:"attr",valueType:"boolean",editable:!0,width:48,setValue:function(P,v,r,H){m.setDefaultState(P.a("stateName"))}}]),Y.addViewListener(function(P){if("beginValidate"===P.kind){var v=Y.getColumnModel(),r=Y.getWidth(),m=(r-80)/2;v.getDataByTag("stateName").setWidth(m),v.getDataByTag("stateDisplayName").setWidth(m)}}),m.addRow([m.tablePane],[.1],.1),m.addRow([{button:{icon:"editor.add",toolTip:H("editor.add"),onClicked:function(){var P=m.addState();m.tableModel.sm().ss(P)}}},{button:{icon:"editor.delete",toolTip:H("editor.delete"),onClicked:function(){m.removeState()}}}],[20,20]),I.sm().ms(function(P){m.editor.gv.iv(),m.updatingClear||(m.dataModel._lastState=m.currentState)}),m._index=0,m}return Dv(v,P),v.prototype.handleUpdate=function(){if(!this.updatingClear){var P=[],v=void 0;this.tableModel.each(function(r){var m=r.a("stateName"),H=r.a("stateDisplayName"),I={};r.a("isDefault")&&(v=m),I.value=m,H&&(I.label=H),P.push(I)}),this.isSettingState=!0,this.editor.dm.a({stateEnum:P,state:v}),this.editor.inspector.filterPropertiesLater(),this.editor.inspector.updateProperties(),this.isSettingState=!1}},v.prototype.handleTableDataPropertyChange=function(P){var v=this;"a:stateName"!==P.property||this.renameRollback?this.handleUpdate():!function(){var r=P.oldValue,m=P.newValue;v.isStateExist(m,P.data)?(v.editor.showMessage(H("editor.statenameexist"),or),v.renameRollback=!0,P.data.a("stateName",r),v.renameRollback=!1):m?(v.editor.dm.each(function(P){r===P.s("state")&&P.s("state",m)}),v.handleUpdate()):(v.editor.showMessage(H("editor.statenameempty"),or),v.renameRollback=!0,P.data.a("stateName",r),v.renameRollback=!1)}()},v.prototype.addState=function(P,v){var r=this,m=arguments.length>2&&void 0!==arguments[2]&&arguments[2],H=this.currentState,I=this.tableView.dm(),Y=new ht.Data;if(!P){for(;this.isStateExist("state"+this._index);)this._index++;P="state"+this._index}return Y.a({stateName:P,isDefault:m,stateDisplayName:v}),I.add(Y),dv.config.isCopyCompsWhenNewState&&H&&!function(){var v=r.dataModel.toDatas(function(P){return P.s("state")===H}),m=r.dataModel.sm();m.cs(),v.size()&&v.each(function(P){m.as(P)}),r.editor.copy(),r.editor.paste(!0),m.each(function(v){v.s("state",P)})}(),Y},v.prototype.removeState=function(){var P=this,v=this.tableModel.sm().ld();if(v){var r=v.a("stateName"),m=this.editor.dm,I=m.toDatas(function(P){return r===P.s("state")}),Y=I.size();Y?this.editor.showConfirm(void 0,Iv(H("editor.retaincompafterdelete"),r),function(){I.each(function(P){P.s("state",void 0)}),P.tableModel.remove(v)},function(){for(var r=Y-1;r>=0;r--)m.remove(I.get(r));P.tableModel.remove(v)}):this.tableModel.remove(v)}},v.prototype.handleDataModelPropertyChange=function(P){"a:stateEnum"!==P.property&&"a:state"!==P.property||this.updateTable()},v.prototype.handleDataModelChange=function(P){var v=this.currentState;v&&"add"===P.kind&&P.data.s("state",v)},v.prototype.updateTable=function(){var P=this;if(!this.isSettingState&&this.dataModel){this.updatingClear=!0,this.tableModel.clear();var v=this.dataModel.a("state"),r=this.dataModel.a("stateEnum");r&&r.forEach(function(r){P.addState(r.value,r.label,r.value===v)}),this.updatingClear=!1}},v.prototype.isStateExist=function(P,v){for(var r=this.tableModel.toDatas(function(P){return P!==v}),m=r.size(),H=0;H<m;H++)if(P===r.get(H).a("stateName"))return!0},v.prototype.setDefaultState=function(P){this.tableModel.each(function(v){v.a("isDefault",v.a("stateName")===P)})},v.prototype.$6$=function(P){var v=this;this.dataModel&&(this.dataModel.ump(this.handleDataModelPropertyChange,this),this.dataModel.umm(this.handleDataModelChange,this));var r=this.editor.symbolView;r?(this.dataModel=r.dm,this.dataModel.mp(this.handleDataModelPropertyChange,this),this.dataModel.mm(this.handleDataModelChange,this)):this.dataModel=null,this.updateTable(),r&&!function(){var P=v.dataModel._lastState;void 0!==P?v.tableModel.each(function(r){r.a("stateName")===P&&v.tableModel.sm().ss(r)}):v.tableModel.sm().cs()}()},ev(v,[{key:"currentState",get:function(){var P=this.tableModel.sm().ld();return P?P.a("stateName"):void 0}}]),v}(Bv),Jm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m.editor.menus.push(m),m.setItems([{id:"file",label:H("editor.file"),items:[m.createItem("newSceneView",H("editor.newsceneview"),"newSceneView",dv.config.scenesVisible),m.createItem("newDisplayView",H("editor.newdisplayview"),"newDisplayView",dv.config.displaysVisible),m.createItem("newSymbolView",H("editor.newsymbolview"),"newSymbolView",dv.config.symbolsVisible),m.createItem("newComponent",H("editor.newcomponent"),"newComponent",dv.config.componentsVisible),m.createItem("newModel",H("editor.newmodel"),"newModel",dv.config.modelsVisible)]},{id:"edit",label:H("editor.edit"),items:[m.createItem("undo",H("editor.undo"),"undo"),m.createItem("redo",H("editor.redo"),"redo"),{id:"afterRedo",separator:!0},m.createItem("copy",H("editor.copy"),"copy"),m.createItem("paste",H("editor.paste"),"paste")]}]),m}return Dv(v,P),v.prototype.createItem=function(P,v,r){var m=this,H=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],I={id:P,label:v,visible:!(!this.editor[r]||!H)};return r&&(I.action=function(){m.editor[r]()}),I},v}(gr),Km=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m.initMenu(),m.$69$(),m.enableToolTip(),m}return Dv(v,P),v.prototype.$6$=function(){this.iv()},v.prototype.initMenu=function(){var P=this;this.editor.mainMenu=new Jm(this.editor);var v=function(v){var r=P.editor.mainMenu;r.isShowing()&&!r.getView().contains(v.target)&&r.hide()};window.addEventListener("touchstart",v,!1),window.addEventListener("mousedown",v,!1)},v.prototype.$69$=function(){var P=this,v=function(v){return function(r){"node"===v||"subgraph"===v||("edge"===v?r.s({"edge.width":1,"edge.color":dv.config.color_data_border}):"group"===v?r.setExpanded(!0):"arc"===v?r.s({shape:v,"shape.background":dv.config.color_data_background,"shape.border.width":1,"shape.border.color":dv.config.color_data_border,"shape.arc.from":0,"shape.arc.to":4.1888}):"shape"===v?r.s({"shape.background":null,"shape.border.color":dv.config.color_data_border,"shape.border.width":1}):"text"===v?r.s("text",H("editor.text")):r.s({shape:v,"shape.background":dv.config.color_data_background,"shape.border.width":1,"shape.border.color":dv.config.color_data_border})),P.editor.fireEvent("dataInited",{type:v,data:r,displayView:P.editor.displayView})}},r=[];r.push(this.$68$()),r.push(this.createEditItem()),r.push(this.editor.createDisplayItem("Shape",H("editor.shape"),"editor.display.shape",ht.Shape,v("shape"))),r.push(this.editor.createDisplayItem("Oval",H("editor.oval"),"editor.display.oval",ht.Node,v("oval"))),r.push(this.editor.createDisplayItem("RoundRect",H("editor.roundrect"),"editor.display.roundrect",ht.Node,v("roundRect"))),r.push(this.editor.createDisplayItem("Rect",H("editor.rect"),"editor.display.rect",ht.Node,v("rect"))),r.push(this.editor.createDisplayItem("Polygon",H("editor.polygon"),"editor.display.polygon",ht.Node,v("polygon"))),r.push(this.editor.createDisplayItem("Triangle",H("editor.triangle"),"editor.display.triangle",ht.Node,v("triangle"))),r.push(this.editor.createDisplayItem("Star",H("editor.star"),"editor.display.star",ht.Node,v("star"))),r.push(this.editor.createDisplayItem("Arc",H("editor.arc"),"editor.display.arc",ht.Node,v("arc"))),r.push(this.editor.createDisplayItem("Text",H("editor.text"),"editor.display.text",ht.Text,v("text"))),r.push(this.editor.createDisplayItem("Node",H("editor.node"),"editor.display.node",ht.Node,v("node"))),r.push(this.editor.createDisplayItem("Group",H("editor.group"),"editor.display.group",ht.Group,v("group"))),r.push(this.editor.createDisplayItem("SubGraph",H("editor.subgraph"),"editor.display.subgraph",ht.SubGraph,v("subgraph"))),r.push(this.editor.createDisplayItem("Edge",H("editor.edge"),"editor.display.edge",ht.Edge,v("edge"))),r.push(this.editor.createSymbolItem("shape",H("editor.shape"),"editor.symbol.shape","shape")),r.push(this.editor.createSymbolItem("oval",H("editor.oval"),"editor.symbol.oval","oval")),r.push(this.editor.createSymbolItem("roundRect",H("editor.roundrect"),"editor.symbol.roundrect","roundRect")),r.push(this.editor.createSymbolItem("rect",H("editor.rect"),"editor.symbol.rect","rect")),r.push(this.editor.createSymbolItem("polygon",H("editor.polygon"),"editor.symbol.polygon","polygon")),r.push(this.editor.createSymbolItem("triangle",H("editor.triangle"),"editor.symbol.triangle","triangle")),r.push(this.editor.createSymbolItem("star",H("editor.star"),"editor.symbol.star","star")),r.push(this.editor.createSymbolItem("arc",H("editor.arc"),"editor.symbol.arc","arc")),r.push(this.editor.createSymbolItem("text",H("editor.text"),"editor.symbol.text","text")),r.push(this.editor.createSymbolItem("border",H("editor.border"),"editor.symbol.border","border")),r.push(this.editor.createSymbolItem("piechart",H("editor.piechart"),"editor.symbol.piechart","pieChart")),r.push(this.editor.createSymbolItem("onedimensionalcolumnchart",H("editor.onedimensionalcolumnchart"),"editor.symbol.onedimensionalcolumnchart","oneDimensionalColumnChart")),r.push(this.editor.createSymbolItem("columnchart",H("editor.columnchart"),"editor.symbol.columnchart","columnChart")),r.push(this.editor.createSymbolItem("linechart",H("editor.linechart"),"editor.symbol.linechart","lineChart")),this.setItems(r)},v.prototype.$68$=function(){var P=this,v=dP("menu",H("editor.menu"),"editor.menu");return v.action=function(v,r,m){P.editor.mainMenu.isShowing()||(P.editor.mainMenu.showOnView(P,4,20),m.preventDefault(),m.stopPropagation())},v},v.prototype.createEditItem=function(){var P=this,v=function(){return P.editor.currentView&&"edit"===P.editor.currentView.$4$()},r=dP("edit",H("editor.edit"),"editor.edit",v);return r.visible=function(){return!!P.editor.currentView},r.action=function(){var v=P.editor.currentView;v&&v.$5$("edit")},r},v}(Mr),jm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m.$69$(),m.enableToolTip(),m.setStickToRight(!0),m}return Dv(v,P),v.prototype.handlePropertyChange=function(P){"zoom"===P.property&&this.$70$()},v.prototype.$70$=function(){this.label.innerHTML=this.graphView?parseInt(100*this.graphView.getZoom())+"%":""},v.prototype.$6$=function(P){this.graphView&&this.graphView.removePropertyChangeListener(this.handlePropertyChange,this),P?(this.graphView=P.getView().graphView,this.graphView.addPropertyChangeListener(this.handlePropertyChange,this)):this.graphView=null,this.iv(),this.$70$()},v.prototype.$69$=function(){var P=this,v=void 0,r=function(){return!!P.graphView},m=[];v=dP("undo",H("editor.undo"),"editor.undo"),v.action=function(){P.editor.undo()},v.visible=r,m.push(v),v=dP("redo",H("editor.redo"),"editor.redo"),v.action=function(){P.editor.redo()},v.visible=r,m.push(v),m.push({separator:!0,visible:r}),v=dP("rulers",H("editor.showrulers"),"editor.rulers",function(){return P.editor.isRulerEnabled()}),v.action=function(){P.editor.toggleRulerEnabled()},v.visible=r,m.push(v),v=dP("grid",H("editor.showgrid"),"editor.grid",function(){return P.editor.isGridEnabled()}),v.action=function(){P.editor.toggleGridEnabled()},v.visible=r,m.push(v),m.push({separator:!0,visible:r}),v=dP("save",H("editor.save"),"editor.save"),v.action=function(){P.editor.save()},v.visible=r,m.push(v),v=dP("preview",H("editor.preview"),"editor.preview"),v.action=function(){P.editor.preview()},v.visible=r,m.push(v),v=dP("reload",H("editor.reload"),"editor.reload"),v.action=function(){P.editor.reload()},v.visible=r,m.push(v),m.push({separator:!0,visible:r}),v=dP("zoomOut",H("editor.zoomout"),"editor.zoomout"),v.action=function(){P.editor.zoomOut()},v.visible=r,m.push(v),m.push(this.createZoomItem(r)),v=dP("zoomIn",H("editor.zoomin"),"editor.zoomin"),v.action=function(){P.editor.zoomIn()},v.visible=r,m.push(v),v=dP("zoomToFit",H("editor.zoomtofit"),"editor.zoomtofit"),v.action=function(){P.editor.zoomToFit()},v.visible=r,m.push(v),m.push({separator:!0,visible:r}),v=dP("toggleLeft",H("editor.toggleleft"),"editor.toggleleft"),v.action=function(){P.editor.toggleLeft()},m.push(v),v=dP("toggleBoth",H("editor.toggleboth"),"editor.toggleboth"),v.action=function(){P.editor.toggleBoth()},m.push(v),v=dP("toggleRight",H("editor.toggleright"),"editor.toggleright"),v.action=function(){P.editor.toggleRight()},m.push(v),this.setItems(m)},v.prototype.createZoomItem=function(P){var v=this,r=this.label=ht.Default.createDiv(!0);r.style.font=this.getLabelFont(),r.style.color=this.getLabelColor(),r.style.cursor="ew-resize",r.style.width="40px",r.style.height=ht.Default.widgetRowHeight+"px",r.style.lineHeight=ht.Default.widgetRowHeight+"px",r.style.whiteSpace="nowrap",r.style.textAlign="center";var m=function(P){P.preventDefault();var r=v.editor.gv;if(r){q(P)&&v.editor.zoomReset();var m=r.getZoom(),H=S(P).x,I=function(P){P.preventDefault();var v=S(P).x-H;r.setZoom(m*(1+.005*v))};window.addEventListener("mousemove",I,!1),window.addEventListener("touchmove",I,!1);var Y=function(P){P.preventDefault(),window.removeEventListener("mousemove",I,!1),window.removeEventListener("touchmove",I,!1),window.removeEventListener("mouseup",Y,!1),window.removeEventListener("touchend",Y,!1)};window.addEventListener("mouseup",Y,!1),window.addEventListener("touchend",Y,!1)}};return r.addEventListener("mousedown",m,!1),r.addEventListener("touchstart",m,!1),{id:"zoom",unfocusable:!0,element:r,visible:P}},v}(Mr),bm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editor=r,m._errorMsg=null,m.$72$(),m.$71$(),m.$73$(),m.splitView=new jr(m.inspectorPane,m.graphView,"v",-200),m.mainSplitView=new jr(m.funcPane,m.splitView,"h",-360),m._eventData=new ht.Data;var I=[];return I.push({label:H("editor.refresh"),action:function(){m.refresh()}}),I.push({label:H("editor.ok"),action:function(){m.ok()}}),I.push({label:H("editor.cancel"),action:function(){m.hide()}}),m.setConfig({closable:!0,draggable:!0,width:dv.config.componentViewSize.width,height:dv.config.componentViewSize.height,contentPadding:0,resizeMode:"wh",maximizable:!0,content:m.mainSplitView,buttons:I,buttonsAlign:"right"}),m}return Dv(v,P),v.prototype.$49$=function(){this.hide()},v.prototype.$48$=function(){this.ok()},v.prototype.$72$=function(){var P=this;ht.Default.setCompType("_editingCompType_",{func:function(){}}),this.node=new ht.Node,this.node.setImage({width:100,height:100,fitSize:!0,comps:[{type:"_editingCompType_"}]}),this.graphView=new nr,this.graphView.dm().add(this.node),this.graphView.sm().ss(this.node),this.graphView.mi(function(v){"doubleClickData"!==v.kind&&"doubleClickBackground"!==v.kind||P.graphView.fitContent(dv.config.animate,dv.config.fitPadding)});var v=this;ht.Default.drawCompType=function(P,r,m,I,Y,U){var o="_editingCompType_"===I.type;try{o&&v.beforeDrawCompType(r),P(r,m,I,Y,U),o&&v.afterDrawCompType(r)}catch(P){o&&(v.afterDrawCompType(r),v._errorMsg=H("editor.compfunctionerror")),console.error(P.stack||P)}}},v.prototype.beforeDrawCompType=function(P){var v=this._restoreFlag;v||(v=this._restoreFlag=P.createLinearGradient(0,0,10,10),v.addColorStop(0,"black"),v.addColorStop(0,"black")),P.fillStyle=v,P.save(),P.fillStyle="#000000"},v.prototype.afterDrawCompType=function(P){if(P.restore(),P.fillStyle!==this._restoreFlag){for(var v=0,r=20;P.fillStyle!==this._restoreFlag&&(P.restore(),v++,!(v>=r)););P.fillStyle="black",this._errorMsg=H("editor.complosssaveorrestore")}else this._errorMsg=null},v.prototype.$73$=function(){this.funcPane=new Bv,this.funcPane.addRow([{id:"head",element:"function(g, rect, comp, data, view) {"}],[.1]),this.funcPane.addRow([{id:"func",element:Hv()}],[.1],.1),this.funcPane.addRow(["}"],[.1])},v.prototype.$71$=function(){var P=this,v=dv.config.indent;this.inspectorPane=new Bv,this.inspectorPane.addRow([H("editor.name"),{id:"name",textField:{}}],[v,.1]),this.inspectorPane.addRow([H("editor.path"),{id:"path",textField:{editable:!1}}],[v,.1]),this.inspectorPane.addRow([H("editor.snapshoturl"),{id:"snapshotURL",textField:{}}],[v,.1]),this.inspectorPane.addRow([H("editor.width"),{id:"width",textField:{}},H("editor.height"),{id:"height",textField:{}}],[v,.1,dv.config.indent2,.1]);var r=TP(H("editor.eventhandlers"),null,null,function(){P.editor.eventView.open([P._eventData],null,P.resetEventButtonLabelColor.bind(P))});this.eventButton=r,this.inspectorPane.addRow([H("editor.events"),{element:r}],[v,.1]),this.inspectorPane.addLine(),this.createTable()},v.prototype.$74$=function(P,v,r,m){return{name:P,tag:P,accessType:"attr",width:r,displayName:v,align:"center",enum:m,editable:!0}},v.prototype.createTable=function(){var P=this;this.tableModel=new ht.DataModel,this.tablePane=new br(this.tableModel),this.tableView=this.tablePane.getTableView(),this.tableView.setEditable(!0),this.tablePane.getView().style.border=dv.config.color_line+" solid 1px",this.tablePane.addColumns([this.$74$("property",H("editor.property"),90),this.$74$("valueType",H("editor.valuetype"),80,{values:dv.consts.valueTypes,labels:dv.consts.valueTypeLabels}),this.$74$("defaultValue",H("editor.defaultvalue"),90),this.$74$("name",H("editor.name"),80),this.$74$("group",H("editor.group"),80),this.$74$("description",H("editor.description"),120),this.$74$("extraInfo",H("editor.extrainfo"),100)]),this.$75$(),this.initExtraInfoColumn(),this.inspectorPane.addRow([this.tablePane],[.1],.1),this.inspectorPane.addRow([{button:{toolTip:H("editor.add"),icon:"editor.add",onClicked:function(){var v=new ht.Data;v.a({property:"property",valueType:"String"});var r=void 0,m=P.tableModel.sm().ld();m&&(r=P.tableModel.getRoots().indexOf(m)+1),P.tableModel.add(v,r)}}},{button:{toolTip:H("editor.delete"),icon:"editor.delete",onClicked:function(){P.tableView.removeSelection()}}},null,{button:{icon:"editor.top",toolTip:H("editor.bringtofront"),onClicked:function(){P.tableView.sm().size()&&P.tableModel.moveSelectionToTop()}}},{button:{icon:"editor.up",toolTip:H("editor.bringforward"),onClicked:function(){P.tableView.sm().size()&&P.tableModel.moveSelectionUp()}}},{button:{icon:"editor.down",toolTip:H("editor.sendbackward"),onClicked:function(){P.tableView.sm().size()&&P.tableModel.moveSelectionDown()}}},{button:{icon:"editor.bottom",toolTip:H("editor.sendtoback"),onClicked:function(){P.tableView.sm().size()&&P.tableModel.moveSelectionToBottom()}}}],[20,20,.1,20,20,20,20])},v.prototype.$75$=function(){var P=this,v=this.tableView.getColumnModel().getDataByTag("defaultValue");v.getEnumValues=function(P){var v=P?dv.config.valueTypes[P.a("valueType")]:null;return v&&"enum"===v.type?v.values:null},v.getEnumLabels=function(P){var v=P?dv.config.valueTypes[P.a("valueType")]:null;return v&&"enum"===v.type?v.labels:null},v.getEnumIcons=function(P){var v=P?dv.config.valueTypes[P.a("valueType")]:null;return v&&"enum"===v.type?v.icons:null},v.getEnumDropDownWidth=function(P){var v=P?dv.config.valueTypes[P.a("valueType")]:null;return v&&"enum"===v.type?v.dropDownWidth:null},v.getValueType=function(P){var v=P?dv.config.valueTypes[P.a("valueType")]:null;return v?v.type:null},v.isCellEditable=function(v,r,m,I){var Y=v?dv.config.valueTypes[v.a("valueType")]:null,U=Y?Y.type:null,o=v.a("extraInfo");if("function"===U){var x=H("editor.function")+" "+(v.a("property")||"");return P.editor.functionView.open(v.a("defaultValue"),function(P){v.a("defaultValue",P)},x,o&&o.arguments),!1}if("multiline"===U)return P.editor.textView.open(v.a("defaultValue"),function(P){v.a("defaultValue",P)},v.a("property")||"&nbsp;"),!1;if("font"===U)return P.editor.fontView.open(v.a("defaultValue"),function(P){v.a("defaultValue",P)},v.a("property")||"&nbsp;"),!1;if("object"===U||"custom"===U||"stringArray"===U||"objectArray"===U||"numberArray"===U||"colorArray"===U){var N=H("editor.object")+" "+(v.a("property")||"");return P.editor.objectView.open(v.a("defaultValue"),function(P){v.a("defaultValue",P)},N),!1}return!0}},v.prototype.initExtraInfoColumn=function(){var P=this,v=this.tableView.getColumnModel().getDataByTag("extraInfo");v.isCellEditable=function(v,r,m,I){var Y=H("editor.extrainfo")+" "+(v.a("property")||"");return P.editor.objectView.open(v.a("extraInfo"),function(P){v.a("extraInfo",P)},Y),!1}},v.prototype.open=function(P){var v=this;this.fileNode=P,P?w(P.url,function(r){v.update(P.url,P.path,M(P.getName()),r)}):this.update(void 0,this.editor.components.currentDir,H("editor.untitled"))},v.prototype.update=function(P,v,r,m){if(m){if(m=k(m),this.setTitle(H("editor.editcomponent")),this.node.setWidth(m.width||100),this.node.setHeight(m.height||100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",m.snapshotURL||""),this.inspectorPane.getViewById("name").setEditable(!1),this.inspectorPane.v("name",r||""),this.inspectorPane.v("path",v||""),this.funcPane.v("func",o(m.func)),this.tableModel.clear(),m.properties)for(var I in m.properties){var Y=m.properties[I],U=new ht.Data;U.a({property:I,valueType:Y.valueType,defaultValue:Y.defaultValue,name:Y.name,group:Y.group,description:Y.description,extraInfo:Y.extraInfo}),this.tableModel.add(U)}if(this._eventData=new ht.Data,m.events)for(var x in m.events)this._eventData.a(x,m.events[x]);this.resetEventButtonLabelColor(),this.refresh(),this.show(),this.url=P,this.editor.fireEvent("componentViewOpened",{componentView:this,url:P,json:m})}else this.setTitle(H("editor.newcomponent")),this.node.setWidth(100),this.node.setHeight(100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",""),this.inspectorPane.getViewById("name").setEditable(!0),this.inspectorPane.v("name",r),this.inspectorPane.v("path",v),this.funcPane.v("func",""),this.tableModel.clear(),this.refresh(),this.show(),this.url=P,this.editor.fireEvent("componentViewCreated",{componentView:this})},v.prototype.$76$=function(){var P=this.funcPane.v("head"),v=this.funcPane.v("func").trim();return x(P+"\n"+v+"\n}")},v.prototype.$77$=function(){var P={};return this.tableModel.getRoots().each(function(v){P[v.a("property")]={valueType:v.a("valueType"),defaultValue:v.a("defaultValue"),name:v.a("name"),group:v.a("group"),description:v.a("description"),extraInfo:v.a("extraInfo")}}),P},v.prototype.refresh=function(P){ht.Default.setCompType("_editingCompType_",{func:this.$76$(),properties:this.$77$()}),this.node.setWidth(parseFloat(this.inspectorPane.v("width"))),this.node.setHeight(parseFloat(this.inspectorPane.v("height"))),this.node.iv(),this.graphView.fitContent(dv.config.animate,dv.config.fitPadding);var v=function(r){"validate"===r.kind&&(P&&P(!this._errorMsg),this._errorMsg&&this.editor.showMessage(this._errorMsg,or),this.graphView.removeViewListener(v,this))};this.graphView.addViewListener(v,this)},v.prototype.createEvents=function(){var P=this._eventData,v=null;return Vv.forEach(function(r){P.a(r)&&(v||(v={}),v[r]=P.a(r))}),v},v.prototype.resetEventButtonLabelColor=function(){for(var P=!1,v=0;v<Vv.length;v++)if(this._eventData.a(Vv[v])){P=!0;break}this.eventButton.setLabelColor(P?dv.config.color_select:ht.Default.labelColor)},v.prototype.ok=function(){var P=this,v=this.inspectorPane.v("name").trim(),r=this.inspectorPane.v("path"),m=this.url||r+"/"+v+".json";if(!v)return void lP(null,H("editor.inputempty"),function(){});if(v.length>dv.config.maxFileNameLength)return void lP(null,H("editor.inputmax"),function(){});if(dv.config.checkFileName&&!(v=dv.config.checkFileName(v,m)))return void lP(null,H("editor.invalidinput"),function(){});IP(v)&&(v=M(v));var I=this.content;console.log(I);var Y={componentView:this,url:m,json:b(I)};this.editor.fireEvent("componentViewSaving",Y),Y.preventDefault||(Y={path:Y.url,content:Y.json},this.refresh(function(m){m&&P.editor.request("upload",Y,function(m){m===!0&&(P.refresh(),P.graphView.sm().cs(),P.graphView.validate(),P.editor.saveImage(I.snapshotURL||P.graphView,r+"/"+v+".png",function(){P.editor.fireEvent("componentViewSaved",Y)}),P.hide(),P.editor.selectFileNode(Y.path),Y={componentView:P,url:Y.path,json:Y.content})})}))},ev(v,[{key:"content",get:function(){var P={modified:(new Date).toString(),width:parseFloat(this.inspectorPane.v("width")),height:parseFloat(this.inspectorPane.v("height")),snapshotURL:this.inspectorPane.v("snapshotURL"),func:this.$76$()};this.tableModel.size()&&(P.properties=this.$77$());var v=this.createEvents();return v&&(P.events=v),P}}]),v}(zv),km=460,Mm=230,am=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editor=r;var I=[];I.push(H("editor.binding")),I.push({id:"compProperty",textField:{editable:!1}}),I.push({element:H("editor.type"),align:"right"}),I.push({id:"type",comboBox:{values:["attr","func"],onValueChanged:function(P,v){var r="func"===v,H=r?ht.Default.labelColor:dv.config.color_disabled;m.getViewById("func").setEditable(r),m.getItemById("head").color=H,m.getItemById("end").color=H,m.getViewById("property").setDisabled(r),r&&m.getViewById("property").setValue(""),m.iv()}}}),I.push({element:H("editor.property"),align:"right"});var Y={id:"property"};dv.config.dataBindingsForSymbol.getComboBoxValues?Y.comboBox={editable:!!dv.config.dataBindingsForSymbol.comboBoxEditable}:Y.textField={},I.push(Y);var U=[50,90,40,60,60,.1];if(dv.config.dataBindingsForSymbol.onButtonClicked){var o=TP("...",void 0,void 0,function(){m.smartClose=!1,dv.config.dataBindingsForSymbol.onButtonClicked(m,m.v("compProperty"))});I.push(o),U.push(20)}if(m.addRow(I,U),!dv.config.dataBindingsForSymbol.getComboBoxValues){var x=m.getItemById("property").element;x.getElement().addEventListener("keydown",function(P){ht.Default.isEnter(P)&&m.hide(!0)})}m.addLine(),m.addRow([{id:"head",element:""}],[.1]),m.addRow([{id:"func",element:Hv()}],[.1],.1),m.addRow([{id:"end",element:"}"},{button:{label:H("editor.ok"),onClicked:function(){m.hide(!0)}}},{button:{label:H("editor.cancel"),onClicked:function(){m.hide()}}}],[.1,50,50]),m.setWidth(km),m.setHeight(Mm),m.getView().className="ht-editor-databinding",m.getView().style.background=dv.config.color_pane,m.getView().style.border=dv.config.color_pane_dark+" solid 1px",m.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,m.getView().style.overflow="visible";var N=m.handleWindowClick.bind(m);return window.addEventListener("mousedown",N,!1),window.addEventListener("touchstart",N,!1),m}return Dv(v,P),v.prototype.handleWindowClick=function(P){if(this.smartClose&&this.getView().parentNode&&!this.button.getView().contains(P.target)){var v=this.getViewById("type");if(!v.getListView().getView().contains(P.target)){if(v=this.getViewById("property"),v instanceof ht.widget.ComboBox){if(v.getListView().getView().contains(P.target))return;if(v.getInput()&&v.getInput().contains(P.target))return}this.getView().contains(P.target)||this.hide()}}},v.prototype.toggle=function(P,v,r,m,H,I){this.getView().parentNode?this.hide():this.show(P,v,r,m,H,I)},v.prototype.show=function(P,v,r,m,H,I){var Y=this;dv.config.dataBindingsForSymbol.getComboBoxValues?dv.config.dataBindingsForSymbol.getComboBoxValues(function(U){var o=Y.getViewById("property");o.setValues(U),Y.showImpl(P,v,r,m,H,I)}):this.showImpl(P,v,r,m,H,I)},v.prototype.showImpl=function(P,v,r,m,H,I){if(!this.getView().parentNode){this.smartClose=!0;var Y=P.getView().getBoundingClientRect(),U=(this.getView().style,g());ht.Default.appendToScreen(this),Y.bottom+Mm+1>U.height?this.getView().style.top=U.top+Y.top-Mm-1+"px":this.getView().style.top=U.top+Y.bottom+1+"px",this.getView().style.left=U.left+Y.right-km+"px",this.iv(),this.button=P,this.name=v,this.inspector=m,this.setter=I,this.v("compProperty",r||v);var x=void 0,N=!1;this.inspector.global?"clip"===v?(x=H?H():this.inspector.dataModel.a("clip"),this.v("head","function(g, width, height, data, view, image) {"),N=!0):(x=H?H():this.inspector.dataModel.a(v+"_func"),this.v("head","function(data, view) {")):(x=H?H():this.inspector.data.a(v),this.inspector.data instanceof Om&&"type"===v?(this.v("head","function(g, rect, comp, data, view) {"),N=!0):this.v("head","function(data, view) {"));GP(x)?(xr.test(x)?(this.v("type","attr"),
this.v("property",x.slice(5))):(this.v("type","attr"),this.v("property",x)),this.v("func","")):LP(x)?(this.v("type","func"),this.v("property",""),this.v("func",o(x))):(this.v("type","attr"),this.v("property",""),this.v("func","")),N?(this.v("type","func"),this.v("property",""),this.getViewById("type").setDisabled(!0)):this.getViewById("type").setDisabled(!1)}},v.prototype.hide=function(){var P=this,v=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(_(this.getView()),v)){var r=this.v("type"),m=this.v("property"),H=void 0;if("func"===r){var I=this.v("func").trim();(I||this.inspector.data instanceof Om&&"type"===this.name)&&(H=x(this.v("head")+"\n"+I+"\n}"))}else m&&"attr"===r&&(H="attr@"+m);this.setter?this.setter(H):this.inspector.global?"clip"===this.name?this.inspector.dataModel.a("clip",H):this.inspector.dataModel.a(this.name+"_func",H):this.inspector.setValue(function(v,r){v.a(P.name,r)},H)}},v}(Bv),im=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editor=r,m.createTabView();var I=[];return I.push({label:H("editor.ok"),action:function(){m.ok()}}),I.push({label:H("editor.cancel"),action:function(){m.hide()}}),m.setConfig({title:H("editor.eventhandlers"),closable:!0,draggable:!0,width:dv.config.eventViewSize.width,height:dv.config.eventViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:m.tabView,buttons:I,buttonsAlign:"right"}),m}return Dv(v,P),v.prototype.$49$=function(){this.hide()},v.prototype.$48$=function(){this.ok()},v.prototype.ok=function(){var P=this;this.target&&Vv.forEach(function(v){var r=P[v+"FormPane"],m=r.v("body").trim();"data"===P.inspectorType?!function(){var r=m?x("function(event, data, view) {\n"+m+"\n}"):void 0;P.target.forEach(function(P){P.s(v,r)})}():!function(){var r=m?x("function(event, data, view, point, width, height) {\n"+m+"\n}"):void 0;P.target.forEach(function(P){P.a(v,r)})}()}),this.callback&&this.callback(),this.hide()},v.prototype.createTabView=function(){var P=this,v=this.tabView=new kr;Vv.forEach(function(r){var m=P[r+"FormPane"]=new Bv;m.addRow([{id:"head",element:""}],[.1]),m.addRow([{id:"body",element:Hv()}],[.1],.1),m.addRow(["}"],[.1]),P[r+"Tab"]=v.add(H("editor.event."+r.toLowerCase()),m)}),v.getTabModel().sm().ss(v.getTabModel().getDatas().get(0))},v.prototype.open=function(P,v,r){var m=this;P&&P.length&&(this.target=P,this.inspectorType=v,this.callback=r,Vv.forEach(function(r){var H=m[r+"FormPane"];"data"===v?(H.v("head",r+": function(event, data, view) {"),H.v("body",o(P[P.length-1].s(r)))):(H.v("head",r+": function(event, data, view, point, width, height) {"),H.v("body",o(P[P.length-1].a(r))))}),this.show())},v}(zv),$m=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editor=r,m.formPane=new Bv;var I=m.raws=[],Y=m.formPane.addRow([{id:"head",element:"function() {"}],[.1]);I.push(Y),Y=m.formPane.addRow([{id:"function",element:Hv()}],[.1],.1),I.push(Y),Y=m.formPane.addRow(["}"],[.1]),I.push(Y);var U=[];return U.push({label:H("editor.ok"),action:function(){m.ok()}}),U.push({label:H("editor.cancel"),action:function(){m.hide()}}),m.setConfig({title:H("editor.function"),closable:!0,draggable:!0,width:dv.config.functionViewSize.width,height:dv.config.functionViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:m.formPane,buttons:U,buttonsAlign:"right"}),m}return Dv(v,P),v.prototype.$49$=function(){this.hide()},v.prototype.$48$=function(){this.ok()},v.prototype.parse=function(P){if(P){var v=this.getFunctionHead();return P=P.trim(),v?P=""+v+P+"}":P.startsWith("function")||(P="function() {\n"+P+"\n}"),x(P)}},v.prototype.ok=function(){this.setValue&&this.setValue(this.parse(this.formPane.v("function"))),this.hide()},v.prototype.setFormRows=function(){var P=this.formPane,v=this.raws,r=this._argList;this._argList?P._rows=v:P._rows=[v[1]],P.iv(),r&&P.v("head",this.getFunctionHead())},v.prototype.getFunctionHead=function(){var P=this._argList;if(P)return"function("+(ht.Default.isArray(P)?P.join(", "):P)+") {"},v.prototype.stringifyFunction=function(P){var v=U(P);if(this._argList){var r=v.indexOf("{"),m=v.lastIndexOf("}");v=v.substring(r+1,m)}return v},v.prototype.open=function(P,v,r,m){this.setValue=v,this._argList=m,this.setTitle(r),this.setFormRows(),this.formPane.v("function",this.stringifyFunction(P)),this.show()},v}(zv);dv.FunctionView=$m;var Xm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editor=r,m.formPane=new Bv,m.formPane.addRow([{id:"object",element:Hv()}],[.1],.1);var I=[];return I.push({label:H("editor.ok"),action:function(){m.ok()}}),I.push({label:H("editor.cancel"),action:function(){m.hide()}}),m.setConfig({title:H("editor.object"),closable:!0,draggable:!0,width:dv.config.objectViewSize.width,height:dv.config.objectViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:m.formPane,buttons:I,buttonsAlign:"right"}),m}return Dv(v,P),v.prototype.$49$=function(){this.hide()},v.prototype.$48$=function(){this.ok()},v.prototype.ok=function(){if(this.setValue){var P=this.formPane.v("object").trim(),v=new Function("return "+P);P=v(),this.setValue(P)}this.hide()},v.prototype.open=function(P,v,r){if(this.setValue=v,this.setTitle(r),P=this.stringify(P,4)){this._funcMap;for(var m in this._funcMap)P=P.replace('"'+m+'"',U(this._funcMap[m]))}this.formPane.v("object",P),this.show()},v.prototype.stringify=function(P,v){var r=this,m=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()},this._funcMap={};var H=JSON.stringify(P,function(P,v){if("function"==typeof v){var m=Math.random().toString().substring(3,16)+Date.now();return r._funcMap[m]=v,m}return v},null==v?2:v);return Date.prototype.toJSON=m,H},v}(zv);dv.ObjectView=Xm;var _m=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editor=r,m.formPane=new Bv,m.formPane.addRow([{id:"text",textArea:{}}],[.1],.1);var I=[];return I.push({label:H("editor.ok"),action:function(){m.ok()}}),I.push({label:H("editor.cancel"),action:function(){m.hide()}}),m.setConfig({closable:!0,draggable:!0,width:dv.config.textViewSize.width,height:dv.config.textViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:m.formPane,buttons:I,buttonsAlign:"right"}),m}return Dv(v,P),v.prototype.$49$=function(){this.hide()},v.prototype.$48$=function(){this.ok()},v.prototype.ok=function(){this.setValue&&this.setValue(this.formPane.v("text")),this.hide()},v.prototype.open=function(P,v,r){this.setValue=v,this.setTitle(r),this.formPane.v("text",P),this.show()},v}(zv),wm=function(){function P(){hv(this,P)}return P.prototype.init=function(){var P=this.baseFonts=["monospace","sans-serif","serif"],v=this.testString="mmmmmmmmmmlli",r=this.testSize="72px",m=this.h=document.getElementsByTagName("body")[0],H=this.s=document.createElement("span");H.style.fontSize=r,H.innerHTML=v;var I=this.defaultWidth={},Y=this.defaultHeight={};for(var U in P)H.style.fontFamily=P[U],m.appendChild(H),I[P[U]]=H.offsetWidth,Y[P[U]]=H.offsetHeight,m.removeChild(H);this.initialized=!0},P.prototype.detect=function(P){this.initialized||this.init();var v=!1,r=this.baseFonts,m=this.s,H=this.h,I=this.defaultWidth,Y=this.defaultHeight;for(var U in r){m.style.fontFamily=P+","+r[U],H.appendChild(m);var o=m.offsetWidth!=I[r[U]]||m.offsetHeight!=Y[r[U]];H.removeChild(m),v=v||o}return v},P}(),cm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m}return Dv(v,P),v.prototype.init=function(){var P=this;this._detector=new wm;var v=32,r=this.borderPane=new ur,m=this.rightBorder=new ur,I=this.previewGraph=new ht.graph.GraphView,Y=this.listView=new Jr,U=this.formPane=new Bv;Y.getView().style.borderRight="2px solid #f7f7f7",Y.getLabelFont=function(P){return"14px "+P.getName()},r.setLeftView(Y),r.setCenterView(m),r.setLeftWidth(180),m.setBottomView(I),m.setBottomHeight(120),m.setCenterView(U),I.adjustTranslateX=function(){return 0},I.adjustTranslateY=function(){return 0},I.handleScroll=function(){return!1},I.setScrollBarVisible(!1);var o=this.textNode=new ht.Text;o.s({"2d.selectable":!1,text:dv.config.fontPreview}),o.setAnchor(0,0),o.setSize(2e3,120),o.p(4,4),I.dm().add(o);var x=60;U.setVPadding(32),U.setVGap(18),U.setHGap(0),U.addRow([{element:H("editor.font.style"),align:"right"},"",{id:"normal",button:this.createStyleButton(H("editor.font.normal"))},{id:"bold",button:this.createStyleButton(H("editor.font.bold"))},{id:"oblique",button:this.createStyleButton(H("editor.font.oblique"))},{id:"obliqueBold",button:this.createStyleButton(H("editor.font.obliqueBold"))}],[x,8,.1,.1,.1,.1],v),U.addRow([{element:H("editor.font.size"),align:"right"},"",{id:"fontSize",slider:{max:72,min:12,step:1,onValueChanged:function(v,r){U.getItemById("fontSizeLabel").element=r+"",U.iv(),P._handleFontChange()}}},{id:"fontSizeLabel",element:"12"}],[x,8,.1,20],v),U.addRow([{element:"\u8f93\u51fa",align:"right"},"",{id:"fontOutput",textField:{editable:!1,value:this.getFontString()}}],[x,8,.1],v);var N=[];N.push({label:H("editor.ok"),action:function(){P.ok()}}),N.push({label:H("editor.cancel"),action:function(){P.hide()}}),this.initFontList(),this.setConfig({closable:!0,draggable:!0,width:dv.config.fontViewSize.width,height:dv.config.fontViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:r,buttons:N,buttonsAlign:"right"}),this._init=!0},v.prototype.createStyleButton=function(P){var v=this;return{label:P,groupId:"fontStyle",labelSelectColor:dv.config.color_select,labelColor:"#2c2c2c",borderSelectColor:"red",background:"rgb(247,247,247)",selectBackground:"rgb(247,247,247)",togglable:!0,borderColor:null,onClicked:function(P){v._handleFontChange()}}},v.prototype.initFontList=function(){var P=this,v=this.listView,r=v.getView().style,m=v.dm(),H=this._detector,I=dv.config.fontList;return v.sm().ms(function(v){P._handleFontChange(v)}),I.forEach(function(P){if(H.detect(P)){var v=new ht.Node;v.setIcon(null),v.setName(P),m.add(v)}}),m.sm().setSelectionMode("multiple"),r.background="white",v},v.prototype.$49$=function(){this.hide()},v.prototype.$48$=function(){this.ok()},v.prototype._handleFontChange=function(){this.textNode.s("text.font",this.getFontString()),this.formPane.v("fontOutput",this.getFontString())},v.prototype.getFontString=function(){var P=this.listView,v=this.formPane,r=P.sm().getSelection().toArray(),m="",H=r.map(function(P){return P.getName()});return H.length||(H=["arial"]),["bold","oblique","obliqueBold"].forEach(function(P,r){var H=v.getItemById(P);H.element.isSelected()&&(0===r?m="bold ":1===r?m="italic ":2===r&&(m="italic bold "))}),""+m+v.getValue("fontSize")+"px "+H.join(", ")},v.prototype.ok=function(){this.setValue&&this.setValue(this.getFontString()),this.hide()},v.prototype.analysisFontString=function(){var P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht.Default.labelFont;"string"!=typeof P&&(P=ht.Default.labelFont);var v=P.split(/px\s+/),r=v[0].split(/\s+/),m=v[1].split(",").map(function(P){return P.trim()}),H=/\d+/,I=void 0,Y=void 0,U=void 0;r.forEach(function(P){"bold"===P?I=!0:"oblique"===P||"italic"===P?Y=!0:H.test(P)&&(U=parseInt(P))}),this.setFormValue(U,m,I,Y)},v.prototype.setFormValue=function(P,v,r,m){var H=this.listView,I=this.formPane;H.sm().cs(),H.dm().each(function(P){v.forEach(function(v){P.getName().toLowerCase()===v.toLowerCase()&&H.sm().as(P)})});var Y=0;r&&m?Y=3:r?Y=1:m&&(Y=2),["normal","bold","oblique","obliqueBold"].forEach(function(P,v){var r=I.getItemById(P);r.element.setSelected(Y===v)}),I.getItemById("fontSizeLabel").element=P+"",I.setValue("fontSize",P)},v.prototype.open=function(P,v,r){this._init||this.init(),this.setValue=v,this.setTitle(r),this.analysisFontString(P),this.show()},v}(zv);dv.FontView=cm;var hm=300,em=230,Dm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));m.editor=r,m.addRow([{id:"content",textArea:{}}],[.1],.1),m.addRow([null,{button:{label:H("editor.ok"),onClicked:function(){m.hide(!0)}}},{button:{label:H("editor.cancel"),onClicked:function(){m.hide()}}}],[.1,50,50]),m.setWidth(hm),m.setHeight(em),m.getView().className="ht-editor-styleicons",m.getView().style.background=dv.config.color_pane,m.getView().style.border=dv.config.color_pane_dark+" solid 1px",m.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,m.getView().style.overflow="visible";var I=function(P){!m.getView().parentNode||m.button.getView().contains(P.target)||m.getView().contains(P.target)||m.hide()};return window.addEventListener("mousedown",I,!1),window.addEventListener("touchstart",I,!1),m}return Dv(v,P),v.prototype.toggle=function(P,v){this.getView().parentNode?this.hide():this.show(P,v)},v.prototype.show=function(P,v){if(!this.getView().parentNode){var r=P.getView().getBoundingClientRect(),m=(this.getView().style,g());ht.Default.appendToScreen(this),this.getView().style.top=m.top+r.top+"px",this.getView().style.left=m.left+r.left-hm-4+"px",this.iv(),this.button=P,this.data=v;var H=v.s("icons");this.v("content",H?b(H):"")}},v.prototype.hide=function(){var P=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(_(this.getView()),P)){var v=this.v("content").trim();this.data.s("icons",v?k(v):void 0)}},v}(Bv),Rm=function(){function P(v){var r=this;hv(this,P),this.editor=v;var m=this.container=ht.Default.createDiv(),H=this.wrap=ht.Default.createDiv(),I=m.style;I.pointerEvents="none",I.position="absolute",I.left=0,I.right=0,I.top=0,I.bottom=0,m.appendChild(H),I=H.style,I.width="600px",I.position="absolute",I.left="50%",I.bottom="20px",I.marginLeft="-300px",I.pointerEvents="none",this._cache=[],this._visibleCount=0,this.layoutContainer(),window.addEventListener("resize",function(){r.layoutContainer()})}return P.prototype.layoutContainer=function(){var P=this.container,v=ht.Default.getWindowInfo(),r=P.style;r.width=v.width+"px",r.height=v.height+"px"},P.prototype.createMessage=function(P){var v=this._cache.pop();if(!v){v=document.createElement("div");var r=v.style;r.boxSizing="border-box",r.padding=0,r.backgroundColor="rgba(61,61,61,0.15)",r.color="rgb(247,247,247)",r.margin="5px auto",r.textAlign="center",r.borderRadius="19px",r.height=0,r.overflow="hidden",r.pointerEvents="none",r.webkitTransition="0.3s all",r.mozTransition="0.3s all",r.msTransition="0.3s all",r.oTransition="0.3s all",r.transition="0.3s all"}return v.innerText=P,v},P.prototype.show=function(P){var v=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,H=this.createMessage(P);this.wrap.appendChild(H),this._visibleCount||document.body.appendChild(this.container),this._visibleCount++,H.style.backgroundColor=r===Ur?"rgba(61,61,61,0.15)":"#FF7C7C",setTimeout(function(){H.style.height="38px",H.style.padding="8px 20px",v.hideLater(H,m)},10)},P.prototype.hideLater=function(P,v){var r=this;setTimeout(function(){P.style.height=0,P.style.padding=0,setTimeout(function(){r.wrap.removeChild(P),r._cache.push(P),r._visibleCount--,r._visibleCount||document.body.removeChild(r.container)},500)},v)},P}();dv.MessageView=Rm;var zm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m}return Dv(v,P),v.prototype.init=function(){var P=this,v=this.dm=new ht.DataModel,r=this.gv=new ht.graph.GraphView(v),m=this.rightFormPane=new Bv,I=this.splitView=new jr(r,m,"h",.6),Y=this.targetNode=new ht.Node;Y.setAnchor(0,0),Y.p(0,0),Y.s("2d.selectable",!1),r.dm().add(Y),r.setEditable(!0),r.addBottomPainter(function(P){var v=this.getViewRect();P.fillStyle="#cbd3d8",P.fillRect(v.x,v.y,v.width,v.height);var r=Y.getRect();P.fillStyle="#fff",P.fillRect(r.x,r.y,r.width,r.height)});var U=[{label:H("editor.ok"),action:function(){P.editor.dm.a("attachPoints",P.toPointsData()),P.hide()}},{label:H("editor.cancel"),action:function(){P.hide()}}];this.setConfig({title:"\u5438\u9644\u70b9",content:I,closable:!0,draggable:!0,maximizable:!0,resizeMode:"wh",buttons:U,width:dv.config.attachPointsViewSize.width,height:dv.config.attachPointsViewSize.height}),this.$81$(),v.md(function(P){if("position"===P.property&&P.data!==Y){var v=P.data,r=v.a("offsetX"),m=v.a("offsetY"),H=P.newValue.x-r,I=P.newValue.y-m;v.a({x:parseFloat((H/Y.getWidth()).toFixed(2)),y:parseFloat((I/Y.getHeight()).toFixed(2))})}}),r.mp(function(P){if("zoom"===P.property){var m=1/r.getZoom();v.each(function(P){P!==Y&&P.setScale(m,m)})}}),this._init=!0},v.prototype.$81$=function(){var P=this,v=new br(this.dm),r=this.tableView=v.getTableView();r.isVisible=function(v){return v!==P.targetNode},r.setEditable(!0),v.getView().style.border=dv.config.color_line+" solid 1px",v.addColumns([this.$74$("x","X",70,function(v,r,m,H){var I=P.targetNode.getWidth();v.setX(I*m+(v.a("offsetX")||0))}),this.$74$("y","Y",70,function(v,r,m,H){var I=P.targetNode.getHeight();v.setY(I*m+(v.a("offsetY")||0))}),this.$74$("offsetX","Offset X",70,function(v,r,m,H){v.a("offsetX",m);var I=P.targetNode.getWidth();v.setX(I*v.a("x")+m)}),this.$74$("offsetY","Offset Y",70,function(v,r,m,H){v.a("offsetY",m);var I=P.targetNode.getHeight();v.setY(I*v.a("y")+m)})]);var m=dv.config.customAttachPointsColumns;if(m&&m.length){var I=this.customColumns=m.map(function(v){return P.$74$(v.name,v.displayName,v.width||70,v.setter,"string")});v.addColumns(I)}this.rightFormPane.addRow([v],[.1],200),this.rightFormPane.addRow([{button:{icon:"editor.add",toolTip:H("editor.add"),onClicked:function(){P.add()}}},{button:{icon:"editor.delete",toolTip:H("editor.delete"),onClicked:function(){P.remove()}}}],[20,20],20)},v.prototype.add=function(){var P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,H=new ht.Node,I=1/this.gv.getZoom();H.setImage("editor.attachPoint"),H.setScale(I,I),H.a({x:P,y:v,offsetX:r,offsetY:m}),H.s({"2d.editable":!1});var Y=this.targetNode.getWidth(),U=this.targetNode.getHeight();H.p(P*Y+r,v*U+m),this.gv.dm().add(H)},v.prototype.remove=function(){for(var P=this.dm.sm().getSelection().toArray(),v=P.length-1;v>=0;v--)this.dm.remove(P[v])},v.prototype.$74$=function(P,v,r,m){var H=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"number";return{name:P,tag:P,width:r,displayName:v,align:"center",editable:!0,valueType:H,getValue:function(v){return v.a(P)},setValue:m}},v.prototype.toPointsData=function(){var P=this,v=this.dm.toDatas(function(v){return v!==P.targetNode}).toArray();return v.map(function(v){var r={x:v.a("x"),y:v.a("y")};return v.a("offsetX")&&(r.offsetX=v.a("offsetX")),v.a("offsetY")&&(r.offsetY=v.a("offsetY")),P.customColumns&&P.customColumns.forEach(function(P){var m=v.a(P.name);m&&(r[P.name]=m)}),r})},v.prototype.$49$=function(){this.hide()},v.prototype.createNodeByPointData=function(){var P=this,v=this.editor.dm.a("attachPoints");v&&v.forEach(function(v){P.add(v.x,v.y,v.offsetX,v.offsetY)})},v.prototype.show=function(v){this._init||this.init(),this.dm.clear(),this.dm.add(this.targetNode),this.targetNode.setImage(v),this.createNodeByPointData(),P.prototype.show.call(this),this.gv.fitContent(!0)},v}(zv),Bm=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m}return Dv(v,P),v.prototype.init=function(){var P=this,v=this.formPane=new Bv,r=24;v.setVPadding(2),v.setVGap(8),v.setHGap(0),v.addRow([{element:H("editor.size"),background:dv.config.color_pane_dark}],[.1],r),v.addRow([H("editor.width"),{id:"width",type:"number",textField:{value:30}},H("editor.height"),{id:"height",type:"number",textField:{value:40}}],[64,.1,64,.1],r),v.addRow([{element:H("editor.content"),background:dv.config.color_pane_dark}],[.1],r),v.addRow([{id:"uppercase",checkBox:{label:H("editor.uppercase"),selected:!0}},{id:"lowercase",checkBox:{label:H("editor.lowercase"),selected:!0}},{id:"number",checkBox:{label:H("editor.valuetype.number"),selected:!0}}],[.1,.1,.1],r),v.addRow([H("editor.custom"),{id:"content",textField:{}}],[64,.1],r);var m=[];m.push({label:H("editor.ok"),action:function(){P.ok()}}),m.push({label:H("editor.cancel"),action:function(){P.hide()}}),this.setConfig({closable:!0,draggable:!0,title:H("editor.converteroption"),width:320,height:240,contentPadding:6,resizeMode:"wh",maximizable:!0,content:v,buttons:m,buttonsAlign:"right"}),this._init=!0},v.prototype.ok=function(){var P=this.formPane,v=P.v("width"),r=P.v("height"),m=P.v("uppercase"),H=P.v("lowercase"),I=P.v("number"),Y=P.v("content"),U="";m&&(U+="ABCDEFGHIJKLMNOPQRSTUVXWYZ"),H&&(U+="abcdefghijklmnopqrstuvxwyz"),I&&(U+="1234567890"),U+=Y;var o={width:v,height:r,texts:U};this.callback&&this.callback(o),delete this.callback,this.hide()},v.prototype.open=function(P){this._init||this.init(),this.callback=P,this.show()},v}(zv),lm=function P(v,r){var m=this;hv(this,P),this.editor=v,this.inspector=r,["isDataTitleVisible","isDataPropertyVisible","isCompTitleVisible","isCompPropertyVisible","isDisplayTitleVisible","isDisplayPropertyVisible","isSymbolTitleVisible","isSymbolPropertyVisible"].forEach(function(P){m[P]=function(){return!(dv.config.detailFilter[P]&&!dv.config.detailFilter[P].apply(r,arguments))&&!(v.inspectorCompact&&dv.config.compactFilter[P]&&!dv.config.compactFilter[P].apply(r,arguments))}})},dm=function(P){function v(r,m,H){var I=arguments.length>3&&void 0!==arguments[3]&&arguments[3];hv(this,v);var Y=Rv(this,P.call(this));return Y.setHPadding(8),Y.global=I,Y.editor=r,Y.name=m,Y.type=H,Y.setVPadding(0),Y.inspectorFilter=new lm(r,Y),Y.updateHandlers=[],Y.propertyChangeHandlers=[],Y.editor.fireEvent("inspectorInitializing",{inspector:Y}),Y.initForm(),Y.editor.fireEvent("inspectorInitialized",{inspector:Y}),Y.$104$(),Y.editor.fireEvent("inspectorCreated",{inspector:Y}),Y.$47$=Y._rows,Y}return Dv(v,P),v.prototype.initForm=function(){},v.prototype.beginTransaction=function(){this.dataModel&&this.dataModel.beginTransaction()},v.prototype.endTransaction=function(){this.dataModel&&this.dataModel.endTransaction()},v.prototype.addUpdateHandler=function(P){this.updateHandlers.push(P)},v.prototype.removeUpdateHandler=function(P){I(this.updateHandlers,P)},v.prototype.addPropertyChangeHandler=function(P){this.propertyChangeHandlers.push(P)},v.prototype.removePropertyChangeHandler=function(P){I(this.propertyChangeHandlers,P)},v.prototype.$104$=function(){for(var P=this._rows,v=!0,r=P.length-1;r>=0;r--)P[r].title?v?this.removeRow(P[r]):v=!0:v=!1},v.prototype.isTitleVisible=function(P){return P.visible!==!1&&(!LP(P.visible)||P.visible(this)!==!1)},v.prototype.isPropertyVisible=function(P){var v=this.editor.inspectorInputFilter;if(v){if(!P.keys)return!1;v=v.toLowerCase();var r=P.keys.name;if(r&&r.toLowerCase().indexOf(v)>=0)return!0;var m=P.keys.displayName;return!!(m&&m.toLowerCase().indexOf(v)>=0)}return P.visible!==!1&&!(LP(P.visible)&&!P.visible(this))},v.prototype.makeItemsHidden=function(P){var v=this;P.hidden=!0,P.forEach(function(P){var r=v.getItemView(P);r&&(r.style.display="none")})},v.prototype.makeItemsVisible=function(P){var v=this;P.hidden=!1,P.forEach(function(P){var r=v.getItemView(P);r&&(r.style.display="block")})},v.prototype.filterPropertiesLater=function(){var P=this;this._filterPropertiesLater||(this._filterPropertiesLater=!0,requestAnimationFrame(function(){P.filterProperties()}))},v.prototype.isTitleExpanded=function(P){return!(P&&!this.editor.inspectorInputFilter)||dv.config.expandedTitles[P]},v.prototype.filterProperties=function(){var P=this;this._filterPropertiesLater=!1;var v=[],r=void 0,m=!1;this.$47$.forEach(function(H){var I=H.items;H.title?(P.isTitleVisible(H)?(r=H.title,H.button.setIcon(P.isTitleExpanded(r)?"expandIcon":"collapseIcon"),!m&&v.length&&v[v.length-1].title&&P.makeItemsHidden(v.pop().items),v.push(H),P.makeItemsVisible(I)):(r="HTISFUCKINGAWESOME",P.makeItemsHidden(I)),m=!1):(P.isTitleExpanded(r)&&P.isPropertyVisible(H)?(v.push(H),P.makeItemsVisible(I)):P.makeItemsHidden(I),!m&&P.isPropertyVisible(H)&&(m=!0))}),!m&&v.length&&v[v.length-1].title&&this.makeItemsHidden(v.pop().items),this._rows=v,this.updateProperties(),this.iv()},v.prototype.addTitle=function(P,v){var r=this,m=this._oldTitle;this.editor.fireEvent("titleCreating",{oldTitle:m,title:P,inspector:this});var I=function(){dv.config.expandedTitles[P]=!dv.config.expandedTitles[P],r.filterProperties()},Y=[],U=this.addButton(Y,null,null,null,I,!0);U.setBorderColor(null);var o=H("editor."+P.toLowerCase(),!0)||H(P);Y.push({element:o,font:dv.config.boldFont}),v=v||{},v.title=P,v.background=dv.config.color_pane_dark,v.button=U;var x=this.addRow(Y,[20,.1],dv.config.inspectorTitleHeight||null,v);return this._oldTitle=P,this.editor.fireEvent("titleCreated",{oldTitle:m,title:P,inspector:this}),x},v.prototype.$35$=function(P){var v=this;P&&(this.propertyChangeHandlers.forEach(function(r){r(P,v)}),this.$47$.forEach(function(r){r.onPropertyChanged&&r.onPropertyChanged(P,v)})),this._updatePropertiesLater||(this._updatePropertiesLater=!0,requestAnimationFrame(function(){v.updateProperties()}))},v.prototype.updateProperties=function(){this._updating=!0,this.updateHandlers.forEach(function(P){P()}),this.editor.fireEvent("propertiesUpdated",{inspector:this}),this._updating=!1,this._updatePropertiesLater=!1},v.prototype.eachSelection=function(P){this.dataModel&&(this.beginTransaction(),this.dataModel.sm().each(function(v){P(v)}),this.endTransaction())},v.prototype.getPropertyValue=function(P,v){v=this.fixAccessType(v);var r=N(v,P);return this.getValue(r)},v.prototype.setPropertyValue=function(P,v,r,m){r=this.fixAccessType(r);var H=E(r,P);H.once=m,this.setValue(H,v)},v.prototype.getValue=function(P){if(this.dataModel)return this.global?P(this.dataModel):this.data?P(this.data):void 0},v.prototype.setValue=function(P,v,r){!this._updating&&this.dataModel&&this.editor.editable&&(this.beginTransaction(),this.global?P(this.dataModel,r?r():v):P.once?this.data&&P(this.data):this.dataModel.sm().each(function(m){P(m,r?r():v)}),this.endTransaction())},v.prototype.addLabelArray=function(P,v,r,m,H){return this.addLabel(P,v,r,m),this.addArray(P,r,m,H)},v.prototype.addLabelTextArea=function(P,v,r,m){return this.addLabel(P,v,r,m),this.addTextArea(P,r,m)},v.prototype.addLabelMultiline=function(P,v,r,m){var H=this;this.addLabelInput(P,v,r,m),this.addButton(P,"...",null,null,function(P){var I=function(P){H.setValue(m,P)};H.editor.textView.open(H.getValue(r),I,v)},!0)},v.prototype.addLabelInput=function(P,v,r,m,H,I,Y){return this.addLabel(P,v,r,m,I),this.addInput(P,r,m,H,Y)},v.prototype.addLabelRange=function(P,v,r,m,H,I,Y,U){return this.addLabelInput(P,v,function(P){var v=r(P);return null==v?I:v},m?function(P,v){void 0!==I&&v>I&&(v=I),void 0!==H&&v<H&&(v=H),m(P,v)}:null,U,Y)},v.prototype.addLabelColor=function(P,v,r,m){return this.addLabel(P,v,r,m),this.addColor(P,r,m)},v.prototype.addLabelCheckBox=function(P,v,r,m){return this.addLabel(P,v,r,m),this.addCheckBox(P,r,m)},v.prototype.addLabelFunction=function(P,v,r,m,H,I){return this.addLabel(P,v,r,m),this.addFunction(P,r,m,H,I)},v.prototype.addLabelObject=function(P,v,r,m,H){return this.addLabel(P,v,r,m),this.addObject(P,r,m,H)},v.prototype.addLabelComboBox=function(P,v,r,m,H,I,Y){return this.addLabel(P,v,r,m),this.addComboBox(P,r,m,H,I,Y)},v.prototype.addLabelURL=function(P,v,r,m,H){var I=this.addLabelInput(P,v,r,m,null,null,!1);return m&&!function(){var P=I.getElement();I.isDroppable=H||function(P,v){return!!v.view.draggingData},I.handleCrossDrag=function(v,r,m){"enter"===r?P.style.border="solid "+dv.config.color_select_dark+" 2px":"exit"===r||"cancel"===r?P.style.border="":"over"===r||"drop"===r&&(P.style.border="",P.value=m.view.draggingData.getFileUUID(),I.setFocus(),I.handleChange())}}(),I},v.prototype.addLabelImage=function(P,v,r,m){var H=function(P,v){if(!v.view.draggingData)return!1;var r=v.view.draggingData.fileType;return r===yv||r===Av};return this.addLabelURL(P,v,r,m,H),this.addImage(P,r,m)},v.prototype.addLabelGradient=function(P,v,r,m,H){var I=this,Y=[],U=function(){return I.data&&I.data.s(H)||dv.config.color_light},o=function(){return I.data&&I.data.s(m)||dv.config.color_select};dv.consts.gradients.forEach(function(P){P?Y.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:P,gradientColor:{func:U},background:{func:o}}]}):Y.push({width:20,height:14,comps:[]})});var x=this.addLabelComboBox(P,v,function(P){return P.s(r)},function(P,v){P.s(r,v)},dv.consts.gradients,null,Y);this.updateHandlers.push(function(){if(!P.hidden){var v=U(),r=o();x._lastGradientColor===v&&x._lastBackground===r||(x._lastGradientColor=v,x._lastBackground=r,x.iv())}})},v.prototype.addLabelFont=function(P,v,r,m){var H=this;this.addLabelInput(P,v,function(P){return r(P)||ht.Default.labelFont},m?function(P,v){m(P,v||void 0)}:null),this.addButton(P,"...",null,null,function(P){var I=function(P){H.setValue(m,P)};H.editor.fontView.open(H.getValue(r),I,v)},!0)},v.prototype.addLabelRotation=function(P,v,r,m,H,I,Y){return this.addLabelInput(P,v,function(P){var v=r(P);return null==v?I:180/Math.PI*r(P)},m?function(P,v){v=v*Math.PI/180,void 0!==I&&v>I&&(v=I),void 0!==H&&v<H&&(v=H),m(P,v)}:null,"number",Y||1)},v.prototype.addLabelAlign=function(P,v,r,m){return this.addLabelComboBox(P,v,function(P){return r(P)||"center"},m,dv.consts.aligns,dv.consts.alignLabels)},v.prototype.addLabelVAlign=function(P,v,r,m){return this.addLabelComboBox(P,v,function(P){return r(P)||"bottom"},m,dv.consts.vAligns,dv.consts.vAlignLabels)},v.prototype.addLabelStretch=function(P,v,r,m){this.addLabelComboBox(P,v,function(P){return r(P)||"fill"},m,dv.consts.stretchs,dv.consts.stretchLabels)},v.prototype.addOrientation=function(P,v,r,m){return this.addLabelComboBox(P,v,function(P){return r(P)||"top"},m,dv.consts.orientations,dv.consts.orientationLabels)},v.prototype.addLabelLabel=function(P,v,r,m){this.addLabelInput(P,v,function(P){var v=r(P);return v&&v.replace&&(v=v.replace(/\n/g,"\\n")),v},m?function(P,v){v&&v.replace&&(v=v.replace(/\\n/g,"\n")),m(P,v)}:null)},v.prototype.toDisplayName=function(P){var v=P[0];if(v){if(GP(v))return v;if(GP(v.element))return v.element;if(v.element)return v.element.innerHTML}},v.prototype.addLabel=function(P,v,r,m,H){var I=this;if(H&&m){var Y=VP(v,P.length?"right":"left");P.push(Y),Y.style.cursor="ew-resize";var U=function(P){P.preventDefault(),I.beginTransaction();var v=I.getValue(r)||0,Y=S(P).x,U=function(P){P.preventDefault();var r=v+(S(P).x-Y)*H;I.setValue(m,r)};window.addEventListener("mousemove",U,!1),window.addEventListener("touchmove",U,!1);var o=function(P){I.endTransaction(),P.preventDefault(),window.removeEventListener("mousemove",U,!1),window.removeEventListener("touchmove",U,!1),window.removeEventListener("mouseup",o,!1),window.removeEventListener("touchend",o,!1)};window.addEventListener("mouseup",o,!1),window.addEventListener("touchend",o,!1)};return Y.addEventListener("mousedown",U,!1),Y.addEventListener("touchstart",U,!1),Y}var o={element:v,align:P.length?"right":"left"};return P.push(o),o},v.prototype.createHandleChange=function(P,v,r){var m=this;return function(){var H=P.value;if("pattern"===r)if(H=H.trim()){if(H.indexOf("[")<0||H.indexOf("]")<0)return;if(H=H.replace("[","").replace("]","").split(","),H.length){for(var I=[],Y=0;Y<H.length;Y++){var U=parseFloat(H[Y]);if(isNaN(U))return;I.push(U)}H=I}else H=void 0}else H=void 0;else if("number"===r){if(H=parseFloat(H),isNaN(H))return}else if("int"===r){if(H=parseInt(H),isNaN(H))return}else H||(H=void 0);m.setValue(v,H)}},v.prototype.createArrayIndexColumn=function(P,v,m,I){var Y=this,U=P[v],o="object"===I?b(U):U;return{name:v,width:50,align:"center",editable:!!m,sortable:!1,clickable:!1,getValueType:function(P){return I},getValue:function(P){return o},setValue:function(H,I,U,o){Y.setValue(m,void 0,function(){var m=P.slice();return m[v]=r(U),m})},isCellEditable:function(P,r,m,o){if("object"===I){var x=H("editor.object")+" ["+v+"]";return Y.editor.objectView.open(U,function(v){r.setValue(P,r,v,o)},x),!1}return!0}}},v.prototype.addArray=function(P,v,r,m){var I=this,Y=new br;Y.getTableHeader().setMovable(!1),
Y.getView().style.border=dv.config.color_line+" solid 1px";var U=Y.getTableView();return U.getDataModel().add(new ht.Data),this.updateHandlers.push(function(){if(!P.hidden){var o=I.getValue(v);if(U.getColumnModel().clear(),Y.addColumns([{name:H("editor.length"),width:50,align:"center",editable:!!r,sortable:!1,clickable:!1,valueType:"int",getValue:function(P){return o?o.length:0},setValue:function(P,v,H,Y){I.setValue(r,void 0,function(){if(H>=0){var P=vv(o,H);return"number"===m||"int"===m?AP(P):"color"===m&&Pv(P),P}})}}]),o){for(var x=[],N=0;N<o.length;N++)x.push(I.createArrayIndexColumn(o,N,r,m));Y.addColumns(x)}}}),P.push(Y),Y},v.prototype.addTextArea=function(P,v,r){var m=this,H=new ht.widget.TextArea,I=H.getElement();return r?(I.onblur=function(){m.setValue(r,I.value)},I.forceOnblur=I.onblur):H.setEditable(!1),this.updateHandlers.push(function(){if(!P.hidden){var r=m.getValue(v);null==r&&(r=""),I.value!==r&&(I.value=r)}}),P.push(H),H},v.prototype.addInput=function(P,v,r,H,I){var Y=this,U=new ht.widget.TextField;"number"!==H&&"int"!==H||U.setType("number");var o=U.getElement();return r?!function(){var P=Y.createHandleChange(o,r,H);U.handleChange=P,I?(o.onkeyup=P,o.onchange=P):(o.onblur=P,o.forceOnblur=o.onblur,o.onkeydown=function(v){t(v)&&P()})}():U.setEditable(!1),this.updateHandlers.push(function(){if(!P.hidden){var r=Y.getValue(v);"pattern"===H?r=r?"["+r.join()+"]":"":"number"===H?r=m(parseFloat(r||0)):"int"===H?r=parseInt(r||0):null==r&&(r=""),o.value!==r&&(GP(r)&&r.length>1e3&&r.startsWith("data:image")&&(r=r.substr(0,10)+"[...]"),o.value=r)}}),P.push(U),U},v.prototype.addColor=function(P,v,r){var m=this,H=new ht.widget.ColorPicker;return r?(H.setInstant(!0),H.onValueChanged=function(){m.setValue(r,H.getValue())},H.addViewListener(function(P){"open"===P.kind?m.beginTransaction():"close"===P.kind&&m.endTransaction()})):H.setDisabled(!0),this.updateHandlers.push(function(){if(!P.hidden){var r=m.getValue(v);void 0===r&&(r=null),H.getValue()!=r&&H.setValue(r)}}),P.push(H),H},v.prototype.addImage=function(P,v,r){var m=this,H=new ht.widget.Image;H.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!P.hidden||P.forceToUpdate){var r=m.getValue(v);H.rawIcon=r,r=ht.Default.getImage(r),r&&r.snapshotURL?H.setIcon(r.snapshotURL):H.setIcon(H.rawIcon)}});var I=H.getView();I.style.cursor="pointer";var Y=function(P){P.preventDefault(),q(P)?m.editor.open(H.rawIcon):m.editor.selectFileNode(H.rawIcon)};return I.addEventListener("mousedown",Y,!1),I.addEventListener("touchstart",Y,!1),P.push(H),H},v.prototype.addCheckBox=function(P,v,r){var m=this,H=new ht.widget.CheckBox;return r?H.onValueChanged=function(){m.setValue(r,H.getValue())}:H.setDisabled(!0),this.updateHandlers.push(function(){if(!P.hidden){var r=!!m.getValue(v);H.getValue()!==r&&H.setValue(r)}}),P.push(H),H},v.prototype.addFunction=function(P,v,r,m,I){var Y=this,o=function(){var P=H("editor.function")+" "+(m||""),U=function(P){Y.setValue(r,P)};Y.editor.functionView.open(Y.getValue(v),U,P,I)},x=m||H("editor.function"),N=TP(x,null,null,o);return P.push(N),this.updateHandlers.push(function(){if(!P.hidden){var r=Y.getValue(v);N.setLabel(U(r)),N.setLabelColor(r?dv.config.color_select:ht.Default.labelColor)}}),N},v.prototype.addObject=function(P,v,r,m){var I=this,Y=function(){var P=H("editor.object")+" "+(m||""),Y=function(P){I.setValue(r,P)};I.editor.objectView.open(I.getValue(v),Y,P)},U=TP("",null,null,Y);return P.push(U),this.updateHandlers.push(function(){if(!P.hidden){var r=I.getValue(v);U.setLabel(b(r)),U.setLabelColor(void 0!==r?dv.config.color_select:ht.Default.labelColor)}}),U},v.prototype.addComboBox=function(P,v,r,m,H,I){var Y=this,U=new ht.widget.ComboBox;return U.setValues(m),U.setLabels(H),U.setIcons(I),U.setDisabled(!r),r&&(U.onValueChanged=function(){Y.setValue(r,U.getValue())}),this.updateHandlers.push(function(){if(!P.hidden){var r=Y.getValue(v);U.getValue()!==r&&U.setValue(r)}}),I&&I[0].width&&U.setIndent(I[0].width+4),P.push(U),U},v.prototype.addButton=function(P,v,r,m,H,I){var Y=this,U=function(){Y.global||I?H():Y.eachSelection(H)},o=TP(v,r,m,U);return P.push(o),o},v.prototype.addFuncRow=function(P,v,r,m){var H=this,I=m?this.getRowHeight()*m:null,Y=void 0;if(!dv.config.dataBindingsForSymbol.filter||dv.config.dataBindingsForSymbol.filter(r||v,this)){var U=function(){H.dataModel&&H.editor.funcView.toggle(Y,v,r,H)},o=void 0;o=dv.config.dataBindingsForSymbol.getToolTip?dv.config.dataBindingsForSymbol.getToolTip(r||v,this):(r||v)+": { func: ... }",Y=this.addButton(P,null,o,null,U,!0),this.updateHandlers.push(function(){if(!P.hidden){var r=!1;H.global?H.dataModel&&(r="clip"===v?LP(H.dataModel.a(v)):!!H.dataModel.a(v+"_func")):H.data&&(r=!!H.data.a(v)),Y.setIcon(r?"editor.bind.state":"editor.unbind.state")}})}var x=P.length,N=void 0;return 2===x?N=this.addRow(P,[dv.config.indent,.1],I):3===x?N=this.addRow(P,[dv.config.indent,.1,20],I):4===x?N=this.addRow(P,[dv.config.indent,.1,20,20],I):5===x?N=this.addRow(P,[dv.config.indent,.1,20,20,20],I):6===x&&(N=this.addRow(P,[dv.config.indent,.1,20,20,20,20],I)),N.keys={name:r||v,displayName:this.toDisplayName(P)},!this.addingCustomProperties&&Wr[this.type][r||v]&&this.removeRows([N]),N},v.prototype.addNameRow=function(P,v,r,m){var H=m?this.getRowHeight()*m:null,I=P.length,Y=void 0;return 2===I?Y=this.addRow(P,[dv.config.indent,.1],H):3===I?Y=this.addRow(P,[dv.config.indent,.1,20],H):4===I?Y=this.addRow(P,[dv.config.indent,.1,20,20],H):5===I&&(Y=this.addRow(P,[dv.config.indent,.1,20,20,20],H)),Y.keys={name:v,displayName:this.toDisplayName(P),accessType:r},v=(r?r+":":"")+v,!this.addingCustomProperties&&Wr[this.type][v]&&this.removeRows([Y]),Y},v.prototype.$78$=function(){var P=this;this.addTitle("TitleGridsGuides");var v=[];this.addLabelInput(v,H("editor.gridblocksize"),function(P){return P.a("gridBlockSize")},function(P,v){v>0&&P.a("gridBlockSize",v)},"int",1),this.addNameRow(v,"gridBlockSize","a"),v=[],this.addLabelInput(v,H("editor.gridthicklinesevery"),function(P){return P.a("gridThickLinesEvery")},function(P,v){v>0&&P.a("gridThickLinesEvery",v)},"int",1),this.addNameRow(v,"gridThickLinesEvery","a"),v=[],this.addLabelColor(v,H("editor.gridthickcolor"),function(P){return P.a("gridThickColor")},function(P,v){P.a("gridThickColor",v)}),this.addNameRow(v,"gridThickColor","a"),v=[],this.addLabelColor(v,H("editor.gridlightcolor"),function(P){return P.a("gridLightColor")},function(P,v){P.a("gridLightColor",v)}),this.addNameRow(v,"gridLightColor","a"),v=[],this.addLabelInput(v,H("editor.gridangle"),function(P){return 180/Math.PI*P.a("gridAngle")},function(P,v){P.a("gridAngle",v*Math.PI/180)},"number",1),this.addNameRow(v,"gridAngle","a"),v=[],this.addLabelInput(v,H("editor.gridrotation"),function(P){return 180/Math.PI*P.a("gridRotation")},function(P,v){P.a("gridRotation",v*Math.PI/180)},"number",1),this.addNameRow(v,"gridRotation","a"),v=[],this.addLabelInput(v,H("editor.gridzoomthreshold"),function(P){return P.a("gridZoomThreshold")},function(P,v){v>0&&P.a("gridZoomThreshold",v)},"number",.01),this.addNameRow(v,"gridZoomThreshold","a"),v=[null],this.addButton(v,H("editor.skewgrid"),null,null,function(){P.editor.currentView&&P.editor.currentView.skewGrid&&P.editor.currentView.skewGrid()}),this.addButton(v,H("editor.reset"),null,null,function(){P.editor.currentView&&P.editor.currentView.resetGrid&&P.editor.currentView.resetGrid()}),this.addRow(v,[dv.config.indent,.1,.1],this.getRowHeight())},v.prototype.$27$=function(){var P=this;this.addTitle("TitleEditingPoint");var v={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3};this.editingPointButtons=[];var r=function(r,m){var I=H("editor.editingpoint."+m.toLowerCase()),Y="editor.point."+m.toLowerCase(),U=TP(I,null,Y,function(){P.editor.editInteractor.getSubModule("Curve").setCurrentSelectionStatus(U.statusValue)});U.setOrientation("v"),U.setTogglable(!0),U.setGroupId("editingPoint"),U.statusValue=v[m],P.editingPointButtons.push(U),r.push(U)},m=[];r(m,"Straight"),r(m,"Mirrored"),this.addRow(m,[.1,.1],60),m=[],r(m,"Disconnected"),r(m,"Asymmetric"),this.addRow(m,[.1,.1],60)},v.prototype.addCustomProperties=function(){var P=this,v=dv.config.customProperties[this.type];v&&v.length&&(this.addTitle("TitleCustom"),v.forEach(function(v){P.addCustomProperty(v)}))},v.prototype.fixAccessType=function(P){return P=P||"a","symbol"===this.type?P="a":"comp"===this.type&&(P="s"),P},v.prototype.addEventProperties=function(){var P=this,v=[],r=function(){var v=P.global?P.dataModel:P.data;v&&(v=P.global?[P.dataModel]:P.dataModel.sm().getSelection().toArray()),P.editor.eventView.open(v,P.type)};this.addLabel(v,H("editor.events"));var m=this.addButton(v,H("editor.eventhandlers"),null,null,r,!0);"data"===this.type?(this.addCheckBox(v,function(P){return!!P&&P.s("interactive")},function(P,v){P&&P.s("interactive",v)}),this.addRow(v,[dv.config.indent,.1,20]).keys={name:"eventHandlers"}):this.addRow(v,[dv.config.indent,.1]).keys={name:"eventHandlers"},this.updateHandlers.push(function(){if(!v.hidden){var r=!1,H=P.global?P.dataModel:P.data;Vv.forEach(function(v){r||(r="data"===P.type?H.s(v):H.a(v))}),m.setLabelColor(r?dv.config.color_select:ht.Default.labelColor)}})},v.prototype.addCustomProperty=function(P){var v=P.name,r=P.valueType,m=P.editable!==!1,I=P.defaultValue,Y=this.fixAccessType(P.accessType),U=P.dataBinding,o=P.property;if(r=dv.config.valueTypes[r],!r)return!1;this.addingCustomProperties=!0;var x=[],s=H(v)||o,W=N(Y,o),f=E(Y,o),G=function(P){var v=W(P);return void 0===v&&(v=I),v},t=m?f:null,L=P.extraInfo,O=void 0,Q=void 0,q=void 0;L&&L.enum&&(O=L.enum.values,Q=L.enum.labels,q=L.enum.icons),O?this.addLabelComboBox(x,s,G,t,O,Q,q):"int"===r.type||"number"===r.type?r.angle?this.addLabelRotation(x,s,G,t,r.min,r.max,r.step):this.addLabelRange(x,s,G,t,r.min,r.max,r.step,r.type):"color"===r.type?this.addLabelColor(x,s,G,t):"boolean"===r.type?this.addLabelCheckBox(x,s,G,t):"enum"===r.type?this.addLabelComboBox(x,s,G,t,r.values,r.labels,r.icons):"image"===r.type?this.addLabelImage(x,s,G,t):"url"===r.type?this.addLabelURL(x,s,G,t):"multiline"===r.type?this.addLabelMultiline(x,s,G,t):"colorArray"===r.type?this.addLabelArray(x,s,G,t,"color"):"numberArray"===r.type?this.addLabelArray(x,s,G,t,"number"):"stringArray"===r.type?this.addLabelArray(x,s,G,t,"string"):"objectArray"===r.type?this.addLabelArray(x,s,G,t,"object"):"function"===r.type?this.addLabelFunction(x,s,G,t,o):"object"===r.type?this.addLabelObject(x,s,G,t,o):"font"===r.type?this.addLabelFont(x,s,G,t):"custom"===r.type?r.buildUI(this,x,s,G,t):this.addLabelInput(x,s,G,t);var Z=void 0;"display"!==this.type&&U?"data"===this.type?Z=this.addDBRow(x,Y,o,null,r.rows):"symbol"!==this.type&&"comp"!==this.type||(Z=this.addFuncRow(x,o,null,r.rows)):Z=this.addNameRow(x,Y+":"+o,Y,r.rows),Z&&L&&(Z.visible=L.visible,Z.onPropertyChanged=L.onPropertyChanged),this.addingCustomProperties=!1},v}(Bv);dv.Inspector=dm;var Vm=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m,"display",!0))}return Dv(v,P),v.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.$78$(),this.$79$()},v.prototype.isTitleVisible=function(v){return!!this.inspectorFilter.isDisplayTitleVisible(this.editor,v.title)&&P.prototype.isTitleVisible.call(this,v)},v.prototype.isPropertyVisible=function(v){return!!this.inspectorFilter.isDisplayPropertyVisible(this.editor,v.keys&&v.keys.name)&&P.prototype.isPropertyVisible.call(this,v)},v.prototype.$12$=function(){this.addTitle("TitleBasic");var P=[];this.addLabelInput(P,H("editor.previewurl"),function(P){return P.a("previewURL")},function(P,v){P.a("previewURL",v)}),this.addNameRow(P,"previewURL","a"),P=[],this.addLabelImage(P,H("editor.snapshoturl"),function(P){return P.a("snapshotURL")},function(P,v){P.a("snapshotURL",v)}),this.addNameRow(P,"snapshotURL","a"),P=[],this.addLabelColor(P,H("editor.background"),function(P){return P.getBackground()},function(P,v){P.setBackground(v)}),this.addNameRow(P,"background","p"),P=[],this.addLabelInput(P,H("editor.width"),function(P){return P.a("width")},function(P,v){P.a("width",v)},"number",1),this.addNameRow(P,"width","a"),P=[],this.addLabelInput(P,H("editor.height"),function(P){return P.a("height")},function(P,v){P.a("height",v)},"number",1),this.addNameRow(P,"height","a"),P=[],this.addLabelInput(P,H("editor.datacount"),function(P){return P.size()}),this.addNameRow(P,"count"),P=[];var v=["json","dm","gv"];this.addLabelFunction(P,H("editor.onpredeserialize"),function(P){return P.a("onPreDeserialize")},function(P,v){P.a("onPreDeserialize",v)},"onPreDeserialize",v),this.addNameRow(P,"onPreDeserialize","a"),P=[],v=["json","dm","gv","datas"],this.addLabelFunction(P,H("editor.onpostdeserialize"),function(P){return P.a("onPostDeserialize")},function(P,v){P.a("onPostDeserialize",v)},"onPostDeserialize",v),this.addNameRow(P,"onPostDeserialize","a"),P=[],this.addLabelComboBox(P,H("editor.connectactiontype"),function(P){return P.a("connectActionType")},function(P,v){P.a("connectActionType",v)},dv.consts.displayConnectActionTypes,dv.consts.displayConnectActionTypeLabels),this.addNameRow(P,"connectActionType","a"),P=[],this.addLabelCheckBox(P,H("editor.rotateasclock"),function(P){return P.a("rotateAsClock")},function(P,v){P.a("rotateAsClock",v)}),this.addNameRow(P,"rotateAsClock","a"),P=[],this.addLabelCheckBox(P,H("editor.hierarchicalrendering"),function(P){return P.isHierarchicalRendering()},function(P,v){P.setHierarchicalRendering(v)}),this.addNameRow(P,"hierarchicalRendering","p"),P=[],this.addLabelCheckBox(P,H("editor.zoomable"),function(P){return null==P.a("zoomable")||P.a("zoomable")},function(P,v){P.a("zoomable",v)}),this.addNameRow(P,"zoomable","a"),P=[],this.addLabelCheckBox(P,H("editor.pannable"),function(P){return null==P.a("pannable")||P.a("pannable")},function(P,v){P.a("pannable",v)}),this.addNameRow(P,"pannable","a"),P=[],this.addLabelCheckBox(P,H("editor.rectSelectable"),function(P){return null==P.a("rectSelectable")||P.a("rectSelectable")},function(P,v){P.a("rectSelectable",v)}),this.addNameRow(P,"rectSelectable","a"),P=[],this.addLabelCheckBox(P,H("editor.fitContent"),function(P){return null!=P.a("fitContent")&&P.a("fitContent")},function(P,v){P.a("fitContent",v)}),this.addNameRow(P,"fitContent","a")},v.prototype.$79$=function(){this.addTitle("TitleLayout");var P=[];this.$80$(P,"circular"),this.$80$(P,"symmetric"),this.$80$(P,"hierarchical"),this.$80$(P,"towardnorth"),this.$80$(P,"towardsouth"),this.$80$(P,"towardeast"),this.$80$(P,"towardwest"),this.addRow(P,[.1,.1,.1,.1,.1,.1,.1]).keys={name:"layouts"}},v.prototype.$80$=function(P,v){var r=this,m=function(){r.dataModel&&r.dataModel.layout(v)};return this.addButton(P,null,H("editor.layout."+v),"editor.layout."+v+".state",m)},v}(dm),Tm={visible:"Boolean",selectable:"Boolean",movable:"Boolean",editable:"Boolean",opacity:"Opacity",clipPercentage:"Percentage",clipDirection:"ClipDirection",shadow:"Boolean",shadowColor:"Color",shadowBlur:"PositiveNumber",shadowOffsetX:"PositiveNumber",shadowOffsetY:"PositiveNumber",type:"String",background:"Color",repeatImage:"String",borderWidth:"PositiveNumber",borderColor:"Color",border3d:"Boolean",border3dColor:"Color",border3dAccuracy:"PositiveNumber",borderCap:"CapStyle",borderJoin:"JoinStyle",gradient:"Gradient",gradientColor:"Color",dash:"Boolean",dashOffset:"Number",dashColor:"Color",dashWidth:"PositiveNumber",dash3d:"Boolean",dash3dColor:"Color",dash3dAccuracy:"PositiveNumber",borderWidthAbsolute:"Boolean",fillClipPercentage:"Percentage",fillClipDirection:"ClipDirection",depth:"Number",cornerRadius:"PositiveNumber",polygonSide:"Int",arcFrom:"Number",arcTo:"Number",arcClose:"Boolean",arcOval:"Boolean",displayName:"String",scaleX:"Number",scaleY:"Number",anchorX:"Number",anchorY:"Number",rotation:"Number",color:"Color",width:"PositiveNumber",label:"Boolean",labelColor:"Color",labelFont:"String",minValue:"Number",maxValue:"Number",linePoint:"Boolean",lineWidth:"PositiveNumber",line3d:"Boolean",text:"String",align:"Align",vAlign:"VAlign",closePath:"Boolean",fillRule:"FillRule",name:"String",stretch:"Stretch",values:"NumberArray",colors:"ColorArray",hollow:"Boolean",layoutV:"String",layoutH:"String"},pm=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m,"symbol",!0))}return Dv(v,P),v.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.addDataBindingProperties(),this.$78$()},v.prototype.isTitleVisible=function(v){return!!this.inspectorFilter.isSymbolTitleVisible(this.editor,v.title)&&P.prototype.isTitleVisible.call(this,v)},v.prototype.isPropertyVisible=function(v){return!!this.inspectorFilter.isSymbolPropertyVisible(this.editor,v.keys&&v.keys.name)&&P.prototype.isPropertyVisible.call(this,v)},v.prototype.$12$=function(){var P=this,v=void 0;this.addTitle("TitleBasic"),this.addEventProperties(),this.addHTMLProperties(),v=[],this.addLabelInput(v,H("editor.previewurl"),function(P){return P.a("previewURL")},function(P,v){P.a("previewURL",v)}),this.addRow(v,[dv.config.indent,.1]).keys={name:"previewURL"},v=[],this.addLabelImage(v,H("editor.snapshoturl"),function(P){return P.a("snapshotURL")},function(P,v){P.a("snapshotURL",v)}),this.addRow(v,[dv.config.indent,.1,20]).keys={name:"snapshotURL"},v=[],this.addLabelColor(v,H("editor.background"),function(P){return P.getBackground()},function(P,v){P.setBackground(v)}),this.addRow(v,[dv.config.indent,.1]).keys={name:"background"},v=[],this.addLabelInput(v,H("editor.width"),function(P){return P.a("width")},function(P,v){P.a("width",v)},"number",1),this.addFuncRow(v,"width"),v=[],this.addLabelInput(v,H("editor.height"),function(P){return P.a("height")},function(P,v){P.a("height",v)},"number",1),this.addFuncRow(v,"height"),v=[],this.addLabelInput(v,H("editor.boundextend"),function(P){return P.a("boundExtend")},function(P,v){P.a("boundExtend",v)},"number",1),this.addFuncRow(v,"boundExtend"),v=[],this.addLabelComboBox(v,H("editor.connectactiontype"),function(P){return P.a("connectActionType")},function(P,v){P.a("connectActionType",v)},dv.consts.symbolConnectActionTypes,dv.consts.symbolConnectActionTypeLabels),this.addRow(v,[dv.config.indent,.1]).keys={name:"connectActionType"},v=[],this.addLabelCheckBox(v,H("editor.rotateasclock"),function(P){return P.a("rotateAsClock")},function(P,v){P.a("rotateAsClock",v)}),this.addFuncRow(v,"rotateAsClock"),v=[],this.addLabelCheckBox(v,H("editor.fitsize"),function(P){return P.a("fitSize")},function(P,v){P.a("fitSize",v)}),this.addFuncRow(v,"fitSize"),v=[],this.addLabelCheckBox(v,H("editor.scrollable"),function(P){return P.a("scrollable")},function(P,v){P.a("scrollable",v)}),this.addFuncRow(v,"scrollable"),v=[],this.addLabelCheckBox(v,H("editor.interactive"),function(P){return P.a("interactive")},function(P,v){P.a("interactive",v)}),this.addFuncRow(v,"interactive"),v=[],this.addLabelCheckBox(v,H("editor.disableselectedborder"),function(P){return P.a("disableSelectedBorder")},function(P,v){P.a("disableSelectedBorder",v)}),this.addFuncRow(v,"disableSelectedBorder"),v=[],this.addLabelCheckBox(v,H("editor.pixelperfect"),function(P){return P.a("pixelPerfect")},function(P,v){P.a("pixelPerfect",v)}),this.addFuncRow(v,"pixelPerfect"),v=[],this.addLabelCheckBox(v,H("editor.visible"),function(P){return P.a("visible")},function(P,v){P.a("visible",v)}),this.addFuncRow(v,"visible"),v=[],this.addLabelCheckBox(v,H("editor.clip"),function(P){return P.a("clip")},function(P,v){P.a("clip",v)}).onValueChanged=function(v,r){P.dataModel&&(r?P.dataModel.a("clip")||P.dataModel.a("clip",!0):P.dataModel.a("clip",!1))},this.addFuncRow(v,"clip"),v=[],this.addLabelCheckBox(v,H("editor.cacherule"),function(P){return P.a("cacheRule")},function(P,v){P.a("cacheRule",v)}),this.addFuncRow(v,"cacheRule"),v=[],this.addLabelComboBox(v,H("editor.blendmode"),function(P){return P.a("blendMode")},function(P,v){P.a("blendMode",v)},["multiply","override","override_rgb","override_a"],[H("editor.blendmode.multiply"),H("editor.blendmode.override"),H("editor.blendmode.override_rgb"),H("editor.blendmode.override_a")]),this.addFuncRow(v,"blendMode"),this.addAttachPointsProperties(),this.addStateProperty(),v=[],this.addLabelInput(v,H("editor.compcount"),function(P){return P.size()}),this.addNameRow(v,"count")},v.prototype.addHTMLProperties=function(){var P=this,v=[],r=function(){P.editor.functionView.open(P.dataModel.a("renderHTML"),function(v){P.dataModel.a("renderHTML",v)},H("editor.renderhtml"),["data","gv","cache"])};this.addLabel(v,H("editor.html"));var m=this.addButton(v,H("editor.renderhtml"),null,null,r,!0);this.addRow(v,[dv.config.indent,.1]).keys={name:"renderHTML"},this.updateHandlers.push(function(){if(!v.hidden){var r=P.dataModel.a("renderHTML");m.setLabelColor(r?dv.config.color_select:ht.Default.labelColor)}})},v.prototype.addDataBindingProperties=function(){this.addTitle("TitleDataBinding"),this.$81$(),this.$82$()},v.prototype.$74$=function(P,v,r,m){var H=this;return{name:P,tag:P,width:r,displayName:v,align:"center",enum:m,editable:!0,getValue:function(v){return v.dataBinding[P]},setValue:function(v,r,m,I){v.dataBinding[P]!==m&&H.modifyDataBindings(function(){v.dataBinding[P]=m})}}},v.prototype.$75$=function(){var P=this,v=this.tableView.getColumnModel().getDataByTag("defaultValue");v.getEnumValues=function(P){var v=P?dv.config.valueTypes[P.dataBinding.valueType]:null;return v&&"enum"===v.type?v.values:null},v.getEnumLabels=function(P){var v=P?dv.config.valueTypes[P.dataBinding.valueType]:null;return v&&"enum"===v.type?v.labels:null},v.getEnumIcons=function(P){var v=P?dv.config.valueTypes[P.dataBinding.valueType]:null;return v&&"enum"===v.type?v.icons:null},v.getEnumDropDownWidth=function(P){var v=P?dv.config.valueTypes[P.dataBinding.valueType]:null;return v&&"enum"===v.type?v.dropDownWidth:null},v.getValueType=function(P){var v=P?dv.config.valueTypes[P.dataBinding.valueType]:null;return v?v.type:null},v.isCellEditable=function(v,r,m,I){var Y=dv.config.valueTypes[v.dataBinding.valueType],U=Y?Y.type:null,o=v.dataBinding.extraInfo;if("function"===U){var x=H("editor.function")+" "+(v.dataBinding.attr||"");return P.editor.functionView.open(v.dataBinding.defaultValue,function(r){P.modifyDataBindings(function(){v.dataBinding.defaultValue=r,P.tableView.redraw()})},x,o&&o.arguments),!1}if("multiline"===U)return P.editor.textView.open(v.dataBinding.defaultValue,function(r){P.modifyDataBindings(function(){v.dataBinding.defaultValue=r,P.tableView.redraw()})},v.dataBinding.attr||"&nbsp;"),!1;if("font"===U)return P.editor.fontView.open(v.dataBinding.defaultValue,function(r){P.modifyDataBindings(function(){v.dataBinding.defaultValue=r,P.tableView.redraw()})},v.dataBinding.attr||"&nbsp;"),!1;if("object"===U||"stringArray"===U||"custom"===U||"objectArray"===U||"numberArray"===U||"colorArray"===U){var N=H("editor.object")+" "+(v.dataBinding.attr||"");return P.editor.objectView.open(v.dataBinding.defaultValue,function(r){P.modifyDataBindings(function(){v.dataBinding.defaultValue=r,P.tableView.redraw()})},N),!1}return!0}},v.prototype.initExtraInfoColumn=function(){var P=this,v=this.tableView.getColumnModel().getDataByTag("extraInfo");v.isCellEditable=function(v,r,m,I){var Y=H("editor.object")+" "+(v.dataBinding.attr||"");return P.editor.objectView.open(v.dataBinding.extraInfo,function(r){P.modifyDataBindings(function(){v.dataBinding.extraInfo=r,P.tableView.redraw()})},Y),!1}},v.prototype.$81$=function(){var P=this,v=this.tableModel=new ht.DataModel,r=new br(v),m=this.tableView=r.getTableView();m.setEditable(!0),r.getView().style.border=dv.config.color_line+" solid 1px",r.addColumns([this.$74$("attr","Attr",90),this.$74$("valueType",H("editor.valuetype"),80,{values:dv.consts.valueTypes,labels:dv.consts.valueTypeLabels}),this.$74$("defaultValue",H("editor.defaultvalue"),90),this.$74$("name",H("editor.name"),80),this.$74$("group",H("editor.group"),80),this.$74$("description",H("editor.description"),120),this.$74$("extraInfo",H("editor.extrainfo"),100)]),this.$75$(),this.initExtraInfoColumn();var Y=[r];this.addRow(Y,[.1],"120+0.1");var U=null;this.updateHandlers.push(function(){if(!Y.hidden&&P.dataModel&&(!U||P.dataModel.dataBindings!==U)){U=P.dataModel.dataBindings;var r=v.sm().toSelection().toArray();v.clear(),P.dataModel.dataBindings&&P.dataModel.dataBindings.forEach(function(P){var m=new ht.Data;m.dataBinding=P,v.add(m);for(var H=0;H<r.length;H++)if(nP(r[H].dataBinding,P)){I(r,r[H]),v.sm().as(m);break}})}})},v.prototype.modifyDataBindings=function(P){var v=r(this.dataModel.dataBindings);P();var m=r(this.dataModel.dataBindings);this.dataModel.dataBindings=m,this.dataModel.fp("f:dataBindings",v,m)},v.prototype.$83$=function(P,v,r,m,H,I){var Y=new ht.Data;Y.dataBinding={attr:P||"",valueType:v||"String",defaultValue:r,name:m,description:H,extraInfo:I};var U={symbolView:this.editor.symbolView,dataBinding:Y.dataBinding};if(this.editor.fireEvent("dataBindingAdding",U),U.preventDefault)return!1;Y.dataBinding=U.dataBinding,this.dataModel.dataBindings||(this.dataModel.dataBindings=[]);var o=this.tableModel.sm().ld();if(o){var x=this.tableModel.getRoots().indexOf(o);this.dataModel.dataBindings.splice(x+1,0,Y.dataBinding)}else this.dataModel.dataBindings.push(Y.dataBinding)},v.prototype.add=function(){var P=this;this.modifyDataBindings(function(){P.$83$()})},v.prototype.delete=function(){var P=this;this.tableView.sm().ld()&&this.modifyDataBindings(function(){P.tableView.sm().each(function(v){I(P.dataModel.dataBindings,v.dataBinding)})})},v.prototype.reorder=function(){var P=this;this.dataModel.dataBindings=[],this.tableModel.getRoots().each(function(v){P.dataModel.dataBindings.push(v.dataBinding)})},v.prototype.import=function(){var P=this;this.modifyDataBindings(function(){dv.config.clearDataBindingsBeforeImporting&&(P.dataModel.dataBindings=[]);var v=P.editor.symbolView.content,r={};v.dataBindings&&v.dataBindings.forEach(function(P){r[P.attr]=!0}),v.comps.forEach(function(v){for(var m in v){var H=v[m];if(tP(H))if(GP(H.func)&&xr.test(H.func)){var I=H.func.slice(5);if(!r[I]){var Y=void 0,U=void 0,o=void 0,x=void 0,N=void 0;if(IP(v.type)){var E=ht.Default.getCompType(v.type);if(E){var s=E.properties[m];s?(Y=s.valueType,o=s.name,x=s.description,N=s.extraInfo):Y=Tm[m]}}else Y=Tm[m];P.$83$(I,Y,U,o,x,N),r[I]=!0}}else{var W={};mv(H,W);for(var f in W)r[f]||P.$83$(f,Tm[W[f]])}}})})},v.prototype.$82$=function(){var P=this,v=dv.config.importDataBindingsButtonVisible?{button:{icon:"editor.import",toolTip:H("editor.import"),onClicked:function(){P.import()}}}:null;this.addRow([{button:{icon:"editor.add",toolTip:H("editor.add"),onClicked:function(){P.add()}}},{button:{icon:"editor.delete",toolTip:H("editor.delete"),onClicked:function(){P.delete()}}},v,null,{button:{icon:"editor.top",toolTip:H("editor.bringtofront"),onClicked:function(){P.tableView.sm().size()&&P.modifyDataBindings(function(){P.tableModel.moveSelectionToTop(),P.reorder()})}}},{button:{icon:"editor.up",toolTip:H("editor.bringforward"),onClicked:function(){P.tableView.sm().size()&&P.modifyDataBindings(function(){P.tableModel.moveSelectionUp(),P.reorder()})}}},{button:{icon:"editor.down",toolTip:H("editor.sendbackward"),onClicked:function(){P.tableView.sm().size()&&P.modifyDataBindings(function(){P.tableModel.moveSelectionDown(),P.reorder()})}}},{button:{icon:"editor.bottom",toolTip:H("editor.sendtoback"),onClicked:function(){P.tableView.sm().size()&&P.modifyDataBindings(function(){P.tableModel.moveSelectionToBottom(),P.reorder()})}}}],[20,20,20,.1,20,20,20,20])},v.prototype.addAttachPointsProperties=function(){var P=this,v=[],r=function(){P.editor.attachPointsView.show(P.editor.symbolView.content)};this.addLabel(v,H("editor.attach.points"));var m=this.addButton(v,H("editor.attach.edit"),null,null,r,!0);this.addFuncRow(v,"attachPoints"),this.updateHandlers.push(function(){if(!v.hidden){var r=P.dataModel.a("attachPoints");m.setLabelColor(r&&r.length?dv.config.color_select:ht.Default.labelColor)}}),v=[],this.addLabelComboBox(v,H("editor.attach.style"),function(P){return P.a("attachStyle")||"close"},function(P,v){P.a("attachStyle",v)},["close","strict"],[H("editor.attach.close"),H("editor.attach.strict")]),this.addFuncRow(v,"attachStyle")},v.prototype.addStateProperty=function(){var P=this,v=[];this.addLabel(v,H("editor.state"));var r=new ht.widget.ComboBox;r.onValueChanged=function(){P.editor.dm.a("state",r.getValue())},this.updateHandlers.push(function(){if(!v.hidden){var m=P.editor.dm.a("state"),H=P.editor.dm.a("stateEnum");if(H&&H.length){var I=H.map(function(P){return P.value}),Y=H.map(function(P){return P.label||P.value});I.unshift(void 0),Y.unshift(""),r.setValues(I),r.setLabels(Y),console.log(m),r.getValue()!==m&&r.setValue(m)}}}),v.push(r),this.addFuncRow(v,"state")},v}(dm),Fm=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m,"data"))}return Dv(v,P),v.prototype.initForm=function(){this.addCustomProperties(),this.$28$()},v.prototype.isTitleVisible=function(v){return!!this.inspectorFilter.isDataTitleVisible(this.editor,this.data,v.title)&&P.prototype.isTitleVisible.call(this,v)},v.prototype.isPropertyVisible=function(v){return!!this.inspectorFilter.isDataPropertyVisible(this.editor,this.data,v.keys&&v.keys.accessType,v.keys&&v.keys.name)&&P.prototype.isPropertyVisible.call(this,v)},v.prototype.addDBRow=function(P,v,r,m,I,Y){var U=this,o=I?this.getRowHeight()*I:null,x=P.length,N=void 0;return!dv.config.dataBindings.onButtonClicked||dv.config.dataBindings.filter&&!dv.config.dataBindings.filter(v,r,Y,this)?2===x?N=this.addRow(P,[dv.config.indent,.1],o,m):3===x?N=this.addRow(P,[dv.config.indent,.1,20],o,m):4===x?N=this.addRow(P,[dv.config.indent,.1,20,20],o,m):5===x&&(N=this.addRow(P,[dv.config.indent,.1,20,20,20],o,m)):!function(){var I=function(){dv.config.dataBindings.onButtonClicked(U.data,v,r)},E=void 0;dv.config.dataBindings.getToolTip?E=dv.config.dataBindings.getToolTip(v,r,Y,U):(E=v+":"+r,Y&&H(Y.description)&&(E+="<br>"+H(Y.description)));var s=U.addButton(P,null,E,null,I,!0);U.updateHandlers.push(function(){if(!P.hidden&&U.data){var m=dv.config.isDataBound(U.data,v,r);s.setIcon(m?"editor.bind.state":"editor.unbind.state")}}),2===x?N=U.addRow(P,[dv.config.indent,.1,20],o,m):3===x?N=U.addRow(P,[dv.config.indent,.1,20,20],o,m):4===x?N=U.addRow(P,[dv.config.indent,.1,20,20,20],o,m):5===x&&(N=U.addRow(P,[dv.config.indent,.1,20,20,20,20],o,m))}(),N.keys={name:r,displayName:this.toDisplayName(P),accessType:v},!this.addingCustomProperties&&Wr[this.type][v+":"+r]&&this.removeRows([N]),N},v.prototype.addDBInput=function(P,v,r,m,H){var I=[];return this.addLabelInput(I,v,N(P,r),E(P,r),m,H),this.addDBRow(I,P,r)},v.prototype.addDBLabel=function(P,v,r){var m=[];return this.addLabelLabel(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBCheckBox=function(P,v,r){var m=[];return this.addLabelCheckBox(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBImage=function(P,v,r){var m=[];return this.addLabelImage(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBColor=function(P,v,r){var m=[];return this.addLabelColor(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBFont=function(P,v,r){var m=[];return this.addLabelFont(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBPattern=function(P,v,r){var m=[];return this.addLabelInput(m,v,N(P,r),E(P,r),"pattern"),this.addDBRow(m,P,r)},v.prototype.addDBRotation=function(P,v,r){var m=[];return this.addLabelRotation(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBAlign=function(P,v,r){var m=[];return this.addLabelAlign(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBVAlign=function(P,v,r){var m=[];return this.addLabelVAlign(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBOrientation=function(P,v,r){var m=[];return this.addOrientation(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBComboBox=function(P,v,r,m,H,I){var Y=[];return this.addLabelComboBox(Y,v,N(P,r),E(P,r),m,H,I),this.addDBRow(Y,P,r)},v.prototype.addDBStretch=function(P,v,r){var m=[];return this.addLabelStretch(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.addDBZeroToOne=function(P,v,r){
var m=[];return this.addLabelRange(m,v,N(P,r),E(P,r),0,1,.01,"number"),this.addDBRow(m,P,r)},v.prototype.addDBPosition=function(P,v,r){var m=[];return this.addLabelRange(m,v,N(P,r),E(P,r),1,55,1,"int"),this.addDBRow(m,P,r)},v.prototype.addDBRange=function(P,v,r,m,H,I,Y){var U=[];return this.addLabelRange(U,v,N(P,r),E(P,r),m,H,I,Y),this.addDBRow(U,P,r)},v.prototype.addDBGradient=function(P,v,r,m){var H=[];return this.addLabelGradient(H,P,v,r,m),this.addDBRow(H,"s",v)},v.prototype.addDBBodyColorProperty=function(){this.addDBColor("s",H("editor.bodycolor"),"body.color")},v.prototype.addDBOpacityProperty=function(){this.addDBZeroToOne("s",H("editor.opacity"),"opacity")},v.prototype.$84$=function(){var P=this,v=[];this.addLabel(v,H("editor.icons"));var r=function(){P.data&&P.editor.iconsView.toggle(m,P.data)},m=this.addButton(v,"Icons","s:icons",null,r,!0);return this.updateHandlers.push(function(){v.hidden||m.setLabelColor(P.data.s("icons")?dv.config.color_select:ht.Default.labelColor)}),this.addDBRow(v,"s","icons")},v.prototype.addDBData=function(P,v,r,m){var H=this;m=m||E(P,r);var I=N(P,r),Y=[],U=this.addLabelInput(Y,v,function(P){var v=I(P);return v?v.toLabel()||v.getClassName():""}),o=U.getElement();U.isDroppable=function(P,v){return v.view.draggingData&&H.dataModel===v.view.draggingData.getDataModel()},U.handleCrossDrag=function(P,v,r){"enter"===v?o.style.border="solid "+dv.config.color_select_dark+" 2px":"exit"===v||"cancel"===v?o.style.border="":"over"===v||"drop"===v&&(o.style.border="",H.setValue(m,r.view.draggingData),U.setFocus())},o.onkeydown=function(P){O(P)&&H.setValue(m,null)};var x=new ht.widget.Image;return x.drawImage=function(P,v,r,m,I,Y){var U=x.data,o=H.editor.list;U&&o&&o.dm().contains(U)&&(v=o.getIcon(U),v&&l(P,ht.Default.getImage(v),"centerUniform",r,m,I,Y,U,o))},this.updateHandlers.push(function(){if(!Y.hidden){var P=x.data;x.data=H.getValue(I),x.fp("data",P,x.data)}}),Y.push(x),this.addDBRow(Y,P,r)},v.prototype.addDBMultiline=function(P,v,r){var m=[];return this.addLabelMultiline(m,v,N(P,r),E(P,r)),this.addDBRow(m,P,r)},v.prototype.$28$=function(){this.addTitle("TitleBasic"),this.addEventProperties();var P=[];this.addLabelInput(P,H("editor.class"),function(P){return P.getClassName()}),this.addRow(P,[dv.config.indent,.1]).keys={accessType:"p",name:"className"},this.addDBInput("p",H("editor.name"),"displayName"),this.addDBInput("p",H("editor.tag"),"tag"),this.addDBImage("p",H("editor.icon"),"icon"),this.addDBData("p",H("editor.parent"),"parent")},v.prototype.$30$=function(){this.addTitle("TitleLabel"),this.addDBMultiline("s",H("editor.content"),"label"),this.addDBFont("s",H("editor.font"),"label.font"),this.addDBColor("s",H("editor.color"),"label.color"),this.addDBColor("s",H("editor.background"),"label.background"),this.addDBPosition("s",H("editor.position"),"label.position"),this.addDBInput("s",H("editor.offsetx"),"label.offset.x","number",1),this.addDBInput("s",H("editor.offsety"),"label.offset.y","number",1),this.addDBInput("s",H("editor.maxlength"),"label.max","number",1),this.addDBRotation("s",H("editor.rotation"),"label.rotation"),this.addDBZeroToOne("s",H("editor.opacity"),"label.opacity"),this.addDBRange("s",H("editor.scale"),"label.scale",.01,100,.1,"number"),this.addDBAlign("s",H("editor.align"),"label.align"),this.addDBCheckBox("s",H("editor.fixed"),"label.position.fixed")},v.prototype.$31$=function(){this.addTitle("TitleNote"),this.addDBMultiline("s",H("editor.content"),"note"),this.addDBFont("s",H("editor.font"),"note.font"),this.addDBColor("s",H("editor.color"),"note.color"),this.addDBColor("s",H("editor.background"),"note.background"),this.addDBInput("s",H("editor.borderwidth"),"note.border.width","number",1),this.addDBColor("s",H("editor.bordercolor"),"note.border.color"),this.addDBPosition("s",H("editor.position"),"note.position"),this.addDBInput("s",H("editor.offsetx"),"note.offset.x","number",1),this.addDBInput("s",H("editor.offsety"),"note.offset.y","number",1),this.addDBZeroToOne("s",H("editor.opacity"),"note.opacity"),this.addDBRange("s",H("editor.scale"),"note.scale",.01,100,.1,"number"),this.addDBInput("s",H("editor.maxlength"),"note.max","number",1),this.addDBAlign("s",H("editor.align"),"note.align"),this.addDBCheckBox("s",H("editor.toggleable"),"note.toggleable"),this.addDBCheckBox("s",H("editor.expanded"),"note.expanded")},v.prototype.addDBLayer=function(){var P=this,v=[],r=N("p","layer"),m=E("p","layer");this.addLabel(v,H("editor.layer"),r,m);var I=new ht.widget.ComboBox;I.onValueChanged=function(){P.setValue(m,I.getValue())},this.updateHandlers.push(function(){if(!v.hidden){I.setValues(P.editor.layerPane.layerNames);var m=P.getValue(r);I.getValue()!==m&&I.setValue(m)}}),v.push(I);var Y=this.addDBRow(v,"p","layer");return Y.items.tag="layer",Y},v.prototype.addDBGray=function(){this.addDBCheckBox("s",H("editor.gray"),"2d.gray")},v}(dm),ym={TitleShapeBackground:!0,TitleShapeBorder:!0,TitleShapeDash:!0},Am=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.$92$(),this.addLayoutProperties(),this.$23$(),this.$29$(),this.$30$(),this.$31$(),this.$26$()},v.prototype.$28$=function(){P.prototype.$28$.call(this),this.addDBGray(),this.addDBLayer(),this.addDBInput("p",H("editor.tooltip"),"toolTip"),this.addDBBodyColorProperty(),this.addDBOpacityProperty(),this.$84$(),this.addState()},v.prototype.addState=function(){var P=this,v=[],r=new ht.widget.ComboBox,m=function(P){var v=P.s("state");if(v)return v;if(P.getImage){var r=ht.Default.getImage(P.getImage());return r?r.state:void 0}},I=E("s","state");this.addLabel(v,H("editor.state")),r.onValueChanged=function(){P.setValue(I,r.getValue())},this.updateHandlers.push(function(){if(!v.hidden){var H=P.getStateEnum();if(H&&0!==!H){var I=P.getValue(m),Y=H.map(function(P){return P.value}),U=H.map(function(P){return P.label||P.value});Y.unshift(void 0),U.unshift(""),r.setValues(Y),r.setLabels(U),r.getValue()!==I&&r.setValue(I)}}}),v.push(r);var Y=this.addDBRow(v,"s","state");return Y.visible=function(){var v=P.getStateEnum();return v&&v.length},Y},v.prototype.getStateEnum=function(){var P=ht.Default.getImage(this.data.getImage());return P?P.stateEnum:null},v.prototype.$92$=function(){var P=this;this.addDBStretch("s",H("editor.stretch"),"image.stretch").items.tag="imageRelative",this.addDBComboBox("s",H("editor.shape"),"shape",dv.consts.shapes,dv.consts.shapeLabels,dv.consts.shapeIcons);var v=[];v.forceToUpdate=!0,this.addLabelImage(v,H("editor.image"),function(v){var r=v.getImage(),m=ht.Default.getImage(r);return P.$86$(tP(m)?m.dataBindings:null,m),r},function(P,v){P.setImage&&(GP(v)&&v.endsWith("[...]")||P.setImage(v))}),this.addButton(v,null,H("editor.resetsize"),"editor.resetsize.state",function(P){P instanceof ht.Node&&P.setSize(-1,-1)}),this.imageRow=this.addDBRow(v,"p","image"),this.imageRow.items.tag="imageRelative"},v.prototype.addLayoutProperties=function(){var P=this;this.addTitle("TitleNodeLayout");var v=this.layoutGv=new ht.graph.GraphView,r=this.layoutNode=new ht.Node,m=!1;r.setImage("editor.layout.helper"),r.a("selectColor",dv.config.color_select),v.dm().add(r),v.tx(50),v.ty(50),v.handleScroll=function(){},v.handlePinck=function(){},v.setScrollBarVisible(!1),v.setRectSelectable(!1),v.setPannable(!1),v.setMovableFunc(function(){return!1}),v.dm().md(function(v){m||(P.beginTransaction(),P.dataModel.sm().getSelection().each(function(P){"a:layout.v"===v.property?P.s("layout.v",v.newValue):"a:layout.h"===v.property&&P.s("layout.h",v.newValue)}),P.endTransaction())}),this.addRow(["",{element:v},""],[.1,100,.1],100),this.addUpdateHandler(function(){var v=P.data;m=!0,r.a({"layout.v":v.s("layout.v"),"layout.h":v.s("layout.h")}),m=!1}),this.addDBComboBox("s",H("editor.nodeLayout.h"),"layout.h",dv.consts.hLayoutValues,dv.consts.hLayoutLabels),this.addDBComboBox("s",H("editor.nodeLayout.v"),"layout.v",dv.consts.vLayoutValues,dv.consts.vLayoutLabels)},v.prototype.$23$=function(){this.addTitle("TitleNode"),this.addDBInput("p",H("editor.posx"),"x","number",1),this.addDBInput("p",H("editor.posy"),"y","number",1),this.addDBInput("p",H("editor.width"),"width","number",1),this.addDBInput("p",H("editor.height"),"height","number",1),this.addDBRotation("p",H("editor.rotation"),"rotation");var P=[];this.addLabelInput(P,H("editor.scalex"),N("p","scaleX"),E("p","scaleX"),"number",.01),this.addButton(P,null,H("editor.flipx"),"editor.flipx",function(P){P instanceof ht.Node&&P.setScaleX(-P.getScaleX())}),this.addDBRow(P,"p","scaleX"),P=[],this.addLabelInput(P,H("editor.scaley"),N("p","scaleY"),E("p","scaleY"),"number",.01),this.addButton(P,null,H("editor.flipy"),"editor.flipy",function(P){P instanceof ht.Node&&P.setScaleY(-P.getScaleY())}),this.addDBRow(P,"p","scaleY"),P=[],this.addLabelInput(P,H("editor.anchorx"),function(P){return P.getAnchor().x},function(P,v){P instanceof ht.Node&&P.setAnchor(v,P.getAnchor().y,!0)},"number",.01),this.addDBRow(P,"p","anchorX"),P=[],this.addLabelInput(P,H("editor.anchory"),function(P){return P.getAnchor().y},function(P,v){P instanceof ht.Node&&P.setAnchor(P.getAnchor().x,v,!0)},"number",.01),this.addDBRow(P,"p","anchorY"),this.$85$(),this.addDBData("p",H("editor.host"),"host",function(P,v){P instanceof ht.Node&&(null==v||v instanceof ht.Node)&&P.setHost(v)}),this.addDBComboBox("s",H("editor.fullscreen"),"fullscreen",dv.consts.fullscreenValues,dv.consts.fullscreenLabels);var v=this.addDBComboBox("s",H("editor.fullscreen.lock"),"fullscreen.lock",dv.consts.fullscreenLockValues,dv.consts.fullscreenLockLabels);v.items.tag="fullscreen",v=this.addDBInput("s",H("editor.fullscreen.gap"),"fullscreen.gap","number",1),v.items.tag="fullscreen",this.addDBComboBox("s",H("editor.movemode"),"2d.move.mode",[void 0,"x","y"],["",H("editor.horizontal"),H("editor.vertical")]),this.addDBCheckBox("s",H("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",H("editor.visible"),"2d.visible"),this.addDBCheckBox("s",H("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",H("editor.movable"),"2d.movable"),this.addDBCheckBox("s",H("editor.editable"),"2d.editable"),this.addDBCheckBox("s",H("editor.pixelperfect"),"pixelPerfect")},v.prototype.$85$=function(){this.addDBZeroToOne("s",H("editor.clippercentage"),"clip.percentage"),this.addDBComboBox("s",H("editor.clipdirection"),"clip.direction",dv.consts.clipDirections,dv.consts.clipDirectionLabels)},v.prototype.$29$=function(){this.$25$(),this.addShapeForegroundProperties(),this.$33$(),this.addShapeDashProperties()},v.prototype.$25$=function(){this.addTitle("TitleShapeBackground"),this.addDBColor("s",H("editor.background"),"shape.background"),this.addDBGradient(H("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color"),this.addDBColor("s",H("editor.gradientcolor"),"shape.gradient.color"),this.addDBImage("s",H("editor.repeatimage"),"shape.repeat.image"),this.addDBZeroToOne("s",H("editor.clippercentage"),"shape.fill.clip.percentage"),this.addDBComboBox("s",H("editor.clipdirection"),"shape.fill.clip.direction",dv.consts.clipDirections,dv.consts.clipDirectionLabels)},v.prototype.addShapeForegroundProperties=function(){this.addTitle("TitleShapeForeground"),this.addDBColor("s",H("editor.foreground"),"shape.foreground"),this.addDBGradient(H("editor.gradient"),"shape.foreground.gradient","shape.foreground","shape.foreground.gradient.color"),this.addDBColor("s",H("editor.gradientcolor"),"shape.foreground.gradient.color"),this.addDBZeroToOne("s",H("editor.clippercentage"),"shape.foreground.clip.percentage"),this.addDBComboBox("s",H("editor.clipdirection"),"shape.foreground.clip.direction",dv.consts.clipDirections,dv.consts.clipDirectionLabels)},v.prototype.$33$=function(){this.addTitle("TitleShapeBorder"),this.addDBInput("s",H("editor.width"),"shape.border.width","number",1),this.addDBCheckBox("s",H("editor.widthabsolute"),"shape.border.width.absolute"),this.addDBPattern("s",H("editor.pattern"),"shape.border.pattern"),this.addDBColor("s",H("editor.color"),"shape.border.color"),this.addDBCheckBox("s",H("editor.threed"),"shape.border.3d"),this.addDBColor("s",H("editor.threedcolor"),"shape.border.3d.color"),this.addDBComboBox("s",H("editor.join"),"shape.border.join",dv.consts.joins,dv.consts.joinLabels),this.addDBComboBox("s",H("editor.cap"),"shape.border.cap",dv.consts.caps,dv.consts.capLabels),this.$24$()},v.prototype.$24$=function(){this.addDBInput("s",H("editor.depth"),"shape.depth","int",1).items.tag="shapeDepth",this.addDBInput("s",H("editor.sides"),"shape.polygon.side","int",1).items.tag="shapeSide",this.addDBInput("s",H("editor.radius"),"shape.corner.radius","number",1).items.tag="shapeRadius",this.addDBCheckBox("s",H("editor.arcoval"),"shape.arc.oval").items.tag="shapeArc",this.addDBCheckBox("s",H("editor.closed"),"shape.arc.close").items.tag="shapeArc",this.addDBRotation("s",H("editor.arcfrom"),"shape.arc.from").items.tag="shapeArc",this.addDBRotation("s",H("editor.arcto"),"shape.arc.to").items.tag="shapeArc"},v.prototype.addShapeDashProperties=function(){this.addTitle("TitleShapeDash"),this.addDBPattern("s",H("editor.pattern"),"shape.dash.pattern"),this.addDBCheckBox("s",H("editor.dash"),"shape.dash"),this.addDBColor("s",H("editor.color"),"shape.dash.color"),this.addDBInput("s",H("editor.offset"),"shape.dash.offset","number",1),this.addDBInput("s",H("editor.width"),"shape.dash.width","number",1),this.addDBCheckBox("s",H("editor.threed"),"shape.dash.3d"),this.addDBColor("s",H("editor.threedcolor"),"shape.dash.3d.color")},v.prototype.$35$=function(v){if(v){if("s:shape"===v.property||"host"===v.property||"s:fullscreen"===v.property)return void this.filterPropertiesLater();if("s:select.type"===v.property&&("shadow"===v.oldValue||"shadow"===v.newValue))return void this.filterPropertiesLater()}P.prototype.$35$.call(this,v)},v.prototype.isTitleVisible=function(v){if(this.data){if(!(this.data instanceof ht.Shape)&&!this.data.s("shape")&&ym[v.title])return!1;if("TitleNodeLayout"===v.title&&!this.data.getHost())return!1}return P.prototype.isTitleVisible.call(this,v)},v.prototype.isPropertyVisible=function(v){if(this.data){var r=v.items.tag;if(r)if("selectShadow"===r){if("shadow"!==this.data.s("select.type"))return!1}else if("shapeDepth"===r){if("rect"!==this.data.s("shape"))return!1}else if("shapeSide"===r){if("polygon"!==this.data.s("shape"))return!1}else if("shapeRadius"===r){if("roundRect"!==this.data.s("shape"))return!1}else if("shapeArc"===r){if("arc"!==this.data.s("shape"))return!1}else if("imageRelative"===r){if(this.data.s("shape"))return!1}else if("layer"===r){if(!this.editor.layerPane.layerNames.length)return!1}else if("fullscreen"===r&&!this.data.s("fullscreen"))return!1}return P.prototype.isPropertyVisible.call(this,v)},v.prototype.$86$=function(P,v){var r=this;this.dataBindings!==P&&(this.$46$=P,this.pendingImage=v,this._updateDataBindingsLater||(this._updateDataBindingsLater=!0,requestAnimationFrame(function(){r.$87$()})))},v.prototype.$87$=function(){var P=this;return this._updateDataBindingsLater=!1,this.dataBindings===this.$46$?(this.$46$=null,void(this.pendingImage=null)):(this._rows=this.$47$,this.removeRows(this.$45$),this.dataBindingHandlers&&this.dataBindingHandlers.length&&this.dataBindingHandlers.forEach(this.removeUpdateHandler,this),this.$45$=[],this.dataBindingHandlers=[],this.dataBindings=this.$46$,this.dataBindings&&!function(){var v=P.updateHandlers.length,r={},m={},H={};P.pendingImage.comps.forEach(function(P){if(IP(P.type)){var v=ht.Default.getCompType(P.type);if(v)for(var I in v.properties)r[I]=v.properties[I].defaultValue}mv(P,m,H)});for(var I in m)void 0===H[I]&&(H[I]=r[m[I]]);var Y=void 0,U=P._rows.indexOf(P.imageRow)+1;P.dataBindings.forEach(function(v){if(v.group&&Y!==v.group){Y=v.group;var r=P.addTitle(Y,{index:U});r.items.tag="imageRelative",P.$45$.push(r),U++}P.$88$(v,U,H)&&U++}),P.dataBindingHandlers=P.updateHandlers.slice(v)}(),this.$47$=this._rows,void this.filterProperties())},v.prototype.$88$=function(P,v,r){var m=[],I=P.attr,Y=dv.config.valueTypes[P.valueType];if(!Y)return this.editor.fireEvent("error",{message:"Wrong value type:"+P.valueType}),!1;var U=H(P.name)||I,o=function(P){var v=P.a(I);return void 0===v&&(v=r[I]),v},x=function(P,v){P.a(I,v)},N=P.extraInfo,E=void 0,s=void 0,W=void 0;N&&N.enum&&(E=N.enum.values,s=N.enum.labels,W=N.enum.icons),E?this.addLabelComboBox(m,U,o,x,E,s,W):"int"===Y.type||"number"===Y.type?Y.angle?this.addLabelRotation(m,U,o,x,Y.min,Y.max,Y.step):this.addLabelRange(m,U,o,x,Y.min,Y.max,Y.step,Y.type):"color"===Y.type?this.addLabelColor(m,U,o,x):"boolean"===Y.type?this.addLabelCheckBox(m,U,o,x):"enum"===Y.type?this.addLabelComboBox(m,U,o,x,Y.values,Y.labels,Y.icons):"multiline"===Y.type?this.addLabelMultiline(m,U,o,x):"font"===Y.type?this.addLabelFont(m,U,o,x):"image"===Y.type?this.addLabelImage(m,U,o,x):"url"===Y.type?this.addLabelURL(m,U,o,x):"colorArray"===Y.type?this.addLabelArray(m,U,o,x,"color"):"numberArray"===Y.type?this.addLabelArray(m,U,o,x,"number"):"stringArray"===Y.type?this.addLabelArray(m,U,o,x,"string"):"objectArray"===Y.type?this.addLabelArray(m,U,o,x,"object"):"function"===Y.type?this.addLabelFunction(m,U,o,x,I,N&&N.arguments):"object"===Y.type?this.addLabelObject(m,U,o,x,I):"custom"===Y.type?Y.buildUI(this,m,U,o,x):this.addLabelInput(m,U,o,x);var f=this.addDBRow(m,"a",I,{index:v},Y.rows,P);return N&&(f.visible=N.visible,f.onPropertyChanged=N.onPropertyChanged),this.$45$.push(f),m.tag="imageRelative",!0},v.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",H("editor.color"),"select.color"),this.addDBInput("s",H("editor.width"),"select.width","number",1),this.addDBInput("s",H("editor.padding"),"select.padding","number",1),this.addDBComboBox("s",H("editor.selecttype"),"select.type",dv.consts.selectTypes,dv.consts.selectTypeLabels,dv.consts.selectTypeIcons),this.addDBInput("s",H("editor.shadowblur"),"shadow.blur","number",1).items.tag="selectShadow",this.addDBInput("s",H("editor.shadowoffsetx"),"shadow.offset.x","number",1).items.tag="selectShadow",this.addDBInput("s",H("editor.shadowoffsety"),"shadow.offset.y","number",1).items.tag="selectShadow"},v}(Fm),PH={"h.v":!0,"v.h":!0,ortho:!0,flex:!0,"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,ortho2:!0,flex2:!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0,"v.h2":!0,"h.v2":!0},vH={"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0},rH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){this.$27$(),P.prototype.initForm.call(this),this.addDBGray(),this.$89$(),this.$90$(),this.$91$(),this.$30$(),this.$31$(),this.$26$()},v.prototype.isTitleVisible=function(v){return!("TitleEditingPoint"===v.title&&!this.editor.pointsEditingMode)&&P.prototype.isTitleVisible.call(this,v)},v.prototype.$35$=function(v){return!v||"s:edge.type"!==v.property&&"source"!==v.property&&"target"!==v.property?void P.prototype.$35$.call(this,v):void this.filterPropertiesLater()},v.prototype.isPropertyVisible=function(v){if(this.data){var r=v.items.tag;if(r){var m=this.data.s("edge.type");if("edgeRipple"===r){if("ripple"!==m)return!1}else if("edgeRadius"===r){if(!PH[m])return!1}else if("edgeOrtho"===r){if("ortho"!==m&&"ortho2"!==m)return!1}else if("edgeFlex"===r){if("flex"!==m&&"flex2"!==m)return!1}else if("edgeExtend"===r){if(!vH[m])return!1}else if("layer"===r){if(!this.editor.layerPane.layerNames.length)return!1}else{if("edgeSourceIsEdge"===r)return this.data.getSource()instanceof ht.Edge;if("edgeTargetIsEdge"===r)return this.data.getTarget()instanceof ht.Edge;if("edgeSourceIsNode"===r)return this.data.getSource()instanceof ht.Node;if("edgeTargetIsNode"===r)return this.data.getTarget()instanceof ht.Node}}}return P.prototype.isPropertyVisible.call(this,v)},v.prototype.$28$=function(){P.prototype.$28$.call(this),this.addDBLayer(),this.addDBInput("p",H("editor.tooltip"),"toolTip"),this.addDBOpacityProperty(),this.$84$()},v.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",H("editor.color"),"select.color"),this.addDBInput("s",H("editor.width"),"select.width","number",1);var P=[];this.addLabelCheckBox(P,H("editor.shadow"),function(P){return"shadow"===P.s("select.type")},function(P,v){P.s("select.type",v?"shadow":null)}),this.addDBRow(P,"s","select.type"),this.addDBInput("s",H("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",H("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",H("editor.shadowoffsety"),"shadow.offset.y","number",1)},v.prototype.$89$=function(){this.addTitle("TitleEdgeBasic"),this.addDBInput("s",H("editor.width"),"edge.width","number",1),this.addDBCheckBox("s",H("editor.widthabsolute"),"edge.width.absolute"),this.addDBPattern("s",H("editor.pattern"),"edge.pattern"),this.addDBColor("s",H("editor.color"),"edge.color"),this.addDBCheckBox("s",H("editor.threed"),"edge.3d"),this.addDBColor("s",H("editor.threedcolor"),"edge.3d.color"),this.addDBComboBox("s",H("editor.join"),"edge.join",dv.consts.joins,dv.consts.joinLabels),this.addDBComboBox("s",H("editor.cap"),"edge.cap",dv.consts.caps,dv.consts.capLabels),this.addDBInput("s",H("editor.group"),"edge.group"),this.addDBInput("s",H("editor.offset"),"edge.offset","number",1),this.addDBInput("s",H("editor.gap"),"edge.gap","number",1),this.addDBComboBox("s",H("editor.type"),"edge.type",dv.consts.edgeTypes,dv.consts.edgeTypes.map(function(P){var v=H("edgeType:"+P,!0);return v?v:P})),this.addDBInput("s",H("editor.radius"),"edge.corner.radius","number",1).items.tag="edgeRadius",this.addDBZeroToOne("s",H("editor.ortho"),"edge.ortho").items.tag="edgeOrtho",this.addDBInput("s",H("editor.flex"),"edge.flex","number",1).items.tag="edgeFlex",this.addDBInput("s",H("editor.extend"),"edge.extend","number",1).items.tag="edgeExtend",this.addDBInput("s",H("editor.ripplesize"),"edge.ripple.size","int",1).items.tag="edgeRipple",this.addDBInput("s",H("editor.ripplelength"),"edge.ripple.length","number",1).items.tag="edgeRipple",this.addDBInput("s",H("editor.rippleelevation"),"edge.ripple.elevation","number",1).items.tag="edgeRipple",this.addDBCheckBox("s",H("editor.rippleboth"),"edge.ripple.both").items.tag="edgeRipple",this.addDBCheckBox("s",H("editor.ripplestraight"),"edge.ripple.straight").items.tag="edgeRipple",this.addDBCheckBox("s",H("editor.center"),"edge.center"),this.addDBCheckBox("s",H("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",H("editor.visible"),"2d.visible"),this.addDBCheckBox("s",H("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",H("editor.editable"),"2d.editable"),this.addDBCheckBox("s",H("editor.independent"),"edge.independent"),this.addDBCheckBox("s",H("editor.toggleable"),"edge.toggleable");var P=[],v=function(P,v){P instanceof ht.Edge&&P.toggle()};v.once=!0,this.addLabelCheckBox(P,H("editor.expanded"),function(P){return P.s("edge.expanded")},v),this.addDBRow(P,"s","edge.expanded")},v.prototype.$91$=function(){this.addTitle("TitleEdgeDash"),this.addDBCheckBox("s",H("editor.dash"),"edge.dash"),this.addDBPattern("s",H("editor.pattern"),"edge.dash.pattern"),this.addDBColor("s",H("editor.color"),"edge.dash.color"),this.addDBInput("s",H("editor.offset"),"edge.dash.offset","number",1),this.addDBInput("s",H("editor.width"),"edge.dash.width","number",1),this.addDBCheckBox("s",H("editor.threed"),"edge.dash.3d"),this.addDBColor("s",H("editor.threedcolor"),"edge.dash.3d.color")},v.prototype.$90$=function(){this.addTitle("TitleEdgeEndpoint"),this.addDBData("p",H("editor.sourcenode"),"source",function(P,v){P instanceof ht.Edge&&(null==v||v instanceof ht.Node||v instanceof ht.Edge)&&(P.setSource(v),P.s("edge.source.percent",.5))}),this.addDBData("p",H("editor.targetnode"),"target",function(P,v){P instanceof ht.Edge&&(null==v||v instanceof ht.Node||v instanceof ht.Edge)&&(P.setTarget(v),P.s("edge.target.percent",.5))});var P=void 0;P=this.addDBZeroToOne("s",H("editor.sourcepercent"),"edge.source.percent"),P.items.tag="edgeSourceIsEdge",P=this.addDBRange("s",H("editor.sourceindex"),"edge.source.index",0,1/0,1,"number"),P.items.tag="edgeSourceIsEdge",P=this.addDBPosition("s",H("editor.sourceposition"),"edge.source.position"),P.items.tag="edgeSourceIsNode",P=this.addDBInput("s",H("editor.sourceoffsetx"),"edge.source.offset.x","number",1),P.items.tag="edgeSourceIsNode",P=this.addDBInput("s",H("editor.sourceoffsety"),"edge.source.offset.y","number",1),P.items.tag="edgeSourceIsNode",P=this.addDBInput("s",H("editor.sourceanchorx"),"edge.source.anchor.x","number",.01),P.items.tag="edgeSourceIsNode",P=this.addDBInput("s",H("editor.sourceanchory"),"edge.source.anchor.y","number",.01),P.items.tag="edgeSourceIsNode",P=this.addDBZeroToOne("s",H("editor.targetpercent"),"edge.target.percent"),P.items.tag="edgeTargetIsEdge",P=this.addDBRange("s",H("editor.targetindex"),"edge.target.index",0,1/0,1,"number"),P.items.tag="edgeTargetIsEdge",P=this.addDBPosition("s",H("editor.targetposition"),"edge.target.position"),P.items.tag="edgeTargetIsNode",P=this.addDBInput("s",H("editor.targetoffsetx"),"edge.target.offset.x","number",1),P.items.tag="edgeTargetIsNode",P=this.addDBInput("s",H("editor.targetoffsety"),"edge.target.offset.y","number",1),P.items.tag="edgeTargetIsNode",P=this.addDBInput("s",H("editor.targetanchorx"),"edge.target.anchor.x","number",.01),P.items.tag="edgeTargetIsNode",P=this.addDBInput("s",H("editor.targetanchory"),"edge.target.anchor.y","number",.01),P.items.tag="edgeTargetIsNode"},v}(Fm),mH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.$92$(),this.addLayoutProperties(),this.$23$(),this.$32$(),this.$94$(),this.$93$(),this.$29$(),this.$30$(),this.$31$(),this.$26$()},v.prototype.$35$=function(v){return v&&"s:group.type"===v.property?void this.filterPropertiesLater():void P.prototype.$35$.call(this,v)},v.prototype.isTitleVisible=function(v){return(!this.data||!this.data.s("group.type")||"TitleGroupTitle"!==v.title)&&P.prototype.isTitleVisible.call(this,v)},v.prototype.isPropertyVisible=function(v){if(this.data){var r=v.items.tag;if(r&&"groupDepth"===r){var m=this.data.s("group.type");if(m&&"rect"!==m)return!1}}return P.prototype.isPropertyVisible.call(this,v)},v.prototype.$32$=function(){this.addTitle("TitleGroupBasic"),this.addDBComboBox("s",H("editor.type"),"group.type",[void 0,"rect","oval","circle","roundRect"],["",H("editor.grouptype.rect"),H("editor.grouptype.oval"),H("editor.grouptype.circle"),H("editor.grouptype.roundrect")]),this.addDBPosition("s",H("editor.position"),"group.position"),this.addDBColor("s",H("editor.background"),"group.background"),this.addDBGradient(H("editor.gradient"),"group.gradient","group.background","group.gradient.color"),this.addDBColor("s",H("editor.gradientcolor"),"group.gradient.color"),this.addDBImage("s",H("editor.image"),"group.image"),this.addDBStretch("s",H("editor.stretch"),"group.image.stretch"),this.addDBImage("s",H("editor.repeatimage"),"group.repeat.image"),this.addDBCheckBox("s",H("editor.toggleable"),"group.toggleable"),this.addDBCheckBox("p",H("editor.expanded"),"expanded"),this.addDBInput("s",H("editor.depth"),"group.depth","number",1).items.tag="groupDepth"},v.prototype.$94$=function(){this.addTitle("TitleGroupTitle"),this.addDBLabel("s",H("editor.content"),"label"),this.addDBFont("s",H("editor.font"),"group.title.font"),this.addDBColor("s",H("editor.color"),"group.title.color"),this.addDBColor("s",H("editor.background"),"group.title.background"),this.addDBAlign("s",H("editor.align"),"group.title.align"),this.addDBOrientation("s",H("editor.valuetype.orientation"),"group.title.orientation"),this.addDBCheckBox("s","\u5206\u5272\u7ebf","group.splitLine")},v.prototype.$93$=function(){this.addTitle("TitleGroupBorder"),this.addDBInput("s",H("editor.width"),"group.border.width","number",1),this.addDBPattern("s",H("editor.pattern"),"group.border.pattern"),this.addDBColor("s",H("editor.color"),"group.border.color"),this.addDBComboBox("s",H("editor.join"),"group.border.join",dv.consts.joins,dv.consts.joinLabels),this.addDBComboBox("s",H("editor.cap"),"group.border.cap",dv.consts.caps,dv.consts.capLabels),this.addDBInput("s",H("editor.radius"),"group.border.radius","number",1),this.addDBInput("s",H("editor.padding"),"group.padding","number",1),this.addDBInput("s",H("editor.paddingleft"),"group.padding.left","number",1),this.addDBInput("s",H("editor.paddingright"),"group.padding.right","number",1),this.addDBInput("s",H("editor.paddingtop"),"group.padding.top","number",1),this.addDBInput("s",H("editor.paddingbottom"),"group.padding.bottom","number",1)},v}(Am),HH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){this.$27$(),this.addCustomProperties(),this.$28$(),this.addLayoutProperties(),this.$23$(),this.$29$(),this.$30$(),this.$31$(),this.$26$()},v.prototype.isTitleVisible=function(v){return!("TitleEditingPoint"===v.title&&!this.editor.pointsEditingMode)&&P.prototype.isTitleVisible.call(this,v)},v.prototype.$24$=function(){this.addDBCheckBox("p",H("editor.closed"),"closePath"),this.addDBColor("s",H("editor.outlinecolor"),"border.color"),this.addDBInput("s",H("editor.outlinewidth"),"border.width","number",1)},v.prototype.$25$=function(){P.prototype.$25$.call(this),this.addDBComboBox("s",H("editor.fillrule"),"shape.fill.rule",dv.consts.fillRules,dv.consts.fillRuleLabels)},v.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",H("editor.color"),"select.color"),this.addDBInput("s",H("editor.width"),"select.width","number",1);var P=[];this.addLabelCheckBox(P,H("editor.shadow"),function(P){return"shadow"===P.s("select.type")},function(P,v){P.s("select.type",v?"shadow":null)}),this.addDBRow(P,"s","select.type"),this.addDBInput("s",H("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",H("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",H("editor.shadowoffsety"),"shadow.offset.y","number",1)},v}(Am),IH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.$23$=function(){P.prototype.$23$.call(this),this.addDBCheckBox("p",H("editor.clickthroughenabled"),"clickThroughEnabled");var v=[];this.addLabelCheckBox(v,H("editor.syncsize"),function(P){return P.isSyncSize()},function(P,v){P instanceof ht.Block&&(P.setSyncSize(v),P instanceof ht.RefGraph&&(P.p(0,0),P.setRotation(0),P.setAnchor(.5,.5),P.setScale(1,1),P.setSize(20,20),P.setRef(P.getRef())))}),this.addDBRow(v,"p","syncSize")},v.prototype.addDBGray=function(){},v.prototype.addDBBodyColorProperty=function(){},v.prototype.addDBOpacityProperty=function(){},v.prototype.$92$=function(){},v.prototype.$29$=function(){},v.prototype.$85$=function(){},v}(Am),YH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.$28$=function(){P.prototype.$28$.call(this),this.addDBRef()},v.prototype.addDBRef=function(){var P=this,v=[],r=function(P){return P.getRef()},m=function(P,v){P instanceof ht.RefGraph&&(P.p(0,0),P.setRotation(0),P.setAnchor(.5,.5),P.setScale(1,1),P.setSize(20,20),P.setRef(v))},I=function(v,r){var m=r.view.draggingData;return!!m&&(P.editor.url!==m.url&&m.fileType===Pr)};return this.addLabelURL(v,H("editor.ref"),r,m,I),this.addDBRow(v,"p","ref")},v.prototype.addDBGray=function(){},v}(IH),UH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.addLayoutProperties(),this.$22$(),this.$23$(),this.$26$()},v.prototype.$22$=function(){this.addTitle("TitleText"),this.addDBInput("s",H("editor.content"),"text"),this.addDBAlign("s",H("editor.align"),"text.align"),this.addDBVAlign("s",H("editor.valign"),"text.vAlign"),this.addDBColor("s",H("editor.color"),"text.color"),this.addDBFont("s",H("editor.font"),"text.font"),
this.addDBCheckBox("s",H("editor.shadow"),"text.shadow"),this.addDBColor("s",H("editor.shadowcolor"),"text.shadow.color"),this.addDBInput("s",H("editor.shadowblur"),"text.shadow.blur","number",1),this.addDBInput("s",H("editor.shadowoffsetx"),"text.shadow.offset.x","number",1),this.addDBInput("s",H("editor.shadowoffsety"),"text.shadow.offset.y","number",1)},v}(Am),oH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m,"comp"))}return Dv(v,P),v.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.addLayoutProperties(),this.$20$()},v.prototype.isTitleVisible=function(v){return!!this.inspectorFilter.isCompTitleVisible(this.editor,this.data?this.data.compType:null,v.title)&&P.prototype.isTitleVisible.call(this,v)},v.prototype.isPropertyVisible=function(v){return!!this.inspectorFilter.isCompPropertyVisible(this.editor,this.data?this.data.compType:null,v.keys&&v.keys.name)&&P.prototype.isPropertyVisible.call(this,v)},v.prototype.$12$=function(){this.addTitle("TitleBasic"),this.addEventProperties(),this.$14$(),this.$15$(),this.addStyleInput(H("editor.prefix"),"prefix","prefix"),this.$13$(),this.$21$(),this.$16$(),this.$17$(),this.$18$(),this.$19$(),this.addStyleCheckBox(H("editor.visible"),"2d.visible","visible"),this.addStyleCheckBox(H("editor.selectable"),"2d.selectable","selectable"),this.addStyleCheckBox(H("editor.movable"),"2d.movable","movable"),this.addStyleCheckBox(H("editor.editable"),"2d.editable","editable"),this.addStyleCheckBox(H("editor.pixelperfect"),"pixelPerfect","pixelPerfect"),this.addStyleZeroToOne(H("editor.opacity"),"opacity","opacity"),this.addState()},v.prototype.addState=function(){var P=this,v=[],r=new ht.widget.ComboBox,m=N("s","state"),I=E("s","state");this.addLabel(v,H("editor.state"),m,I),r.onValueChanged=function(){P.setValue(I,r.getValue())},this.updateHandlers.push(function(){if(!v.hidden){var H=P.getValue(m),I=P.editor.dm.a("stateEnum");if(I&&I.length){var Y=I.map(function(P){return P.value}),U=I.map(function(P){return P.label||P.value});Y.unshift(void 0),U.unshift(""),r.setValues(Y),r.setLabels(U),r.getValue()!==H&&r.setValue(H)}}}),v.push(r);var Y=this.addFuncRow(v,"state");return Y.visible=function(){return P.editor.dm.a("stateEnum")&&P.editor.dm.a("stateEnum").length},Y},v.prototype.$13$=function(){var P=[];this.addLabelInput(P,H("editor.area"),function(P){return"["+m(P.p().x-P.getWidth()*P.getAnchor().x)+","+m(P.p().y-P.getHeight()*P.getAnchor().y)+","+m(P.getWidth())+","+m(P.getHeight())+"]"}),this.addFuncRow(P,"rect")},v.prototype.$14$=function(){var P=[];this.addLabelInput(P,H("editor.type"),function(P){return P.compType}),this.addRow(P,[dv.config.indent,.1]).keys={name:"type"}},v.prototype.$15$=function(){var P=[];this.addLabelInput(P,H("editor.name"),function(P){return P.getDisplayName()},function(P,v){P.setDisplayName(v)}),this.addFuncRow(P,"displayName")},v.prototype.$16$=function(){var P=[];this.addLabelInput(P,H("editor.rotation"),function(P){return 180/Math.PI*P.getRotation()},function(P,v){P instanceof ht.Node&&P.setRotation(v*Math.PI/180)},"number",1),this.addFuncRow(P,"rotation")},v.prototype.$17$=function(){var P=[];this.addLabelInput(P,H("editor.anchorx"),function(P){return P.getAnchor().x},function(P,v){P instanceof ht.Node&&P.setAnchor(v,P.getAnchor().y,!0)},"number",.01),this.addFuncRow(P,"anchorX"),P=[],this.addLabelInput(P,H("editor.anchory"),function(P){return P.getAnchor().y},function(P,v){P instanceof ht.Node&&P.setAnchor(P.getAnchor().x,v,!0)},"number",.01),this.addFuncRow(P,"anchorY")},v.prototype.$18$=function(){var P=[];this.addLabelInput(P,H("editor.scalex"),function(P){return P.getScale().x},function(P,v){P instanceof ht.Node&&P.setScale(v,P.getScale().y)},"number",.01),this.addFuncRow(P,"scaleX"),P=[],this.addLabelInput(P,H("editor.scaley"),function(P){return P.getScale().y},function(P,v){P instanceof ht.Node&&P.setScale(P.getScale().x,v)},"number",.01),this.addFuncRow(P,"scaleY")},v.prototype.$19$=function(){this.addStyleZeroToOne(H("editor.clippercentage"),"clip.percentage","clipPercentage"),this.addStyleComboBox(H("editor.clipdirection"),"clip.direction",dv.consts.clipDirections,dv.consts.clipDirectionLabels,null,"clipDirection")},v.prototype.$20$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(H("editor.shadow"),"shadow","shadow"),this.addStyleColor(H("editor.shadowcolor"),"select.color","shadowColor"),this.addStyleInput(H("editor.shadowblur"),"shadow.blur","number",1,"shadowblur"),this.addStyleInput(H("editor.shadowoffsetx"),"shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(H("editor.shadowoffsety"),"shadow.offset.y","number",1,"shadowOffsetYs")},v.prototype.$21$=function(){var P=[];return this.addLabelInput(P,H("editor.posx"),function(P){return P.p().x},function(P,v){P instanceof ht.Node&&P.p(v,P.p().y)},"number",1),this.addLabelInput(P,H("editor.posy"),function(P){return P.p().y},function(P,v){P instanceof ht.Node&&P.p(P.p().x,v)},"number",1),this.addRow(P,[dv.config.indent,.1,dv.config.indent2,.1]).keys={name:"position"},P=[],this.addLabelInput(P,H("editor.width"),function(P){return P.getWidth()},function(P,v){P instanceof ht.Node&&P.setWidth(v)},"number",1),this.addLabelInput(P,H("editor.height"),function(P){return P.getHeight()},function(P,v){P instanceof ht.Node&&P.setHeight(v)},"number",1),this.addRow(P,[dv.config.indent,.1,dv.config.indent2,.1]).keys={name:"size"},P},v.prototype.addStyleColor=function(P,v,r){var m=[];return this.addLabelColor(m,P,function(P){return P.s(v)},function(P,r){P.s(v,r)}),this.addFuncRow(m,v,r)},v.prototype.addStyleFunction=function(P,v,r,m){var H=[];return this.addLabelFunction(H,P,function(P){return P.s(v)},function(P,r){P.s(v,r)},r,m),this.addFuncRow(H,v,r)},v.prototype.addStyleObject=function(P,v,r){var m=[];return this.addLabelObject(m,P,function(P){return P.s(v)},function(P,r){P.s(v,r)},r),this.addFuncRow(m,v,r)},v.prototype.addStyleLabel=function(P,v,r){var m=[];return this.addLabelInput(m,P,function(P){var r=P.s(v);return r&&r.replace&&(r=r.replace(/\n/g,"\\n")),r},function(P,r){r&&r.replace&&(r=r.replace(/\\n/g,"\n")),P.s(v,r)}),this.addFuncRow(m,v,r)},v.prototype.addStyleArray=function(P,v,r,m,H){var I=[];return this.addLabelArray(I,P,function(P){return P.s(v)},function(P,r){P.s(v,r)},m),this.addFuncRow(I,v,r,H)},v.prototype.addStyleMultiline=function(P,v,r,m){var H=[];return this.addLabelMultiline(H,P,function(P){return P.s(v)},function(P,r){P.s(v,r)}),this.addFuncRow(H,v,r,m)},v.prototype.addStyleFont=function(P,v,r,m){var H=[];return this.addLabelFont(H,P,function(P){return P.s(v)},function(P,r){P.s(v,r)}),this.addFuncRow(H,v,r,m)},v.prototype.addStyleTextArea=function(P,v,r,m){var H=[];return this.addLabelTextArea(H,P,function(P){return P.s(v)},function(P,r){P.s(v,r)}),this.addFuncRow(H,v,m,r)},v.prototype.addStyleInput=function(P,v,r,m,H){var I=[];return this.addLabelInput(I,P,function(P){return P.s(v)},function(P,r){P.s(v,r)},r,m),this.addFuncRow(I,v,H)},v.prototype.addStyleCheckBox=function(P,v,r){var m=[];return this.addLabelCheckBox(m,P,function(P){return P.s(v)},function(P,r){P.s(v,r)}),this.addFuncRow(m,v,r)},v.prototype.addStyleAlign=function(P,v,r){var m=[];return this.addLabelComboBox(m,P,function(P){return P.s(v)||"center"},function(P,r){P.s(v,r)},["left","center","right"],[H("editor.align.left"),H("editor.align.center"),H("editor.align.right")]),this.addFuncRow(m,v,r)},v.prototype.addStyleVAlign=function(P,v,r){var m=[];return this.addLabelComboBox(m,P,function(P){return P.s(v)||"bottom"},function(P,r){P.s(v,r)},["top","middle","bottom"],[H("editor.valign.top"),H("editor.valign.middle"),H("editor.valign.bottom")]),this.addFuncRow(m,v,r)},v.prototype.addStyleStretch=function(P,v,r){var m=[];return this.addLabelComboBox(m,P,function(P){return P.s(v)||"fill"},function(P,r){P.s(v,r)},["fill","uniform","centerUniform"],[H("editor.stretch.fill"),H("editor.stretch.uniform"),H("editor.stretch.centeruniform")]),this.addFuncRow(m,v,r)},v.prototype.addStyleComboBox=function(P,v,r,m,H,I){var Y=[];return this.addLabelComboBox(Y,P,function(P){return P.s(v)},function(P,r){P.s(v,r)},r,m,H),this.addFuncRow(Y,v,I)},v.prototype.addStyleImage=function(P,v,r){var m=[];return this.addLabelImage(m,P,function(P){return P.s(v)},function(P,r){P.s(v,r)}),this.addFuncRow(m,v,r)},v.prototype.addStyleURL=function(P,v,r){var m=[];return this.addLabelURL(m,P,function(P){return P.s(v)},function(P,r){P.s(v,r)}),this.addFuncRow(m,v,r)},v.prototype.addStylePattern=function(P,v,r){var m=[];return this.addLabelInput(m,P,function(P){return P.s(v)},function(P,r){P.s(v,r)},"pattern"),this.addFuncRow(m,v,r)},v.prototype.addStyleZeroToOne=function(P,v,r){return this.addStyleRange(P,v,0,1,.01,r)},v.prototype.addStylePosition=function(P,v,r){return this.addStyleRange(P,v,1,55,1,r)},v.prototype.addStyleRange=function(P,v,r,m,H,I){var Y=[];return this.addLabelInput(Y,P,function(P){var r=P.s(v);return null==r?m:r},function(P,H){void 0!==m&&H>m&&(H=m),void 0!==r&&H<r&&(H=r),P.s(v,H)},"number",H),this.addFuncRow(Y,v,I)},v.prototype.addStyleRotation=function(P,v,r,m,H,I){var Y=[];return this.addLabelInput(Y,P,function(P){var r=P.s(v);return null==r?H:180/Math.PI*r},function(P,r){r=r*Math.PI/180,void 0!==H&&r>H&&(r=H),void 0!==m&&r<m&&(r=m),P.s(v,r)},"number",I||1),this.addFuncRow(Y,v,r)},v.prototype.addStyleGradient=function(P,v,r,m,H){var I=[];return this.addLabelGradient(I,P,v,r,m),this.addFuncRow(I,v,H)},v.prototype.addLayoutProperties=function(){var P=this,v=this.addTitle("TitleNodeLayout");v.visible=function(P){return!!P.dataModel.a("fitSize")};var r=this.layoutGv=new ht.graph.GraphView,m=this.layoutNode=new ht.Node,I=!1;m.setImage("editor.layout.helper"),m.a("selectColor",dv.config.color_select),r.dm().add(m),r.tx(50),r.ty(50),r.handleScroll=function(){},r.handlePinck=function(){},r.setScrollBarVisible(!1),r.setRectSelectable(!1),r.setPannable(!1),r.setMovableFunc(function(){return!1}),r.dm().md(function(v){I||(P.beginTransaction(),P.dataModel.sm().getSelection().each(function(P){"a:layout.v"===v.property?P.s("layout.v",v.newValue):"a:layout.h"===v.property&&P.s("layout.h",v.newValue)}),P.endTransaction())}),this.addRow(["",{element:r},""],[.1,100,.1],100),this.addUpdateHandler(function(v,r){var H=P.data;I=!0,m.a({"layout.v":H.s("layout.v"),"layout.h":H.s("layout.h")}),I=!1});var Y=[];this.addLabelComboBox(Y,H("editor.nodeLayout.h"),function(P){return P.s("layout.h")},function(P,v){P.s("layout.h",v)},dv.consts.hLayoutValues,dv.consts.hLayoutLabels),this.addFuncRow(Y,"layout.h"),Y=[],this.addLabelComboBox(Y,H("editor.nodeLayout.v"),function(P){return P.s("layout.v")},function(P,v){P.s("layout.v",v)},dv.consts.vLayoutValues,dv.consts.vLayoutLabels),this.addFuncRow(Y,"layout.v")},v}(dm),xH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.$35$=function(v){return v&&"s:shape"===v.property?void this.filterPropertiesLater():void P.prototype.$35$.call(this,v)},v.prototype.isTitleVisible=function(v){if(this.data){var r=this.data.s("shape");if("TitleArc"===v.title&&"arc"!==r)return!1}return P.prototype.isTitleVisible.call(this,v)},v.prototype.isPropertyVisible=function(v){if(this.data){var r=v.items.tag;if(r){var m=this.data.s("shape");if("shapeDepth"===r&&"rect"!==m)return!1;if("shapeCornerRadius"===r&&"roundRect"!==m)return!1;if("shapePolygonSide"===r&&"polygon"!==m)return!1}}return P.prototype.isPropertyVisible.call(this,v)},v.prototype.initForm=function(){P.prototype.initForm.call(this),this.$37$(),this.$38$(),this.addDashProperties(),this.addArcProperties()},v.prototype.$14$=function(){this.addStyleComboBox(H("editor.type"),"shape",dv.consts.shapes.slice(1),dv.consts.shapeLabels.slice(1),dv.consts.shapeIcons.slice(1),"type")},v.prototype.$37$=function(){this.addTitle("TitleBackground"),this.addStyleColor(H("editor.background"),"shape.background","background"),this.addStyleImage(H("editor.repeatimage"),"shape.repeat.image","repeatImage"),this.addStyleGradient(H("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color","gradient"),this.addStyleColor(H("editor.gradientcolor"),"shape.gradient.color","gradientColor"),this.addStyleZeroToOne(H("editor.clippercentage"),"shape.fill.clip.percentage","fillClipPercentage"),this.addStyleComboBox(H("editor.clipdirection"),"shape.fill.clip.direction",dv.consts.clipDirections,dv.consts.clipDirectionLabels,null,"fillClipDirection")},v.prototype.$38$=function(){this.addTitle("TitleBorder"),this.addStyleInput(H("editor.width"),"shape.border.width","number",1,"borderWidth"),this.addStyleCheckBox(H("editor.widthabsolute"),"shape.border.width.absolute","borderWidthAbsolute"),this.addStyleColor(H("editor.color"),"shape.border.color","borderColor"),this.addStylePattern(H("editor.pattern"),"shape.border.pattern","borderPattern"),this.addStyleCheckBox(H("editor.threed"),"shape.border.3d","border3d"),this.addStyleColor(H("editor.threedcolor"),"shape.border.3d.color","border3dColor"),this.addStyleComboBox(H("editor.cap"),"shape.border.cap",dv.consts.caps,dv.consts.capLabels,null,"borderCap"),this.addStyleComboBox(H("editor.join"),"shape.border.join",dv.consts.joins,dv.consts.joinLabels,null,"borderJoin"),this.addStyleInput(H("editor.depth"),"shape.depth","int",1,"depth").items.tag="shapeDepth",this.addStyleInput(H("editor.radius"),"shape.corner.radius","number",1,"cornerRadius").items.tag="shapeCornerRadius",this.addStyleInput(H("editor.sides"),"shape.polygon.side","int",1,"polygonSide").items.tag="shapePolygonSide"},v.prototype.addDashProperties=function(){this.addTitle("TitleDash"),this.addStyleCheckBox(H("editor.dash"),"shape.dash","dash"),this.addStylePattern(H("editor.pattern"),"shape.dash.pattern","dashPattern"),this.addStyleColor(H("editor.color"),"shape.dash.color","dashColor"),this.addStyleInput(H("editor.offset"),"shape.dash.offset","number",1,"dashOffset"),this.addStyleInput(H("editor.width"),"shape.dash.width","number",1,"dashWidth"),this.addStyleCheckBox(H("editor.threed"),"shape.dash.3d","dash3d"),this.addStyleColor(H("editor.threedcolor"),"shape.dash.3d.color","dash3dColor")},v.prototype.addArcProperties=function(){this.addTitle("TitleArc"),this.addStyleCheckBox(H("editor.arcoval"),"shape.arc.oval","arcOval"),this.addStyleCheckBox(H("editor.closed"),"shape.arc.close","arcClose"),this.addStyleRotation(H("editor.arcfrom"),"shape.arc.from","arcFrom"),this.addStyleRotation(H("editor.arcto"),"shape.arc.to","arcTo")},v}(oH),NH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){P.prototype.initForm.call(this),this.addTitle("TitleImage");var v=[];this.addLabelImage(v,H("editor.name"),function(P){return P.s("image")},function(P,v){GP(v)&&v.endsWith("[...]")||P.s("image",v)}),this.addButton(v,null,H("editor.resetsize"),"editor.resetsize.state",function(P){P instanceof ht.Node&&P.setSize(-1,-1)}),this.addFuncRow(v,"image","name"),this.addStyleColor(H("editor.color"),"body.color","color"),this.addStyleStretch(H("editor.stretch"),"image.stretch","stretch")},v}(oH),EH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){P.prototype.initForm.call(this),this.$44$()},v.prototype.$44$=function(){this.addTitle("TitleBorder"),this.addStyleInput(H("editor.width"),"border_width","number",1,"border"),this.addStyleColor(H("editor.color"),"border_color","color")},v}(oH),sH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){P.prototype.initForm.call(this),this.addBasicChartProperties()},v.prototype.addBasicChartProperties=function(){this.addTitle("TitleChart"),this.addStyleCheckBox(H("editor.text"),"chart.label","label"),this.addStyleColor(H("editor.color"),"chart.label.color","labelColor"),this.addStyleFont(H("editor.font"),"chart.label.font","labelFont")},v}(oH),WH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){P.prototype.initForm.call(this),this.addPieChartProperties()},v.prototype.addBasicChartProperties=function(){P.prototype.addBasicChartProperties.call(this),this.addStyleRotation(H("editor.rotation"),"chart.start.angle","startAngle"),this.addStyleCheckBox(H("editor.hollow"),"chart.hollow","hollow")},v.prototype.createChartIndexColumn=function(P){var v=this;return{name:P,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(P){return"chart.values"===P.getTag()?"number":"color"},getValue:function(r){if(v.data){var m=v.data.s(r.getTag());return m?m[P]:void 0}},setValue:function(r,m,H,I){var Y=r.getTag(),U=function(v,r){var m=vv(v.s(Y));m[P]=r,"chart.values"===Y?AP(m):Pv(m),v.s(Y,m)};v.setValue(U,H)}}},v.prototype.addPieChartProperties=function(){var P=this,v=this.tableModel=new ht.DataModel,r=this.tablePane=new br(v),m=this.tableView=r.getTableView();r.getTableHeader().setMovable(!1),m.setEditable(!0),r.getView().style.border=dv.config.color_line+" solid 1px";var I=[r];this.addRow(I,[.1],ht.Default.widgetRowHeight+4*m.getRowHeight()).keys={name:"chartTable"};var Y=new ht.Data,U=new ht.Data;Y.setTag("chart.values"),U.setTag("chart.colors"),v.add(Y),v.add(U),this.updateHandlers.push(function(){if(!I.hidden&&P.data){m.getColumnModel().clear(),r.addColumns([{name:H("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(v){if(!P.data)return 0;var r=P.data.s("chart.values");return r?r.length:0},setValue:function(v,r,m,H){var I=function(P,v){if(v>=0){var r=vv(P.s("chart.values"),v);AP(r),P.s("chart.values",r),r=vv(P.s("chart.colors"),v),Pv(r),P.s("chart.colors",r)}};P.setValue(I,m)}},{tag:"binding",name:H("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(v,m,H,I){var Y="chart.values"===v.getTag()?"values":"colors";return P.editor.funcView.toggle(r,v.getTag(),Y,P),!1},drawCell:function(v,r,m,H,I,Y,U,o,x){var N=!!P.data.a(r.getTag()),E=ht.Default.getImage(N?"editor.bind":"editor.unbind"),s=N&&!m?dv.config.color_select:dv.config.color_dark;l(v,E,"centerUniform",I,Y,U,o,r,x,s)}}]);for(var v=P.data.s("chart.values"),Y=v?v.length:0,U=0;U<Y;U++)r.addColumns([P.createChartIndexColumn(U)])}})},v}(sH),fH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){P.prototype.initForm.call(this),this.addOneDimensionalProperties()},v.prototype.createChartIndexColumn=function(P){var v=this;return{name:P,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(P){return"values"===P.getTag()?"number":"color"},getValue:function(r){if(v.data){var m=_P(v.data.s("chart.series"));if(m&&m[0]){var H=_P(m[0][r.getTag()]);return H?H[P]:void 0}}},setValue:function(m,H,I,Y){var U=m.getTag(),o=function(v,m){var H=v.s("chart.series");if(H){var I=r(H),Y=_P(I);if(Y[0]){var o=_P(Y[0][U]);o&&o[P]!==m&&(o[P]=m,"values"===U?AP(o):Pv(o),v.s("chart.series",I))}}};v.setValue(o,I)}}},v.prototype.addOneDimensionalProperties=function(){var P=this,v=this.tableModel=new ht.DataModel,m=this.tablePane=new br(v),I=this.tableView=m.getTableView();m.getTableHeader().setMovable(!1),I.setEditable(!0),m.getView().style.border=dv.config.color_line+" solid 1px";var Y=[m];this.addRow(Y,[.1],ht.Default.widgetRowHeight+4*I.getRowHeight()).keys={name:"chartTable"};var U=new ht.Data,o=new ht.Data;U.setTag("values"),o.setTag("colors"),v.add(U),v.add(o),this.updateHandlers.push(function(){if(!Y.hidden&&P.data){I.getColumnModel().clear(),m.addColumns([{name:H("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(v){if(!P.data)return 0;var r=_P(P.data.s("chart.series"));if(!r)return 0;if(!r[0])return 0;var m=_P(r[0].values);return m?m.length:0},setValue:function(v,m,H,I){var Y=function(P,v){if(v>=0){var m=P.s("chart.series"),H=m?r(m):[],I=_P(H);I[0]||(I[0]={});var Y=I[0];Y.values||(Y.values=[]),Y.colors||(Y.colors=[]);var U=_P(Y.values),o=_P(Y.colors);v===U.length&&v===o.length||(U.length=v,o.length=v,AP(U),Pv(o),P.s("chart.series",H))}};P.setValue(Y,H)}},{tag:"binding",name:H("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(v,H,I,Y){var U=v.getTag(),o=function(){return Kv(P.data,U)},x=function(v){P.setValue(function(P,m){var H=P.s("chart.series");if(H){var I=r(H),Y=_P(I);if(Y[0]){var o=_P(Y[0][U]);Y[0][U]=v?{value:o,func:v}:o,P.s("chart.series",I)}}},v)};return P.editor.funcView.toggle(m,U,U,P,o,x),!1},drawCell:function(v,r,m,H,I,Y,U,o,x){var N=!!Kv(P.data,r.getTag()),E=ht.Default.getImage(N?"editor.bind":"editor.unbind"),s=N&&!m?dv.config.color_select:dv.config.color_dark;l(v,E,"centerUniform",I,Y,U,o,r,x,s)}}]);for(var v=Jv(P.data,"values"),U=v?v.length:0,o=0;o<U;o++)m.addColumns([P.createChartIndexColumn(o)])}})},v}(sH),GH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){P.prototype.initForm.call(this),this.addSeriesChartProperties()},v.prototype.addSeriesChartProperties=function(){var P=this,v=[],m=function(P){var v=P.s("chart.series");return v?v.length:0},I=function(P,v){if(v>=0){var m=P.s("chart.series"),H=m?r(m):[],I=_P(H);if(I.length!==v){I.length=v;for(var Y=void 0,U=0;U<v;U++){I[U]||(I[U]={});var o=I[U];o.values||(o.values=[]),o.color||(o.color=ht.Color.chart[U%ht.Color.chart.length]);var x=_P(o.values);_P(o.colors);0===U?Y=x.length:x.length=Y,AP(x)}P.s("chart.series",H)}}};this.addLabelInput(v,H("editor.series"),m,I,"int",1),m=function(P){var v=P.s("chart.series");if(v){var r=v[0];if(r){var m=_P(r.values);return m?m.length:0}}return 0},I=function(P,v){if(v>=0){var m=P.s("chart.series"),H=m?r(m):[],I=_P(H);if(I.length){for(var Y=0;Y<I.length;Y++){I[Y]||(I[Y]={});var U=I[Y];U.values||(U.values=[]);var o=_P(U.values);if(o.length===v)return;U.color||(U.color=ht.Color.chart[Y%ht.Color.chart.length]);_P(U.colors);o.length=v,AP(o)}P.s("chart.series",H)}}},this.addLabelInput(v,H("editor.length"),m,I,"int",1),this.addRow(v,[dv.config.indent,.1,dv.config.indent2,.1]).keys={name:"chartSeries"};var Y=this.tableModel=new ht.DataModel,U=this.tablePane=new br(Y),o=this.tableView=U.getTableView();U.getTableHeader().setMovable(!1),o.setEditable(!0),U.getView().style.border=dv.config.color_line+" solid 1px";var x=[U];this.addRow(x,[.1],160).keys={name:"chartTable"},this.updateHandlers.push(function(){if(!x.hidden&&P.data){Y.clear(),o.getColumnModel().clear();var v=P.data.s("chart.series");if(v)for(var m=0;m<v.length;m++){var I=new ht.Data;I.serie=v[m],I.index=m,Y.add(I)}if(U.addColumns([{name:H("editor.index"),width:50,align:"center",sortable:!1,clickable:!1,valueType:"int",getValue:function(P){return P.index}},{tag:"binding",name:H("editor.colorbinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(v,m,H,I){var Y=v.index,o=function(){return wP(v.serie.color)},x=function(v){P.setValue(function(P,m){var H=P.s("chart.series");if(H){var I=r(H),U=_P(I),o=U[Y];if(o){var x=_P(o.color);o.color=v?{value:x,func:v}:x,P.s("chart.series",I)}}},v)};return P.editor.funcView.toggle(U,"values","values",P,o,x),!1},drawCell:function(P,v,r,m,H,I,Y,U,o){var x=!!wP(v.serie.color),N=ht.Default.getImage(x?"editor.bind":"editor.unbind"),E=x&&!r?dv.config.color_select:dv.config.color_dark;l(P,N,"centerUniform",H,I,Y,U,v,o,E)}},{name:H("editor.color"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"color",getValue:function(P){return _P(P.serie.color)},setValue:function(v,m,H,I){var Y=v.index,U=_P(v.serie.color);if(H&&U!==H){var o=function(P,v){var m=P.s("chart.series");if(m){var H=r(m),I=_P(H),U=I[Y];if(U){var o=wP(U.color);U.color=o?{value:v,func:o}:v,P.s("chart.series",H)}}};P.setValue(o,H)}}},{tag:"binding",name:H("editor.valuebinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(v,m,H,I){var Y=v.index,o=function(){return wP(v.serie.values)},x=function(v){P.setValue(function(P,m){var H=P.s("chart.series");if(H){var I=r(H),U=_P(I),o=U[Y];if(o){var x=_P(o.values);o.values=v?{value:x,func:v}:x,P.s("chart.series",I)}}},v)};return P.editor.funcView.toggle(U,"values","values",P,o,x),!1},drawCell:function(P,v,r,m,H,I,Y,U,o){var x=!!wP(v.serie.values),N=ht.Default.getImage(x?"editor.bind":"editor.unbind"),E=x&&!r?dv.config.color_select:dv.config.color_dark;l(P,N,"centerUniform",H,I,Y,U,v,o,E)}}]),v){var N=v[0];if(N){var E=_P(N.values);if(E)for(var s=0;s<E.length;s++)U.addColumns([P.createChartIndexColumn(s)])}}}})},v.prototype.createChartIndexColumn=function(P){var v=this;return{name:P,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"number",getValue:function(v){var r=_P(v.serie.values);return r?r[P]:void 0},setValue:function(m,H,I,Y){var U=m.index,o=function(v,m){var H=v.s("chart.series");if(H){var I=r(H),Y=_P(I);if(Y[U]){var o=_P(Y[U].values);o&&o[P]!==m&&(o[P]=m,v.s("chart.series",I))}}};v.setValue(o,I)}}},v}(sH),tH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.addBasicChartProperties=function(){P.prototype.addBasicChartProperties.call(this),this.addStyleComboBox(H("editor.type"),"chart.type",dv.consts.columnChartTypes,dv.consts.columnChartTypeLabels,null,"type")},v.prototype.$14$=function(){},v}(GH),LH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){P.prototype.initForm.call(this)},v}(GH),OH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){this.$27$(),P.prototype.initForm.call(this)},v.prototype.isTitleVisible=function(v){return!("TitleEditingPoint"===v.title&&!this.editor.pointsEditingMode)&&P.prototype.isTitleVisible.call(this,v)},v.prototype.$14$=function(){var P=[];this.addLabelInput(P,H("editor.type"),function(P){return P.compType}),this.addRow(P,[dv.config.indent,.1]).keys={name:"type"}},v.prototype.$37$=function(){P.prototype.$37$.call(this),this.addStyleComboBox(H("editor.fillrule"),"shape.fill.rule",dv.consts.fillRules,dv.consts.fillRuleLabels,null,"fillRule")},v.prototype.$38$=function(){P.prototype.$38$.call(this);var v=[];this.addLabelCheckBox(v,H("editor.closed"),function(P){return P.isClosePath()},function(P,v){P instanceof ht.Shape&&P.setClosePath(v)}),this.addFuncRow(v,"name")},v}(xH),QH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){P.prototype.initForm.call(this),this.addTitle("TitleText"),this.addStyleLabel(H("editor.text"),"text","text"),this.addStyleAlign(H("editor.align"),"text.align","align"),this.addStyleVAlign(H("editor.valign"),"text.vAlign","vAlign"),this.addStyleColor(H("editor.color"),"text.color","color"),this.addStyleFont(H("editor.font"),"text.font","font")},v.prototype.$20$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(H("editor.shadow"),"text.shadow","shadow"),this.addStyleColor(H("editor.shadowcolor"),"text.shadow.color","shadowColor"),this.addStyleInput(H("editor.shadowblur"),"text.shadow.blur","number",1,"shadowblur"),this.addStyleInput(H("editor.shadowoffsetx"),"text.shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(H("editor.shadowoffsety"),"text.shadow.offset.y","number",1,"shadowOffsetYs")},v}(oH),qH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.$14$=function(){var P=[];this.addLabelInput(P,H("editor.type"),function(P){return"function"}),this.addFuncRow(P,"type")},v}(oH),ZH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){P.prototype.initForm.call(this),this.addComponent()},v.prototype.$14$=function(){},v.prototype.addComponent=function(){var P=this;this.addTitle("TitleComponent");var v=[];v.forceToUpdate=!0;var r=function(P,v){return!!v.view.draggingData&&v.view.draggingData.fileType===vr};this.addLabelURL(v,H("editor.type"),function(v){var r=v.s("type");return P.$43$(v.properties),r},function(P,v){P.s("type",v)},r);var m=new ht.widget.Image;m.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!v.hidden){var r=P.data?P.data.s("type"):null;P.$43$(P.data.properties),m.setIcon(r?fP(r):null),m.compType=r}});var I=m.getView();I.style.cursor="pointer";var Y=function(v){v.preventDefault(),q(v)?P.editor.open(m.compType):P.editor.selectFileNode(m.compType)};I.addEventListener("mousedown",Y,!1),I.addEventListener("touchstart",Y,!1),v.push(m),this.addFuncRow(v,"type")},v.prototype.$43$=function(P){var v=this;this.properties!==P&&(this.pendingProperties=P,this._updateComponentLater||(this._updateComponentLater=!0,requestAnimationFrame(function(){v.$61$()})))},v.prototype.$61$=function(){if(this._updateComponentLater=!1,this.properties===this.pendingProperties)return void(this.pendingProperties=null);if(this._rows=this.$47$,this.removeRows(this.$36$),this.propertiesHandlers&&this.propertiesHandlers.length&&this.propertiesHandlers.forEach(this.removeUpdateHandler,this),this.$36$=[],this.properties=this.pendingProperties,this.properties){var P=this.updateHandlers.length,v=void 0;for(var r in this.properties){var m=this.properties[r];if(m.group&&v!==m.group){v=m.group;var H=this.addTitle(v);this.$36$.push(H)}this.addProperty(r,m)}this.propertiesHandlers=this.updateHandlers.slice(P)}this.$47$=this._rows,this.filterProperties()},v.prototype.addProperty=function(P,v){var r=dv.config.valueTypes[v.valueType];if(!r)return this.editor.fireEvent("error",{message:"Wrong value type:"+v.valueType}),!1;var m=H(v.name)||P,I=void 0,Y=void 0,U=void 0;if(v.extraInfo&&v.extraInfo.enum&&(I=v.extraInfo.enum.values,Y=v.extraInfo.enum.labels,U=v.extraInfo.enum.icons),I)this.addStyleComboBox(m,P,I,Y,U,P);else if("int"===r.type||"number"===r.type){var o=(r.max,r.min,function(v){return v.s(P)}),x=function(v,r){v.s(P,r)},N=[];r.angle?this.addLabelRotation(N,m,o,x,r.min,r.max,r.step):this.addLabelRange(N,m,o,x,r.min,r.max,r.step,r.type),this.addFuncRow(N,P,P)}else if("color"===r.type)this.addStyleColor(m,P,P);else if("boolean"===r.type)this.addStyleCheckBox(m,P,P);else if("enum"===r.type)this.addStyleComboBox(m,P,r.values,r.labels,r.icons,P);else if("multiline"===r.type)this.addStyleMultiline(m,P,P,r.rows);else if("font"===r.type)this.addStyleFont(m,P,P,r.rows);else if("image"===r.type)this.addStyleImage(m,P,P);else if("url"===r.type)this.addStyleURL(m,P,P);else if("colorArray"===r.type)this.addStyleArray(m,P,P,"color",r.rows);else if("numberArray"===r.type)this.addStyleArray(m,P,P,"number",r.rows);else if("stringArray"===r.type)this.addStyleArray(m,P,P,"string",r.rows);else if("objectArray"===r.type)this.addStyleArray(m,P,P,"object",r.rows);else if("function"===r.type){var E=void 0;v.extraInfo&&v.extraInfo.arguments&&(E=v.extraInfo.arguments),this.addStyleFunction(m,P,P,E)}else if("custom"===r.type){var s=function(v){return v.s(P)},W=function(v,r){v.s(P,r)},f=[];r.buildUI(this,f,m,s,W),this.addFuncRow(f,P,P)}else"object"===r.type?this.addStyleObject(m,P,P):this.addStyleInput(m,P,null,null,P);return this.$36$.push(this._rows[this._rows.length-1]),!0},v}(oH),SH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){this.$27$(),this.addTitle("TitleBasic"),this.$14$(),this.$15$()},v.prototype.isTitleVisible=function(v){return!("TitleEditingPoint"===v.title&&!this.editor.pointsEditingMode)&&P.prototype.isTitleVisible.call(this,v)},v}(oH),CH=function(P){function v(r,m){return hv(this,v),Rv(this,P.call(this,r,m))}return Dv(v,P),v.prototype.initForm=function(){this.addTitle("TitleBasic"),this.$14$(),this.$15$()},v}(oH),uH=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m.getView().style.background=dv.config.color_pane,m}return Dv(v,P),v.prototype.handleDataModelPropertyChange=function(P){var v=this.inspector;v&&v.global&&v.$35$(P)},v.prototype.handleDataModelChange=function(P){
var v=this.inspector;v&&v.global&&v.$35$()},v.prototype.handleDataPropertyChange=function(P){var v=this.inspector;v&&!v.global&&v.data===P.data&&v.$35$(P)},v.prototype.handleSelectionChange=function(P){this.updateInspector(),this.inspector&&this.inspector.updateProperties()},v.prototype.$42$=function(P){var v=this.inspector;v&&("pointsEditingMode"===P.property?v.filterPropertiesLater():"shapePointStatus"===P.property&&v.editingPointButtons&&v.editingPointButtons.forEach(function(v){v.setSelected(v.statusValue===P.newValue),v.setBorderColor(v.isSelected()?dv.config.color_line:null)}))},v.prototype.$6$=function(P){this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.removeDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ums(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().ump(this.$42$,this)),P?(this.currentView=P.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.addDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ms(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().mp(this.$42$,this)):(this.currentView=null,this.dataModel=null),this.$95$()},v.prototype.$95$=function(){var P=this;this._updateInspectorLater||(this._updateInspectorLater=!0,requestAnimationFrame(function(){P.updateInspector()}))},v.prototype.getDataOfDisplayInspector=function(P){return P instanceof ht.Shape?this.htShapeInspector:P instanceof ht.Edge?this.htEdgeInspector:P instanceof ht.Group?this.htGroupInspector:P instanceof ht.Text?this.htTextInspector:P instanceof ht.RefGraph?this.htRefGraphInspector:P instanceof ht.Block?this.htBlockInspector:P instanceof ht.Node?this.htNodeInspector:this.htDataInspector},v.prototype.getCompOfSymbolInspector=function(P){if(P instanceof Sr)return this.clipInspector;if(P instanceof Cr)return this.restoreInspector;if(P instanceof Or)return this.basicInspector;if(P instanceof rm)return this.borderInspector;if(P instanceof qr)return this.imageInspector;if(P instanceof mm)return this.pieChartInspector;if(P instanceof Hm){var v=_P(P.s("chart.series"));return v&&v.length<=1&&v[0].colors?this.oneDimensionalColumnChartInspector:this.columnChartInspector}return P instanceof Im?this.lineChartInspector:P instanceof Qr?this.shapeInspector:P instanceof Zr?this.textInspector:P instanceof Om?this.funcTypeInspector:P instanceof vm?this.compTypeInspector:null},v.prototype.updateInspector=function(){if(this._updateInspectorLater=!1,this.dataModel){var P=this.dataModel.sm().ld();P?this.currentView instanceof qm?this.inspector=this.getCompOfSymbolInspector(P):this.currentView instanceof Wm?this.inspector=this.getDataOfDisplayInspector(P):this.currentView instanceof dv.SceneView&&(this.inspector=this.getDataOfSceneInspector(P)):this.currentView instanceof qm?this.inspector=this.symbolInspector:this.currentView instanceof Wm?this.inspector=this.displayInspector:this.currentView instanceof dv.SceneView&&(this.inspector=this.sceneInspector)}else this.inspector=null},ev(v,[{key:"basicInspector",get:function(){return this._basicInspector||(this._basicInspector=new xH(this.editor,"basic")),this._basicInspector}},{key:"borderInspector",get:function(){return this._borderInspector||(this._borderInspector=new EH(this.editor,"border")),this._borderInspector}},{key:"clipInspector",get:function(){return this._clipInspector||(this._clipInspector=new SH(this.editor,"clip")),this._clipInspector}},{key:"restoreInspector",get:function(){return this._restoreInspector||(this._restoreInspector=new CH(this.editor,"restore")),this._restoreInspector}},{key:"imageInspector",get:function(){return this._imageInspector||(this._imageInspector=new NH(this.editor,"image")),this._imageInspector}},{key:"pieChartInspector",get:function(){return this._pieChartInspector||(this._pieChartInspector=new WH(this.editor,"pieChart")),this._pieChartInspector}},{key:"oneDimensionalColumnChartInspector",get:function(){return this._oneDimensionalColumnChartInspector||(this._oneDimensionalColumnChartInspector=new fH(this.editor,"oneDimensionalColumnChartInspector")),this._oneDimensionalColumnChartInspector}},{key:"columnChartInspector",get:function(){return this._columnChartInspector||(this._columnChartInspector=new tH(this.editor,"columnChart")),this._columnChartInspector}},{key:"lineChartInspector",get:function(){return this._lineChartInspector||(this._lineChartInspector=new LH(this.editor,"lineChart")),this._lineChartInspector}},{key:"shapeInspector",get:function(){return this._shapeInspector||(this._shapeInspector=new OH(this.editor,"shape")),this._shapeInspector}},{key:"textInspector",get:function(){return this._textInspector||(this._textInspector=new QH(this.editor,"text")),this._textInspector}},{key:"funcTypeInspector",get:function(){return this._funcTypeInspector||(this._funcTypeInspector=new qH(this.editor,"func")),this._funcTypeInspector}},{key:"compTypeInspector",get:function(){return this._compTypeInspector||(this._compTypeInspector=new ZH(this.editor,"comp")),this._compTypeInspector}},{key:"htShapeInspector",get:function(){return this._htShapeInspector||(this._htShapeInspector=new HH(this.editor,"Shape")),this._htShapeInspector}},{key:"htBlockInspector",get:function(){return this._htBlockInspector||(this._htBlockInspector=new IH(this.editor,"Block")),this._htBlockInspector}},{key:"htRefGraphInspector",get:function(){return this._htRefGraphInspector||(this._htRefGraphInspector=new YH(this.editor,"RefGraph")),this._htRefGraphInspector}},{key:"htGroupInspector",get:function(){return this._htGroupInspector||(this._htGroupInspector=new mH(this.editor,"Group")),this._htGroupInspector}},{key:"htEdgeInspector",get:function(){return this._htEdgeInspector||(this._htEdgeInspector=new rH(this.editor,"Edge")),this._htEdgeInspector}},{key:"htNodeInspector",get:function(){return this._htNodeInspector||(this._htNodeInspector=new Am(this.editor,"Node")),this._htNodeInspector}},{key:"htTextInspector",get:function(){return this._htTextInspector||(this._htTextInspector=new UH(this.editor,"Text")),this._htTextInspector}},{key:"htDataInspector",get:function(){return this._htDataInspector||(this._htDataInspector=new Fm(this.editor,"Data")),this._htDataInspector}},{key:"displayInspector",get:function(){return this._displayInspector||(this._displayInspector=new Vm(this.editor,"display")),this._displayInspector}},{key:"symbolInspector",get:function(){return this._symbolInspector||(this._symbolInspector=new pm(this.editor,"symbol")),this._symbolInspector}},{key:"inspector",get:function(){return this.getCenterView()},set:function(P){var v=this.getCenterView();P?(P.dataModel=this.dataModel,this.dataModel&&(P.data=this.dataModel.sm().ld()),this.getCenterView()!==P&&this.setCenterView(P),P.filterPropertiesLater()):this.setCenterView(null),P===v||null==P&&null==v||this.editor.fireEvent("inspectorUpdated",{inspector:P,oldInspector:v})}}]),v}(ur),gH=function(){function P(v){hv(this,P),this.editor=v}return P.prototype.showTip=function(P,v){this.tip.innerHTML=P,this.tip.parentNode!==document.body&&ht.Default.appendToScreen(this.tip);var r=u(v);this.tip.style.left=r.x+15+"px",this.tip.style.top=r.y+"px"},P.prototype.hideTip=function(){_(this.tip)},P.prototype.clearDropView=function(P,v){this._dropView&&(this._dropView.handleCrossDrag(P,"exit",v),this._dropView=null)},P.prototype.crossDrag=function(P,v){var r=this._dropView,m=this.$96$(P,v);r!==m?(r&&r.handleCrossDrag(P,"exit",v),m&&m.handleCrossDrag(P,"enter",v)):m&&m.handleCrossDrag(P,"over",v),this._dropView=m},P.prototype.crossDrop=function(P,v){this._dropView&&(this._dropView.handleCrossDrag(P,"drop",v),this._dropView=null)},P.prototype.crossCancel=function(P,v){this._dropView&&(this._dropView.handleCrossDrag(P,"cancel",v),this._dropView=null)},P.prototype.$96$=function(P,v){for(var r=C(P);r&&!(r._ht&&r._ht.isDroppable&&r._ht.isDroppable(P,v));)r=r.parentNode;return r?r._ht:null},ev(P,[{key:"tip",get:function(){if(!this._tip){this._tip=R(),this._tip.className="ht-editor-dnd-tip";var P=this._tip.style;P.whiteSpace="nowrap",P.color=dv.config.color_light,P.background=dv.config.color_transparent,P.font=ht.Default.labelFont,P.padding="4px",P.borderRadius="4px",P.position="absolute",P.zIndex=1e4}return this._tip}}]),P}();dv.DND=gH;var nH=function(){function P(v,r){hv(this,P),this.editor=v,this.dnd=v.dnd,this._dragInfo={view:this},r&&(r.addEventListener("dragenter",this.handle_dragenter.bind(this),!1),r.addEventListener("dragover",this.handle_dragover.bind(this),!1),r.addEventListener("dragleave",this.handle_dragleave.bind(this),!1),r.addEventListener("drop",this.handle_drop.bind(this),!1),r.addEventListener("dragexit",this.handle_dragexit.bind(this),!1),r.addEventListener("dragend",this.handle_dragend.bind(this),!1)),this.isDroppableToDisplayView=!0,this.isDroppableToSymbolView=!0}return P.prototype.handle_dragenter=function(P){F(P),P.stopPropagation(),this.dnd.crossDrag(P,this._dragInfo)},P.prototype.handle_dragover=function(P){F(P),P.stopPropagation(),this.dnd.crossDrag(P,this._dragInfo)},P.prototype.handle_dragleave=function(P){F(P),P.stopPropagation(),this.dnd.crossCancel(P,this._dragInfo)},P.prototype.handle_dragexit=function(P){F(P),P.stopPropagation(),this.dnd.crossCancel(P,this._dragInfo)},P.prototype.handle_dragend=function(P){F(P),P.stopPropagation(),this.dnd.crossCancel(P,this._dragInfo)},P.prototype.handle_drop=function(P){F(P),P.stopPropagation(),this.dnd.crossDrop(P,this._dragInfo)},P}();dv.DNDFromOutside=nH;var JH=function(P){function v(r){hv(this,v);var m=Rv(this,P.call(this));return m.editor=r,m}return Dv(v,P),v.prototype.init=function(){var P=this,v=this.contentDiv=ht.Default.createDiv();v.style.lineHeight="28px",v.style.textAlign="center",v.style.fontSize="14px",this.setConfig({closable:!0,draggable:!0,width:320,height:120,content:v,buttons:[{label:H("editor.yes"),action:function(){P.onYes&&P.onYes(),P.hide()}},{label:H("editor.no"),action:function(){P.onNo&&P.onNo(),P.hide()}},{label:H("editor.cancel"),action:function(){P.hide()}}]}),this._init=!0},v.prototype.show=function(){var v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H("editor.tooltip"),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",m=arguments[2],I=arguments[3];this._init||this.init(),this.setTitle(v),this.contentDiv.innerHTML=r,this.onYes=m,this.onNo=I,P.prototype.show.call(this)},v}(zv),KH=function(){function P(v){hv(this,P),this.params=v||{},this.$39$=this.params.$39$,this._eventNotifier=new ht.Notifier;var r=ht.Default.getClass(dv.config.serviceClass)||ir;this.$40$=new r(this.handleServiceEvent.bind(this),this),this.emptyFunc=function(){}}return P.prototype.addEventListener=function(P,v,r){this._eventNotifier.add(P,v,r)},P.prototype.removeEventListener=function(P,v){this._eventNotifier.remove(P,v)},P.prototype.fireEvent=function(P,v){if(v=v||{},!v.displayView||!v.displayView.mute){dv.config.handleEvent&&dv.config.handleEvent(this,P,v);var r="on"+P.charAt(0).toUpperCase()+P.slice(1);dv.config[r]&&dv.config[r](this,v),this.params&&this.params[r]&&this.params[r](this,v),this._eventNotifier.fire({editor:this,type:P,params:v})}},P.prototype.handleServiceEvent=function(P){if("connected"===P.type)this.init&&(this.init(),this.init=null);else if("fileChanged"===P.type){var v=P.path;K(v)&&this.$101$(),y(v)?this.requestDisplays():A(v)?this.requestSymbols():PP(v)?this.requestComponents():vP(v)?this.requestScenes():rP(v)?this.requestModels():mP(v)&&this.requestAssets()}else"download"===P.type?this.downloadFile(P.path):"confirm"===P.type&&this.requestImport(P.path);this.fireEvent(P.type,P)},P.prototype.onPropertyChanged=function(P){"rulerEnabled"!==P.property&&"gridEnabled"!==P.property||this.rightToolbar.iv()},P.prototype.init=function(){this._inspectorCompact=!Y(dv.config.compactFilter),this.menus=[],this.cloneInfo={type:null,funcArray:[],jsonArray:[]},this.initSID(),this.$7$(),this.requestDisplays(),this.requestSymbols(),this.requestComponents(),this.requestScenes(),this.requestModels(),this.requestAssets(),this.$39$&&this.$39$.addEventListener("keydown",this.handleKeydown.bind(this),!1),this.dnd=new gH(this),this.dndFromOutside=new nH(this,this.$39$),this.fireEvent("editorCreated"),this.fireEvent("mainMenuCreated"),this.fireEvent("mainToolbarCreated"),this.fireEvent("rightToolbarCreated");var P=this.params.open||v("hteditor");P&&(IP(P)?this._pendingOpenJSON=P:"newdisplay"===P?this.newDisplayView():"newsymbol"===P?this.newSymbolView():"newcomponent"===P&&this.newComponent())},P.prototype.$7$=function(){this.mainTabView=new Zm(this),this.funcView=new am(this),this.eventView=new im(this),this.functionView=new $m(this),this.objectView=new Xm(this),this.textView=new _m(this),this.fontView=new cm(this),this.iconsView=new Dm(this),this.componentView=new bm(this),this.messageView=new Rm(this),this.confirmView=new JH(this),this.attachPointsView=new zm(this),this.fontConverterOptionView=new Bm(this),this.$8$(),this.$9$(),this.$11$(),this.$10$(),this.leftSplitView=new jr(this.leftTopTabView,this.mainTabView,"h",dv.config.leftSplitViewPosition),this.rightSplitView=new jr(this.rightTopBorderPane,this.rightBottomTabView,"v",dv.config.rightSplitViewPosition),this.mainSplitView=new jr(this.leftSplitView,this.rightSplitView,"h",dv.config.mainSplitViewPosition),this.mainPane=new ur,this.mainPane.setTopView(this.topBorderPane),this.mainPane.setCenterView(this.mainSplitView),yP(this.mainPane,this.$39$),this.mainPane.validateImpl()},P.prototype.initSID=function(){var P=window.location.href.match("sid=([0-9a-z-]*)");P&&(this.sid=P[1])},P.prototype.$8$=function(){var P=this;this.mainToolbar=new Km(this),this.rightToolbar=new jm(this),this.topBorderPane=new ur,this.topBorderPane.setCenterView(this.mainToolbar),this.topBorderPane.setRightView(this.rightToolbar),this.topBorderPane.setHeight(28),this.rightToolbar.onSumWidthChanged=function(){P.topBorderPane.setRightWidth(P.rightToolbar.getSumWidth())}},P.prototype.$9$=function(){this.displays=new lr(this,dv.config.displaysEditable),this.symbols=new dr(this,dv.config.symbolsEditable),this.components=new Vr(this,dv.config.componentsEditable),this.scenes=new Tr(this,dv.config.scenesEditable),this.models=new pr(this,dv.config.modelsEditable),this.assets=new Fr(this,dv.config.assetsEditable),this.leftTopTabView=new kr,this.scenesTab=this.leftTopTabView.add(H("editor.scenes"),this.scenes,!1,dv.config.scenesVisible),this.displaysTab=this.leftTopTabView.add(H("editor.displays"),this.displays,!1,dv.config.displaysVisible),this.symbolsTab=this.leftTopTabView.add(H("editor.symbols"),this.symbols,!1,dv.config.symbolsVisible),this.componentsTab=this.leftTopTabView.add(H("editor.components"),this.components,!1,dv.config.componentsVisible),this.modelsTab=this.leftTopTabView.add(H("editor.models"),this.models,!1,dv.config.modelsVisible),this.assetsTab=this.leftTopTabView.add(H("editor.assets"),this.assets,!1,dv.config.assetsVisible),this.leftTopTabView.select(this.displaysTab)},P.prototype.$10$=function(){this.inspectorTool=new Sm(this),this.inspectorPane=new uH(this),this.rightTopBorderPane=new ur,this.rightTopBorderPane.setTopView(this.inspectorTool),this.rightTopBorderPane.setCenterView(this.inspectorPane),this.rightTopBorderPane.setTopHeight(ht.Default.widgetHeaderHeight+6)},P.prototype.$11$=function(){var P=this;this.listPane=new um(this),this.layerPane=new gm(this),this.overview=new yr(this),this.dataView=new Cm(this),this.symbolStatePane=new nm(this),this.rightBottomTabView=new kr,this.listPaneTab=this.rightBottomTabView.add(H("editor.list"),this.listPane,!0),this.layerTab=this.rightBottomTabView.add(H("editor.layer"),this.layerPane,!1,!1),this.symbolStateTab=this.rightBottomTabView.add(H("editor.state"),this.symbolStatePane,!1,!1),this.overviewTab=this.rightBottomTabView.add(H("editor.overview"),this.overview),this.dataViewTab=this.rightBottomTabView.add(H("editor.data"),this.dataView);var v=this.rightBottomTabView.getTabModel().sm();v.ms(function(){var r=v.ld();P.dataView.visible=r.getView()===P.dataView,P.overview.setAutoUpdate(r.getView()===P.overview)})},P.prototype.newFolder=function(P){var v=this,r=this.explorer;r&&!function(){var m=P.sm().ld();P!==P.explorer.list||m&&m.fileType===Fv||(m=P.explorer.tree.sm().ld()),m&&!r.isAccordionMode()||(m=P.explorer.rootNode);var I=H("editor.inputnewfoldername");BP(I,"",{nullable:!1,trim:!0,maxLength:dv.config.maxFileNameLength,checkFunc:dv.config.checkFileName},function(P,r){if("ok"===r){var I=m.url+"/"+P;if(v.getFileNode(I))return void lP(H("editor.filenameconflict"),I,function(){});v.request("mkdir",I,function(P){})}})}()},P.prototype.getFileNode=function(P){for(var v=this.leftTopTabView.getTabModel().getDatas(),r=0;r<v.size();r++){var m=v.get(r);if(m.getView()instanceof Br){var H=m.getView().dataModel.getDataById(P);if(H)return H}}return null},P.prototype.selectFileNode=function(P){for(var v=this,r=this.leftTopTabView.getTabModel().getDatas(),m=0;m<r.size();m++){var H=r.get(m);if(H.getView()instanceof Br){var I=function(){var r=H.getView(),m=r.dataModel.getDataById(P);if(m)return v.leftTopTabView.getTabModel().sm().ss(H),r.isAccordionMode()?(m.fileType===Fv?r.accordion.sm().ss(m):(m.getParent().expanded=!0,r.accordion.sm().ss(m)),r.accordion.ivm()):m.fileType===Fv?(r.tree.sm().ss(m),setTimeout(function(){r.tree.makeVisible(m)},500)):(r.tree.sm().ss(m.getParent()),r.list.sm().ss(m),setTimeout(function(){r.tree.makeVisible(m.getParent()),r.list.makeVisible(m)},500)),delete v._pendingSelectURL,{v:void 0}}();if("object"==typeof I)return I.v}}this._pendingSelectURL=P},P.prototype.renameFile=function(P,v,r){var m=this;if(!P||P.$34$||P.a("editable")===!1||!v)return!1;var I=v;IP(P.getName())&&!IP(v)&&(v+=".json");var Y=P.path+"/"+v;if(v=dv.config.checkFileName(v,Y),!v)return lP(H("editor.invalidinput"),I,function(){}),!1;if(v.length>dv.config.maxFileNameLength+5)return lP(H("editor.inputmax"),v,function(){}),!1;if(P.getName()===v)return!1;if(this.getFileNode(Y))return lP(H("editor.filenameconflict"),Y,function(){}),!1;P.$34$=Y;var U={old:P.url,new:P.$34$,fileType:P.fileType};IP(U.old)&&this.request("rename",{old:fP(U.old),new:fP(U.new),fileType:yv},function(P){}),this.request("rename",U,function(H){return H?(m.mainTabView.getTabModel().each(function(r){r.getTag()===P.url&&(r.setTag(P.$34$),r.getView().url=P.$34$,r.setName(M(v)))}),r(),!0):(delete P.$34$,!1)})},P.prototype.moveFile=function(P,v){if(P&&P.a("editable")!==!1&&v&&!P.$34$&&!v.$34$){var r={data:P,url:P.url,parent:v};if(this.fireEvent("fileMoving",r),!r.preventDefault){var m=P.getParent();if(P.setParent(v),m!==P.getParent()){P.$34$=v.url+"/"+P.getName();var H={old:P.url,new:P.$34$};IP(H.old)&&this.request("rename",{old:fP(H.old),new:fP(H.new)},function(P){}),this.request("rename",H,function(P){})}}}},P.prototype.removeFiles=function(P){var v=this;P.forEach(function(P){if(!P.$34$&&P.a("editable")!==!1){var r=P.url||P;IP(r)&&v.request("remove",fP(r),function(P){}),v.request("remove",r,function(P){})}})},P.prototype.requestBase64=function(P,v){this.request("source",{url:P,encoding:"base64",prefix:"data:;base64,"},v)},P.prototype.request=function(P,v,r,m){var H=this;r=r||this.emptyFunc,m?setTimeout(function(){H.$40$.request(P,v,r)},m):this.$40$.request(P,v,r)},P.prototype.requestDisplays=function(){var P=this;this._requestingDisplays||(this.request("explore","/displays",function(v){P._requestingDisplays=!1,P.displays.parse(v),P._pendingOpenJSON&&y(P._pendingOpenJSON)&&(P.displays.dataModel.getDataById(P._pendingOpenJSON)?(P.open(P._pendingOpenJSON),P.selectFileNode(P._pendingOpenJSON)):dv.config.newIfFailToOpen&&(P.newDisplayView(),P.save(null,P._pendingOpenJSON)),delete P._pendingOpenJSON),P._pendingSelectURL&&y(P._pendingSelectURL)&&P.selectFileNode(P._pendingSelectURL)},dv.config.requestDelay),this._requestingDisplays=!0)},P.prototype.requestSymbols=function(){var P=this;this._requestingSymbols||(this.request("explore","/symbols",function(v){P._requestingSymbols=!1,P.symbols.parse(v),P._pendingOpenJSON&&A(P._pendingOpenJSON)&&(P.symbols.dataModel.getDataById(P._pendingOpenJSON)?(P.open(P._pendingOpenJSON),P.selectFileNode(P._pendingOpenJSON)):dv.config.newIfFailToOpen&&(P.newSymbolView(),P.save(null,P._pendingOpenJSON)),delete P._pendingOpenJSON),P._pendingSelectURL&&A(P._pendingSelectURL)&&P.selectFileNode(P._pendingSelectURL)},dv.config.requestDelay),this._requestingSymbols=!0)},P.prototype.requestComponents=function(){var P=this;this._requestingComponents||(this.request("explore","/components",function(v){P._requestingComponents=!1,P.components.parse(v),P._pendingOpenJSON&&PP(P._pendingOpenJSON)&&(P.components.dataModel.getDataById(P._pendingOpenJSON)?P.open(P._pendingOpenJSON):dv.config.newIfFailToOpen&&P.newComponent(),delete P._pendingOpenJSON),P._pendingSelectURL&&PP(P._pendingSelectURL)&&P.selectFileNode(P._pendingSelectURL)},dv.config.requestDelay),this._requestingComponents=!0)},P.prototype.requestScenes=function(){var P=this;this._requestingScenes||(this.request("explore","/scenes",function(v){P._requestingScenes=!1,P.scenes.parse(v),P._pendingOpenJSON&&vP(P._pendingOpenJSON)&&(P.open(P._pendingOpenJSON),delete P._pendingOpenJSON),P._pendingSelectURL&&isScenes(P._pendingSelectURL)&&P.selectFileNode(P._pendingSelectURL)},dv.config.requestDelay),this._requestingScenes=!0)},P.prototype.requestModels=function(){var P=this;this._requestingModels||(this.request("explore","/models",function(v){P._requestingModels=!1,P.models.parse(v),P._pendingOpenJSON&&rP(P._pendingOpenJSON)&&(P.open(P._pendingOpenJSON),delete P._pendingOpenJSON),P._pendingSelectURL&&rP(P._pendingSelectURL)&&P.selectFileNode(P._pendingSelectURL)},dv.config.requestDelay),this._requestingModels=!0)},P.prototype.requestAssets=function(){var P=this;this._requestingAssets||(this.request("explore","/assets",function(v){P._requestingAssets=!1,P.assets.parse(v),P._pendingOpenJSON&&mP(P._pendingOpenJSON)&&(P.open(P._pendingOpenJSON),delete P._pendingOpenJSON),P._pendingSelectURL&&mP(P._pendingSelectURL)&&P.selectFileNode(P._pendingSelectURL)},dv.config.requestDelay),this._requestingAssets=!0)},P.prototype.requestImport=function(P){var v=this;dv.config.importConfirm?lP("",H("editor.importconfirm"),function(){v.request("import",{path:P,move:!0})},function(){v.request("import",{path:P,move:!1})}):this.request("import",{path:P,move:!0})},P.prototype.downloadFile=function(P){try{var v=document.createElement("iframe");v.src=P,v.style.display="none",document.body.appendChild(v)}catch(P){}},P.prototype.$6$=function(P){var v=this._currentTab,r=this.rightBottomTabView.getTabModel().sm();this._currentTab=P,this.inspectorPane.$6$(P),this.listPane.$6$(P),this.overview.$6$(P),this.dataView.$6$(P),this.layerPane.$6$(P),this.mainToolbar.$6$(P),this.rightToolbar.$6$(P),this.inspectorTool.$6$(P),this.symbolStatePane.$6$(P),this.layerTab.setVisible(!!this.displayView),this.symbolStateTab.setVisible(!!this.symbolView),(this.displayView&&r.co(this.symbolStateTab)||this.symbolView&&r.co(this.layerTab)||!P&&(r.co(this.symbolStateTab)||r.co(this.layerTab)))&&r.ss(this.listPaneTab),this.fireEvent("tabUpdated",{tab:P,oldTab:v})},P.prototype.beginTransaction=function(){this.dm&&this.dm.beginTransaction()},P.prototype.endTransaction=function(){this.dm&&this.dm.endTransaction()},P.prototype.$101$=function(){this.mainTabView.$101$()},P.prototype.dropLocalFileOnGraphView=function(P){var v={event:P};if(this.displayView?(v.displayView=this.displayView,this.fireEvent("displayViewOutsideDropping",v)):this.symbolView&&(v.symbolView=this.symbolView,this.fireEvent("symbolViewOutsideDropping",v)),!v.preventDefault)for(var r=P.dataTransfer.files,m=0;m<r.length;m++){var H=r[m],I=H.name;HP(I)?this.insertLocalImageFile(P,H):IP(I)&&this.insertLocalJSONFile(P,H)}},P.prototype.insertLocalImageFile=function(P,v){var r=this,m=this.gv.lp(P);FP(v,function(P){if(r.displayView){var H=new ht.Node;H.setImage(P),H.p(m),H.setDisplayName(a(v.name)),r.displayView.addData(H)}else if(r.symbolView){var I=new qr({type:"image",name:P,rect:[m.x,m.y,-1,-1]});I.setDisplayName(a(v.name)),r.symbolView.addData(I)}},!0)},P.prototype.insertLocalJSONFile=function(P,v){var r=this;FP(v,function(v){r.$99$(v,r.currentView.graphView.lp(P))})},P.prototype.dropLocalFileOnDir=function(P,v){for(var r=P.dataTransfer.files,m=v.url,I=0;I<r.length;I++){var Y=r[I].name;if(!dv.config.checkFileName(Y,m+"/"+Y))return void lP(H("editor.invalidfilename"),Y,function(){})}for(var U=0;U<r.length;U++)this.uploadLocalFile(r[U],m)},P.prototype.uploadLocalFile=function(P,v){var r=this,m=dv.config.checkFileName(P.name,v+"/"+P.name);m&&FP(P,function(P){var H={path:v+"/"+m,content:P};r.request("upload",H)},!0)},P.prototype.addTab=function(P,v){this.mainTabView.add(P),this.fireEvent("tabCreated",{tab:P}),v&&this.mainTabView.getTabModel().sm().ss(P),this.mainTabView.validate()},P.prototype.openByJSON=function(P,v,r,m,H){this.mainTabView.getTabModel();if(P===Pr){var I=this.mainTabView.getTabModel().getDataByTag(v);I||(I=new ht.Tab,I.setTag(v),I.setIcon("editor.display"),I.setClosable(!0),I.setName(r),new Wm(this,I,v,m),this.addTab(I)),this.mainTabView.getTabModel().sm().ss(I)}else if(P===Av){var Y=this.mainTabView.getTabModel().getDataByTag(v);Y||(Y=new ht.Tab,Y.setTag(v),Y.setIcon("editor.symbol"),Y.setClosable(!0),Y.setName(r),new qm(this,Y,v,m),this.addTab(Y)),this.mainTabView.getTabModel().sm().ss(Y)}else P===vr&&this.componentView.update(v,H,r,m)},P.prototype.isOpenable=function(P){return!dv.config.isOpenable||dv.config.isOpenable(P)},P.prototype.open=function(P,v){var r=this;GP(P)&&(P=this.getFileNode(P)),P&&!P.$34$&&this.isOpenable(P)&&(P.fileType===Pr||P.fileType===Av||P.fileType===mr?this.mainTabView.open(P):P.fileType===vr?this.componentView.open(P):P.fileType===yv&&(oP(P.url)?w(P.url,function(m){var H=ht.Default.svgToShape(m,{segments:dv.config.svgSegments});setTimeout(function(){var m=M(P.getName());v?r.newSymbolView(m,!1):r.newDisplayView(m),H.output.comps.forEach(function(P){delete P.repeatImage}),r.beginTransaction();var I=dv.toDatas(H.output.comps,v);I.forEach(function(P){r.currentView.addData(P,!0)}),v&&(H.output.width&&r.dm.a("width",H.output.width),H.output.height&&r.dm.a("height",H.output.height)),r.zoomToFit(),r.endTransaction()},600)}):xP(P.url)?w(P.url,function(m){var H=M(P.getName()),I=ht.Default.cadToShape(m),Y={},U=Object.keys(I.blockDef).length,o=function(){v?r.newSymbolView(H,!1):r.newDisplayView(H),r.beginTransaction(),I.comps.forEach(function(P){"image"===P.type&&Y[P.name]&&(P.name=Y[P.name])});var P=dv.toDatas(I.comps,v);P.forEach(function(P){r.currentView.addData(P,!0)}),v&&(I.width&&r.dm.a("width",I.width),I.height&&r.dm.a("height",I.height)),r.zoomToFit(),r.endTransaction()};U?!function(){var v=function(){U--,0===U&&o()},m="symbols/"+P.path.substr("assets/".length)+"/"+H+"/";for(var x in I.blockDef){I.blockDef[x].comps.forEach(function(P){"image"===P.type&&(P.name=m+P.name+".json")});var N={path:Y[x]=m+x+".json",content:b(I.blockDef[x])};r.request("upload",N,v)}}():o()}):(sP(P.url)||WP(P.url))&&w(P.url,function(v){r.fontConverterOptionView.open(function(m){ht.Default.fontToShape(v,m,function(v){var m=M(P.getName());r.newSymbolView(m,!1),r.beginTransaction(),r.currentView.update(ht.Default.stringify(v)),r.endTransaction(),r.currentView.dirty=!0})})},{responseType:"arraybuffer"})))},P.prototype.$99$=function(P,v){var r=this;if(P){if(this.beginTransaction(),P=k(P),this.displayView&&OP(P.d)){var m=this.displayView.graphView,H=m.dm().deserialize(P,m.getCurrentSubGraph(),{justDatas:!0,disableOnPreDeserialize:!0,disableOnPostDeserialize:!0});if(m.sm().ss(H.toList(m.isSelectable,m)),H.each(function(P){r.displayView.addData(P,!0,!0)}),v){var I=m.getUnionNodeRect(H.toArray());m.moveDatas(H,v.x-I.x-I.width/2,v.y-I.y-I.height/2)}}else this.symbolView&&OP(P.comps)&&P.comps.forEach(function(P){gv(P,r.symbolView)});this.gv.setFocus(),this.endTransaction()}},P.prototype.$100$=function(P,v,r){var m=this;if(P){if(!this.tab)return void this.open(P);if(!xP(P.url)){if(P.fileType===Pr)return void(this.displayView&&(dv.config.insertDisplayViewAsRefGraph?!function(){var r=new ht.RefGraph;r.setRef(P.getFileUUID()),r.onPendingUpdated=function(){r.onPendingUpdated=null,r.p(v)},r.setDisplayName(a(P.url)),m.displayView.addData(r)}():w(P.url,function(P){m.$99$(P,v)})));if(this.url!==P.url)if(P.fileType!==vr){if(P.fileType!==Av&&!HP(P.url))return P.fileType===mr?void(this.displayView&&dv.config.handleInsertSceneFileToGraphView&&dv.config.handleInsertSceneFileToGraphView(this.displayView,P,v)):void(P.fileType===rr&&this.displayView&&dv.config.handleInsertModelFileToGraphView&&dv.config.handleInsertModelFileToGraphView(this.displayView,P,v));if(this.displayView){var H=new ht.Node;if(H.setImage(P.getFileUUID()),v)H.p(v.x,v.y);else{var I=this.gv.getViewRect();I&&H.p(I.x+I.width/2,I.y+I.height/2)}H.setDisplayName(a(P.url)),this.displayView.addData(H)}else if(this.symbolView){var Y=ht.Default.getImage(P.getFileUUID()),U=Y?Y.width:-1,o=Y?Y.height:-1,x=v?v.x:(this.dm.a("width")||0)/2,N=v?v.y:(this.dm.a("height")||0)/2,E=new qr({type:"image",name:P.getFileUUID(),rect:[x-(U>0?U/2:0),N-(o>0?o/2:0),U,o]});E.setDisplayName(a(P.url)),this.symbolView.addData(E)}}else if(this.symbolView){var s=new vm({type:P.getFileUUID(),rect:[v?v.x:(this.dm.a("width")||0)/2,v?v.y:(this.dm.a("height")||0)/2,-1,-1]},void 0,void 0,r);s.setDisplayName(a(P.url)),this.symbolView.addData(s)}}}},P.prototype.newDisplayView=function(P){return this.mainTabView.newDisplayView(P)},P.prototype.newSymbolView=function(P,v){return this.mainTabView.newSymbolView(P,v)},P.prototype.newComponent=function(){this.componentView.open()},P.prototype.save=function(P,v){this.mainTabView.save(P,v)},P.prototype.saveAll=function(P){this.mainTabView.saveAll(P)},P.prototype.reload=function(){this.mainTabView.reload()},P.prototype.preview=function(){this.mainTabView.preview()},P.prototype.closeTab=function(P,v,r){this.mainTabView.closeTab(P,v,r)},P.prototype.closeOtherTabs=function(P,v){this.mainTabView.closeOtherTabs(P,v)},P.prototype.closeTabsToTheRight=function(P,v){this.mainTabView.closeTabsToTheRight(P,v)},P.prototype.closeAllTabs=function(P,v){this.mainTabView.closeAllTabs(P,v)},P.prototype.filterProperties=function(){this.inspector&&this.inspector.filterPropertiesLater()},P.prototype.isRulerEnabled=function(){return this._rulerEnabled},P.prototype.setRulerEnabled=function(P){var v=this._rulerEnabled;v!==P&&(this._rulerEnabled=P,this.tabs.forEach(function(v){v.getView().setRulerEnabled(P)}),this.fp("rulerEnabled",v,P))},P.prototype.toggleRulerEnabled=function(){this.setRulerEnabled(!this.isRulerEnabled())},P.prototype.isGridEnabled=function(){return this._gridEnabled},P.prototype.setGridEnabled=function(P){var v=this._gridEnabled;v!==P&&(this._gridEnabled=P,this.tabs.forEach(function(v){v.getView().graphView.getEditInteractor().gridEnabled=P}),this.fp("gridEnabled",v,P))},P.prototype.toggleGridEnabled=function(){this.setGridEnabled(!this.isGridEnabled())},P.prototype.toggleLeft=function(){"normal"===this.leftSplitView.getStatus()?this.leftSplitView.setStatus("cl"):this.leftSplitView.setStatus("normal")},P.prototype.toggleRight=function(){"normal"===this.mainSplitView.getStatus()?this.mainSplitView.setStatus("cr"):this.mainSplitView.setStatus("normal")},P.prototype.toggleBoth=function(){"normal"===this.mainSplitView.getStatus()||"normal"===this.leftSplitView.getStatus()?(this.mainSplitView.setStatus("cr"),this.leftSplitView.setStatus("cl")):(this.mainSplitView.setStatus("normal"),this.leftSplitView.setStatus("normal"))},P.prototype.zoomIn=function(){this.gv&&this.gv.zoomIn(dv.config.animate)},P.prototype.zoomOut=function(){this.gv&&this.gv.zoomOut(dv.config.animate)},P.prototype.zoomReset=function(){
this.gv&&this.gv.zoomReset(dv.config.animate)},P.prototype.zoomToFit=function(){this.gv&&this.gv.fitContent(dv.config.animate,dv.config.fitPadding)},P.prototype.delete=function(){this.gv&&this.gv.removeSelection()},P.prototype.copyFiles=function(){this.explorer.copyFiles()},P.prototype.pasteFiles=function(){this.explorer.pasteFiles()},P.prototype.copy=function(){var P=this;if(this.ld){var v=this.cloneInfo;if(v.funcArray.length=0,v.jsonArray.length=0,v.offset={x:0,y:0},v.lastCheck=null,v.lastView=this.gv,this.displayView)v.type="display";else{if(!this.symbolView)return void(v.type=null);v.type="symbol"}var r={};this.selection.forEach(function(P){P._refGraph||(r[P._id]=P,P instanceof ht.Block&&!(P instanceof ht.RefGraph)&&p(P,r))});var m=[],H=void 0;this.gv.each(function(P){r[P._id]&&(m.push(P),P instanceof ht.Node&&(H=H?ht.Default.unionRect(H,P.getRect()):P.getRect()))}),v.rect=H,this.gv.copyMap=r,m.forEach(function(r){var m=P.gv.isSelected(r),H=r.$51$(P.gv);if(0!==H.length){v.funcArray.push([r._id,m].concat(H));var I=Cv(r);I&&v.jsonArray.push([m,I])}}),this.fireEvent("copy",{datas:m,info:v}),this.gv.copyMap=null}},P.prototype.hasCopyInfo=function(){return this.cloneInfo.funcArray.length>0},P.prototype.paste=function(P,v){var r=this,m=this.gv,H=this.cloneInfo;if(H.funcArray.length&&m){var I=[],Y=[];if(this.beginTransaction(),ht.Default.setIsolating(!0),"display"===H.type&&this.displayView||"symbol"===H.type&&this.symbolView?!function(){var P={},v=[];H.funcArray.forEach(function(H){var U=H[0],o=H[1],x=H[2],N=H[3],E=N(x,m);r.currentView.addData(E,!0),P[U]=E,I.push(E),v.push(x),o&&Y.push(E)});for(var U=0;U<I.length;U++)I[U].$50$(v[U],m,P)}():H.jsonArray.length&&H.jsonArray.forEach(function(P){var v=P[0],H=P[1],U=uv(H,!!r.symbolView);U&&(U.setParent(m.getCurrentSubGraph()),r.currentView.addData(U,!0),I.push(U),v&&Y.push(U))}),ht.Default.setIsolating(!1),Y.length&&this.sm.ss(Y),H.lastView!==m&&(H.offset.x=-dv.config.pasteOffset,H.offset.y=-dv.config.pasteOffset),!P&&I.length){if(v){var U=H.rect;H.offset.x=v.x-U.x-U.width/2,H.offset.y=v.y-U.y-U.height/2}else H.offset.x+=dv.config.pasteOffset,H.offset.y+=dv.config.pasteOffset;m.moveDatas(I,H.offset.x,H.offset.y);var o=m.$64$(I);o&&(H.offset.x+=o.x,H.offset.y+=o.y,H.lastCheck||(m.moveDatas(I,-dv.config.pasteOffset,-dv.config.pasteOffset),H.offset.x-=dv.config.pasteOffset,H.offset.y-=dv.config.pasteOffset)),H.lastCheck=o}H.lastView=m,this.fireEvent("paste",{datas:I,info:H}),m.setFocus(),this.endTransaction()}},P.prototype.block=function(){var P=this;if(this.displayView){var v=this.selection;v.length&&!function(){P.beginTransaction();var r=new ht.Block;v.forEach(function(P){P.setParent(r)}),P.displayView.addData(r),P.endTransaction()}()}},P.prototype.unblock=function(){var P=this;if(this.displayView){this.beginTransaction();var v=[];this.selection.forEach(function(r){r instanceof ht.Block&&!(r instanceof ht.RefGraph)&&!function(){var m=r.getParent();r.getChildren().toArray().forEach(function(P){P.setParent(m),v.push(P)}),P.dm.remove(r)}()}),v.length&&(this.sm.ss(v),this.gv.setFocus()),this.endTransaction()}},P.prototype.bringForward=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionDown():this.dm.bringSelectionForward())},P.prototype.bringToFront=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToBottom():this.dm.bringSelectionToFront())},P.prototype.sendBackward=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionUp():this.dm.sendSelectionBackward())},P.prototype.sendToBack=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToTop():this.dm.sendSelectionToBack())},P.prototype.undo=function(){this.dm&&this.dm.getHistoryManager()&&this.dm.getHistoryManager().canUndo()&&(this.dm.undo(),this.fireEvent("undo",{}))},P.prototype.redo=function(){this.dm&&this.dm.getHistoryManager()&&this.dm.getHistoryManager().canRedo()&&(this.dm.redo(),this.fireEvent("redo",{}))},P.prototype.distributeHorizontal=function(){this.inspectorTool.distributeHorizontal()},P.prototype.distributeVertical=function(){this.inspectorTool.distributeVertical()},P.prototype.alignLeft=function(){this.inspectorTool.alignLeft()},P.prototype.alignHorizontal=function(){this.inspectorTool.alignHorizontal()},P.prototype.alignRight=function(){this.inspectorTool.alignRight()},P.prototype.alignTop=function(){this.inspectorTool.alignTop()},P.prototype.alignVertical=function(){this.inspectorTool.alignVertical()},P.prototype.alignBottom=function(){this.inspectorTool.alignBottom()},P.prototype.folder=function P(){if(this.displayView){this.beginTransaction();var P=new ht.Data;P.s("editor.folder",!0),this.dm.add(P);var v=this.list.getTopRowOrderSelection();v.each(function(v){P.addChild(v)}),this.sm.ss(P),this.endTransaction()}},P.prototype.unfolder=function(){var P=this;if(this.displayView){this.beginTransaction();var v=this.sm.toSelection(function(P){return P.s("editor.folder")});v.forEach(function(P){P.toChildren().forEach(function(v){v.setParent(P.getParent())})}),v.forEach(function(v){P.dm.remove(v)}),this.endTransaction()}},P.prototype.locate=function(P){P&&this.request("locate",P.url||P)},P.prototype.saveImage=function(P,v,r){var m=this,H=function(){var H={path:v,content:rv(P)};m.request("upload",H,r)};GP(P)&&!ht.Default.getImage(P)?/.json$/.test(P)?ht.Default.xhrLoad(P,function(v){v&&(ht.Default.setImage(P,ht.Default.parse(v)),H())}):!function(){var v=new window.Image;v.onload=function(){ht.Default.setImage(P,v),H()},v.src=P}():H()},P.prototype.handleKeydown=function(P){var v=P.keyCode;if(h(P)&&83===v&&P.preventDefault(),Er.length){if((P.target._ignore||!zP(P.target))&&!ht.Default.popup){var r=Er[Er.length-1];L(P)&&r.$49$?r.$49$():t(P)&&r.$48$&&r.$48$()}}else{var m={event:P};if(this.fireEvent("keydown",m),!m.preventDefault){if(h(P)&&83===v)return void this.save();if(!zP(P.target)){if(P.preventDefault(),L(P)){for(var H=0;H<this.menus.length;H++)if(this.menus[H].isShowing())return void this.menus[H].hide();if(this.funcView.smartClose&&this.funcView.getView().parentNode)return void this.funcView.hide();if(this.iconsView.getView().parentNode)return void this.iconsView.hide();if(this.tab){var I=this.tab.getView().graphView.getInteractors();I&&I.each(function(v){v.$49$&&v.$49$(P)})}}80===v?this.preview():187===v?this.zoomIn():189===v?this.zoomOut():48===v?this.zoomToFit():57===v?this.zoomReset():h(P)&&67===v?this.copy():h(P)&&86===v?this.paste():h(P)&&c(P)&&90===v?this.redo():h(P)&&90===v?this.undo():P.altKey&&h(P)&&221===v?this.bringToFront():P.altKey&&h(P)&&219===v?this.sendToBack():h(P)&&221===v?this.bringForward():h(P)&&219===v&&this.sendBackward()}}}},P.prototype.createDisplayItem=function(P,v,r,m,H){var I=this,Y=function(){return I.displayView&&I.displayView.$4$()===P},U=dP(P,v,r,Y);return U.visible=function(){return!!I.displayView},U.action=function(){I.displayView&&I.displayView.$5$(P,m,H)},U},P.prototype.createSymbolItem=function(P,v,r,m,H){var I=this,Y=function(){return I.symbolView&&I.symbolView.$4$()===P},U=dP(P,v,r,Y);return U.visible=function(){return!!I.symbolView},U.action=function(){I.symbolView&&I.symbolView.$5$(P,m,H)},U},P.prototype.showMessage=function(P,v,r){this.messageView.show(P,v,r)},P.prototype.showConfirm=function(P,v,r,m){this.confirmView.show(P,v,r,m)},P.prototype.batchConvertSVG=function(P){var v=this,r=[];P.map(function(P){oP(P.url)&&r.push(P.url)});var m=2*r.length,I=0,Y=function(){++I===m&&v.showMessage(Iv(H("editor.batchconvertsuccess"),r.length+""))};w(r,function(r){r.forEach(function(r,m){var H=P[m],I=ht.Default.svgToShape(r,{segments:dv.config.svgSegments}),U=H.path.replace(/^assets/g,"symbols"),o=H.getName().replace(/svg$/g,"json");v.request("upload",{path:U+"/"+o,content:b(I.output)},Y),o=H.getName().replace(/svg$/g,"png"),v.request("upload",{path:U+"/"+o,content:rv(I.output)},Y)})})},ev(P,[{key:"editable",get:function(){return!!this.currentView&&this.currentView.editable},set:function(P){this.currentView&&(this.currentView.editable=P)}},{key:"dm",get:function(){return this.gv?this.gv.dm():null}},{key:"gv",get:function(){var P=this.mainTabView.getTabModel().sm().ld();return P?P.getView().graphView:null}},{key:"editInteractor",get:function(){return this.gv?this.gv.getEditInteractor():null}},{key:"pointsEditingMode",get:function(){return!!this.editInteractor&&this.editInteractor.pointsEditingMode},set:function(P){this.editInteractor&&(this.editInteractor.pointsEditingMode=P)}},{key:"anchorVisible",get:function(){return this.gv.getEditStyle("anchorVisible")},set:function(P){return this.gv.setEditStyle("anchorVisible",P)}},{key:"sm",get:function(){return this.gv?this.gv.sm():null}},{key:"ld",get:function(){return this.sm?this.sm.ld():null}},{key:"selection",get:function(){var P=this,v=[];return this.gv&&this.gv.each(function(r){P.gv.isSelected(r)&&v.push(r)}),v}},{key:"tabs",get:function(){return this.mainTabView.tabs}},{key:"inspector",get:function(){return this.inspectorPane.inspector}},{key:"list",get:function(){return this.listPane.list}},{key:"tab",get:function(){return this.mainTabView.currentTab}},{key:"url",get:function(){return this.tab?this.tab.getTag():null}},{key:"explorer",get:function(){return this.leftTopTabView.getCurrentTab().getView()}},{key:"dir",get:function(){return this.explorer?this.explorer.tree.getSelectionModel().getLastData():null}},{key:"file",get:function(){return this.explorer?this.explorer.getFileListView().getSelectionModel().getLastData():null}},{key:"currentLayer",get:function(){return this.layerPane.currentLayer}},{key:"currentView",get:function(){var P=this.tab;return P?P.getView():null}},{key:"displayTree",get:function(){return this.displayView?this.displayView.displayTree:null}},{key:"displayView",get:function(){var P=this.currentView;return P instanceof Wm?P:null}},{key:"symbolList",get:function(){return this.symbolView?this.symbolView.symbolList:null}},{key:"symbolView",get:function(){var P=this.currentView;return P instanceof qm?P:null}},{key:"inspectorCompact",get:function(){return this._inspectorCompact},set:function(P){this._inspectorCompact=P,this.filterProperties(),this.inspectorTool.iv()}},{key:"inspectorInputFilter",get:function(){return this.inspectorTool.searchField.getValue()},set:function(P){this.inspectorTool.searchField.setValue(P),this.filterProperties()}}]),P}();T(KH,{ms_fire:1,_rulerEnabled:dv.config.rulerEnabled,_gridEnabled:dv.config.gridEnabled}),dv.Editor=KH;var jH=function(){function P(v,r){var m=this;hv(this,P),this.editor=r,this.handler=v,this.cookie=0,this.callbacks={},this.cmds={},this.fileChangeVersion=String((new Date).getTime());var H=dv.config.host||window.location.hostname,I=dv.config.port||window.location.port,Y=this.url=window.location.protocol+"//"+H+":"+I;setTimeout(function(){m.handler({type:"connected",message:Y})},1),dv.config.checkForFileChanges&&dv.config.checkForFileChangesInterval&&this.fileChangedEvent()}return P.prototype.request=function(P,v,r){var m=++this.cookie;this.callbacks[m]=r,this.cmds[m]=P;var H=this.editor.sid;this[P](m,v,H?H:null,r);var I=P;v&&(GP(v)?I=P+": "+v:v.path&&(I=P+": "+v.path)),this.handler({type:"request",message:I,cmd:P,data:v})},P.prototype.fileChangedEvent=function(){var P=this,v=this.url+"/fileVersion";v+="/"+P.fileChangeVersion,v+="?sid="+this.editor.sid,P.send("GET",v,null,function(v){P.fileChangeVersion=String((new Date).getTime());var r=v.target.response;if(r){r=JSON.parse(r);var m=Object.keys(r);m.forEach(function(v){P.handler({type:"fileChanged",path:v})})}}),setTimeout(function(){P.fileChangedEvent()},dv.config.checkForFileChangesInterval)},P.prototype.export=function(P,v,r){var m=this,H=new ht.Request,I={},Y=new FormData,U=this.url+"/export";U+="?sid="+r,Y.append("dir",v),I.url=encodeURI(U),I.method="POST",I.data=Y,H.setResponseType("blob"),H.onload=function(v){var r=v.target;if(200==r.status||0===r.status){var H=r.response,I=r.getResponseHeader("Content-Disposition").split(";"),Y=I[1].split("=")[1],U=new Blob([H],{type:"application/zip"}),o=document.createElement("a");o.href=window.URL.createObjectURL(U),o.download=decodeURI(Y),o.click(),m.handleRespone(P,!0)}},H.send(I)},P.prototype.mkdir=function(P,v,r){var m=this,H=new ht.Request,I={},Y=new FormData,U=this.url+"/mkdir";U+="?sid="+r,Y.append("path",v),I.url=encodeURI(U),I.method="POST",I.data=Y,H.onload=function(r){var H=r.target;if(200==H.status||0===H.status){var I=H.response||H.responseText;m.handleRespone(P,"true"===I),m.handler({type:"fileChanged",path:v})}},H.send(I)},P.prototype.explore=function(P,v,r){var m=this,H=new ht.Request,I={},Y=this.url+"/explore";Y+="/"+v,Y+="?sid="+r,I.url=encodeURI(Y),H.onload=function(v){var r=v.target;if(200==r.status||0===r.status){var H=r.response||r.responseText;m.handleRespone(P,JSON.parse(H))}},H.send(I)},P.prototype.upload=function(P,v,r){var m=this,H=new FormData,I=this.url+"/upload",Y=v.path;I+="?sid="+r,H.append("path",v.path),H.append("content",v.content),m.send("POST",I,H,function(v){var r=v.target;if(200==r.status||0===r.status){var H=r.response;if(m.handleRespone(P,!0),H){var I=JSON.parse(H);m.handler({type:"confirm",path:I.tempName,datas:I.paths})}else m.handler({type:"fileChanged",path:Y})}})},P.prototype.rename=function(P,v,r){var m=this,H=new FormData,I=v.new,Y=v.old,U=this.url+"/rename";U+="?sid="+r,H.append("newPath",I),H.append("oldPath",Y),m.send("POST",U,H,function(v){var r=v.target;if(200==r.status||0===r.status){var H=r.response||r.responseText;m.handleRespone(P,"true"===H),"true"===H&&(m.handler({type:"fileChanged",path:I}),m.handler({type:"fileChanged",path:Y}))}})},P.prototype.remove=function(P,v,r){var m=this,H=new FormData,I=this.url+"/remove";I+="?sid="+r,H.append("path",v),m.send("POST",I,H,function(r){var H=r.target;if(200==H.status||0===H.status){var I=H.response||H.responseText;m.handleRespone(P,"true"===I),"true"===I&&m.handler({type:"fileChanged",path:v})}})},P.prototype.locate=function(P,v,r){var m=this,H=this.url+"/locate";H+="?dir="+v,H+="&sid="+r,m.send("GET",H,null,function(v){var r=v.target;200!=r.status&&0!=r.status||m.handleRespone(P,!0)})},P.prototype.open=function(P,v,r){var m=this,H=this.url+"/open";H+="?url="+v,H+="&sid="+r,m.send("GET",H,null,function(v){var r=v.target;200!=r.status&&0!=r.status||m.handleRespone(P,!0)})},P.prototype.source=function(P,v,r){var m=this,H=new FormData,I=this.url+"/source";I+="?sid="+r,H.append("url",v.url),H.append("encoding",v.encoding),H.append("prefix",v.prefix),m.send("POST",I,H,function(v){var r=v.target;if(200==r.status||0===r.status){var H=r.response||r.responseText;m.handleRespone(P,H)}})},P.prototype.import=function(P,v,r){var m=this,H=new FormData,I=this.url+"/import";I+="?sid="+r,H.append("path",v.path),H.append("move",v.move),m.send("POST",I,H,function(v){var r=v.target;200!=r.status&&0!==r.status||m.handleRespone(P,!0)})},P.prototype.send=function(P,v,r,m){var H=new ht.Request,I={};I.url=encodeURI(v),I.method=P,I.data=r,m&&(H.onload=m),H.send(I)},P.prototype.handleRespone=function(P,v){var r=this.callbacks[P],m=this.cmds[P];delete this.callbacks[P],delete this.cmds[P],this.handler({type:"response",message:m,cmd:m,data:v}),r&&r(v)},P}();return dv.config.logEditorInfo&&console.log("HT Editor v"+tr+" powered by HT for Web v"+ht.Default.getVersion()+" from www.hightopo.com"),!window.onbeforeunload&&dv.config.promptBeforeClosing&&(window.onbeforeunload=function(P){return P.returnValue=H("editor.closetip"),P.returnValue}),dv.version=tr,dv.getString=H,dv.stringifyFunction=U,dv.parseFunction=x,dv.createButton=TP,dv.createItem=dP,dv.layoutMainView=yP,dv.msClass=T,dv.initContext=V,dv.getInput=BP,dv.trimExtension=M,dv.fileNameToDisplayName=a,dv.isJSON=IP,dv.getter=N,dv.setter=E,dv.snapshot=rv,dv.CodeEditor=lv,dv.MainTabView=Zm,dv.DisplayView=Wm,dv.InspectorPane=uH,dv.WebSocketService=ir,dv.HTTPService=jH,dv.createEditor=function(P){if(window.location.host.indexOf("hightopo")>=0){var v="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cdiv style='display:none'%3E%3Cspan id='cnzz_stat_icon_1000279011'%3E%3C/span%3E%3Cscript src='"+v+"s23.cnzz.com/z_stat.php%3Fid%3D1000279011%26show%3Dpic' type='text/javascript'%3E%3C/script%3E%3C/div%3E")),document.body.style.margin="0px",document.body.style.padding="0px"}P&&(ht.Default.isString(P)?P={container:P}:P.tagName&&P.appendChild&&(P={container:P})),P=P||{};var r=void 0,m=void 0===P.container?dv.config.container:P.container;return null===m?r=null:m?ht.Default.isString(m)?r=document.getElementById(m):m.length?(r=ht.Default.createDiv(),r.style.left=m[0]+"px",r.style.top=m[1]+"px",r.style.width=m[2]+"px",r.style.height=m[3]+"px",document.body.appendChild(r)):r=m:r=document.body,P.$39$=r,new KH(P)},dv.init=function(){dv.consts||(kv(),bv(),jv())},dv}();