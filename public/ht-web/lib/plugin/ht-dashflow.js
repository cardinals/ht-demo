!function(V){"use strict";var y="ht",P=V[y],t=P.Default,x=Math,j=(x.PI,x.sin,x.cos,x.atan2,x.sqrt,x.max),Q=x.floor,N=(x.round,x.ceil),d=P.Shape,i=(P.Edge,P.List),s=P.Style,B=P.graph,F=t.getInternal(),v=F.ui(),M=null,m="prototype",Y=V.clearInterval,o=V.setInterval,r=function(o){var c=o.data,g=this.dm();if(c&&"add"===o.kind){var n=g.$1c,B=c instanceof d?"shape.":"edge.";n&&c.s(B+"dash.flow")&&n.indexOf(c)<0&&n.push(c)}"clear"===o.kind&&(g.$1c=[])},L=function(I){var y=I.property,S=I.data,J=I.newValue,t=this.dm().$1c,v=S instanceof d?"s:shape.dash.flow":"s:edge.dash.flow";if(t&&y===v)if(J)t.indexOf(S)<0&&t.push(S);else for(var $=t.length,G=0;$>G;G++)if(t[G]===S){t.splice(G,1);break}},e=B.GraphView[m],C=v.EdgeUI[m],O=v.ShapeUI[m],l=O._80o,$=C._80o,w=P.DataModel[m],R=w.prepareRemove,K=e.setDataModel;s["edge.dash.flow.step"]==M&&(s["edge.dash.flow.step"]=3),s["shape.dash.flow.step"]==M&&(s["shape.dash.flow.step"]=3),w.prepareRemove=function(Y){R.call(this,Y);var l=Y._dataModel,K=l.$1c;if(K)for(var T=K.length,G=0;T>G;G++)if(K[G]===Y){K.splice(G,1);break}},e.setDataModel=function(J){var F=this,c=F._dataModel;if(c!==J){c&&(c.umm(r,F),c.umd(L,F),c.$1c=[]),J.mm(r,F),J.md(L,F);var i=J.$1c=[];J.each(function(V){var B=V instanceof d?"shape.":"edge.";V.s(B+"dash.flow")&&i.indexOf(V)<0&&i.push(V)}),K.call(F,J)}},e.setDashFlowInterval=function(v){var c=this,k=c.$2c;c.$2c=v,c.fp("dashFlowInterval",k,v),c.$3c!=M&&(Y(c.$3c),delete c.$3c,c.enableDashFlow(v))},e.getDashFlowInterval=function(){return this.$2c},e.$4c=function(){var O,G,b,h=this,X=h.tx(),u=h.ty(),I=h._zoom,L=h.getWidth(),$=h.getHeight(),R={x:-X/I,y:-u/I,width:L/I,height:$/I},T=h.dm().$1c,W=h._56I,J=new i;if(T.forEach(function(Y){W[Y.getId()]&&(O=h.getDataUI(Y),O&&(b=O._79o(),b&&J.add(b)))}),0!==J.size()&&(J.each(function(V){t.intersectsRect(R,V)&&(G=t.unionRect(G,V))}),G&&(G&&(t.grow(G,j(1,1/I)),G.x=Q(G.x*I)/I,G.y=Q(G.y*I)/I,G.width=N(G.width*I)/I,G.height=N(G.height*I)/I,G=t.intersection(R,G)),G))){var y=h._canvas.getContext("2d");y.save(),y.lineCap=t.lineCap,y.lineJoin=t.lineJoin;var z=t.devicePixelRatio,c=G.x,e=G.y,v=G.width,_=G.height;c=Math.floor((c*I+X)*z),e=Math.floor((e*I+u)*z),v=Math.ceil(v*I*z)+1,_=Math.ceil(_*I*z)+1,G.x=(c/z-X)/I,G.y=(e/z-u)/I,G.width=v/z/I,G.height=_/z/I,y.beginPath(),y.rect(c,e,v,_),y.clip(),y.clearRect(c,e,v,_),F.translateAndScale(y,X,u,I),h.$5c(y,G),y.restore()}},e.$5c=function(f,C){var z,Q,G=this;G._93db(f),G.each(function(r){G._56I[r._id]&&(z=G.getDataUI(r),z&&(Q=z._79o(),(!C||t.intersectsRect(C,Q))&&(z.$7c=!0,z._42(f),delete z.$7c)))}),G._92db(f)},e.enableDashFlow=function(_){var Y=this;Y.$3c==M&&(Y.$3c=o(function(){Y.$4c()},_||Y.$2c||50))},e.disableDashFlow=function(){var Q=this;Y(Q.$3c),delete Q.$3c};var b=function(){var P=this,n=P._data,S=n instanceof d?"shape.":"edge.",J=n.s(S+"dash.pattern"),j=n.s(S+"dash.flow.reverse");if(J&&n.s(S+"dash")&&n.s(S+"dash.flow")&&P.$7c){var E=P.s(S+"dash.offset")||0,N=n.s(S+"dash.flow.step"),C=n.getStyleMap(),A=0;J.forEach(function(C){A+=C}),j&&(N=-N),E-=N,E%=A,C||(n._styleMap=C={}),C[S+"dash.offset"]=E}};C._80o=function(I){$.call(this,I),b.call(this)},O._80o=function(W){l.call(this,W),b.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);