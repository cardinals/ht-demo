!function(o,E,b){"use strict";var W="px",v="0",N="innerHTML",S="className",z=ht.Default,V=ht.Color,y=ht.Node,n="position",B="top",l="left",h=z.animate,H=z.getInternal(),Q="width",v="0",a="none",A="max-height",p="font",_="background",x="border-box",i="user-select",X="box-sizing",$="overflow",G=z.isTouchable,O=z.isTouchEvent,H=z.getInternal(),d=V.titleIconBackground,J=z.scrollBarInteractiveSize,L=/msie 9/.test(o.navigator?o.navigator.userAgent.toLowerCase():""),u=null,C=function(){return document},K=function(h){return C().createElement(h)},R=function(){return K("div")},j=function(){var l=R(),i=l.style;return i.msTouchAction=a,i.cursor="default",G&&i.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",u),i.position="absolute",i.left=v,i.top=v,l},Z=function(){return K("canvas")},g=function(){return document.body},w=function(M,_,j){M.style.setProperty(_,j,u)},P=function(g,i){g.style.removeProperty(i)},r=function(n,b,J){z.def(ht.widget[n],b,J)},D=function(O,j){O.appendChild(j)},c=function(X,K){X.removeChild(K)},q=H.addEventListener;H.removeEventListener,H.addMethod(z,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:d,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:d}]},paletteTitleLabelColor:z.labelSelectColor,paletteTitleLabelFont:z.labelFont,paletteContentLabelFont:z.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:z.widgetTitleHeight,paletteTitleBackground:V.titleBackground,paletteTitleHoverBackground:V.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:b,paletteItemHoverBorderColor:V.highlight,paletteItemSelectBackground:V.highlight},!0);var F=".palette-item:hover{border: 1px solid "+z.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+z.paletteTitleHoverBackground+" !important}",t=document.createElement("style");G||(t.styleSheet?t.styleSheet.cssText=F:t.appendChild(C().createTextNode(F))),C().getElementsByTagName("head")[0].appendChild(t);var T=function(m){var x=this;x.$22h=m,x.addListeners()};z.def(T,E,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var T=this;T.$36h&&g().removeChild(T.$36h),T.$23h=T.$24h=T.$25h=T.$35h=T.$36h=u},handle_touchstart:function(t){for(var i,s=this,Q=s.$22h,F=t.target,M=Q.sm(),h=Q.dm(),d="palette-header",X="palette-header-tool",_="palette-item",R=!1,J=!1,I=!1;F&&(F[S]||"").indexOf(d)<0&&(F[S]||"").indexOf(_)<0;)F=F.parentNode;if(F&&F[S].indexOf(X)>=0?R=!0:F&&F[S].indexOf(d)>=0?I=!0:F&&F[S].indexOf(_)>=0&&(J=!0),z.isLeftButton(t))if(s.$27h(t))s.$24h=z.getClientPoint(t),s.$25h=Q.ty();else if(R){z.preventDefault(t),i=F.parentNode.$11h;var x=h.getDataById(i),n=x.s("tools")[F.toolIndex];n.action&&n.action.call(Q)}else if(I){z.preventDefault(t),i=F.$11h;var x=h.getDataById(i);x.isExpanded()?x.setExpanded(!1):x.setExpanded(!0)}else if(J){i=F.$11h;var O=h.getDataById(i);M.ss(O),Q.handleDragAndDrop&&(z.preventDefault(t),O.s("draggable")&&(Q.handleDragAndDrop(t,"prepare"),s.$35h=0)),O.s("draggable")||(z.preventDefault(t),s.$24h=z.getClientPoint(t),s.$25h=Q.ty())}else z.preventDefault(t),s.$24h=z.getClientPoint(t),s.$25h=Q.ty();else s.$26h(t)},handle_mousedown:function(C){this.handle_touchstart(C)},handle_mousewheel:function(w){this.handleScroll(w,w.wheelDelta/40,w.wheelDelta!==w.wheelDeltaX)},handle_DOMMouseScroll:function(o){this.handleScroll(o,-o.detail,1)},handleScroll:function(Z,F,A){var G=this.$22h;z.preventDefault(Z),A&&G._41o()&&G.ty(G.ty()+20*F)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(P){var A=this;A.$37h(P),A.$26h(P)},handleWindowMouseUp:function(s){this.handleWindowTouchEnd(s)},handleWindowTouchEnd:function(g){var L=this;L.$37h(g),L.$26h(g)},$37h:function(s){var A=this,w=A.$22h;2===A.$35h&&(A.$35h=3,w.handleDragAndDrop(s,"end"))},handleWindowMouseMove:function(C){this.handleWindowTouchMove(C)},handleWindowTouchMove:function(Q){var u=this,X=u.$22h,t=u.$23h,P=u.$24h,J=u.$25h,H=z.getClientPoint(Q),_=X._29I,N=u.$36h;if(1===u.$35h||2===u.$35h){if(u.$35h=2,X.handleDragAndDrop(Q,"between"),O(Q)){var g=Q.touches[0];Q=g?g:Q.changedTouches[0]}N.style.left=Q.pageX-parseInt(N.width)/2+W,N.style.top=Q.pageY-parseInt(N.height)/2+W}else"p"===t?X.ty(J+H.y-P.y):"v"===t&&X.ty(J+(P.y-H.y)/_.height*X._59I)},handle_mousemove:function(v){this.handle_touchmove(v)},handle_touchmove:function(H){if(!z.isDragging()&&z.isLeftButton(H)){var s=this,y=s.$22h,w=s.$27h(H);if(s.$24h){if(!s.$23h){if(z.getDistance(z.getClientPoint(H),s.$24h)<2)return;s.$23h=w?"v":"p",z.startDragging(s,H)}}else if(w)y._43o();else if(0===s.$35h){if(s.$35h=1,y.handleDragAndDrop(H,"begin"),z.startDragging(s,H),O(H)){var A=H.touches[0];H=A?A:H.changedTouches[0]}var b=s.$36h=new Image,K=y.$10h[y.sm().ld().getId()].querySelector(".image-box"),P=parseInt(K.style.width),M=parseInt(K.style.height);b.draggable=!1,b.src=K.toDataURL(),b.width=P,b.height=M,b.style.position="absolute",b.style.left=H.pageX-P/2+W,b.style.top=H.pageY-M/2+W,g().appendChild(b)}}},$27h:function(Z){var D=this.$22h,h=D.getView(),m=h.getBoundingClientRect(),r=D._29I,G=Z.clientX-m.left+h.scrollLeft;return D._41o()&&r.x+r.width-G<J}}),ht.widget.Palette=function(G){var E=this,l=E._view=H.createView(null,E);E.$9h={},E.$10h={},E.$4h={},E._29I={x:0,y:0,width:0,height:0},E._59I=0,E.dm(G?G:new ht.DataModel),l[S]="ht-widget-palette",E.$29h=new T(E),w(l,_,z.paletteContentBackground),w(l,$,"auto"),w(l,X,x),w(l,"-moz-"+X,x),w(l,"-webkit-"+i,a),w(l,"-moz-"+i,a),w(l,"-ms-"+i,a),w(l,i,a),w(l,"position","absolute"),w(l,"overflow","hidden"),D(l,E._79O=j()),q(l,"dragstart",function(T){T.dataTransfer&&(T.dataTransfer.setData("Text","nodeid:"+T.target.$11h),T.dataTransfer.effectAllowed="all",E.$29h.$26h())})},r("Palette",E,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:z.autoHideScrollBar,_scrollBarSize:z.scrollBarSize,_scrollBarColor:z.scrollBarColor,getViewRect:function(){return this._29I},ty:function(w){return w==u?this.getTranslateY():(this.setTranslateY(w),void 0)},setTranslateY:function(R){if(this.$32h==u){var $=this,P=$.$33h(R),H=$.$30h;$.$30h=P,$.fp("translateY",H,P)}},getTranslateY:function(){return this.$30h},setLayout:function(y){var H,K,$=this,z=$._layout;$._layout=y,"smallicons"===y?H=K=20:"iconsonly"===y?H=K=50:(H=70,K=50),$.setItemImageWidth(H),$.setItemImageHeight(K),$.setItemImagePadding(4),$.fp("layout",z,y)},getDataAt:function(W){for(var F=W.target;F&&F.$11h==u;)F=F.parentNode;return F&&F.$11h!=u?this.getDataModel().getDataById(F.$11h):void 0},$20h:function(){var r=16;return G&&(r*=1.2),r},$19h:function(){return z.paletteTitleHeight},$18h:function(){var U=z.paletteSeparatorWidth,l=z.paletteTitleBackground,e=z.paletteSeparatorColor||z.brighter(l);return U+W+" solid "+e},$17h:function(R){w(R,"cursor","pointer"),w(R,"display","inline-block"),w(R,"margin-right",(G?8:4)+W),w(R,"vertical-align",B)},$1h:function(M){var J=this,g=R(),C=R(),m=K("span");g[S]="palette-header",w(g,n,"relative"),w(g,_,z.paletteTitleBackground),w(g,"color",z.paletteTitleLabelColor),w(g,B,v),w(g,X,x),w(g,"-moz-"+X,x),w(g,"padding","0 5px 0 0"),w(g,"border-top",J.$18h()),w(g,Q,"100%"),w(g,"cursor","pointer"),w(g,"white-space","nowrap"),w(g,$,"hidden"),w(g,p,z.paletteTitleLabelFont),w(g,"line-height",J.$19h()+W),g.$11h=M.getId();var I=Z(),F=J.$19h(),s=J.$20h();J.$17h(I),H.setCanvas(I,s,F),D(g,I);var k=M.s("tools");if(k)for(var A=0;A<k.length;A++){var Y=Z();J.$17h(Y),H.setCanvas(Y,s,F),Y[S]="palette-header-tool palette-header-tool"+M.getId()+"-"+A,Y.style.position="absolute",Y.style.right=(s+10)*A+"px",Y.toolIndex=A,D(g,Y)}return I[S]="palette-toggle-icon-"+M.getId(),C[S]="palette-content",w(C,"max-height",0+W),w(C,p,z.paletteContentLabelFont),w(C,$,"hidden"),C.$11h=M.getId(),J.$9h[M.getId()]=C,m[N]=M.getName(),w(m,p,z.paletteTitleLabelFont),D(g,I),D(g,m),[g,C]},$2h:function(j){var Q=this,t=Q._layout,d=L&&j.s("draggable")?K("a"):R(),C=Z(),$=R(),U=j.getName()||"",o=j.s("title")||j.getToolTip()||U,e=Q._itemMargin;C[S]="image-box";var V=Q.getItemImageWidth(),O=Q.getItemImageHeight();return H.setCanvas(C,V,O),D(d,C),$[N]=U,$[S]="label-box","iconsonly"!==t&&D(d,$),d[S]="palette-item",w(d,"vertical-align",B),w(d,"cursor","pointer"),w(d,"border-radius",5+W),w(d,"border","1px solid transparent"),w(d,"text-align","center"),w(d,"display","inline-block"),w(d,"margin-left",e+W),w(d,"margin-top",e+W),w(d,"color",z.paletteContentLabelColor),"smallicons"===t?(w(C,"vertical-align","middle"),w(d,"margin-left",2+W),w(d,"margin-top",2+W),w(d,"padding",2+W),w(d,"text-align",l),w($,"display","inline-block"),w($,"min-width",Q.$21h+Q._itemMargin+W)):"largeicons"===t&&(w($,"max-width",V+W),w($,"overflow","hidden")),d.$11h=j.getId(),o&&(d.title=o),j.s("draggable")&&!Q.handleDragAndDrop&&(L?(d.href="#",w(d,"text-decoration",a)):d.draggable="true"),d},$16h:function(f,B,Z,b){var N=H.initContext(f);H.translateAndScale(N,0,0,1),N.clearRect(0,0,Z,Z);var w=(Z-b)/2;z.drawStretchImage(N,z.getImage(B),"fill",0,w,b,b),N.restore()},$15h:function(j){var E=this,I=j.getId(),k=E._view.querySelector(".palette-toggle-icon-"+I),i=j.isExpanded()?z.paletteCollapseIcon:z.paletteExpandIcon;if(k&&i){var F=E.$19h(),p=E.$20h();E.$16h(k,i,F,p)}},_drawToolsIcon:function(b){var V=this,j=b.s("tools");if(j)for(var W=0;W<j.length;W++){var l=V._view.querySelector(".palette-header-tool"+b.getId()+"-"+W),N=j[W].icon,D=V.$19h(),X=V.$20h();V.$16h(l,N,D,X)}},$14h:function(f){var h=this,Q=f.getId(),i=h.$10h[Q].querySelector(".image-box"),r=f.getImage(),u=f.s("image.stretch");if(i&&r){var m=H.initContext(i),$=h.getItemImagePadding();$="smallicons"===h._layout?$/2:$;var X=h.getItemImageWidth()-2*$,W=h.getItemImageHeight()-2*$;H.translateAndScale(m,0,0,1),m.clearRect(0,0,X,W),z.drawStretchImage(m,z.getImage(r),u,$,$,X,W,f,h,h.getBodyColor(f)),m.restore()}},validateImpl:function(){var J,s,k,F=this,C=F.$9h,t=F._layout,e=F.$10h,q=F.$4h,o=F._view,V=F.dm();if(F.$13h&&(delete F.$13h,q={},V.each(function(N){q[N.getId()]=N})),"smallicons"===t)for(var j in q){var m=q[j];if(m instanceof y){var Z=m.getName()||"",b=z.getTextSize(z.paletteContentLabelFont,Z).width;F.$21h!=u&&F.$21h>b||(F.$21h=b)}}for(var j in q){k=q[j];var O,g;if(V.contains(k)){if(k instanceof ht.Group){var U,Y=F.$1h(k),i=e[k.getId()];i&&(U=i.nextSibling,c(o,U),c(o,i)),s=V.getSiblings(k).indexOf(k);var p=o.children[2*s]||F._79O;p&&p.parentNode?(o.insertBefore(Y[0],p),o.insertBefore(U||Y[1],p)):(o.appendChild(Y[0]),o.appendChild(U||Y[1])),e[k.getId()]=Y[0],J=C[k.getId()]=U||Y[1],g=k.$12h;var G=k.s("promptText");g||(k.$12h=K("div"),k.$12h[N]=G||"",g=k.$12h),0===k.getChildren().size()?J.contains(g)||D(J,g):J.contains(g)&&c(J,g)}else if(O=k.getParent()){var I=F.$2h(k),n=e[k.getId()];J=C[O.getId()],n&&c(n.parentNode,n),s=V.getSiblings(k).indexOf(k);var R=J.children[s];R?J.insertBefore(I,R):D(J,I),e[k.getId()]=I,F.$14h(k)}}else{var f=e[k.getId()],T=f.parentNode;if(k instanceof ht.Group){var E=f.nextSibling;c(o,f),c(o,E),delete C[k.getId()]}else c(T,f),0===T.children.length&&(O=V.getDataById(T.$11h),O&&(g=O.$12h,g&&!T.contains(g)&&D(T,g)));delete e[k.getId()]}}F.$4h={};var P=function(){var f=F._59I,V=0;F.$32h!=u&&(clearInterval(F.$32h),V=0,delete F.$32h),F.$32h=setInterval(function(){F.$31h(),f===F._59I?(V++,V>=2&&(clearInterval(F.$32h),delete F.$32h)):(V=0,f=F._59I)},30)};for(var B in C)if(J=C[B],k=V.getDataById(C[B].$11h),F.$15h(k),F._drawToolsIcon(k),k.isExpanded()){if(J.style.maxHeight===0+W){var Q=J.scrollHeight+F._itemMargin+W;h(J).duration(200).set(A,Q).set("padding-bottom",F._itemMargin+W).end(function(){return function(){P()}}(Q))}else J.style.maxHeight=J.scrollHeight+W;J.style.paddingBottom=F._itemMargin+W}else J.style.maxHeight!==0+W&&h(J).duration(200).set(A,v).set("padding-bottom",v).end(function(){return function(){P()}}(J));F.$28h(),F.$31h()},$31h:function(){for(var M=this,f=M._view,L=0,F=f.children,C=0;C<F.length;C++){var X=F[C];X.className&&X.className.indexOf("palette-")>=0&&(L+=X.offsetHeight)}M._59I=L,M.$30h=M.$33h(M.ty());var h=M.ty();f.scrollTop=-h,M._29I={x:0,y:-h,width:f.clientWidth,height:f.clientHeight},w(M._79O,B,-h+W),M._93I()},$33h:function(T){var M=this,j=M._29I.height-M._59I;return j>T&&(T=j),T>0?0:Math.round(T)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(J){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(J.property)<0&&this.redraw(),"translateY"===J.property&&(this.iv(),this._43o())},findDataByName:function(L){for(var X=this.dm().getDatas(),$=0;$<X.size();$++){var l=X.get($);if(l.getName()===L)return l}},setDataModel:function(i){var l=this,V=l._dataModel,O=l._selectionModel;V!==i&&(V&&(V.umm(l.$6h,l),V.umd(l.$8h,l),V.umh(l.$7h,l),O||V.sm().ums(l.$28h,l)),l._dataModel=i,i.mm(l.$6h,l),i.md(l.$8h,l),i.mh(l.$7h,l),O?O._21I(i):i.sm().ms(l.$28h,l),l.sm().setSelectionMode("single"),l.fp("dataModel",V,i))},$6h:function(H){var b=this,M=b._view,U=H.data,G=b.$4h;"add"===H.kind?G[U.getId()]=U:"remove"===H.kind?G[U.getId()]=U:"clear"===H.kind&&(b.$10h={},b.$9h={},b.$4h={},M[N]=""),b.iv()},$7h:function(Z){var b=this,T=Z.data;b.$4h[T.getId()]=T,b.iv()},$8h:function(N){var n=this,x=N.data,i=N.property;"expanded"===i?n.iv():(n.$4h[x.getId()]=x,n.iv())},$28h:function(){var A,u=this,c=u.sm(),s="palette-item",k=c.ld();this.dm().each(function(l){A=u.$10h[l.getId()],A&&A[S].indexOf(s)>=0&&(l===k?w(A,_,z.paletteItemSelectBackground):P(A,_))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);