!function(n,M){"use strict";var V="ht",w=n[V],g="px",J="left",Y="top",D="bottom",s="right",b="innerHTML",P="className",$="",p="width",B="height",j="string",A="position",_="absolute",z="0",h="opacity",H="background",S=w.Default,K=S.getInternal(),t=w.Color,G=S.animate,Z=S.isTouchable,v=S.isTouchEvent,f=null,c=(Math.sqrt,n.parseInt),d=n.setTimeout,q=(Math.round,t.titleIconBackground),W=function(G){return typeof G===j||G instanceof String},E=function(){return document},m=function(j){return E().createElement(j)},a=function(){var d=m("div");return d.tabIndex=-1,d.style.outline="none",d},u=function(){return m("canvas")},e=function($,c){r($,"-webkit-transform",c),r($,"-ms-transform",c),r($,"transform",c)},r=function(s,O,r){s.style.setProperty(O,r,f)},Q=function(V,K,f){S.def(w.widget[V],K,f)},l=function(j,F){j.appendChild(F)},C=function(){return E().documentElement},o=function(){return C().clientWidth},N=function(){return C().clientHeight},X=K.addEventListener,y=K.removeEventListener,T=function(n){var K=n.touches[0];return K?K:n.changedTouches[0]};K.addMethod(S,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:q},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:q}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:q},{type:"rect",rect:[10,10,80,20],background:q}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:q},{type:"rect",rect:[10,34,56,14],background:q},{type:"rect",rect:[34,10,56,14],background:q},{type:"rect",rect:[82,10,8,56],background:q},{type:"rect",rect:[66,62,24,8],background:q}]},dialogTitleLabelColor:S.labelSelectColor,dialogTitleLabelFont:(Z?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:S.labelFont,dialogTitleBackground:t.titleBackground,dialogHeaderBackground:t.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var I=function(W){var C=this;C.$1d=W,C.addListeners()};S.def(I,M,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(f){var l=this,h=l.$1d,A=h.$6d,I=h._config,D=h.$7d,R=f,B=f.target;if(D.contains(B)||S.preventDefault(f),S.isLeftButton(f)){v(f)&&(R=T(f));var X=l.$8d={x:R.pageX,y:R.pageY};l.$9d={x:X.x,y:X.y},!I.maximized&&I.draggable&&A.contains(B)&&(l.$4d=!0,S.startDragging(l,f)),l.handle_mousemove(f)&&(l.$2d=!0,S.startDragging(l,f)),D.contains(B)||B.focus()}},handle_mousedown:function(f){this.handle_touchstart(f)},handle_touchend:function(s){if(S.isLeftButton(s)&&!this.$5d&&!this.$3d){var U=this,u=U.$1d,F=s.target,b=u._config,x=u.$18d,X=u.$16d;for(b.closable&&x.contains(F)&&u.hide(),b.maximizable&&X.contains(F)&&(b.maximized?u.restore():u.maximize());F&&(F.className||"").indexOf("dialog-button")<0;)F=F.parentNode;F&&F.buttonItem&&u.action&&u.action(F.buttonItem,s),delete U.$8d,delete U.$9d}},handle_mouseup:function(d){this.handle_touchend(d)},handleWindowTouchEnd:function(Z){var F=this,p=F.$1d,m=p.$10d;F.$2d&&F.$3d?m.fire({kind:"endResize",target:p,originEvent:Z}):F.$4d&&F.$5d&&m.fire({kind:"endMove",target:p,originEvent:Z}),this.clear()},handleWindowMouseUp:function(m){this.handleWindowTouchEnd(m)},handle_mousemove:function(k){var i=this.$1d._config;if(i.maximized)return!1;if("w"!==i.resizeMode&&"h"!==i.resizeMode&&"wh"!==i.resizeMode)return!1;var p=this,d=p.getView(),w=d.querySelector(".resize-area"),l=w.getBoundingClientRect(),B={x:l.left,y:l.top,width:l.width,height:l.height};k=v(k)?T(k):k;var Q=k.clientX,U=k.clientY,f={x:Q,y:U};return S.containsPoint(B,f)?(r(d,"cursor","nwse-resize"),!0):(r(d,"cursor",$),void 0)},handleWindowTouchMove:function(B){B.preventDefault();var M=B;v(B)&&(M=T(B));var l=this,Z=l.$8d,e=l.$9d;if(!(e.x==Z.x&&e.y==Z.y&&S.getDistance(e,{x:M.pageX,y:M.pageY})<=1)){var i=l.$1d,V=i._config,C=i.$21d,W=V.resizeMode||"wh",_=M.pageX-Z.x,F=M.pageY-Z.y;if(l.$2d){var z=C.offsetWidth,L=C.offsetHeight,j=z+_,u=L+F;if(j=Math.max(j,50),u=Math.max(u,50),"center"===V.position||V.position==f){var k={},d=C.getBoundingClientRect();k.x=d.left,k.y=d.top,V.position=k}"w"===W?(i.setSize(j,L),Z.x+=j-z):"h"===W?(i.setSize(z,u),Z.y+=u-L):"wh"===W&&(i.setSize(j,u),Z.x+=j-z,Z.y+=u-L),l.$3d?i.$10d.fire({kind:"betweenResize",target:i,originEvent:B}):(l.$3d=!0,i.$10d.fire({kind:"beginResize",target:i,originEvent:B}))}else if(l.$4d){var Q=C.getBoundingClientRect(),K=Q.width,s=Q.height,n=o(),E=N(),H=c(C.style.left)||0,m=c(C.style.top)||0,I=H+_,G=m+F,A=i.adjustPosition({x:I,y:G},{width:K,height:s},{width:n,height:E});A&&(I=A.x,G=A.y);var p=I-H,X=G-m;r(C,J,I+g),r(C,Y,G+g),Z.x+=p,Z.y+=X,V.position={x:I,y:G},l.$5d?i.$10d.fire({kind:"betweenMove",target:i,originEvent:B}):(l.$5d=!0,i.$10d.fire({kind:"beginMove",target:i,originEvent:B}))}}},handleWindowMouseMove:function(P){this.handleWindowTouchMove(P)},handleWindowResize:function(){var I=this,C=I,K=C._config,V=C.$21d,L=o(),M=N(),w=K.width,D=K.height,u=K.position||"center";K.maximized?(r(V,p,L+g),r(V,B,M+g),r(V,Y,z),r(V,J,z)):(r(V,p,w+g),r(V,B,D+g),"center"===u?(r(V,J,(L-w)/2+g),r(V,Y,(M-D)/2+g)):(r(V,J,u.x+g),r(V,Y,u.y+g))),C.iv()},handle_mousewheel:function(c){c.stopPropagation()},handle_DOMMouseScroll:function(X){X.stopPropagation()}}),w.widget.Dialog=function(M){var o=this,G=o._view=K.createView(null,o);G[P]="ht-widget-dialog",r(G,A,_),r(G,Y,z),r(G,D,z),r(G,J,z),r(G,s,z),r(G,p,"auto"),r(G,B,"auto"),S.baseZIndex!=f&&r(G,"z-index",S.baseZIndex+"");var R=o.$11d=new I(o);o.bindingHandleWindowResize=R.handleWindowResize.bind(o),o.$10d=new w.Notifier,M&&o.setConfig(M)},Q("Dialog",M,{ms_v:1,ms_fire:1,_modal:!0,setTitle:function(s){this._config.title=s,this.getView().querySelector(".dialog-container-title span").innerHTML=s},clearNodes:function(z){if(z)for(;z.firstChild;)z.removeChild(z.firstChild)},$31d:function(){var y=this,N=y.$6d=a(),X=y._config,V=y.$12d=y.$13d();N[P]="dialog-container-title",r(N,"cursor","default"),r(N,"white-space","nowrap"),r(N,"overflow","hidden"),r(N,"font",S.dialogTitleLabelFont),r(N,H,X.titleBackground||S.dialogTitleBackground),r(N,"color",X.titleColor||S.dialogTitleLabelColor);var n=m("span"),q=y.$25d();if(X.titleAlign&&r(N,"text-align",X.titleAlign),X.titleIcon){var _=y.$14d=y.$15d();l(N,_)}if(X.title&&X.title.trim&&(X.title=X.title.trim()),n[b]=X.title||"&nbsp;",l(N,n),X.maximizable){var i=y.$16d=y.$17d();l(V,i)}if(X.closable){var M=y.$18d=y.$19d();l(V,M)}return l(N,V),r(N,"display","block"),r(N,"line-height",q+g),N},$13d:function(){var V=a();return r(V,A,_),r(V,J,z),r(V,s,5+g),r(V,Y,z),r(V,D,z),r(V,"text-align",s),r(V,"white-space","nowrap"),V[P]="dialog-title-controls",V},$20d:function(){var j=this.$21d=a(),Y=this._config,o=Y.borderWidth;return r(j,A,"fixed"),r(j,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),r(j,"padding",z+" "+o+g+" "+o+g+" "+o+g),r(j,"box-sizing","border-box"),r(j,"-moz-box-sizing","border-box"),j[P]="dialog-container",r(j,H,Y.titleBackground||S.dialogTitleBackground),j},$22d:function(){var j,m=this,L=m._config,V=m.$7d=a(),q=L.content,G=0,Z=L.contentPadding||0;L.buttons!=f&&L.buttons.length>0&&(G=32),W(q)?V[b]=q:q.getView?(j=q.getView(),l(V,j)):(j=q,l(V,j)),r(V,A,_),r(V,"font",S.dialogContentLabelFont),L.width&&r(V,p,L.width-10-2*Z+g),w.Default.appendToScreen(V);var K=V.offsetWidth+1,e=V.offsetHeight,M=m.$25d();return L.width==f?L.width=K+10+2*Z:r(V,p,"auto"),L.height==f&&(L.height=e+M+G+5+2*Z),w.Default.removeHTML(V),j&&(r(j,"box-sizing","border-box"),r(j,"-moz-box-sizing","border-box"),r(j,p,"100%"),r(j,B,"100%")),V[P]="dialog-content",r(V,Y,M+Z+g),r(V,D,G+Z+g),r(V,J,Z+g),r(V,s,Z+g),r(V,"overflow","hidden"),V},getOverlayDiv:function(){return this.$41d},$23d:function(){if(this.$41d)return this.$41d;var $=this.$41d=a();return $[P]="dialog-overlay",r($,A,_),r($,Y,z),r($,D,z),r($,J,z),r($,s,z),r($,H,"rgba(235, 235, 235, 0.7)"),$},_config:f,setSize:function(p,R){var x=this,y=x._config;y&&(y.width=p,y.height=R,x.isShowing()&&(x.bindingHandleWindowResize(),x.iv()))},getConfig:function(){return this._config},$24d:function(){var _=this._config,A=_.titleIconSize||16;return Z&&(A*=1.2),A},$25d:function(){var j=this._config,I=j.titleHeight||S.widgetTitleHeight;return I},$26d:function(z){var X=this._config;r(z,"margin-right",(X.titleIconGap||(Z?8:4))+g),r(z,"cursor","pointer"),r(z,"display","inline-block"),r(z,"vertical-align",Y)},$27d:function(){var x=this.$30d=a(),h=10;return Z&&(h=20),r(x,p,h+g),r(x,B,h+g),r(x,A,_),r(x,D,z),r(x,s,z),x[P]="resize-area",x},$15d:function(){var m=this,q=u();q[P]="dialog-title-control dialog-title-control-icon";var p=m.$25d(),g=m.$24d();return m.$26d(q),K.setCanvas(q,g,p),q},$17d:function(){var z=u();z[P]="dialog-title-control dialog-title-control-maximize";var T=this.$25d(),e=this.$24d();return this.$26d(z),K.setCanvas(z,e,T),z},$19d:function(){var D=u();D[P]="dialog-title-control dialog-title-control-close";var f=this.$25d(),C=this.$24d();return this.$26d(D),K.setCanvas(D,C,f),D},$28d:function(){var Y=a();return r(Y,H,S.dialogContentBackground||"white"),r(Y,p,"100%"),r(Y,B,"100%"),r(Y,A,"relative"),Y},$29d:function(){var h=this,C=a();r(C,"line-height",32+g),r(C,"font-size",0+g),r(C,A,_),r(C,D,z),r(C,J,z),r(C,"white-space","nowrap"),r(C,"overflow","hidden"),r(C,s,z),r(C,H,S.dialogHeaderBackground),C[P]="dialog-container-buttons";var e=this._config,q=e.buttonsAlign||s,F=0;return r(C,"text-align",q),h.$42d=[],e.buttons.forEach(function(n){var y={};for(var L in n)y[L]=n[L];n.background||(y.background=S.dialogButtonBackground),n.selectBackground||(y.selectBackground=S.dialogButtonSelectBackground),n.labelColor||(y.labelColor=S.dialogButtonLabelColor);var e=S.createObject(w.widget.Button,y),K=e.getView();K[P]="dialog-button "+n.className,K.buttonItem=n,h.$42d.push(e),r(K,A,"relative"),r(K,"display","inline-block"),r(K,"text-align",J),r(K,"height",24+g);var $=Z?10:5;q===J||q===s?r(K,"margin-"+q,$+g):0===F||r(K,"margin-"+J,$+g),r(K,"vertical-align","middle");var u=S.getTextSize(e.getLabelFont(),n.label).width+10;e.onClicked=function(v){n.action&&n.action.call(h,n,v)},r(K,p,u+g),l(C,e.getView()),F++}),C},setConfig:function(_){if(_){var D=this,H=D._view;D._config=_,D.action=_.action,D.clearNodes(H),_.borderWidth==f&&(_.borderWidth=5);var u=D.$23d(),W=D.$28d(),e=D.$31d(),b=D.$22d(),B=D.$20d(),S=D.$30d=D.$27d();if(l(H,u),l(H,B),l(B,W),l(W,e),l(W,b),_.buttons!=f&&_.buttons.length>0){var U=D.$29d();l(W,U)}l(B,S),_.maximized?(_.maximized=!1,D.bindingHandleWindowResize(),D.maximize(!0)):D.bindingHandleWindowResize(),D.isShowing()&&D.iv()}},hide:function(){var B=this,I=B.$21d,L=B.$41d,t=B._view;t[P]="ht-widget-dialog",G(I).duration(200).scale(.7).set(h,z).end(function(){B.onHidden&&B.onHidden(),w.Default.removeHTML(t),B.$10d.fire({kind:"hide",target:B})}),G(L).duration(200).set(h,z).end(),y(n,"resize",B.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(u){this._modal=u;var D=this.$23d();D.style.display=u?"block":"none";var b=this._view;r(b,p,u?"auto":z),r(b,B,u?"auto":z)},isModal:function(){return this._modal},$32d:function(){var t=this,E=t._config,R=t.$21d;e(R,$),t.iv(),E.maximized?t.$10d.fire({kind:"maximize",target:t}):t.$10d.fire({kind:"restore",target:t})},maximize:function(t){var e=this,f=e.$21d,s=e._config;if(!s.maximized){s.maximized=!0,e.$33d(),e.$16d[P]="dialog-title-control dialog-title-control-minimize";var y=s.width,i=s.height,$=c(f.style.left)||0,T=c(f.style.top)||0;e.$36d=y,e.$37d=i,e.$34d=$,e.$35d=T;var Z,M=t?0:200,U=this._view.parentNode;Z=U&&U!==document.body?this._view.parentNode.getBoundingClientRect():S.getWindowInfo(),G(f).duration(M).set(J,Z.left+g).set(Y,Z.top+g).set(p,Z.width+g).set(B,Z.height+g).end(function(){e.$32d()})}},restore:function(){var k=this,q=k.$34d,c=k.$35d,a=k.$36d,d=k.$37d,T=k._config;if(T.maximized&&(T.maximized=!1,k.$33d(),k.$16d[P]="dialog-title-control dialog-title-control-maximize",k.isShowing()&&q!=f&&c!=f&&a!=f&&d!=f)){var L=k.$21d;G(L).duration(200).set(J,q+g).set(Y,c+g).set(p,a+g).set(B,d+g).end(function(){k.$32d()})}delete k.$34d,delete k.$35d,delete k.$36d,delete k.$37d},show:function(s){var A=this,b=A._view,U=A._config,t=A.$21d,q=A.$41d;s=s||U.parentDOM,U&&U.zIndex!=f&&r(b,"z-index",U.zIndex+$),s?w.Default.appendChild(s,b):w.Default.appendToScreen(b),e(t,"scale(0.7)"),r(t,h,z),A.iv(),A.validate(),A._view[P]+=" dialog-show",d(function(){G(t).duration(200).scale(1).set(h,"1").end(function(){r(t,p,t.clientWidth+g),r(t,B,t.clientHeight+g),A.onShown&&A.onShown(),A.$10d.fire({kind:"show",target:A});var P=U&&U.content;P&&P.iv&&P.iv()}),G(q).duration(200).set(h,"1").end(),X(n,"resize",A.bindingHandleWindowResize)},30)},setPosition:function(J){var i=this.$21d;i.style.left=J.x+"px",i.style.top=J.y+"px"},addEventListener:function(j,i,R){this.$10d.add(j,i,R)},removeEventListener:function(G,b){this.$10d.remove(G,b)},$38d:function(x,E,k,z){var Q=K.initContext(x);K.translateAndScale(Q,0,0,1),Q.clearRect(0,0,k,k);var D=(k-z)/2;S.drawStretchImage(Q,S.getImage(E),"fill",0,D,z,z),Q.restore()},$33d:function(){var T=this,l=T._config,I=T.$16d,F=l.maximized?S.dialogRestoreIcon:S.dialogMaximizeIcon;if(I&&F){var j=T.$25d(),V=T.$24d();T.$38d(I,S.getImage(F),j,V)}},$39d:function(){var T=this,w=T._config,p=T.$14d,e=w.titleIcon;if(p&&e){var f=T.$25d(),X=T.$24d();T.$38d(p,S.getImage(e),f,X)}},$40d:function(){var H=this,V=H.$18d,b=S.dialogCloseIcon;if(V&&b){var B=H.$25d(),s=H.$24d();H.$38d(V,S.getImage(b),B,s)}},invalidate:function(l){var $=this,G=$.$42d;$._68I||($._68I=1,S.callLater($.validate,$,f,l),$.onInvalidated&&$.onInvalidated(),$.fireViewEvent("invalidate"));var w=$._config.content;w.invalidate&&w.invalidate(),G&&G.forEach(function(h){h.iv()})},validateImpl:function(){var Y=this;Y.$40d(),Y.$33d(),Y.$39d();var r=Y._config.content;r.initView&&(r.setX(0),r.setY(0),r.setWidth(Y.$7d.clientWidth),r.setHeight(Y.$7d.clientHeight))},adjustPosition:function(z,U,i){var F=U.width,g=U.height,q=i.width,p=i.height,b=z.x,d=z.y,Y=this._config,u=Y.minDragSize||20;return"inside"===Y.dragMode?(b+F>q&&(b=q-F),d+g>p&&(d=p-g),0>b&&(b=0),0>d&&(d=0)):(null==Y.dragMode||"none"===Y.dragMode)&&(-F+u>b&&(b=-F+u),b>q-u&&(b=q-u),d>p-u&&(d=p-u),0>d&&(d=0)),{x:b,y:d}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);