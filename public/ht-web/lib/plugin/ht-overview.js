!function($,h){"use strict";var f="ht",J=f+".graph.",K=$[f],M=K.graph,r=K.Default,G=K.Color,B=null,v="px",p=r.getInternal(),W=p.getPinchDist,E=r.preventDefault,O=r.getTouchCount,j=r.startDragging;p.addMethod(r,{overviewBackground:G.widgetBackground,overviewMaskBackground:G.transparent,overviewContentBorderColor:G.widgetBorder,overviewContentBackground:G.background},!0),M.Overview=function(L){var x=this,J=x._view=p.createView(1,x);x._canvas=p.createCanvas(J),J.style.background=r.overviewBackground,J.appendChild(x._mask=p.createDiv()),x.setGraphView(L),x.addListeners()},r.def(J+"Overview",h,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:r.overviewMaskBackground,_contentBorderColor:r.overviewContentBorderColor,_contentBackground:r.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function($){var Y=this;if(Y.gv!==$){var N=Y.gv;Y.gv=$,N&&(N.removeViewListener(Y.handleGraphViewChanged,Y),N.ump(Y.handleGraphViewPropertyChanged,Y)),$&&($.addViewListener(Y.handleGraphViewChanged,Y),$.mp(Y.handleGraphViewPropertyChanged,Y)),Y.fp("graphView",N,$),Y.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(l){this._autoUpdate&&"validate"===l.kind&&this.redraw()},handleGraphViewPropertyChanged:function(G){("canvasBackground"===G.property||this.getFixToRect()&&("zoom"===G.property||"translateX"===G.property||"translateY"===G.property))&&this.redraw()},redraw:function(){var I=this;I._redraw||(I._redraw=1,I.iv(50))},validateImpl:function(){var g=this,Q=g.gv,U=g._canvas,l=g.getWidth(),f=g.getHeight(),K=g._redraw,t=r.devicePixelRatio;if(Q){var b=g._mask,H=b.style,m=Q.getViewRect(),u=this.getFixToRect(),M=u?"boolean"==typeof u?Q.getContentRect():u:Q.getScrollRect(),C=M.x,y=M.y,X=M.width,q=M.height,G=g._rate=Math.max(X/l,q/f),j=g._x=(l-X/G)/2,e=g._y=(f-q/G)/2;if(0!==m.width&&0!==m.height||g.hasRetry||(r.callLater(g.iv,g,B),g.hasRetry=!0),(l!==U.clientWidth||f!==U.clientHeight)&&(p.setCanvas(U,l,f),K=1),p.isSameRect(M,g._scrollRect)||(g._scrollRect=M,K=1),K){var Y=p.initContext(U),A=Q.getDataModel(),F=A.getBackground()||g._contentBackground,n=g._contentBorderColor;Y.clearRect(0,0,l*t,f*t);var c=A.getBackground()&&A.a("width")>0&&A.a("height")>0;F&&!c&&p.fillRect(Y,j*t,e*t,X/G*t,q/G*t,F),p.translateAndScale(Y,-C/G+j,-y/G+e,1/G),Q._42(Y),Y.restore(),n&&p.drawBorder(Y,n,j*t,e*t,X/G*t,q/G*t)}H.background=g._maskBackground,H.left=j+(m.x-C)/G+v,H.top=e+(m.y-y)/G+v,H.width=m.width/G+v,H.height=m.height/G+v,g._redraw=null}else if(K){var Y=p.initContext(U);Y.clearRect(0,0,l*t,f*t),Y.restore(),g._redraw=null}},center:function(U){var z=this,D=z.gv;if(D){var R=D._zoom,b=D._29I,M=z._rate,l=z._scrollRect,Q=r.getLogicalPoint(U,z._canvas),p=l.x+(Q.x-z._x)*M,F=l.y+(Q.y-z._y)*M;D.setTranslate((b.width/2-p)*R,(b.height/2-F)*R)}},handle_mousedown:function(C){this.handle_touchstart(C)},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowMouseMove:function(q){this.handleWindowTouchMove(q)},handle_mousewheel:function(h){this.handleScroll(h,h.wheelDelta)},handle_DOMMouseScroll:function(M){2===M.axis&&this.handleScroll(M,-M.detail)},handleScroll:function(l,g){if(E(l),this.gv){var J=this.gv;g>0?J.scrollZoomIn():0>g&&J.scrollZoomOut()}},handle_touchstart:function(P){if(E(P),this.gv&&r.isLeftButton(P)){var z=this,d=z.gv,p=O(P);1===p?r.isDoubleClick(P)&&d.isResettable()?d.reset():(z.center(P),j(z,P)):2===p&&(z._dist=W(P),j(z,P))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(F){if(this.gv){var p=this,t=p._dist,o=O(F);1===o?p.center(F):2===o&&t!=B&&p.gv.handlePinch(B,W(F),t)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);